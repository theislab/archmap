{"version":3,"sources":["components/general/ListCard/listCard.module.css","components/general/InstitutionMemberListCard/institutionMemberListCard.module.css","views/InstitutionPage/institutionPage.module.css","shared/theme/colors.js","shared/utils/common/constants.js","components/NavBar/navbar.module.css","components/CustomButton/index.jsx","shared/services/axiosInstance.js","views/GeneMapper/UploadFilePage/uploadfilepage.module.css","views/Contact/contact.module.css","components/general/Header/header.module.css","components/ProfileImage/profileImage.module.css","components/institutions/InstitutionTeamList/institutionTeamList.module.css","components/institutions/InstitutionAvatar/institutionAvatar.module.css","views/VisualizationPage/visualizationpage.module.css","views/Docs/docs.module.css","views/Documentation/documentation.module.css","components/CustomButton/custombutton.module.css","components/PasswordForgetForm/passwordforgetform.module.css","components/general/HeaderView/headerView.module.css","views/CommunityOverview/communityOverview.module.css","components/teams/TeamCard/teamCard.module.css","components/teams/overview/TeamOverview/teamOverview.module.css","components/institutions/InstitutionCard/institutionCard.module.css","components/DashboardContent/dashboardContent.module.css","components/Grids/AtlasesGrid/atlasesGrid.module.css","components/Grids/ModelsGrid/modelsGrid.module.css","components/institutions/InstitutionMemberListPopup/institutionMemberListPopup.module.css","components/institutions/InstitutionTeamCard/institutionTeamCard.module.css","components/teams/detail/TeamMemberList/teamMemberList.module.css","views/PasswordResetPage/passwordresetpage.module.css","views/Settings/settings.module.css","components/Mapper/mapper.module.css","app.module.css","components/Sidebar/sidebar.module.css","components/LoginForm/loginform.module.css","views/SearchPage/search.module.css","components/Visualization/src/visualization.module.css","assets/logo.svg","shared/context/authContext.jsx","components/Cards/GeneralCard.jsx","shared/utils/stringColor.js","components/general/ListCard/index.jsx","components/members/MemberCard/index.jsx","components/Modal/index.jsx","components/general/upload/CropImage/canvasPreview.js","components/general/upload/CropImage/index.jsx","components/general/upload/CropImage/useDebounceEffect.js","components/general/upload/ImageUploadDialog/index.jsx","shared/utils/common/utils.jsx","components/general/upload/ProfileImageUploadDialog/index.jsx","shared/services/Profile.service.js","components/ProfileImage/index.jsx","components/NavBar/index.jsx","components/WindowiOS/index.jsx","components/Footer/index.jsx","components/Input/Input.jsx","shared/context/loginContext.jsx","components/PasswordForgetForm/index.jsx","components/LoginForm/index.jsx","components/RegistrationForm/index.jsx","assets/landing-illustrations/upload.png","assets/landing-illustrations/science.png","assets/landing-illustrations/processing.png","assets/landing-illustrations/results.png","assets/landing-illustrations/Helmholtz_TheisLab_Naturecover_2021_blurred.png","assets/landing-illustrations/Helmholtz_TheisLab_Naturecover_2021.png","shared/services/ContactUs.service.js","components/ContactForm/index.jsx","views/Home/index.jsx","views/LegalNotice/index.jsx","views/Privacy/index.jsx","components/NavBar/old.jsx","assets/landing-illustrations/visualisation.png","assets/landing-illustrations/zoomVisualisation.png","assets/landing-illustrations/allClusterLabels.png","assets/landing-illustrations/clusterDetails.png","assets/landing-illustrations/clusterLabel.png","assets/landing-illustrations/csvformat.png","views/Docs/index.jsx","views/Contact/index.jsx","assets/gene.png","components/Sidebar/index.jsx","components/general/Header/index.jsx","components/general/HeaderView/index.jsx","components/general/PlusIcon/index.jsx","shared/services/Member.service.js","shared/services/mock/Team.service.js","shared/services/Team.service.js","components/teams/overview/TeamLeaveButton/index.jsx","components/teams/TeamCard/index.jsx","components/general/SpaceBetweenCards/index.jsx","components/general/LoadingList/index.jsx","assets/helmholtz-logo.jpg","shared/services/mock/Institution.service.js","assets/tum-logo.png","shared/services/Institution.service.js","components/institutions/InstitutionLeaveButton/index.jsx","components/institutions/InstitutionCard/index.jsx","components/institutions/InstitutionList/index.jsx","shared/context/institutionContext.jsx","components/institutions/InstitutionChoice/index.jsx","components/teams/overview/TeamCreationDialog/index.jsx","components/teams/overview/TeamOverview/index.jsx","components/institutions/InstitutionCreationDialog/index.jsx","components/institutions/InstitutionOverview/index.jsx","views/CommunityOverview/index.jsx","shared/services/Models.service.js","views/References/LearnMoreModel/index.jsx","components/GeneMapper/ModelInfo/index.jsx","components/Skeletons/RectSkeleton.jsx","components/Cards/ModelCardSelect.jsx","shared/services/Atlas.service.js","components/EditAtlasModal/index.jsx","views/References/LearnMoreAtlas/index.jsx","components/GeneMapper/AtlasInfo/index.jsx","components/Cards/AtlasCardSelect.jsx","components/Tab/index.jsx","components/GeneMapper/TabCard/index.jsx","assets/scvi-logo.svg","shared/services/Classifier.service.js","views/References/LearnMoreClassifier/index.jsx","components/GeneMapper/ClassifierInfo/index.jsx","components/Cards/ClassifierCard.jsx","views/GeneMapper/AtlasModelChoice/AtlasModelChoice.jsx","components/FileUpload/index.jsx","shared/services/Demo.service.js","shared/services/AnndataArgs.service.js","shared/context/submissionProgressContext.jsx","shared/services/mock/Project.service.js","shared/services/Project.service.js","shared/services/UploadLogic.js","components/Visualization/src/constants.js","views/GeneMapper/UploadFilePage/index.jsx","shared/services/mock/projects.js","shared/services/Model.service.js","shared/services/ScviAtlas.service.js","views/GeneMapper/GeneMapperState/index.jsx","components/Search/index.jsx","shared/services/Cellxgene.service.js","components/GeneMapper/ProjectInfo/index.jsx","components/GeneMapper/projectBarCard/index.jsx","views/GeneMapper/Home/index.jsx","components/GeneMapper/ShareMenu/index.jsx","components/GeneMapper/ResultHeader/index.jsx","components/Visualization/src/newZoom.js","components/Visualization/src/barChart.js","components/Visualization/src/coloring.js","components/Visualization/src/umapVisualization.js","components/GeneMapper/Categories/index.jsx","components/GeneMapper/Sidepanel/index.jsx","components/GeneMapper/Graphs/index.jsx","components/GeneMapper/ResultVisualization/index.jsx","views/GeneMapper/Result/index.jsx","views/GeneMapper/index.jsx","components/TabPanel/index.jsx","shared/services/User.service.js","views/UserProfile/index.jsx","views/Documentation/index.jsx","views/Settings/index.jsx","views/Help/index.jsx","components/SearchPageComponents/SearchTabs/index.jsx","components/SearchPageComponents/SearchResultList/index.jsx","components/SearchPageComponents/SearchResultList/SearchCard/index.jsx","components/SearchPageComponents/SearchResultList/LabeledLink/index.jsx","components/teams/detail/TeamJoinButton/index.jsx","components/SearchPageComponents/SearchResultList/TeamCard/index.jsx","components/SearchPageComponents/SearchResultList/InstitutionCard/index.jsx","components/SearchPageComponents/SearchResultList/UserCard/index.jsx","components/SearchPageComponents/ResultStatus/index.jsx","components/Cards/ModelCard.jsx","components/Cards/AtlasCard.jsx","components/Grids/AtlasesGrid/index.jsx","components/Grids/ModelsGrid/index.jsx","views/References/AtlasResult/index.jsx","components/ReferencePageComponents/ReferenceRoutes/index.jsx","components/SearchPageComponents/SearchContent/index.jsx","components/SearchPageComponents/Filter/LabeledSelect/index.jsx","components/SearchPageComponents/Filter/GeneralFilter/index.jsx","components/SearchPageComponents/Filter/TeamsFilter/index.jsx","components/ReferencePageComponents/Filter/AtlasFilter/index.jsx","components/SearchPageComponents/Filter/index.jsx","shared/utils/filter.js","views/SearchPage/index.jsx","components/ReferencePageComponents/Filter/index.jsx","components/Breadcrumb/index.jsx","components/Mapper/index.jsx","views/References/index.jsx","components/Cards/MemberListCard.jsx","components/general/InstitutionMemberListCard/index.jsx","components/members/InstitutionMemberCard/index.jsx","components/members/InstitutionMemberList/index.jsx","components/institutions/InstitutionMemberRemoveButton/index.jsx","components/institutions/InstitutionMemberMakeAdminButton/index.jsx","components/institutions/InstitutionMemberListPopup/index.jsx","components/institutions/InstitutionTeamCard/index.jsx","components/institutions/InstitutionTeamList/index.jsx","components/general/upload/InstitutionProfileImageUploadDialog/index.jsx","components/institutions/InstitutionAvatar/index.jsx","components/general/upload/InstitutionBackgroundImageUploadDialog/index.jsx","assets/institution-default-background.jpg","components/institutions/InstitutionInviteButton/index.jsx","views/InstitutionPage/index.jsx","components/teams/detail/TeamProjectList/index.jsx","components/members/MemberList/index.jsx","components/teams/detail/TeamMemberRemoveButton/index.jsx","components/teams/detail/TeamMemberMakeAdminButton/index.jsx","components/teams/detail/TeamMemberList/index.jsx","components/teams/detail/TeamAdminHeaderRight/index.jsx","components/teams/detail/TeamUserHeaderRight/index.jsx","components/teams/detail/TeamHeaderOptions/index.jsx","components/teams/detail/TeamInviteButton/index.jsx","views/TeamPage/index.jsx","components/CustomTable/index.jsx","views/AdminPanel/index.jsx","shared/services/AtlasUpload.service.js","shared/context/UploadProgressContext.jsx","components/AddAtlasForm/index.js","views/AtlasUpload/index.jsx","components/DashboardContent/index.jsx","components/Visualization/src/helpers.js","components/Visualization/src/data/retinal_bipolar_viz/umap_data","components/Visualization/src/cluster.js","components/Visualization/src/data.js","components/Visualization/src/buttons.js","components/Visualization/src/barPlot.js","components/Visualization/src/piePlot.js","components/Visualization/src/labels.js","components/Visualization/src/container.js","components/Visualization/src/zoom.js","components/Visualization/src/Visualization.jsx","views/VisualizationPage/index.jsx","views/PasswordResetPage/index.jsx","views/NotFound/index.jsx","shared/theme/theme.js","views/NonLoginGeneMapper/index.jsx","App.jsx","index.jsx"],"names":["module","exports","colors","main","dark","BACKEND_ADDRESS","INDEXED_DB_NAME","DB_VERSION","SERVICE_ID","TEMPLATE_ID","PUBLIC_KEY","PROJECTS_UPDATE_INTERVAL","UPLOAD_CHUNK_SIZE","MULTIPART_UPLOAD_STATUS","IDLE","SELECTED","UPLOAD_STARTING","ERROR_START","UPLOAD_PROGRESS","UPLOAD_FINISHING","UPLOAD_PENDING","UPLOAD_COMPLETE","ERROR_PROGRESS","UPLOAD_FILE_TYPE","ATLAS","CLASSIFIER","MODEL","ENCODER","statusIsUpload","status","startsWith","statusIsError","PROJECT_STATUS","yellow","blue","red","green","grey","PROCESSING_PENDING","PROCESSING_FAILED","ABORTED","DONE","DOWNLOAD_READY","getUploadStatusMessage","idle","selected","upload_starting","error_start","upload_progress","upload_finishing","error_progress","error_finish","complete","canceling","getStyles","type","backgroundColor","borderRadius","padding","fontSize","color","primary","transition","secondary1","boxShadow","neutral","background","textDecoration","error","CustomButton","props","onClick","children","disabled","sx","disableRipple","e","stopPropagation","className","styles","button","variant","axiosInstance","axios","create","baseURL","interceptors","request","use","config","token","window","localStorage","getItem","headers","auth","response","removeItem","location","assign","Promise","reject","AuthContext","React","createContext","AuthProvider","useState","user","JSON","parse","value","Provider","useAuth","context","useContext","undefined","Error","displayName","GeneralCard","width","height","flex","bg","hoverStyles","Box","p","display","flexDirection","stringToColor","string","i","hash","length","charCodeAt","toString","slice","ListCard","imageComponent","imageURL","enforceImage","title","description","nextToTitle","trailing","imageComponentUsed","Avatar","src","alt","stringColor","cardContent","clickable","onKeyPress","role","tabIndex","start","cardImageWrapper","text","titleRow","style","textOverflow","overflow","whiteSpace","MemberCard","member","nextToNameBuilder","trailingBuilder","overrideProfilePicture","history","useHistory","avatarUrl","firstName","lastName","email","push","_id","Modal","isOpen","setOpen","maxWidth","Dialog","open","onClose","scroll","PaperProps","position","right","top","cursor","ModalTitle","DialogTitle","id","fontWeight","TO_RADIANS","Math","PI","canvasPreview","image","canvas","crop","a","scale","rotate","ctx","getContext","scaleX","naturalWidth","scaleY","naturalHeight","pixelRatio","devicePixelRatio","floor","imageSmoothingQuality","cropX","x","cropY","y","rotateRads","centerX","centerY","save","translate","drawImage","restore","CropImage","fn","waitTime","deps","imgSrc","onUpdate","onUpdateBlob","previewCanvasRef","useRef","imgRef","setCrop","completedCrop","setCompletedCrop","current","toDataURL","toBlob","blob","useEffect","t","setTimeout","apply","clearTimeout","onChange","_","percentCrop","onComplete","c","aspect","ref","onLoad","getBoundingClientRect","objectFit","ImageUploadDialog","maxFileSizeMB","onUpload","additionalButtons","disableCropping","preview","imgURL","loading","setLoading","setImgURL","croppedImgBlob","setCroppedImgBlob","isMounted","setIsMounted","o","fullWidth","DialogContent","files","reader","FileReader","addEventListener","url","result","readAsDataURL","console","log","handleSave","acceptedFiles","maxFileSize","filesLimit","showPreviews","showPreviewsInDropzone","alertSnackbarProps","autoHideDuration","DialogActions","map","func","upload","removeItemFromArray","arr","index","indexOf","splice","getAuthAndJsonHeader","setSeachCategoryInUrl","path","pathParam","replace","createUrl","formatDate","rawDate","date","Date","monthNameLong","toLocaleString","month","getDate","ProfileImageUploadDialog","fetch","method","body","alert","_cachedProfile","ProfileService","getProfile","options","allowCache","get","data","clearProfileCache","updateProfile","userData","newPassword","first_name","last_name","note","affiliation","password","post","then","setItem","stringify","emailAddress","ProfileImage","sizePixels","editable","overrideProfileImage","setUser","loadUser","uploadDialogOpen","setUploadDialogOpen","profileImage","editButton","newUrl","Appbar","xs","sm","md","lg","xl","justifyContent","alignItems","margin","Leftbar","flexWrap","DrawerBar","executeScroll","zIndex","gap","LinkBox","to","IconButton","logo","bgcolor","left","Drawer","anchor","pathname","state","onGuideClicked","DrawerNavlink","Rightbar","Navlink","Typography","textAlign","Login","Signup","border","component","Link","Navbar","onLoginClicked","onSignUpClicked","setNavbarHeight","drawerOpen","setDrawerOpen","boxRef","clientHeight","scrollTo","transform","WindowiOS","onGuideClick","backgroundImageLoaded","borderWidth","backdropFilter","marginTop","marginBottom","Footer","alignSelf","Input","helperText","placeholder","errorHandler","disabledHandler","isRequired","defaultValue","multiline","onChangeEvent","onBlurEvent","onFocusEvent","label","maxLength","m","noValidate","TextField","required","inputProps","rows","onBlur","onFocus","LoginContext","LoginProvider","isLoginFormVisible","setLoginFormVisible","isRegistrationFormVisible","setRegistrationFormVisible","isPasswordForgetFormVisible","setPasswordForgetFormVisible","loginVisible","registerVisible","forgetVisible","loginClose","registerClose","forgetClose","switchRegister","switchLogin","switchForget","PasswordForgetForm","close","visible","errors","setErrors","setEmail","isSnackbarVisible","setSnackbarVisible","useCallback","onSnackbarClose","Grid","container","direction","item","align","closeImg","target","validator","isEmail","validateInput","requestOptions","statusText","Snackbar","Alert","severity","LoginForm","remember","loginDetails","setLoginDetails","switchForm","onForgetPassword","clearForm","handleTextChange","prevState","handleCheckedChange","checked","onSuccessfulLogin","jwt","go","doLogin","currentErrors","Object","keys","loginRequest","Authorization","code","onFailedLogin","json","pr","paddingLeft","FormControlLabel","control","Checkbox","disableFocusRipple","mt","href","RegistrationForm","firstname","lastname","passwordAgain","permissionRequested","userDetails","setUserDetails","checkYourEmail","setCheckYourEmail","privacyPolicy","setPrivacyPolicy","isAcceptedTermsSnackbar","setIsAcceptedTermsSnackbar","doRegistration","onFailedRegistration","rowGap","event","mr","catch","ContactForm","subject","message","setData","setError","snackbar","setSnackbar","Stack","spacing","newError","emailjs","send","anchorOrigin","vertical","horizontal","Home","useLocation","Helmholtz_TheisLab_Naturecover_2021_Blur","backgroundImage","setBackgroundImage","getStartedRef","scrollIntoView","behavior","contactUsBoxRef","contact_us","navbarHeight","Helmholtz_TheisLab_Naturecover_2021","resolve","Image","backgroundSize","paddingBottom","graphic2","graphic3","graphic4","LegalNotice","onLoginFormClosed","onRegistrationFormClosed","regForm","Privacy","dangerouslySetInnerHTML","__html","NavBar","appbar","Toolbar","flexGrow","navbarcontent","buttonContainer","Button","onSuccessfulRegistration","Docs","textContainer","paddingInline","Divider","paddingTop","mainIllustration","visualisation","csvImage","csvformat","infoContainer","verticalIllustration","zoom","explanationLeft","explanationTitle","horizontalIllustration","clusterLabel","allClusterLabels","clusterDetails","theme","createTheme","palette","secondary","Contact","contactDetails","setContactDetails","formSubmit","preventDefault","ThemeProvider","headerContainer","formContainer","rowsMax","size","indexIcon","geneIcon","coloredIcon","Sidebar","hasAdminPermission","isAdministrator","hasUploadPermission","hasPermission","adminTitles","userTitles","routes","titles","useRouteMatch","checkPathActive","setCheckPathActive","pathRegex","RegExp","exec","sidebarNav","sidebarWrap","iconList","route","navlink","Tooltip","placement","componentsProps","tooltip","navbarItemContainer","ListItemIcon","listItemIcon","navlinkIcon","Header","rightOfTitle","replaceRight","loggedIn","header","HeaderView","replaceHeaderRight","overflowY","minHeight","boxSizing","paddingRight","content","PlusIcon","minWidth","enhanceMember","MemberService","getTeamMembers","teamId","mockTeams","name","adminIds","invitedMemberIds","memberIds","projects","visibility","institutionId","runningId","TeamService","leaveTeam","team","filter","createTeam","newTeam","country","backgroundPictureURL","removeMemberFromTeam","memberId","find","getTeam","getInstitutionTeams","getMembers","all","getMember","getMyTeams","getMyAdminTeams","myTeams","includes","getTeams","params","preparedTeams","keyword","toLowerCase","toUpperCase","sortBy","sort","b","localeCompare","enhanceTeam","delete","joinTeam","put","userId","updatedTeam","inviteMemberByEmail","makeTeamAdmin","removeTeamAdmin","removeProjectFromTeam","projectId","changeTeamDescription","changeTeamVisibility","preparedParams","addProject","TeamLeaveButton","onLeft","dialogOpen","setDialogOpen","errorMessage","setErrorMessage","handleCloseDialog","onlyAdmin","DialogContentText","leave","autoFocus","TeamCard","navigateToTeam","preventBubble","evt","accessRightIndicator","endIcon","marginRight","SpaceBetweenCards","LoadingList","orElse","isLoading","elements","cardBuilder","noElementsMessage","elem","mockLeftIds","mockInstitutions","profilePictureURL","helmholtz","InstitutionService","createInstitution","newInstitution","leaveInstitution","getMyInstitutions","institution","getMyAdminInstitutions","myInstitutions","getInstitution","removeMemberFromInstitution","getInstitutionById","getInstitutions","preparedInstitution","getTeamsOfInstitutionById","enhanceInstitution","updateDetails","details","inviteMember","invitedMail","makeInstitutionAdmin","removeInstitutionAdmin","InstitutionLeaveButton","InstitutionCard","replaceTrailing","disableLink","navigateToInstitution","pointer","InstitutionList","institutions","disableLinks","InstitutionContext","InstitutionProvider","setInstitutions","setIsLoading","newInstitutions","finally","useInstitutions","InstitutionChoice","onChoiceChange","chosen","setChosen","TeamCreationDialog","handleClose","onCreated","setName","setDescription","nameError","setNameError","descriptionError","setDescriptionError","setInstitutionId","creationError","setCreationError","maxRows","AlertTitle","TeamOverview","teams","setTeams","createOpen","setCreateOpen","cardSpacing","InstitutionCreationDialog","setCountry","countryError","setCountryError","InstitutionOverview","inst","CommunityOverview","sidebarShown","ModelsService","getModels","getModelById","LearnMoreModelComponent","isMap","isSearchPage","model","setModel","err","goBack","fontWeigth","borderBottom","LearnMore","handleSelect","useParams","ModelInfo","Container","RectSkeleton","Skeleton","OutlinedButtonSelect","onSelect","borderColor","ModelCardSelect","learnMoreLink","modelObject","hover","setHover","setFlexDir","modelInfoOpen","setModelInfoOpen","clientWidth","onMouseEnter","onMouseLeave","opacity","borderStyle","WebkitBoxOrient","WebkitLineClamp","AtlasService","getAtlases","getAtlasById","require","EditAtlasModal","navigate","isEditModalOpen","setIsEditModalOpen","atlasDetailsForm","setAtlasDetailsForm","atlasInDialog","setAtlasInDialog","handleEdit","reload","dividers","onSubmit","prevAtlasDetails","previewPictureURL","modalities","numberOfCells","species","compatibleModels","LearnMoreAtlasComponent","atlas","setAtlas","isDeleteModalOpen","setIsDeleteModalOpen","rating","Array","samples","studies","doi","rel","cell_type_key","atlas_batch_key","CircularProgress","AtlasInfo","AtlasCardSelect","imgLink","cellsInReference","mapLink","atlasObject","isHover","isFlat","setFlat","atlasInfoOpen","setAtlasInfoOpen","isImageLoaded","setIsImageLoaded","onload","onerror","noWrap","StyledTab","darkBackground","rest","Tab","textTransform","TabGroup","onValueChange","tabsInfo","tabsRef","tabsHeight","setTabsHeight","Tabs","newValue","tabInfo","additionalContent","TabCard","handleOnClick","minimal","isAtlas","pl","added","isDemo","ClassifierService","getClassifiers","getClassifierById","LearnMoreClassifierComponent","classifier","setClassifier","ClassifierInfo","ClassifierCard","selectedClassifier","classifierObject","classifierInfoOpen","setClassifierInfoOpen","AtlasModelChoice","setActiveStep","selectedAtlas","setSelectedAtlas","selectedModel","setSelectedModel","atlases","models","scviHubAtlases","setSelectedClassifier","compatibleClassifiers","classifiers","showWarning","setShowWarning","isExpanded","setIsExpanded","loadData","setIsError","divider","orientation","flexItem","pb","mb","wrap","scviLogo","marginLeft","substring","pt","cl","cc","scviAtlas","BeforeDrag","DuringDrag","CloudDone","FileUpload","handleFileUpload","rejectionHandler","onDropAccepted","onDropRejected","useDropzone","getRootProps","getInputProps","isDragActive","DemoService","getDemos","AnndataArgsService","postAnndataArgs","scviHubId","postData","SubmissionProgressContext","initSubmissionProgress","uploadId","chunks","uploaded","remaining","uploadedParts","SubmissionProgressProvider","useSubmissionProgress","mockProjects","ProjectService","getProjects","getTeamProjects","getOwnProjects","getProject","project","String","owner","atlasId","fileName","fileSize","modelId","resultSize","uploadDate","createProject","projectName","classifierId","model_setup_anndata_args","deleteProject","getDeletedProjects","restoreProject","expectStatus","requestName","getAuthHeader","uploadChunks","chunkCount","selectedFile","submissionProgress","setSubmissionProgress","promiseArray","end","currentPromise","URLSearchParams","partNumber","presignedUrl","chunkResponse","etag","newRemaining","uploadChunksForAtlas","keyPath","updateAndGetLatestProgress","uploadFileType","isArray","latestUploadProgress","finishAtlasUploads","onProgressUpdate","promise","promises","Status","uploadPartsArray","forEach","ETag","PartNumber","parts","COMPLETE","ERROR_FINISH","finishUpload","uploadAtlasAndModelFiles","currentUploadProgress","from","update","uploadMultipartFile","cornerRadius","buttonWidth","outerPieRadius","labelHeight","barHeight","textLabelHeight","offset","originalOpacity","fill","gradientColors","UploadFilePage","selectedDataset","demos","setSelectedDataset","datasetIsSelected","setDatasetIsSelected","uploadedFile","setUploadedFile","mappingName","setMappingName","requirements","setRequirements","setAnndataArgs","showFileWarning","setShowFileWarning","availableDemos","setAvailableDemos","demoDatasets","setDemoDatasets","scviHubModel","setScviHubModel","matchingDemos","d","modelIds","fetchData","file","prev","handleSubmit","demoDataset","createDemoProject","gutterBottom","ml","wordWrap","maxHeight","lineHeight","split","pop","dataset","handleDemoClick","ownTeams","datasets","ProjectMock","Number","addProjectToTeam","getOwnTeams","getAtlas","getModel","getDataset","getDatasets","findIndex","ModelService","ScviAtlasService","GeneMapperState","search","searchParams","urlParams","filterParams","fromEntries","activeStep","selectedDemoDataset","setSelectedDemoDataset","demoDatasetIsSelected","setDemoDatasetIsSelected","setScviHubAtlases","steps","setAtlases","setModels","setClassifiers","updateQueryParams","param","set","handleStep","step","dimension","round","Stepper","labelText","Step","StepButton","newAtlas","newModel","batch_key","SearchInput","styled","outline","FilterButton","ButtonBase","FilterAlt","Search","filterComponent","handleSearch","noFilterComponent","active","setActive","filterEnabled","setFilterEnabled","filterBox","CellxgeneService","postCellxgeneService","fileURL","ProjectInfo","ProcessingStatus","LinearProgress","CanceldOrFailedStatus","ProjectBarCard","userTeams","handleDelete","deleted","submissionProgresses","setSubmissionProgresses","CANCELING","projectTeam","setProjectTeam","addTeam","setAddTeam","selectedTeam","setSelectedTeam","showInfo","setShowInfo","fetchingUrl","setFetchingUrl","fetchUrlError","setFetchUrlError","fetchProjects","updatedProjectTeam","progress","fetchPresignedUrlAndDownload","link","document","createElement","download","appendChild","click","removeChild","cellxgene","setCellxgene","launchCellxgene","res","cachedProjects","cxgValue","timeout","now","CardActionArea","disableTouchRipple","Collapse","in","InfoOutlined","GeneMapperHome","setProjects","deletedProjects","setDeletedProjects","setUserTeams","findString","setFindString","findDemos","j","h5adURL","indexedDB","obj","hasOwnProperty","projectArr","key","reverse","timer","setInterval","clearInterval","marginBlock","str","updatedProjects","mailIconColor","copyIconColor","twitterIconColor","ShareMenu","encodeURIComponent","navigator","clipboard","writeText","async","charSet","GeneMapperResultHeader","ArrowBackIos","zoomInN","d3","call","zoomM","scaleBy","zoomOutN","scaleExtent","on","attr","resetZoom","groupBy","cat","list","groupedBy","Map","row","has","addBarPlot","barContainer","cWidth","cHeight","fontSizeTitle","fontSizeOther","svg","append","h","w","big","sortedData","splicedData","array","random","temp","shuffleArray","info","max","labels","k","xScale","domain","range","yScale","g","xAxis","yAxis","tickFormat","ticks","tickSize","selectAll","enter","bandwidth","listColoringDomain","mode","getColoringModes","trim","parseFloat","val","min","cons","colorDomain","getMin","addGroup","UmapVisualization2","remove","this","gCells","coloringModes","graphs","hiddenCells","graph","groupedByBatch","addBarPlotBatch","barChartCell","groupedByCellTypes","addBarPlotCell","cell","category","addHiddenCell","hideShowCells","deleteHiddenCell","cells","isHidden","before","after","reduceOpacity","resetOpacity","colorScale","setColoring","render","r","xScaleHelper","_this","resize","duration","att","xPos","yPos","html","lower","activatedColor","deactivatedColor","Category","values","colored","toggleColored","hide","show","ListItemButton","ListItem","secondaryAction","edge","entries","Value","setVisible","Visibility","VisibilityOff","GeneMapperCategories","categories","setColorMode","coloredCategoryTitle","setColoredCategoryTitle","handleSetColorMode","colorMode","Sidepanel","collapseToRight","expandIconAngle","toolTipPlacement","overflowX","GeneMapperGraphs","drawGraph","graphContainers","ResultVisualization","dataUrl","onlyUmap","umapContainer","graphContainer","umap","setUmap","umapSize","setUmapSize","showQuery","setShowQuery","showReference","setShowReference","showPredictions","setShowPredictions","csv","db","req","onupgradeneeded","createObjectStore","onsuccess","objectStore","transaction","readRequest","add","observer","ResizeObserver","contentRect","observe","disconnect","disableShrink","predictedCellsTransparent","predictedCellsVisible","hideReference","hideQuery","getAvailableGraphs","GeneMapperResultView","setProject","updateDemos","updatedData","demo","projectInCache","GeneMapper","showScarchesInfo","setShowScarchesInfo","exact","basePath","TabPanel","hidden","UserService","getUsers","getUser","getUserInstitutions","getUserTeams","a11yProps","UserProfile","setValue","isUserLoading","setIsUserLoading","userInstitutions","setUserInstitutions","isInstitutionLoading","setIsInstitutionLoading","setIsTeamLoading","Documentation","PasswordSection","onPasswordInfoChange","changePassword","inputComponent","inputText","newPasswordRepeated","Settings","setChangePassword","saveInProgress","setSaveInProgress","userInfo","setUserInfo","onUserInfoChange","passwordInfo","setPasswordInfo","profilePicture","Switch","isValidInput","newErrors","isValidPasswordInfo","Help","SearchTabs","newParams","SearchResultList","listItemWrapper","searchResult","fetchSearchHandler","ListItemWrapper","searchedItem","onAction","SearchCard","action","avatar","tertiary","displayAvatar","ListItemAvatar","tittleToColor","RouterLink","underline","LabeledLink","TeamJoinButton","onJoin","isDisabled","join","visibilityTooltip","canJoin","isTeamMember","Chip","updatedAt","UserCard","ResultStatus","count","searchedEntity","searchedKeyword","countText","entityText","charAt","keywordText","OutlinedButton","bgHover","colorHover","ModelCard","AtlasCard","showModalities","AtlasesGrid","handleAtlasSelection","atlasContainer","some","element","ModelsGrid","handleModelSelection","cardsContainer","ReferenceRoutes","handleSelectAtlases","handleSelectModels","AtlasResult","SearchContent","searchCategory","renderSearchResultsList","LabeledSelect","items","Select","displayEmpty","MenuItem","DEFAULT_SORT_ITEMS","GeneralFilter","sortItems","sortItem","TeamsFilter","FilterItem","AtlasFilter","FormGroup","Filter","applyModelFilters","searchedModels","nameA","nameB","applyAtlasFilters","searchedAtlases","SearchPage","searchRequestResult","setSearchRequestResult","loadedCategory","setLoadedCategory","searchResponse","Breadcrumb","actions","elems","iconSize","rebuildLink","accmulator","generate","Mapper","mapperAtlas","mapperModel","fabOnClick","handleMap","borderContainer","filename","iconButton","icon","disabledIcon","buttonBox","mapperBox","Fab","mapIcon","tmpObj","References","mapperVisible","setMapperVisible","newAtlases","newModels","searchedKeywordChangeHandler","tabMenu","tmp_elems","references","MemberListCard","InstitutionMemberCard","InstitutionMemberListCard","InstitutionMemberList","members","InstitutionMemberRemoveButton","updateInstitution","InstitutionMemberMakeAdminButton","isAlreadyAdmin","removeAdmin","addAdmin","InstitutionMemberListPopup","setMembers","newMembers","InstitutionTeamCard","InstitutionTeamList","teamsLoaded","setTeamsLoaded","newTeams","InstitutionProfileImageUploadDialog","InstitutionAvatar","InstitutionInviteButton","invitedMailAdress","setInvitedMailAdress","mailError","setMailError","reason","bottom","test","InstitutionPage","setInstitution","institutionLoaded","setInstitutionLoaded","backgroundUploadOpen","setBackgroundUploadOpen","editedDescription","setEditedDescription","editMode","setEditMode","openDialog","setOpenDialog","isAdmin","defaultBackgroundPicture","resizeMode","institutionIcon","minRows","input","InputProps","disableUnderline","readOnly","memberButton","ignored","bgImgEditButton","innerContent","float","editDetails","footer","TeamProjectList","updateTeam","snackbarOpen","setSnackbarOpen","removedProject","setDemos","handleSnackbarClose","MemberList","TeamMemberRemoveButton","TeamMemberMakeAdminButton","TeamMemberList","TeamAdminHeaderRight","updateVisibility","select","TeamUserHeaderRight","isMember","setIsMember","TeamHeaderOptions","TeamInviteButton","TeamPage","setTeam","newDescription","setNewDescription","descriptionRef","wait","newVisibility","focus","updateDescription","inputRef","KeyboardArrowRight","KeyboardArrowLeft","useTheme","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","TableFooter","TablePagination","Paper","TablePaginationActions","page","rowsPerPage","onPageChange","flexShrink","ceil","CustomTable","togglePermission","setPage","setRowsPerPage","emptyRows","scope","defaultChecked","colSpan","rowsPerPageOptions","SelectProps","native","newPage","onRowsPerPageChange","parseInt","ActionsComponent","AdminPanel","dataForTable","setDataForTable","fetchPermissions","tableData","makeUserDataFromResponse","permission","compareUsers","default","AtlasUploadService","createAtlas","atlasUrl","atlasData","uploadedBy","UploadProgressContext","initUploadProgress","UploadProgressProvider","useUploadProgress","mainHeader","mainContent","primaryColor","teal","secondaryColor","addAtlasButton","useStyles","makeStyles","AddAtlasForm","setIsAddModalOpen","modelsList","classifiersList","atlasName","setAtlasName","setPreviewPictureURL","setModalities","setCompatibleModels","setNumberOfCells","setSpecies","atlasFile","setAtlasFile","setFileName","setUrl","setFileError","classifierFile","setClassifierFile","modelFiles","setModelFiles","encoderFile","setEncoderFile","encoderFileName","setEncoderFileName","classifierFileName","setClassifierFileName","uploadProgress","setUploadProgress","classes","handleFormSubmit","validateModelSelectionAndFiles","validateClassifierFiles","atlasUploadPath","atlasUploadId","classifierUploadId","classifierUploadPath","encoderUploadId","encoderUploadPath","modelUploadPath","modelUploadId","newProgress","newProgressFields","prevProgress","every","Autocomplete","multiple","getOptionLabel","option","renderInput","handleModelFileChange","encFile","accept","root","gridForCard","filterByUploadedPerson","calculateProgressValue","AtlasUpload","isAddModalOpen","modelResult","setModelResult","classifierResult","setClassifierResult","fetchAtlases","atlasResults","filteredAtlas","Card","CardContent","UPLOADING","toFixed","SUCCESS","elevation","CardMedia","DashboardContent","subpage","fadeIn","selection","delay","fadeOut","euclideanDist","q","sqrt","Cluster","points","ys","mean","devs","replaceAll","dev","xExtent","extent","yExtent","getQuadTree","tree","quadtree","addAll","getClusters","clusters","celltype","isNaN","clusterName","names","scaleOrdinal","getBounds","xMin","getMinX","xMax","getMaxX","yMin","getMinY","yMax","getMaxY","ClusterCollection","collection","dists","minDist","maxDist","avgDist","totalCount","sum","initialXDomain","scaleLinear","initialYDomain","xDomain","yDomain","rescaleX","rescaleY","xScaled","yScaled","invert","scalePoint","addSmallCloseButton","addSmallButton","addButton","rect","addControlButtons","zoomIn","zoomOut","toggleLabels","reset","addZoomInButton","addZoomOutButton","addToggleLabelsButton","addResetButton","labelFormatter","format","sampleLabel","middle","extendedWidth","extendedHeight","textHeight","LabelFactory","extendedShown","allLabelsShown","selectedCluster","px","py","textLength","labelWidth","flip","diff","cluster","showLabel","removeLabel","showClusterLabel","removeClusterLabel","diffX","labelContainer","retractClusterLabel","shiftX","shiftY","diffY","raise","clusterCollection","groups","barData","barPlot","scaleBand","axisBottom","tickSizeInner","tickSizeOuter","tickPadding","axisLeft","generator","pie","pieData","angleInterpolation","interpolate","startAngle","endAngle","innerRadiusInterpolation","outerRadiusInterpolation","piePlot","countString","percentage","percentageString","chart","arcs","ar","arc","attrTween","originalEnd","currentAngle","tween","innerRadius","outerRadius","addPiePlot","gClose","UmapVisualization","gCentroids","gLabels","gControls","fillStyle","globalAlpha","beginPath","clearRect","centroids","means","scaledMeans","scalePoints","voronoi","Delaunay","cellPolygon","controlX","node","setRange","drawPoints","addCentroids","addCells","extended","highlightCell","resetCell","showDetailTag","zoomFactor","counter","setZoom","allShown","showLabels","removeLabels","currentClosest","unscalePoint","clientX","clientY","closest","findClosestSample","handleZoom","z","translateExtent","ease","easeCircle","addZoom","rescaleDomain","clearCanvas","l","Visualization","myRef","createRef","tsv","Component","VisualizationPage","query","useMemo","useQuery","visualizationContainer","PasswordResetPage","confirmpass","setInput","passwordconfirm","NotFound","textDecorationColor","textDecorationThickness","light","contrastText","secondary2","typography","fontFamily","warning","success","NonLoginGeneMapper","expiresAt","ok","exp","mineight","App","ReactDOM","CssBaseline","getElementById"],"mappings":"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","file":"static/js/main.8c17783e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"cardContent\":\"listCard_cardContent__3qEgg\",\"clickable\":\"listCard_clickable__2xriQ\",\"cardImageWrapper\":\"listCard_cardImageWrapper__3V4rv\",\"start\":\"listCard_start__3XbUF\",\"titleRow\":\"listCard_titleRow__2egGX\",\"title\":\"listCard_title__1Ph5k\",\"description\":\"listCard_description__2SHdO\",\"text\":\"listCard_text__bs0p-\",\"trailing\":\"listCard_trailing__3mane\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cardContent\":\"institutionMemberListCard_cardContent__b1T86\",\"clickable\":\"institutionMemberListCard_clickable__HNzMK\",\"cardImageWrapper\":\"institutionMemberListCard_cardImageWrapper__18ZM7\",\"start\":\"institutionMemberListCard_start__sWB9F\",\"titleRow\":\"institutionMemberListCard_titleRow__1fVwp\",\"title\":\"institutionMemberListCard_title__3Pe4r\",\"description\":\"institutionMemberListCard_description__3EuSn\",\"text\":\"institutionMemberListCard_text__29acW\",\"trailing\":\"institutionMemberListCard_trailing__3prqd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"institutionPage_content__S-un8\",\"cardSpacing\":\"institutionPage_cardSpacing__2DAVR\",\"container\":\"institutionPage_container__IIvD6\",\"innerContent\":\"institutionPage_innerContent__2x-St\",\"imageText\":\"institutionPage_imageText__3iSZ-\",\"background\":\"institutionPage_background__Yawha\",\"institutionIcon\":\"institutionPage_institutionIcon__2HDPb\",\"bgImgEditButton\":\"institutionPage_bgImgEditButton__1YUNQ\",\"inviteUsers\":\"institutionPage_inviteUsers__1klcW\",\"editDetailsButton\":\"institutionPage_editDetailsButton__3Phfm\",\"all\":\"institutionPage_all__2gFzS\",\"footer\":\"institutionPage_footer__246XM\",\"memberButton\":\"institutionPage_memberButton__1OF0-\"};","/* eslint-disable quote-props */\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const colors = {\r\n  'primary': {\r\n    '900': '#0B0928',\r\n    '800': '#002644',\r\n    '700': '#184060',\r\n    '600': '#3A5778',\r\n    '500': '#445AA7',\r\n    '400': '#5676E4', // MAIN ACTION COLOR\r\n    '300': '#7187D5',\r\n    '200': '#B7C8E9',\r\n    '100': '#E7EFFF',\r\n  },\r\n  'neutral': {\r\n    '900': '#212529',\r\n    '800': '#343A40',\r\n    '700': '#495057',\r\n    '600': '#6C757D',\r\n    '500': '#ADB5BD',\r\n    '400': '#CED4DA',\r\n    '300': '#DEE2E6',\r\n    '200': '#E9ECEF',\r\n    '100': '#F8F9FA',\r\n  },\r\n  'secondary1': {\r\n    '900': '#1B2914',\r\n    '800': '#2A3D24',\r\n    '700': '#395131',\r\n    '600': '#597856',\r\n    '500': '#6FB269',\r\n    '400': '#7DD181', // MAIN COLOR\r\n    '300': '#A0E69E',\r\n    '200': '#B8F1BA',\r\n    '100': '#DAF3DB',\r\n  },\r\n  'secondary2': {\r\n    '900': '#332E1B',\r\n    '800': '#433C20',\r\n    '700': '#625C35',\r\n    '600': '#8F8A54',\r\n    '500': '#CECE6E',\r\n    '400': '#E3E36A', // MAIN COLOR\r\n    '300': '#F6EBB4',\r\n    '200': '#F8F6CE',\r\n    '100': '#FFFEE1',\r\n  },\r\n  'error': {\r\n    main: '#FF5F58',\r\n    dark: '#81504F',\r\n  },\r\n  'warning': {\r\n    main: '#FFBE2F',\r\n    dark: '#866536',\r\n  },\r\n  'success': {\r\n    main: '#4CAF50',\r\n    dark: '#4E6D4F',\r\n  },\r\n  'plus': {\r\n    main: '#5676E4',\r\n    dark: '#4C5ED4',\r\n  },\r\n};\r\n","import { red, green, yellow, grey, blue } from \"@mui/material/colors\";\r\n\r\nconst DEV_BACKEND_ADDRESS =\r\n  \"https://devversion-dot-custom-helix-329116.ey.r.appspot.com/v1\";\r\nconst DEV_BACKEND_ADDRESS_LOCAL = \"http://localhost:8050/v1\";\r\nconst PRODUCTION_BACKEND_ADDRESS =\r\n  \"https://custom-helix-329116.ey.r.appspot.com/v1\";\r\nexport const BACKEND_ADDRESS = PRODUCTION_BACKEND_ADDRESS;\r\n\r\n// const names for indexed DB variables\r\n// const names for indexed DB variables\r\nexport const INDEXED_DB_NAME = \"indexedDB-archmap-projects\";\r\nexport const DB_VERSION = 1;\r\n\r\n// const variables for emails to send contact forms to\r\n// EmailJS Variables for: ronald.skorobogat@helmholtz-muenchen.de\r\nexport const SERVICE_ID = \"service_iv3tvs5\";\r\nexport const TEMPLATE_ID = \"template_3336nfq\";\r\nexport const PUBLIC_KEY = \"FVrX1Wu4qZfbJBQ5u\";\r\n\r\nexport const JOB_QUEUE_UPDATE_INTERVAL = 5000;\r\nexport const PROJECTS_UPDATE_INTERVAL = 5000;\r\n\r\nexport const UPLOAD_CHUNK_SIZE = 25000000; // 50MB\r\nexport const MULTIPART_UPLOAD_STATUS = {\r\n  IDLE: \"idle\",\r\n  SELECTED: \"selected\",\r\n  UPLOAD_STARTING: \"upload_starting\",\r\n  ERROR_START: \"error_start\",\r\n  UPLOAD_PROGRESS: \"upload_progress\",\r\n  UPLOAD_FINISHING: \"upload_finishing\",\r\n  UPLOAD_PENDING: \"UPLOAD_PENDING\",\r\n  UPLOAD_COMPLETE: \"UPLOAD_COMPLETE\",\r\n  ERROR_PROGRESS: \"error_progress\",\r\n  UPLOAD_FINISHING: \"upload_finishing\",\r\n  ERROR_FINISH: \"error_finish\",\r\n  COMPLETE: \"complete\",\r\n  CANCELING: \"canceling\",\r\n};\r\n\r\nexport const UPLOAD_FILE_TYPE = {\r\n  ATLAS: \"atlas\",\r\n  CLASSIFIER: \"classifier\",\r\n  MODEL: \"model\",\r\n  ENCODER: \"encoder\",\r\n};\r\nexport const statusIsUpload = (status) => status.startsWith(\"upload_\");\r\nexport const statusIsError = (status) => status.startsWith(\"error_\");\r\n\r\nexport const jobStatusColors = {\r\n  UPLOAD_PENDING: yellow[600],\r\n  PROCESSING_PENDING: blue[300],\r\n  ABORTED: red[300],\r\n  DONE: green[300],\r\n  unknown: grey[500],\r\n};\r\n\r\nexport const jobStatusTitles = {\r\n  UPLOAD_PENDING: \"UPLOADING\",\r\n  UPLOAD_COMPLETE: \"UPLOADED\",\r\n  PROCESSING_PENDING: \"PROCESSING\",\r\n  ABORTED: \"CANCELLED\",\r\n  DONE: \"COMPLETED\",\r\n  unknown: \"UNKNOWN\",\r\n};\r\n\r\nexport const PROJECT_STATUS = {\r\n  UPLOAD_PENDING: \"UPLOAD_PENDING\",\r\n  UPLOAD_COMPLETE: \"UPLOAD_COMPLETE\",\r\n  PROCESSING_PENDING: \"PROCESSING_PENDING\",\r\n  PROCESSING_FAILED: \"PROCESSING_FAILED\",\r\n  ABORTED: \"ABORTED\",\r\n  DONE: \"DONE\",\r\n  DOWNLOAD_READY: \"DOWNLOAD_READY\",\r\n};\r\n\r\nexport const getUploadStatusMessage = (status) => {\r\n  const statusMessages = {\r\n    idle: \"Idle\",\r\n    selected: \"File Selected\",\r\n    upload_starting: \"Starting Upload\",\r\n    error_start: \"Error at Start\",\r\n    upload_progress: \"Upload in Progress\",\r\n    upload_finishing: \"Finishing Upload\",\r\n    UPLOAD_PENDING: \"Upload Pending\",\r\n    UPLOAD_COMPLETE: \"Upload Complete\",\r\n    error_progress: \"Error during Upload\",\r\n    error_finish: \"Error at Finish\",\r\n    complete: \"Complete\",\r\n    canceling: \"Canceling\",\r\n  };\r\n\r\n  return statusMessages[status] || \"Unknown Status\";\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logoName\":\"navbar_logoName__2yd-I\",\"appbar\":\"navbar_appbar__1tEKx\",\"logo\":\"navbar_logo__2sPET\",\"navbarcontent\":\"navbar_navbarcontent__3Kg45\"};","/* eslint-disable */\r\n\r\nimport * as React from 'react';\r\nimport { ButtonBase } from '@mui/material';\r\nimport { colors } from 'shared/theme/colors';\r\nimport styles from './custombutton.module.css';\r\n\r\nfunction getStyles(type) {\r\n  switch (type) {\r\n    case 'primary2':\r\n      return ({\r\n        backgroundColor: 'white',\r\n        borderRadius: '100px',\r\n        padding: '0.5em 1em 0.5em 1em',\r\n        fontSize: '1em',\r\n        color: colors.primary[500],\r\n        ':hover': {\r\n          backgroundColor: colors.primary[200], transition: '0.4s',\r\n        },\r\n        ':active': { backgroundColor: `${colors.primary[200]} !important`, transition: '0.4s', color: colors.primary[500] },\r\n        ':disabled': { backgroundColor: colors.primary[200], transition: '0.4s', color: colors.primary[500] },\r\n      });\r\n    case 'secondary':\r\n      return ({\r\n        backgroundColor: colors.secondary1[400],\r\n        borderRadius: '100px',\r\n        padding: '0.5em 1em 0.5em 1em',\r\n        fontSize: '1em',\r\n        color: 'white',\r\n        ':hover': {\r\n          backgroundColor: colors.secondary1[500], transition: '0.4s', color: 'white', boxShadow: '0px 4px 20px rgba(160, 230, 158, 0.2)',\r\n        },\r\n        ':active': { backgroundColor: `${colors.secondary1[600]} !important`, transition: '0.4s', color: 'white' },\r\n        ':focus': { backgroundColor: colors.secondary1[300], transition: '0.4s', color: 'white' },\r\n        ':disabled': { backgroundColor: '#DAF3DB', transition: '0.4s', color: colors.secondary1[600] },\r\n      });\r\n    case 'tertiary':\r\n      return ({\r\n        color: colors.neutral[900],\r\n        borderRadius: '100px',\r\n        padding: '0.5em 1em 0.5em 1em',\r\n        fontSize: '1em',\r\n        background: 'none',\r\n        ':hover': { transition: '0.4s', color: colors.primary[500] },\r\n        ':focus': { transition: '0.4s', color: colors.primary[500], textDecoration: 'underline' },\r\n        ':disabled': { transition: '0.4s', color: colors.neutral[400] },\r\n      });\r\n    case 'critical':\r\n      return ({\r\n        color: 'white',\r\n        borderRadius: '100px',\r\n        padding: '0.5em 1em 0.5em 1em',\r\n        fontSize: '1em',\r\n        background: colors.error.main,\r\n        ':hover': { transition: '0.4s', background: colors.error.dark },\r\n        ':focus': { transition: '0.4s', textDecoration: 'underline' },\r\n        ':disabled': { transition: '0.4s', color: colors.neutral[400] },\r\n      });\r\n    default:\r\n      return ({\r\n        backgroundColor: colors.primary[400],\r\n        borderRadius: '100px',\r\n        padding: '0.5em 1em 0.5em 1em',\r\n        fontSize: '1em',\r\n        color: 'white',\r\n        ':hover': {\r\n          backgroundColor: colors.primary[500], transition: '0.4s', color: 'white', boxShadow: '0px 4px 20px rgba(24, 64, 96, 0.2)',\r\n        },\r\n        ':active': { backgroundColor: `${colors.primary[600]} !important`, transition: '0.4s', color: 'white' },\r\n        ':disabled': { backgroundColor: '#EBEFFF', transition: '0.4s', color: colors.primary[600] },\r\n      });\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * Custom Button\r\n * Accepts all MUI props\r\n * @param type ['primary', 'secondary', 'tertiary']\r\n * change size with sx prop\r\n * https://www.figma.com/file/HcTwUyNxjZJksJ7yfncM9y/JST-22-Design?node-id=42%3A2\r\n */\r\nconst CustomButton = (props) => {\r\n  const { type, onClick, children, disabled, sx } = props;\r\n  return (\r\n    <ButtonBase\r\n      disableRipple\r\n      disabled={disabled}\r\n      sx={{\r\n        ...getStyles(type),\r\n        ...sx,\r\n      }}\r\n      onClick={(e) => {\r\n        e.stopPropagation();\r\n        if (onClick)\r\n          onClick();\r\n      }}\r\n      className={styles.button}\r\n      variant={type === 'tertiary' ? 'text' : 'contained'}\r\n    >\r\n      {children}\r\n    </ButtonBase>\r\n  );\r\n};\r\n\r\nexport default CustomButton;\r\n","import axios from 'axios';\r\nimport { BACKEND_ADDRESS } from 'shared/utils/common/constants';\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: BACKEND_ADDRESS,\r\n});\r\n\r\naxiosInstance.interceptors.request.use((config) => {\r\n  const token = window.localStorage.getItem('jwt');\r\n\r\n  if (token) {\r\n    // eslint-disable-next-line no-param-reassign\r\n    config.headers.auth = token;\r\n  }\r\n  return config;\r\n});\r\n\r\naxiosInstance.interceptors.response.use((response) => response, (error) => {\r\n  if (error?.response?.status === 440) {\r\n    localStorage.removeItem('user');\r\n    localStorage.removeItem('jwt');\r\n    window.location.assign(window.location);\r\n  }\r\n\r\n  return Promise.reject(error);\r\n});\r\n\r\nexport default axiosInstance;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"divider\":\"uploadfilepage_divider__KU3Cq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerContainer\":\"contact_headerContainer__29alZ\",\"formContainer\":\"contact_formContainer__3Iggj\",\"textContainer\":\"contact_textContainer__16odg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__1Rzwr\",\"titleRow\":\"header_titleRow__3RjbN\",\"title\":\"header_title__ID55l\",\"right\":\"header_right__3tz8T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileImage\":\"profileImage_profileImage__1xsjO\",\"editButton\":\"profileImage_editButton__3CNWE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"accessRightIndicator\":\"institutionTeamList_accessRightIndicator__TXT9j\",\"cardSpacing\":\"institutionTeamList_cardSpacing__3AKDD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileImage\":\"institutionAvatar_profileImage__31-M5\",\"editButton\":\"institutionAvatar_editButton__2yvHI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"visualizationContainer\":\"visualizationpage_visualizationContainer__2I8rd\",\"headerContainer\":\"visualizationpage_headerContainer__pXLuC\",\"formContainer\":\"visualizationpage_formContainer__3TmmV\",\"textContainer\":\"visualizationpage_textContainer__2PPyx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"docs_container___yH8n\",\"mainIllustration\":\"docs_mainIllustration__y5yT4\",\"csvImage\":\"docs_csvImage__1-7p-\",\"textContainer\":\"docs_textContainer__1pj1C\",\"infoContainer\":\"docs_infoContainer__1ruit\",\"explanationTitle\":\"docs_explanationTitle__1l6DY\",\"explanationLeft\":\"docs_explanationLeft__3L6dC\",\"explanationRight\":\"docs_explanationRight__3gQq7\",\"horizontalIllustration\":\"docs_horizontalIllustration__ko7Zl\",\"verticalIllustration\":\"docs_verticalIllustration__28aWr\",\"divider\":\"docs_divider___TM-E\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"documentation_container__3frI_\",\"mainIllustration\":\"documentation_mainIllustration__2AeGF\",\"csvImage\":\"documentation_csvImage__1yHIO\",\"textContainer\":\"documentation_textContainer__3E3eg\",\"infoContainer\":\"documentation_infoContainer__1Vhk5\",\"explanationTitle\":\"documentation_explanationTitle__3od32\",\"explanationLeft\":\"documentation_explanationLeft__2yJRE\",\"explanationRight\":\"documentation_explanationRight__3V8oc\",\"horizontalIllustration\":\"documentation_horizontalIllustration__2uLQG\",\"verticalIllustration\":\"documentation_verticalIllustration__1dJbH\",\"divider\":\"documentation_divider__33EWH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"custombutton_button__1LdJw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerContainer\":\"passwordforgetform_headerContainer__3-8Ip\",\"closeImg\":\"passwordforgetform_closeImg__3kk5G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerView\":\"headerView_headerView__37-VD\",\"content\":\"headerView_content__3ZGTI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"communityOverview_content__1z98q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"accessRightIndicator\":\"teamCard_accessRightIndicator__19eES\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cardSpacing\":\"teamOverview_cardSpacing__2wgGG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"accessRightIndicator\":\"institutionCard_accessRightIndicator__1JCZW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"subpageSidebarCollapsed\":\"dashboardContent_subpageSidebarCollapsed__2Yyy-\",\"subpage\":\"dashboardContent_subpage__1-8vl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"atlasContainer\":\"atlasesGrid_atlasContainer__H3sBl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cardsContainer\":\"modelsGrid_cardsContainer__15NV2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"accessRightIndicator\":\"institutionMemberListPopup_accessRightIndicator__15Q2K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"accessRightIndicator\":\"institutionTeamCard_accessRightIndicator__1z8X6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"accessRightIndicator\":\"teamMemberList_accessRightIndicator__zDVUC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerContainer\":\"passwordresetpage_headerContainer___j6Ya\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profilePicture\":\"settings_profilePicture__1kJYR\",\"title\":\"settings_title__3UHO3\",\"background\":\"settings_background__2_1V1\",\"inputComponent\":\"settings_inputComponent__3aQaQ\",\"inputText\":\"settings_inputText__1s9Xm\",\"divider\":\"settings_divider__3lyX4\",\"headline\":\"settings_headline__ICdWL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"mapper_container__2oEy5\",\"borderContainer\":\"mapper_borderContainer__YQltc\",\"input\":\"mapper_input__3pExR\",\"icon\":\"mapper_icon__35O4_\",\"disabledIcon\":\"mapper_disabledIcon__SEiZo\",\"filename\":\"mapper_filename__1hq_M\",\"title\":\"mapper_title__2zJ-k\",\"buttonBox\":\"mapper_buttonBox__27yQW\",\"goButton\":\"mapper_goButton__3YG-G\",\"divider\":\"mapper_divider__2IY9M\",\"mapIcon\":\"mapper_mapIcon__2ut2b\",\"mapperBox\":\"mapper_mapperBox__32Zbo\",\"iconButton\":\"mapper_iconButton__1JNmE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"app_App__3prSR\",\"AppLogo\":\"app_AppLogo__1chhy\",\"AppLogoSpin\":\"app_AppLogoSpin__35zRt\",\"AppHeader\":\"app_AppHeader__2N3h1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebarWrap\":\"sidebar_sidebarWrap__3MZP2\",\"sidebarNav\":\"sidebar_sidebarNav__1XPaF\",\"iconList\":\"sidebar_iconList__1J3N2\",\"listItemIcon\":\"sidebar_listItemIcon__3qAcc\",\"navbarItemContainer\":\"sidebar_navbarItemContainer__oWTDb\",\"geneIcon\":\"sidebar_geneIcon__3WsB4\",\"navlink\":\"sidebar_navlink__3qaNB\",\"navlinkIcon\":\"sidebar_navlinkIcon__36xzS\",\"coloredIcon\":\"sidebar_coloredIcon__2Y3up\",\"list\":\"sidebar_list__1eUw3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pwReminderLink\":\"loginform_pwReminderLink__CFid_\",\"closeImg\":\"loginform_closeImg__2UYjx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"search_title__1pHXf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axis\":\"visualization_axis__sKYxz\"};","export default __webpack_public_path__ + \"static/media/logo.c5c8dbf2.svg\";","import React from 'react';\r\n\r\nconst AuthContext = React.createContext();\r\nAuthContext.displayName = 'AuthContext';\r\n\r\nfunction AuthProvider(props) {\r\n  const [user, setUser] = React.useState(localStorage.user ? JSON.parse(localStorage.user) : null);\r\n\r\n  const value = [user, setUser];\r\n  return (\r\n    // eslint-disable-next-line react/jsx-props-no-spreading\r\n    <AuthContext.Provider value={value} {...props} />\r\n  );\r\n}\r\n\r\nfunction useAuth() {\r\n  const context = React.useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within a AuthProvider');\r\n  }\r\n  return context;\r\n}\r\n\r\nexport { AuthProvider, useAuth };\r\n","/* eslint-disable */\r\n\r\nimport { Box } from \"@mui/material\"\r\n\r\n/**\r\n * GeneralCard\r\n * @param width default value 100%\r\n * @param height default value \r\n * @param flex default value \"column\"\r\n * @param bg background color default value \"white\"\r\n * @param hoverStyles similar to sx prop, passed to \":hover\"\r\n * \r\n * Usage: \r\n *  <GeneralCard>\r\n *    Your components\r\n *  </GeneralCard>\r\n */\r\nexport const GeneralCard = ({ width = \"100%\", height = \"100%\", children, flex = \"column\", bg = \"white\", hoverStyles = {}, padding = \"1.5em\" }) => {\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        width: width,\r\n        height: height,\r\n        backgroundColor: bg,\r\n        borderRadius: \"0.625rem\",\r\n        \":hover\": hoverStyles\r\n      }}\r\n    >\r\n      <Box sx={{ boxShadow: \"0px 0px 4px rgba(0,0,0, 0.25)\", p: padding, borderRadius: \"0.625rem\", display: \"flex\", flexDirection: flex }}>\r\n        {children}\r\n      </Box>\r\n    </Box>\r\n  )\r\n}","// https://mui.com/material-ui/react-avatar/\r\n\r\nexport default function stringToColor(string) {\r\n  let hash = 0;\r\n  let i;\r\n\r\n  /* eslint-disable no-bitwise */\r\n  for (i = 0; i < string.length; i += 1) {\r\n    hash = string.charCodeAt(i) + ((hash << 5) - hash);\r\n  }\r\n\r\n  let color = '#';\r\n\r\n  for (i = 0; i < 3; i += 1) {\r\n    const value = (hash >> (i * 8)) & 0xff;\r\n    color += `00${value.toString(16)}`.slice(-2);\r\n  }\r\n  /* eslint-enable no-bitwise */\r\n  return color;\r\n}\r\n","import React from 'react';\r\nimport { GeneralCard as Card } from 'components/Cards/GeneralCard';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport styles from './listCard.module.css';\r\nimport stringColor from 'shared/utils/stringColor';\r\n\r\nfunction ListCard({\r\n  imageComponent, imageURL, enforceImage, title, description, nextToTitle, trailing, onClick,\r\n}) {\r\n  let imageComponentUsed = imageComponent;\r\n  if (imageURL || enforceImage) {\r\n    if (imageComponent) {\r\n      throw new Error('You can only have either imageComponent or imageURL.');\r\n    }\r\n    imageComponentUsed = (\r\n      <Avatar\r\n        src={imageURL}\r\n        alt={title}\r\n        sx={{ backgroundColor: stringColor(title || ''), width: 42, height: 42 }}\r\n      >\r\n        {(title || '?')[0]}\r\n      </Avatar>\r\n    );\r\n  }\r\n  return (\r\n    <Card>\r\n      <div\r\n        className={`${styles.cardContent}\r\n        ${onClick ? styles.clickable : ''}`}\r\n        onClick={onClick}\r\n        onKeyPress={onClick}\r\n        role=\"button\"\r\n        tabIndex={0}\r\n      >\r\n        <div className={styles.start}>\r\n          <div className={styles.cardImageWrapper}>\r\n            {imageComponentUsed}\r\n          </div>\r\n          <div className={styles.text}>\r\n            <div className={styles.titleRow}>\r\n              <h3 className={styles.title}>{title}</h3>\r\n              {nextToTitle}\r\n            </div>\r\n            <div className={styles.description}>\r\n              {description && (\r\n                <p style={{\r\n                  textOverflow: 'ellipsis', overflow: 'hidden', whiteSpace: 'nowrap', width: 'calc(60vw - 200px)',\r\n                }}\r\n                >\r\n                  {description}\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {trailing && (\r\n          <div className={styles.trailing}>\r\n            {trailing}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default ListCard;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport ListCard from 'components/general/ListCard';\r\n\r\n/**\r\n * @param {int} memberId\r\n * @param {Function(Object)} nextToNameBuilder will be called with the member\r\n *                            and should return a component to display next to the name\r\n * @param {Function(Object)} trailingBuilder will be called with the member\r\n * @returns the card for the member\r\n */\r\nfunction MemberCard({\r\n  member, nextToNameBuilder, trailingBuilder, overrideProfilePicture = null,\r\n}) {\r\n  const history = useHistory();\r\n  const navigateToMember = () => history.push(`/sequencer/users/${member._id}`);\r\n\r\n  return (\r\n    <ListCard\r\n      imageURL={overrideProfilePicture || member.avatarUrl}\r\n      enforceImage\r\n      title={`${member.firstName} ${member.lastName}`}\r\n      description={member.email}\r\n      nextToTitle={nextToNameBuilder ? nextToNameBuilder(member) : null}\r\n      trailing={(trailingBuilder || (() => null))(member)}\r\n      onClick={navigateToMember}\r\n    />\r\n  );\r\n}\r\n\r\nexport default MemberCard;\r\n","import React from 'react';\r\nimport { Dialog, DialogTitle } from '@mui/material';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\n\r\n/**\r\n * Modal\r\n * @param isOpen boolean state passed as prop, if false returns null\r\n * @param setOpen function to set boolean state of isOpen\r\n * @param children mui dialog title / dialog content / dialog actions children component\r\n */\r\nexport const Modal = ({\r\n  isOpen, setOpen, children, sx, maxWidth = 'sm',\r\n}) => (\r\n  <Dialog\r\n    open={isOpen}\r\n    onClose={() => setOpen(false)}\r\n    scroll=\"paper\"\r\n    aria-labelledby=\"scroll-dialog-title\"\r\n    aria-describedby=\"scroll-dialog-description\"\r\n    PaperProps={{\r\n      sx: {\r\n        borderRadius: '20px',\r\n        p: '1em',\r\n        ...sx,\r\n      },\r\n    }}\r\n    maxWidth={maxWidth}\r\n  >\r\n    <CloseIcon\r\n      onClick={(e) => {\r\n        setOpen(false);\r\n        e.stopPropagation();\r\n      }}\r\n      sx={{\r\n        position: 'absolute', right: '10px', top: '10px', cursor: 'pointer',\r\n      }}\r\n    />\r\n    {children}\r\n  </Dialog>\r\n);\r\n\r\nexport const ModalTitle = ({ children }) => (\r\n  <DialogTitle\r\n    id=\"scroll-dialog-title\"\r\n    sx={{\r\n      fontSize: '1.7em',\r\n      fontWeight: 'bold',\r\n      p: '0.5em',\r\n    }}\r\n  >\r\n    {children}\r\n  </DialogTitle>\r\n);\r\n","/* eslint-disable no-param-reassign */\r\n// adapted from example code from https://www.npmjs.com/package/react-image-crop\r\n\r\nconst TO_RADIANS = Math.PI / 180;\r\n\r\nexport default async function canvasPreview(\r\n  image,\r\n  canvas,\r\n  crop,\r\n  scale = 1,\r\n  rotate = 0,\r\n) {\r\n  const ctx = canvas.getContext('2d');\r\n\r\n  if (!ctx) {\r\n    throw new Error('No 2d context');\r\n  }\r\n\r\n  const scaleX = image.naturalWidth / image.width;\r\n  const scaleY = image.naturalHeight / image.height;\r\n  // devicePixelRatio slightly increases sharpness on retina devices\r\n  // at the expense of slightly slower render times and needing to\r\n  // size the image back down if you want to download/upload and be\r\n  // true to the images natural size.\r\n  const pixelRatio = window.devicePixelRatio;\r\n  // const pixelRatio = 1\r\n\r\n  canvas.width = Math.floor(crop.width * scaleX * pixelRatio);\r\n  canvas.height = Math.floor(crop.height * scaleY * pixelRatio);\r\n\r\n  ctx.scale(pixelRatio, pixelRatio);\r\n  ctx.imageSmoothingQuality = 'high';\r\n\r\n  const cropX = crop.x * scaleX;\r\n  const cropY = crop.y * scaleY;\r\n\r\n  const rotateRads = rotate * TO_RADIANS;\r\n  const centerX = image.naturalWidth / 2;\r\n  const centerY = image.naturalHeight / 2;\r\n\r\n  ctx.save();\r\n\r\n  // 5) Move the crop origin to the canvas origin (0,0)\r\n  ctx.translate(-cropX, -cropY);\r\n  // 4) Move the origin to the center of the original position\r\n  ctx.translate(centerX, centerY);\r\n  // 3) Rotate around the origin\r\n  ctx.rotate(rotateRads);\r\n  // 2) Scale the image\r\n  ctx.scale(scale, scale);\r\n  // 1) Move the center of the image to the origin (0,0)\r\n  ctx.translate(-centerX, -centerY);\r\n  ctx.drawImage(\r\n    image,\r\n    0,\r\n    0,\r\n    image.naturalWidth,\r\n    image.naturalHeight,\r\n    0,\r\n    0,\r\n    image.naturalWidth,\r\n    image.naturalHeight,\r\n  );\r\n\r\n  ctx.restore();\r\n}\r\n","import React, { useState, useRef } from 'react';\r\n\r\nimport ReactCrop from 'react-image-crop';\r\nimport canvasPreview from './canvasPreview';\r\nimport useDebounceEffect from './useDebounceEffect';\r\n\r\nimport 'react-image-crop/dist/ReactCrop.css';\r\n\r\n// adapted from the react-image-crop example on\r\n// https://www.npmjs.com/package/react-image-crop\r\nexport default function CropImage({ imgSrc, onUpdate, onUpdateBlob }) {\r\n  const previewCanvasRef = useRef(null);\r\n  const imgRef = useRef(null);\r\n  const [crop, setCrop] = useState();\r\n  const [completedCrop, setCompletedCrop] = useState();\r\n\r\n  useDebounceEffect(\r\n    async () => {\r\n      if (\r\n        completedCrop?.width\r\n        && completedCrop?.height\r\n        && imgRef.current\r\n        && previewCanvasRef.current\r\n      ) {\r\n        canvasPreview( // TODO: maybe imgPreview?\r\n          imgRef.current,\r\n          previewCanvasRef.current,\r\n          completedCrop,\r\n        );\r\n        onUpdate(previewCanvasRef.current.toDataURL('image/png'));\r\n        previewCanvasRef.current.toBlob((blob) => {\r\n          onUpdateBlob(blob);\r\n        }, 'image/png');\r\n      }\r\n    },\r\n    100,\r\n    [completedCrop],\r\n  );\r\n\r\n  if (!imgSrc) return <></>;\r\n\r\n  // initialize crop blob\r\n  function onFirstImgLoad() {\r\n    setCompletedCrop({\r\n      x: 0,\r\n      y: 0,\r\n      width: imgRef.current.getBoundingClientRect().width,\r\n      height: imgRef.current.getBoundingClientRect().height,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ReactCrop\r\n        crop={crop}\r\n        onChange={(_, percentCrop) => setCrop(percentCrop)}\r\n        onComplete={(c) => setCompletedCrop(c)}\r\n        aspect={1.0}\r\n      >\r\n        <img\r\n          ref={imgRef}\r\n          alt=\"Crop me\"\r\n          src={imgSrc}\r\n          style={{ width: '100%' }}\r\n          onLoad={onFirstImgLoad}\r\n        />\r\n      </ReactCrop>\r\n      <div>\r\n        {completedCrop && (\r\n          <canvas\r\n            ref={previewCanvasRef}\r\n            style={{\r\n              display: 'none',\r\n              objectFit: 'contain',\r\n              width: completedCrop.width,\r\n              height: completedCrop.height,\r\n            }}\r\n          />\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","// by https://www.npmjs.com/package/react-image-crop\r\nimport { useEffect } from 'react';\r\n\r\nexport default function useDebounceEffect(\r\n  fn,\r\n  waitTime,\r\n  deps,\r\n) {\r\n  useEffect(() => {\r\n    const t = setTimeout(() => {\r\n      // eslint-disable-next-line prefer-spread\r\n      fn.apply(undefined, deps);\r\n    }, waitTime);\r\n\r\n    return () => {\r\n      clearTimeout(t);\r\n    };\r\n  }, deps);\r\n}\r\n","/* eslint-disable no-return-assign */\r\nimport React, { useState, useEffect } from 'react';\r\nimport Button from 'components/CustomButton';\r\nimport { Modal, ModalTitle } from 'components/Modal';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport { DropzoneArea } from 'mui-file-dropzone';\r\nimport CropImage from '../CropImage';\r\n\r\nexport default function ImageUploadDialog({\r\n  open, onClose, title, description, maxFileSizeMB,\r\n  onUpload, additionalButtons,\r\n  disableCropping,\r\n  preview = (imgURL) => <img style={{ width: '100%' }} src={imgURL} alt=\"Preview\" />,\r\n}) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [imgURL, setImgURL] = useState('');\r\n  const [croppedImgBlob, setCroppedImgBlob] = useState();\r\n\r\n  const [isMounted, setIsMounted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setIsMounted(true);\r\n    return () => setIsMounted(false);\r\n  }, []);\r\n\r\n  async function upload() {\r\n    setLoading(true);\r\n    await onUpload(croppedImgBlob);\r\n    if (isMounted) {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  function handleSave(files) {\r\n    if (!files.length) return;\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => {\r\n      const url = reader.result.toString() || '';\r\n      setImgURL(url);\r\n    });\r\n    reader.readAsDataURL(files[0]);\r\n    if (disableCropping) {\r\n      setCroppedImgBlob(files[0]);\r\n    }\r\n    console.log('files', files);\r\n  }\r\n\r\n  return (\r\n    <Modal isOpen={open} setOpen={(o) => !o && onClose()} maxWidth=\"sm\" fullWidth>\r\n      <ModalTitle>{title}</ModalTitle>\r\n      <DialogContent>\r\n        {description && (<p>{description}</p>)}\r\n        {(!imgURL || disableCropping) && (\r\n          <DropzoneArea\r\n            onChange={(files) => handleSave(files)}\r\n            acceptedFiles={['image/jpeg', 'image/png']}\r\n            maxFileSize={maxFileSizeMB * 1024 * 1024}\r\n            filesLimit={1}\r\n            showPreviews={disableCropping}\r\n            showPreviewsInDropzone={!preview}\r\n            alertSnackbarProps={{ autoHideDuration: 3000 }}\r\n          />\r\n        )}\r\n        {!disableCropping && imgURL && (\r\n          <>\r\n            <h3>Crop</h3>\r\n            <CropImage\r\n              imgSrc={imgURL}\r\n              onUpdate={() => null}\r\n              onUpdateBlob={(blob) => setCroppedImgBlob(blob)}\r\n            />\r\n          </>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button type=\"tertiary\" onClick={() => { setImgURL(null); onClose(); }}>\r\n          Cancel\r\n        </Button>\r\n        {additionalButtons.map(({ text, func }) => (\r\n          <Button\r\n            key={text}\r\n            type=\"secondary\"\r\n            onClick={async () => { setLoading(true); await func(); setLoading(false); }}\r\n          >\r\n            {text}\r\n          </Button>\r\n        ))}\r\n        {\r\n          loading ? (\r\n            <Button disabled>Uploading...</Button>\r\n          ) : (\r\n            <Button onClick={() => upload()} disabled={!croppedImgBlob}>\r\n              Upload\r\n            </Button>\r\n          )\r\n        }\r\n      </DialogActions>\r\n    </Modal>\r\n  );\r\n}\r\n","import { Redirect } from 'react-router-dom';\r\nimport React from 'react';\r\n\r\nexport default function removeItemFromArray(arr, value) {\r\n  const index = arr.indexOf(value);\r\n  if (index > -1) {\r\n    arr.splice(index, 1);\r\n  }\r\n  return arr;\r\n}\r\n\r\nexport function guardedPage(page) {\r\n  if (!!localStorage.jwt && !!localStorage.user) {\r\n    return page;\r\n  }\r\n  return <Redirect to=\"/\" />;\r\n}\r\n\r\nexport function getAuthHeader() {\r\n  return {\r\n    auth: localStorage.getItem('jwt'),\r\n  };\r\n}\r\n\r\nexport function getAuthAndJsonHeader() {\r\n  return {\r\n    auth: localStorage.getItem('jwt'),\r\n    'content-type': 'application/json',\r\n  };\r\n}\r\n\r\nexport function createUrl(path, pathParam, value) {\r\n  return path.replace(`:${pathParam}`, value);\r\n}\r\n\r\nexport function setSeachCategoryInUrl(path, value) {\r\n  return createUrl(path, 'searchCategory', value);\r\n}\r\n\r\nexport function formatDate(rawDate) {\r\n  const date = new Date(Date.parse(rawDate));\r\n  const monthNameLong = date.toLocaleString('en-US', { month: 'long' });\r\n  console.log(monthNameLong);\r\n  return `${date.getDate()}th ${monthNameLong}`;\r\n}\r\n","import React from 'react';\r\nimport MemberCard from 'components/members/MemberCard';\r\nimport ImageUploadDialog from '../ImageUploadDialog';\r\n\r\nimport { BACKEND_ADDRESS } from 'shared/utils/common/constants';\r\nimport { getAuthAndJsonHeader } from 'shared/utils/common/utils';\r\nimport { useAuth } from 'shared/context/authContext';\r\n\r\nexport default function ProfileImageUploadDialog({\r\n  open, onClose, onChange,\r\n}) {\r\n  const [user] = useAuth();\r\n\r\n  async function upload(blob) {\r\n    const response = await fetch(`${BACKEND_ADDRESS}/user-avatar`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...getAuthAndJsonHeader(),\r\n        'content-type': 'image/png',\r\n      },\r\n      body: blob,\r\n    });\r\n    if (response.status !== 200) {\r\n      if (response.status === 413) {\r\n        // should not happen because of the max file size in the filedrop component,\r\n        // but who knows, maybe the backend will change the limit in the future\r\n        alert('This image is too large. Please provide one with a smaller file size.');\r\n        return;\r\n      }\r\n      throw Error(\"Couldn't upload user avatar\");\r\n    }\r\n    // response is the new profile image URL\r\n    if (onChange) {\r\n      onChange(await response.text());\r\n    }\r\n    onClose();\r\n  }\r\n\r\n  async function reset() {\r\n    await fetch(`${BACKEND_ADDRESS}/user-avatar`, {\r\n      method: 'DELETE',\r\n      headers: getAuthAndJsonHeader(),\r\n    });\r\n    onClose();\r\n  }\r\n\r\n  return (\r\n    <ImageUploadDialog\r\n      open={open}\r\n      onClose={onClose}\r\n      title=\"Upload Profile Image\"\r\n      maxFileSizeMB={5}\r\n      preview={(imgURL) => (\r\n        <MemberCard member={user} overrideProfilePicture={imgURL} />\r\n      )}\r\n      additionalButtons={[\r\n        { text: 'Reset', func: reset },\r\n      ]}\r\n      onUpload={(blob) => upload(blob)}\r\n    />\r\n  );\r\n}\r\n","import MockProfileService from './mock/Profile.service';\r\nimport axiosInstance from './axiosInstance';\r\n\r\nconst MOCK_PROFILE = false;\r\n\r\nlet _cachedProfile;\r\n\r\nconst ProfileService = MOCK_PROFILE ? MockProfileService : {\r\n  async getProfile(options) {\r\n    const allowCache = (options || {}).allowCache ?? true;\r\n    if (allowCache && _cachedProfile) return _cachedProfile;\r\n    const { data } = await axiosInstance.get('/profile');\r\n    _cachedProfile = data;\r\n    _cachedProfile.id = _cachedProfile._id;\r\n    return _cachedProfile;\r\n  },\r\n\r\n  clearProfileCache() {\r\n    _cachedProfile = null;\r\n  },\r\n\r\n  updateProfile(userData, newPassword) {\r\n    const body = {\r\n      first_name: userData.firstName,\r\n      last_name: userData.lastName,\r\n      // email: userData.emailAddress,\r\n      note: userData.affiliation,\r\n    };\r\n    if (!!newPassword && newPassword !== '') {\r\n      body.password = newPassword;\r\n    }\r\n    return axiosInstance.post('/update_profile', body)\r\n      .then((response) => {\r\n        if (response.status !== 200) {\r\n          throw Error(\"Couldn't save changes\");\r\n        }\r\n        this.clearProfileCache();\r\n        localStorage.setItem('user', JSON.stringify({\r\n          firstName: userData.firstName,\r\n          lastName: userData.lastName,\r\n          email: userData.emailAddress,\r\n          note: userData.affiliation,\r\n        }));\r\n      });\r\n  },\r\n};\r\n\r\nexport default ProfileService;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Avatar from '@mui/material/Avatar';\r\n\r\nimport ProfileImageUploadDialog from 'components/general/upload/ProfileImageUploadDialog';\r\nimport styles from './profileImage.module.css';\r\n\r\nimport stringToColor from 'shared/utils/stringColor';\r\nimport ProfileService from 'shared/services/Profile.service';\r\nimport { useAuth } from 'shared/context/authContext';\r\n\r\nfunction ProfileImage({ sizePixels, editable = false, overrideProfileImage = null }) {\r\n  const [user, setUser] = useAuth();\r\n  async function loadUser() {\r\n    setUser(await ProfileService.getProfile());\r\n  }\r\n  useEffect(loadUser, []);\r\n\r\n  const [uploadDialogOpen, setUploadDialogOpen] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={styles.profileImage} // TODO: load actual image\r\n        style={{\r\n          height: `${sizePixels}px`,\r\n          width: `${sizePixels}px`,\r\n        }}\r\n      >\r\n        <Avatar\r\n          src={overrideProfileImage || user.avatarUrl}\r\n          alt={`${user.firstName} ${user.lastName}`}\r\n          sx={{\r\n            backgroundColor: stringToColor(`${user.firstName} ${user.lastName}`),\r\n            width: sizePixels,\r\n            height: sizePixels,\r\n          }}\r\n        >\r\n          {(user.firstName || '?')[0]}\r\n        </Avatar>\r\n        {editable && (\r\n          <div\r\n            className={styles.editButton}\r\n            onClick={() => setUploadDialogOpen(true)}\r\n            role=\"button\"\r\n            onKeyPress={() => setUploadDialogOpen(true)}\r\n            tabIndex={0}\r\n          >\r\n            <span>Edit</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {uploadDialogOpen && (\r\n        <ProfileImageUploadDialog\r\n          open={uploadDialogOpen}\r\n          onClose={() => {\r\n            setUploadDialogOpen(false);\r\n            loadUser();\r\n          }}\r\n          onChange={(newUrl) => {\r\n            // update without reload\r\n            user.avatarUrl = newUrl;\r\n            setUser(user);\r\n          }}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ProfileImage;\r\n","import {\r\n  Box, IconButton, Typography, Drawer, List, Avatar,\r\n} from '@mui/material';\r\nimport ListIcon from '@mui/icons-material/List';\r\nimport { Link, useHistory } from 'react-router-dom';\r\n\r\nimport logo from 'assets/logo.svg';\r\nimport { colors } from 'shared/theme/colors';\r\nimport {\r\n  useEffect, useRef, useState, React,\r\n} from 'react';\r\n\r\nimport { useAuth } from 'shared/context/authContext';\r\nimport ProfileImage from 'components/ProfileImage';\r\n\r\n// In styled(), we cannot use different width to fix different resolution\r\n// we have to use sx\r\nfunction Appbar(props) {\r\n  return (\r\n    <Box {...props} sx={{\r\n      width: { xs: \"90%\", sm: \"90%\", md: \"61.8%\", lg: \"61.8%\", xl: \"61.8%\" },\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      justifyContent: \"space-between\",\r\n      alignItems: \"center\",\r\n      padding: \"0.8em\",\r\n      margin: \"auto\",\r\n      position: \"relative\"\r\n    }}></Box>\r\n  )\r\n}\r\n\r\nfunction Leftbar(props) {\r\n  return (\r\n    <Box\r\n      {...props}\r\n      sx={{\r\n        width: {\r\n          xs: '100%', sm: '500px', md: '450px', lg: '650px', xl: '664px',\r\n        },\r\n        display: {\r\n          xs: 'none', sm: 'flex', md: 'flex', lg: 'flex', xl: 'flex',\r\n        },\r\n        flexDirection: 'row',\r\n        flexWrap: 'warp',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\n// the DrawerBar will be displayed, if the screen is small, otherwise the Leftbar will be displayed\r\nfunction DrawerBar({ open, setOpen, executeScroll }) {\r\n  return (\r\n    <Box\r\n      sx={{\r\n        zIndex: '1',\r\n        width: '40%',\r\n        display: {\r\n          xs: 'flex', sm: 'none', md: 'none', lg: 'none', xl: 'none',\r\n        },\r\n        flexDirection: 'row',\r\n        flexWrap: 'warp',\r\n        justifyContent: 'left',\r\n        alignItems: 'center',\r\n        gap: '7%',\r\n      }}\r\n    >\r\n      <LinkBox to=\"/\" sx={{ display: 'flex', alignItems: 'center', gap: '0.7em' }}>\r\n        <IconButton\r\n          disableRipple\r\n        >\r\n          <img width={50} alt=\"logo\" src={logo} />\r\n        </IconButton>\r\n      </LinkBox>\r\n\r\n      <Box sx={{\r\n        position: 'relative', width: '24px', height: '24px', borderRadius: '5px', bgcolor: colors.primary[400],\r\n      }}\r\n      >\r\n        <ListIcon\r\n          onClick={() => setOpen(!open)}\r\n          sx={{\r\n            position: 'absolute', top: '4px', left: '4px', width: '16px', height: '16px', color: 'white',\r\n          }}\r\n        />\r\n\r\n        <Drawer open={open} anchor=\"bottom\" onClose={() => setOpen(false)}>\r\n          <Box sx={{\r\n            width: '100vw', height: '25vh', bgcolor: 'white', display: 'flex', flexDirection: 'column', justifyContent: 'space-evenly', alignItems: 'center',\r\n          }}\r\n          >\r\n            <Box onClick={()=>{}}> {/* TODO: Here currently, fixing the links in the drawer */}\r\n              <Link style={{ textDecoration:\"none\" }} to={{pathname: \"/\", state: { onGuideClicked: true }}}>\r\n                <DrawerNavlink>\r\n                  Quick Guide\r\n                </DrawerNavlink>\r\n              </Link>\r\n            </Box>\r\n            <LinkBox to=\"/references\"><DrawerNavlink>References</DrawerNavlink></LinkBox>\r\n            <DrawerNavlink onClick={() => window.open('https://archmap-docu.readthedocs.io/')}>Docs</DrawerNavlink>\r\n            <Box onClick={executeScroll} sx={{ cursor: 'pointer' }}><DrawerNavlink>Contact</DrawerNavlink></Box>\r\n          </Box>\r\n        </Drawer>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction Rightbar(props) {\r\n  return (\r\n    <Box\r\n      {...props}\r\n      sx={{\r\n        width: {\r\n          xs: '50%', sm: '216px', md: '166px', lg: '222px', xl: '284px',\r\n        },\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n        justifyContent: 'right',\r\n        gap: '1em',\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\nfunction Navlink(props) {\r\n  const { fontWeight = '425', main } = props;\r\n\r\n  return (\r\n    <Box {...props}>\r\n      <Typography\r\n        {...props}\r\n        sx={{\r\n          fontWeight,\r\n          fontSize: main ? {\r\n            xs: '0.6em', sm: '0.8em', md: '0.8em', lg: '1.2em', xl: '1.2em',\r\n          } : {\r\n            xs: '0.4em', sm: '0.6em', md: '0.6em', lg: '1em', xl: '1em',\r\n          },\r\n          color: 'white',\r\n          ':hover': {\r\n            color: colors.primary[400],\r\n          },\r\n        }}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction DrawerNavlink(props) {\r\n  return (\r\n    <Box {...props}>\r\n      <Typography\r\n        textAlign=\"center\"\r\n        {...props}\r\n        sx={{\r\n          fontWeight: 'bold',\r\n          fontSize: '1em',\r\n          color: 'black',\r\n          ':hover': {\r\n            color: colors.primary[400],\r\n          },\r\n        }}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction Login(props) {\r\n  return (\r\n    <Box\r\n      {...props}\r\n      sx={{\r\n        borderRadius: '10px',\r\n        padding: '8px',\r\n        cursor: 'pointer',\r\n      }}\r\n    >\r\n      <Typography\r\n        {...props}\r\n        sx={{\r\n          fontWeight: 'bold',\r\n          fontSize: {\r\n            xs: '0.6em', sm: '0.8em', md: '0.8em', lg: '1.2em', xl: '1.2em',\r\n          },\r\n          color: 'white',\r\n          ':hover': {\r\n            color: colors.primary[400],\r\n            textDecoration: 'underline',\r\n          },\r\n        }}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction Signup(props) {\r\n  return (\r\n    <Box\r\n      {...props}\r\n      sx={{\r\n        cursor: 'pointer',\r\n        borderRadius: '10px',\r\n        border: '2px solid white',\r\n        padding: '8px',\r\n        ':hover': {\r\n          border: `2px solid ${colors.primary[400]}`,\r\n          color: colors.primary[400],\r\n        },\r\n      }}\r\n    >\r\n      <Typography\r\n        {...props}\r\n        sx={{\r\n          fontWeight: 'bold',\r\n          fontSize: {\r\n            xs: '0.6em', sm: '0.8em', md: '0.8em', lg: '1.2em', xl: '1.2em',\r\n          },\r\n          color: 'white',\r\n          ':hover': {\r\n            color: colors.primary[400],\r\n            textDecoration: 'underline',\r\n          },\r\n        }}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction LinkBox(props) {\r\n  return (\r\n    <Box {...props} component={Link} style={{ textDecoration: 'none' }} />\r\n  );\r\n}\r\n\r\nexport default function Navbar({ \r\n  backgroundColor,\r\n  onLoginClicked, \r\n  onSignUpClicked,\r\n  onGuideClicked,\r\n  executeScroll, \r\n  setNavbarHeight,\r\n  position,\r\n}) {\r\n  const [user, setUser] = useAuth();\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const history = useHistory();\r\n\r\n  function handleClickContactUsInDrawer() {\r\n    setDrawerOpen(false);\r\n    if (position === 'fixed') executeScroll();\r\n  }\r\n\r\n  // we get the ref of the box that contains the Navbar here\r\n  const boxRef = useRef();\r\n\r\n  useEffect(() => {\r\n    // use the set function from Home page to set the height, so that we can use it later\r\n    if (position === 'fixed') setNavbarHeight(boxRef.current.clientHeight);\r\n  });\r\n\r\n  return (\r\n    <Box ref={boxRef} sx={{width: \"100%\", bgcolor: backgroundColor ? backgroundColor : colors.primary[800], position: position, zIndex: \"10\"}}>\r\n      <Appbar>\r\n        <DrawerBar\r\n          open={drawerOpen}\r\n          setOpen={setDrawerOpen}\r\n          executeScroll={handleClickContactUsInDrawer}\r\n        />\r\n        <Leftbar>\r\n          <LinkBox to=\"/\" onClick={()=>window.scrollTo(0,0)} sx={{ display: 'flex', alignItems: 'center', gap: '0.7em' }}>\r\n            <IconButton\r\n              disableRipple\r\n              sx={{\r\n                bgcolor: '',\r\n                ':hover': { transform: 'scale(1.1)' },\r\n              }}\r\n            >\r\n              <img width={50} alt=\"logo\" src={logo} />\r\n            </IconButton>\r\n            <Navlink fontWeight=\"bold\" fontSize=\"20px\">archmap.bio</Navlink>\r\n          </LinkBox>\r\n          <LinkBox onClick={onGuideClicked}>\r\n            <Link style={{ textDecoration:\"none\" }} to={{pathname: \"/\", state: { onGuideClicked: true }}}>\r\n              <Navlink>Quick Guide</Navlink>\r\n            </Link>\r\n          </LinkBox>\r\n          <LinkBox to=\"/genemapper\"><Navlink>Map</Navlink></LinkBox>\r\n          <LinkBox to=\"/references\"><Navlink>References</Navlink></LinkBox>\r\n          <Box sx={{ cursor: 'pointer' }} onClick={() => window.open('https://archmap-docu.readthedocs.io/')}><Navlink>Docs</Navlink></Box>\r\n          {/* The about page is removed for now because it isn't up-to-date */}\r\n          {/* <LinkBox to=\"/about\"><Navlink>About</Navlink></LinkBox> */}\r\n          <Box sx={{ cursor: 'pointer' }} onClick={executeScroll}><Navlink>Contact</Navlink></Box>\r\n        </Leftbar>\r\n        <Rightbar>\r\n          {!user && <Login onClick={onLoginClicked}>Log In</Login>}\r\n          {!user && <Signup onClick={onSignUpClicked}>Sign Up</Signup>}\r\n          {\r\n              user\r\n              && (\r\n              <IconButton onClick={() => history.push('/')}>\r\n                {/* <Avatar alt={user.firstName} src={UserProfileImage} /> */}\r\n                <ProfileImage sizePixels={40} />\r\n              </IconButton>\r\n              )\r\n            }\r\n        </Rightbar>\r\n      </Appbar>\r\n    </Box>\r\n  );\r\n}\r\n","/* eslint-disable */\r\nimport { Box, Typography, Link } from \"@mui/material\";\r\nimport { colors } from 'shared/theme/colors';\r\nimport CustomButton from \"components/CustomButton\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst WindowiOS = ({ onGuideClick, backgroundImageLoaded }) => {\r\n  const history = useHistory()\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        width: { xs: \"90%\", sm: \"90%\", md: \"61.8%\", lg: \"61.8%\", xl: \"61.8%\" },\r\n        margin: \"auto\",\r\n        color: \"white\",\r\n        p: \"0.7em\",\r\n      }}\r\n    >\r\n      <Box sx={{ p: { xs: \"1em 1em\", sm: \"1em 4em\", md: \"1em 4em\", lg: \"1em 4em\", xl: \"1em 4em\", textAlign: 'center' }, borderWidth: \"1px\", borderRadius: \"20px\" }}>\r\n        <Box sx={{ backdropFilter: backgroundImageLoaded ? \"blur(5px)\" : '', borderRadius: '20px', textAlign: \"center\", padding: '10px' }}>\r\n          <Typography fontSize={{ xs: \"1.7rem\", sm: \"2.3rem\", md: \"2.1rem\", lg: \"3.1rem\", xl: \"3.1rem\" }} fontWeight=\"bold\">\r\n            Single-Cell Reference Mapping\r\n          </Typography>\r\n          <Typography fontSize=\"1.2rem\" fontWeight=\"light\" color=\"white\" marginTop='10px' marginBottom='20px'>\r\n            Reference-Based Analysis of Single-Cell Omics Data Powered by scArches\r\n          </Typography>\r\n        </Box>\r\n        <Box sx={{ display: 'inline-block', borderRadius: '20px', margin: \"3em 2em 2em 2em\" }}>\r\n          <CustomButton sx={{ margin: '10px'}} onClick={() => history.push('/genemapper')} type=\"primary\">\r\n            <Typography fontSize=\"17px\" fontWeight=\"400\" >\r\n              Get started\r\n            </Typography>\r\n          </CustomButton>\r\n          <CustomButton\r\n            onClick={() => onGuideClick()}\r\n            sx={{ margin: '10px' }}\r\n            type=\"primary2\">\r\n            <Typography>Quick Guide</Typography>\r\n          </CustomButton>\r\n        </Box>\r\n\r\n        {/* commented out part below is about the partners */}\r\n        {/* DIVIDER */}\r\n        {/* <Box sx={{ marginTop: \"3em\", display: \"flex\", flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n          <Box sx={{ height: \"1px\", width: { xs: \"25%\", sm: \"37%\", md: \"35%\", lg: \"40%\", xl: \"40%\" }, backgroundColor: \"rgba(255,255,255, 0.5)\" }} />\r\n          <Typography fontSize={{ xs: \"0.6em\", sm: \"1em\", md: \"1em\", lg: \"1em\", xl: \"1em\" }} >Our partners</Typography>\r\n          <Box sx={{ height: \"1px\", width: { xs: \"25%\", sm: \"37%\", md: \"35%\", lg: \"40%\", xl: \"40%\" }, backgroundColor: \"rgba(255,255,255, 0.5)\" }} />\r\n        </Box> */}\r\n      </Box>\r\n      {/* BUTTON PLACEHOLDER UNTIL WE HAVE A BUTTON DESIGN */}\r\n      {/* <Box\r\n        sx={{\r\n          display: \"flex\",\r\n          flexDirection: { xs: \"column\", sm: \"row\", md: \"row\", lg: \"row\", xl: \"row\" },\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          width: \"80%\",\r\n          margin: \"auto\",\r\n          p: \"1em 1em 2em 1em\"\r\n        }}\r\n      > */}\r\n      {/* <Box sx={{ margin: { xs: \"2em 2em\", sm: \"0em\", md: \"0em\", lg: \"0em\", xl: \"0em\" } }} >\r\n          <img src={rostlab} alt=\"ROSTLAB\" style={{ width: \"10em\", height: \"auto\" }} />\r\n        </Box> */}\r\n      {/* <Box sx={{ margin: { xs: \"2em 2em\", sm: \"0em\", md: \"0em\", lg: \"0em\", xl: \"0em\" } }} >\r\n          <img src={helmholtz} alt=\"HELMHOLTZ\" style={{ width: \"10em\", height: \"auto\" }} />\r\n        </Box> */}\r\n      {/* <Box sx={{ margin: { xs: \"2em 2em\", sm: \"0em\", md: \"0em\", lg: \"0em\", xl: \"0em\" } }} >\r\n          <img src={tum} alt=\"TUM\" style={{ width: \"5em\", height: \"auto\" }} />\r\n        </Box> */}\r\n      {/* </Box> */}\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default WindowiOS","/* eslint-disable */\r\n\r\nimport { Box, IconButton, Typography } from \"@mui/material\"\r\nimport CopyrightIcon from '@mui/icons-material/Copyright';\r\nimport { Link } from \"react-router-dom\"\r\n\r\nimport { colors } from \"shared/theme/colors\";\r\nimport logo from 'assets/logo.svg';\r\n\r\nfunction Footbar(props) {\r\n  return (\r\n    <Box {...props} sx={{\r\n      margin: \"auto\",\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      flexWrap: \"warp\",\r\n      justifyContent: \"space-between\",\r\n      alignItems: \"center\"\r\n    }}\r\n    ></Box>\r\n  )\r\n}\r\n\r\nfunction Navlink(props) {\r\n  return (\r\n    <Box {...props}>\r\n      <Typography {...props} sx={{\r\n        fontWeight: \"bold\",\r\n        fontSize: { xs: \"0.6em\", sm: \"0.8em\", md: \"0.8em\", lg: \"1.2em\", xl: \"1.2em\" },\r\n        color: \"black\",\r\n        \":hover\": {\r\n          color: colors.primary[400]\r\n        }\r\n      }}\r\n      ></Typography>\r\n    </Box>\r\n  )\r\n}\r\n\r\nfunction LinkBox(props) {\r\n  return (\r\n    <Box {...props} component={Link} style={{ textDecoration: \"none\" }}></Box>\r\n  )\r\n}\r\n\r\nexport default function Footer({ sx }) {\r\n  return (\r\n    <Box\r\n      sx={{\r\n        position: \"relative\",\r\n        bgcolor: colors.neutral[200],\r\n        width: \"100%\",\r\n        height: \"40px\",\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        padding: \"10px\",\r\n        ...sx\r\n      }}\r\n    >\r\n      <Box sx={{display: \"flex\", flexDirection: \"row\", alignItems: \"center\", gap: \"15px\", alignSelf: \"center\"}}>\r\n      <Box sx={{ display: \"flex\", flexDirection: \"row\", alignItems: \"center\" }} >\r\n        <Typography fontSize=\"12px\" fontWeight=\"bold\" > Copyright 2022</Typography>\r\n        <Typography fontSize=\"12px\" sx={{ margin: '0 4px' }}> - </Typography>\r\n        <LinkBox to=\"/legalnotice\" style={{ textDecoration: \"none\" }}>\r\n          <Typography fontSize=\"12px\" color=\"black\">Legal Notice</Typography>\r\n        </LinkBox>\r\n        <Typography fontSize=\"12px\" sx={{ margin: '0 4px' }}> - </Typography>\r\n        <LinkBox to=\"/privacy\" style={{ textDecoration: \"none\" }}>\r\n          <Typography fontSize=\"12px\" color=\"black\">Privacy Policy</Typography>\r\n        </LinkBox>\r\n      </Box>\r\n      </Box>\r\n    </Box>\r\n  )\r\n}\r\n","import * as React from 'react';\r\nimport Box from '@mui/material/Box';\r\nimport TextField from '@mui/material/TextField';\r\nimport { colors } from 'shared/theme/colors';\r\n\r\n/**\r\n * \r\n * Input \r\n * Props: Most of MUI TextField props..\r\n * @param {string} helperText - The helper text that is displayed under the input\r\n * @param {string} placeholder - Placeholder of input\r\n * @param {boolean} errorHandler - Error handler (true | false)\r\n * @param {boolean} disabledHandler - Disabled handler (true | false)\r\n * @param {boolean} isRequired - The input is required or not (true | false)\r\n * @param {string} defaultValue - Default value of input\r\n * @param {boolean} multiline - The Input is multiline or not. (true | false)\r\n * @param {function} onChangeEvent - The onChange handler function\r\n * @param {string} label - Label of input\r\n * @param {number} maxLength - Maximum length of input Default:40\r\n * @param {string} type - Type of input Default: 'text'\r\n * \r\n * Example usage\r\n * Import Input to any component, see below examples:\r\n * const [name, setName] = useState('');\r\n * <Input isRequired onChangeEvent={setName} disabledHandler={false} />\r\n * <Input isRequired onChangeEvent={setName} disabledHandler={false} />\r\n * <Input helperText=\"Incorrect Output\" errorHandler isRequired\r\n * onChangeEvent={setName} disabledHandler={false} />\r\n * For Multiline\r\n * <Input isRequired maxLength={120} multiline disabledHandler={false} />\r\n */\r\nconst Input = (props) => { \r\n\r\n  const {id,helperText, placeholder, errorHandler, disabledHandler, isRequired=false, defaultValue, value, multiline=false, onChangeEvent=null, onBlurEvent=null, onFocusEvent=null, label='Required', maxLength=40, type='text'} = props\r\n  return (\r\n  <Box\r\n    component=\"form\"\r\n    sx={{\r\n      '& .MuiTextField-root': { m: 1, width: '100%' },\r\n      '& .MuiFormLabel-asterisk': { color: colors.error.main },\r\n    }}\r\n    noValidate\r\n  >\r\n    <TextField\r\n      error={errorHandler}\r\n      required={isRequired}\r\n      disabled={disabledHandler}\r\n      placeholder={placeholder}\r\n      defaultValue={defaultValue}\r\n      inputProps={{ maxLength }}\r\n      multiline={multiline}\r\n      type={type}\r\n      value={value}\r\n      id={id}\r\n      rows={4}\r\n      label={label}\r\n      helperText={helperText}\r\n      variant=\"standard\"\r\n      onChange={(e) => (onChangeEvent !== null ? onChangeEvent(e) : null)}\r\n      onBlur={(e) => (onBlurEvent !== null ? onBlurEvent(e) : null)}\r\n      onFocus={(e) => (onFocusEvent !== null ? onFocusEvent(e) : null)}\r\n    />\r\n  </Box>\r\n)};\r\n\r\nexport default Input;\r\n","import { createContext, useState } from \"react\";\r\n\r\nconst LoginContext = createContext()\r\nLoginContext.displayName = \"LoginContext\"\r\n\r\nconst LoginProvider = (props) => {\r\n  const [isLoginFormVisible, setLoginFormVisible] = useState(false);\r\n  const [isRegistrationFormVisible, setRegistrationFormVisible] = useState(false);\r\n  const [isPasswordForgetFormVisible, setPasswordForgetFormVisible] = useState(false);\r\n\r\n  const onLoginFormClosed = () => {\r\n    setLoginFormVisible(false);\r\n  }\r\n\r\n  const onRegistrationFormClosed = () => {\r\n    setRegistrationFormVisible(false);\r\n  }\r\n\r\n  const onForgetPasswordClosed = () => {\r\n    setPasswordForgetFormVisible(false);\r\n  }\r\n\r\n  const value = {\r\n    loginVisible: isLoginFormVisible,\r\n    registerVisible: isRegistrationFormVisible,\r\n    forgetVisible: isPasswordForgetFormVisible,\r\n    loginClose: onLoginFormClosed,\r\n    registerClose: onRegistrationFormClosed,\r\n    forgetClose: onForgetPasswordClosed,\r\n    switchRegister: setRegistrationFormVisible,\r\n    switchLogin: setLoginFormVisible,\r\n    switchForget: setPasswordForgetFormVisible\r\n  }\r\n\r\n  return <LoginContext.Provider value={value} {...props}/>\r\n}\r\n\r\nexport { LoginContext };\r\nexport default LoginProvider;","/* eslint-disable */\r\nimport React, { useCallback, useContext, useState } from \"react\";\r\nimport {\r\n  Modal,\r\n  Box,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  Avatar,\r\n  Snackbar,\r\n  Alert,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport validator from \"validator\";\r\nimport { BACKEND_ADDRESS } from \"../../shared/utils/common/constants\";\r\nimport styles from \"./passwordforgetform.module.css\";\r\nimport logo from \"../../assets/logo.svg\";\r\nimport Input from \"../Input/Input\";\r\nimport CustomButton from \"components/CustomButton\";\r\nimport { LoginContext } from \"shared/context/loginContext\";\r\n\r\nfunction PasswordForgetForm(props) {\r\n  const { forgetClose: close, forgetVisible: visible } = useContext(LoginContext);\r\n  const [errors, setErrors] = useState({});\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [email, setEmail] = useState();\r\n  const [isSnackbarVisible, setSnackbarVisible] = useState(false);\r\n\r\n  const history = useHistory();\r\n\r\n  const boxStyle = {\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    bgcolor: \"background.paper\",\r\n    boxShadow: 24,\r\n    width: 340,\r\n    p: 4,\r\n    borderRadius: 3,\r\n  };\r\n\r\n  const onClose = useCallback(() => {\r\n    setEmail(\"\");\r\n    setErrors({});\r\n    close();\r\n  }, [props]);\r\n\r\n  function onSendClick() {\r\n    if (!validateInput()) {\r\n      return;\r\n    }\r\n\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        email,\r\n      }),\r\n    };\r\n    fetch(`${BACKEND_ADDRESS}/password_reset`, requestOptions).then(\r\n      (response) => {\r\n        if (response.status == 404) {\r\n          setErrors({ response: \"User not found\" });\r\n        }\r\n        if (response.status == 400) {\r\n          setErrors({ response: response.statusText });\r\n        } else {\r\n        }\r\n        setSnackbarVisible(true);\r\n      }\r\n    );\r\n    \r\n    //props.onClick()\r\n    //switchForm(true);\r\n\r\n    // history.push('/password_reset');\r\n  }\r\n\r\n  function onSnackbarClose() {\r\n    setSnackbarVisible(false);\r\n    setErrors({});\r\n  }\r\n\r\n  function validateInput() {\r\n    if (email == null) {\r\n      setErrors({ ...errors, email: \"Empty input!\" });\r\n      return false;\r\n    }\r\n\r\n    if (!validator.isEmail(email)) {\r\n      setErrors({ ...errors, email: \"A valid e-mail is required!\" });\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Modal\r\n        onClose={close}\r\n        open={visible}\r\n        aria-labelledby=\"simple-modal-title\"\r\n        aria-describedby=\"simple-modal-description\"\r\n      >\r\n        <Box sx={boxStyle}>\r\n          <Grid>\r\n            <Grid container direction=\"row\" justifyContent=\"center\">\r\n              <Grid xs item />\r\n              <Grid align=\"center\">\r\n                <Avatar src={logo} sx={{ width: 72, height: 72 }} />\r\n                <h2>Forgot Password</h2>\r\n              </Grid>\r\n              <Grid xs align=\"right\" item>\r\n                <CloseIcon onClick={onClose} className={styles.closeImg} />\r\n              </Grid>\r\n            </Grid>\r\n            <Input\r\n              id=\"email\"\r\n              type=\"email\"\r\n              error={!!errors.email}\r\n              helperText={errors.email}\r\n              label=\"E-mail\"\r\n              placeholder=\"Enter e-mail address\"\r\n              isRequired={true}\r\n              onChangeEvent={(e) => setEmail(e.target.value)}\r\n            />\r\n            <Box\r\n              sx={{ width: \"100%\", display: \"flex\", justifyContent: \"center\"}}\r\n            >\r\n              <CustomButton type=\"primary\" onClick={onSendClick}>\r\n                <Typography>Send</Typography>\r\n              </CustomButton>\r\n            </Box>\r\n          </Grid>\r\n        </Box>\r\n      </Modal>\r\n\r\n      <Snackbar\r\n        open={isSnackbarVisible}\r\n        autoHideDuration={5000}\r\n        onClose={onSnackbarClose}\r\n      >\r\n        <Alert\r\n          severity={errors.response ? \"error\" : \"success\"}\r\n          sx={{ width: \"100%\" }}\r\n          onClose={onSnackbarClose}\r\n        >\r\n          {errors.response\r\n            ? errors.response\r\n            : \"Password reset email has been sent! Please check your e-mail!\"}\r\n        </Alert>\r\n      </Snackbar>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PasswordForgetForm;","/* eslint-disable */\r\nimport {\r\n  Alert,\r\n  Box,\r\n  Checkbox,\r\n  FormControlLabel,\r\n  Grid,\r\n  Snackbar,\r\n  Typography,\r\n  Link,\r\n} from \"@mui/material\";\r\nimport React, { useCallback, useState, useEffect, useContext } from \"react\";\r\nimport validator from \"validator\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport logo from \"assets/logo.svg\";\r\nimport styles from \"./loginform.module.css\";\r\nimport { BACKEND_ADDRESS } from \"shared/utils/common/constants\";\r\nimport PasswordForgetForm from \"../PasswordForgetForm\";\r\nimport { useAuth } from \"shared/context/authContext\";\r\nimport { Modal, ModalTitle } from \"components/Modal\";\r\nimport Input from \"components/Input/Input\";\r\nimport CustomButton from \"components/CustomButton\";\r\nimport { colors } from \"shared/theme/colors\";\r\nimport { LoginContext } from \"shared/context/loginContext\";\r\n\r\nfunction LoginForm(props) {\r\n  const [, setUser] = useAuth();\r\n\r\n  const [loginDetails, setLoginDetails] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n    remember: false,\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [isSnackbarVisible, setSnackbarVisible] = useState(false);\r\n\r\n  const {\r\n    loginClose: onClose,\r\n    loginVisible: visible,\r\n    switchRegister: switchForm,\r\n    switchForget: onForgetPassword,\r\n  } = useContext(LoginContext);\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (\r\n      localStorage.getItem(\"email\") &&\r\n      localStorage.getItem(\"email\").length !== 0\r\n    ) {\r\n      setLoginDetails({ email: localStorage.getItem(\"email\") });\r\n    }\r\n  }, []);\r\n\r\n  const clearForm = () => {\r\n    setLoginDetails({\r\n      email: \"\",\r\n      password: \"\",\r\n      remember: false,\r\n    });\r\n    setErrors({});\r\n    setLoading(false);\r\n    onClose();\r\n  };\r\n\r\n  const handleTextChange = useCallback(\r\n    (e) => {\r\n      setLoginDetails((prevState) => ({\r\n        ...prevState,\r\n        [e.target.id]: e.target.value,\r\n      }));\r\n    },\r\n    [setLoginDetails]\r\n  );\r\n\r\n  const handleCheckedChange = useCallback(\r\n    (e) => {\r\n      setLoginDetails((prevState) => ({\r\n        ...prevState,\r\n        [e.target.id]: e.target.checked,\r\n      }));\r\n    },\r\n    [setLoginDetails]\r\n  );\r\n\r\n  function validateInput() {\r\n    let currentErrors = {};\r\n    if (!validator.isEmail(loginDetails.email)) {\r\n      currentErrors = {\r\n        ...currentErrors,\r\n        email: \"A valid e-mail is required!\",\r\n      };\r\n    }\r\n    if (loginDetails.password === \"\") {\r\n      currentErrors = { ...currentErrors, password: \"Password is required!\" };\r\n    }\r\n    setErrors(currentErrors);\r\n    return !Object.keys(currentErrors).length;\r\n  }\r\n\r\n  async function onSuccessfulLogin(data) {\r\n    localStorage.setItem(\"jwt\", data.jwt);\r\n    localStorage.setItem(\"user\", JSON.stringify(data.user));\r\n    if (loginDetails.remember) {\r\n      localStorage.setItem(\"email\", loginDetails.email);\r\n    }\r\n    onClose();\r\n    history.go(0);\r\n    await setUser(data.user);\r\n  }\r\n\r\n  function onFailedLogin(code) {\r\n    switch (code) {\r\n      case 401:\r\n        setErrors((prevState) => ({\r\n          ...prevState,\r\n          response: \"Wrong credentials!\",\r\n        }));\r\n        break;\r\n      case 404:\r\n        setErrors((prevState) => ({\r\n          ...prevState,\r\n          response: \"User not found!\",\r\n        }));\r\n        break;\r\n      default:\r\n        setErrors((prevState) => ({\r\n          ...prevState,\r\n          response: \"Unknown error, please try again later!\",\r\n        }));\r\n        break;\r\n    }\r\n  }\r\n\r\n  // Login process\r\n  const doLogin = useCallback(() => {\r\n    if (!validateInput()) {\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    // server communication\r\n    const loginRequest = {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer\",\r\n      },\r\n      body: JSON.stringify({\r\n        email: loginDetails.email,\r\n        password: loginDetails.password,\r\n      }),\r\n    };\r\n\r\n    fetch(`${BACKEND_ADDRESS}/auth`, loginRequest)\r\n      .then((response) => {\r\n        setLoading(false);\r\n        setSnackbarVisible(true);\r\n        if (response.status !== 200) {\r\n          onFailedLogin(response.status);\r\n          return null;\r\n        }\r\n        return response.json();\r\n      })\r\n      .then(async (data) => {\r\n        if (data != null) {\r\n          await onSuccessfulLogin(data);\r\n        }\r\n      });\r\n\r\n    history.push(\"/\");\r\n  }, [setLoading, loginDetails, setErrors]);\r\n\r\n  return (\r\n    <div>\r\n      <Modal setOpen={(o) => !o && onClose()} isOpen={visible}>\r\n        <ModalTitle>Log in</ModalTitle>\r\n        <Box>\r\n          <Grid sx={{ pr: \"1em\" }}>\r\n            <Input\r\n              id=\"email\"\r\n              type=\"email\"\r\n              defaultValue={localStorage.getItem(\"email\")}\r\n              error={!!errors.email}\r\n              helperText={errors.email}\r\n              label=\"E-mail\"\r\n              placeholder=\"Enter e-mail address\"\r\n              isRequired={true}\r\n              onChangeEvent={handleTextChange}\r\n            />\r\n            <Input\r\n              id=\"password\"\r\n              error={!!errors.password}\r\n              helperText={errors.password}\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              placeholder=\"Enter password\"\r\n              isRequired={true}\r\n              onChangeEvent={handleTextChange}\r\n            />\r\n            <Box\r\n              sx={{\r\n                paddingLeft: 1,\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                gap: \"4   px\",\r\n              }}\r\n            >\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    id=\"remember\"\r\n                    sx={{\r\n                      color: colors.primary[400],\r\n                      \"& .MuiSvgIcon-root\": { color: colors.primary[400] },\r\n                    }}\r\n                    onChange={handleCheckedChange}\r\n                    disableRipple\r\n                    disableFocusRipple\r\n                  />\r\n                }\r\n                label=\"Remember me\"\r\n              />\r\n              <CustomButton type=\"primary\" onClick={doLogin}>\r\n                <Typography>Sign in</Typography>\r\n              </CustomButton>\r\n              <Typography mt={1} textAlign=\"center\">\r\n                <Link\r\n                  href=\"#\"\r\n                  onClick={() => {\r\n                    onForgetPassword(true);\r\n                    clearForm();\r\n                  }}\r\n                >\r\n                  Forgot password?\r\n                </Link>\r\n              </Typography>\r\n              <Typography mt={1} textAlign=\"center\">\r\n                Don't have an account yet? Sign up{\" \"}\r\n                <Link\r\n                  href=\"#\"\r\n                  onClick={() => {\r\n                    switchForm(true);\r\n                    clearForm();\r\n                  }}\r\n                >\r\n                  here\r\n                </Link>\r\n                {\".\"}\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n        </Box>\r\n      </Modal>\r\n      <Snackbar\r\n        open={isSnackbarVisible}\r\n        autoHideDuration={10000}\r\n        onClose={() => setSnackbarVisible(false)}\r\n      >\r\n        <Alert\r\n          severity={errors.response ? \"error\" : \"success\"}\r\n          sx={{ width: \"100%\" }}\r\n          onClose={() => setSnackbarVisible(false)}\r\n        >\r\n          {errors.response ? errors.response : \"Login successful!\"}\r\n        </Alert>\r\n      </Snackbar>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginForm;\r\n","import {\r\n  Typography,\r\n  Box,\r\n  Grid,\r\n  Snackbar,\r\n  Link,\r\n  FormControlLabel,\r\n  Checkbox,\r\n  Icon,\r\n} from '@mui/material';\r\nimport React, { useCallback, useContext, useState } from 'react';\r\nimport validator from 'validator';\r\nimport { Alert } from '@mui/lab';\r\nimport { BACKEND_ADDRESS } from 'shared/utils/common/constants';\r\nimport { useAuth } from 'shared/context/authContext';\r\nimport Input from 'components/Input/Input';\r\nimport { Modal, ModalTitle } from 'components/Modal';\r\nimport CustomButton from 'components/CustomButton';\r\nimport MarkEmailReadIcon from '@mui/icons-material/MarkEmailRead';\r\nimport ChromeReaderModeIcon from '@mui/icons-material/ChromeReaderMode';\r\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport { LoginContext } from 'shared/context/loginContext';\r\n\r\nfunction RegistrationForm(props) {\r\n  const [, setUser] = useAuth();\r\n  const [userDetails, setUserDetails] = useState({\r\n    email: '',\r\n    firstname: '',\r\n    lastname: '',\r\n    affiliation: '',\r\n    password: '',\r\n    passwordAgain: '',\r\n    permissionRequested: false,\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [isSnackbarVisible, setSnackbarVisible] = useState(false);\r\n  const [checkYourEmail, setCheckYourEmail] = useState(false);\r\n  const [privacyPolicy, setPrivacyPolicy] = useState(false);\r\n\r\n  const [isAcceptedTermsSnackbar, setIsAcceptedTermsSnackbar] = useState(false);\r\n\r\n  const { registerClose: onClose, registerVisible: visible, switchLogin: switchForm } = useContext(LoginContext);\r\n\r\n  const history = useHistory();\r\n\r\n\r\n  const handleCheckboxChange = (event) => {\r\n    setUserDetails((prevState) => ({\r\n      ...prevState,\r\n      permissionRequested: event.target.checked,\r\n    }));\r\n  };\r\n\r\n\r\n  const handleTextChange = useCallback(\r\n    (e) => {\r\n      setUserDetails((prevState) => ({\r\n        ...prevState,\r\n        [e.target.id]: e.target.value,\r\n      }));\r\n    },\r\n    [setUserDetails],\r\n  );\r\n\r\n  /**\r\n   * Function for input validation.\r\n   * Validates every input given by user. \r\n   * @returns \r\n   */\r\n  function validateInput() {\r\n    let currentErrors = {};\r\n    \r\n    // email input validation\r\n    if (!validator.isEmail(userDetails.email)) {\r\n      currentErrors = {\r\n        ...currentErrors,\r\n        email: 'A valid e-mail is required!',\r\n      };\r\n    }\r\n\r\n    // first name input validation\r\n    if (userDetails.firstname === '') {\r\n      currentErrors = {\r\n        ...currentErrors,\r\n        firstname: 'Please enter your first name!',\r\n      };\r\n    }\r\n\r\n    // last name input validation\r\n    if (userDetails.lastname === '') {\r\n      currentErrors = {\r\n        ...currentErrors,\r\n        lastname: 'Please enter your last name!',\r\n      };\r\n    }\r\n\r\n    // note input validation. \r\n    // Verificationt that the note is not \"temporary user\"\r\n    // so that the user is not automatically deleted after 24 hours\r\n    if(userDetails.note === 'temporary_user'){\r\n      currentErrors = { ...currentErrors, note: 'Invalidn Affiliation'};\r\n    }\r\n\r\n    // password input validation\r\n    if (userDetails.password === '') {\r\n      currentErrors = { ...currentErrors, password: 'Password is required!' };\r\n    }\r\n\r\n    // repeat password input validation\r\n    if (userDetails.passwordAgain !== userDetails.password) {\r\n      currentErrors = {\r\n        ...currentErrors,\r\n        passwordAgain: 'The passwords must match!',\r\n      };\r\n    }\r\n    setErrors(currentErrors);\r\n    return !Object.keys(currentErrors).length;\r\n  }\r\n\r\n  const clearForm = useCallback(() => {\r\n    setUserDetails({\r\n      email: '',\r\n      firstname: '',\r\n      lastname: '',\r\n      affiliation: '',\r\n      password: '',\r\n      passwordAgain: '',\r\n      permissionRequested: false,\r\n    });\r\n    setErrors({});\r\n    setLoading(false);\r\n    onClose();\r\n  }, [setUserDetails, setErrors, setLoading, props, setUser]);\r\n\r\n  function onSuccessfulRegistration() {\r\n    // onClose();\r\n    setSnackbarVisible(true);\r\n    setCheckYourEmail(true);\r\n    setTimeout(onClose, 5000);\r\n  }\r\n\r\n  function onFailedRegistration(response) {\r\n    switch (response.status) {\r\n      case 400:\r\n        setErrors((prevState) => ({\r\n          ...prevState,\r\n          response: 'Please check your input!',\r\n        }));\r\n        break;\r\n      case 409:\r\n        setErrors((prevState) => ({\r\n          ...prevState,\r\n          response: 'Account already exists!',\r\n        }));\r\n        break;\r\n      default:\r\n        setErrors((prevState) => ({\r\n          ...prevState,\r\n          response: 'Unknown error, please try again later!',\r\n        }));\r\n        break;\r\n    }\r\n  }\r\n\r\n  const doRegistration = useCallback(() => {\r\n    if (!validateInput()) {\r\n      console.log(errors)\r\n      console.log(\"Validation failed\")\r\n      return;\r\n    }\r\n    if (privacyPolicy === false) {\r\n      setIsAcceptedTermsSnackbar(true);\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    \r\n    \r\n    const requestOptions = {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        first_name: userDetails.firstname,\r\n        last_name: userDetails.lastname,\r\n        email: userDetails.email,\r\n        password: userDetails.password,\r\n        note: userDetails.affiliation,\r\n        permissionRequested: userDetails.permissionRequested,\r\n      }),\r\n    };\r\n    fetch(`${BACKEND_ADDRESS}/register`, requestOptions).then((response) => {\r\n      setLoading(false);\r\n      if (response.status === 200 || response.status === 201) {\r\n        onSuccessfulRegistration();\r\n      } else {\r\n        onFailedRegistration(response);\r\n      }\r\n      setSnackbarVisible(true);\r\n    });\r\n\r\n    history.push(\"/\");\r\n  }, [\r\n    userDetails,\r\n    setErrors,\r\n    setLoading,\r\n    props,\r\n    setSnackbarVisible,\r\n    setUser,\r\n    privacyPolicy,\r\n  ]);\r\n\r\n\r\n  return (\r\n    <div>\r\n      <Modal setOpen={(o) => !o && onClose()} isOpen={visible}>\r\n        {checkYourEmail === true ? (\r\n          <Modal isOpen={checkYourEmail} setOpen={(o) => !o && onClose()}>\r\n            <ModalTitle>Verify your email!</ModalTitle>\r\n            <Box\r\n              sx={{\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                rowGap: 2,\r\n                padding: 2,\r\n              }}\r\n            >\r\n              <Box sx={{ display: 'flex' }}>\r\n                <MarkEmailReadIcon color=\"primary\" />\r\n                <Typography style={{ paddingLeft: 8 }}>\r\n                  Registration Successful. We sent you a\r\n                  {' '}\r\n                  <b>confirmation email.</b>\r\n                </Typography>\r\n              </Box>\r\n              <Typography>\r\n                You can complete your registration by confirming your e-mail\r\n                address.\r\n              </Typography>\r\n            </Box>\r\n          </Modal>\r\n        ) : (\r\n          <>\r\n            <ModalTitle>Register new user</ModalTitle>\r\n            <Box sx={{ width: { md: \"400px\", xs: \"100%\" }, pr: \"1em\" }}>\r\n              <Grid sx={{ width: '90%', margin: 'auto' }}>\r\n                <Input\r\n                  id=\"email\"\r\n                  type=\"email\"\r\n                  error={!!errors.email}\r\n                  helperText={errors.email}\r\n                  label=\"E-mail\"\r\n                  placeholder=\"Enter e-mail address\"\r\n                  isRequired\r\n                  onChangeEvent={handleTextChange}\r\n                />\r\n                <Input\r\n                  id=\"firstname\"\r\n                  type=\"text\"\r\n                  error={!!errors.firstname}\r\n                  helperText={errors.firstname}\r\n                  label=\"First name\"\r\n                  placeholder=\"Enter your first name\"\r\n                  isRequired\r\n                  onChangeEvent={handleTextChange}\r\n                />\r\n                <Input\r\n                  id=\"lastname\"\r\n                  type=\"text\"\r\n                  error={!!errors.lastname}\r\n                  helperText={errors.lastname}\r\n                  label=\"Last name\"\r\n                  placeholder=\"Enter your last name\"\r\n                  isRequired\r\n                  onChangeEvent={handleTextChange}\r\n                />\r\n                <Input\r\n                  id=\"affiliation\"\r\n                  error={!!errors.affiliation}\r\n                  helperText={errors.affiliation}\r\n                  label=\"Affiliation\"\r\n                  type=\"text\"\r\n                  placeholder=\"Enter your university, company or etc.\"\r\n                  onChangeEvent={handleTextChange}\r\n                />\r\n                <Input\r\n                  id=\"password\"\r\n                  error={!!errors.password}\r\n                  helperText={errors.password}\r\n                  label=\"Password\"\r\n                  type=\"password\"\r\n                  placeholder=\"Enter password\"\r\n                  isRequired\r\n                  onChangeEvent={handleTextChange}\r\n                />\r\n                <Input\r\n                  id=\"passwordAgain\"\r\n                  error={!!errors.passwordAgain}\r\n                  helperText={errors.passwordAgain}\r\n                  label=\"Password again\"\r\n                  type=\"password\"\r\n                  placeholder=\"Enter your password again\"\r\n                  isRequired\r\n                  onChangeEvent={handleTextChange}\r\n                />\r\n                <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                  <FormControlLabel\r\n                    control={(\r\n                      <Checkbox\r\n                        id=\"remember\"\r\n                        onChange={() => setPrivacyPolicy(!privacyPolicy)}\r\n                        disableRipple\r\n                        disableFocusRipple\r\n                      />\r\n                    )}\r\n                    label=\"Accept terms and conditions\"\r\n                  />\r\n                  <Box>\r\n                    <ChromeReaderModeIcon\r\n                      sx={{ marginTop: 0.5, '&:hover': { cursor: 'pointer' } }}\r\n                      onClick={() => history.push('/privacy')}\r\n                      color=\"primary\"\r\n                    />\r\n                  </Box>\r\n                </Box>\r\n                <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                  <FormControlLabel\r\n                    control={(\r\n                      <Checkbox\r\n                        id=\"permissionRequested\"\r\n                        onChange={handleCheckboxChange}\r\n                      />\r\n                    )}\r\n                    label=\"Request for Beta feature\"\r\n                  />\r\n                  \r\n                </Box>\r\n\r\n                <Box mt={1}>\r\n                  <CustomButton\r\n                    type=\"primary\"\r\n                    sx={{ mr: 'auto', width: '100%' }}\r\n                    onClick={doRegistration}\r\n                    disabled={!privacyPolicy}\r\n                  >\r\n                    <Typography>Sign up</Typography>\r\n                  </CustomButton>\r\n                </Box>\r\n                <Typography mt={1} textAlign=\"center\">\r\n                  Already have an account? Login\r\n                  {' '}\r\n                  <Link\r\n                    href=\"#\"\r\n                    onClick={() => {\r\n                      clearForm();\r\n                      switchForm(true);\r\n                    }}\r\n                  >\r\n                    here\r\n                  </Link>\r\n                  .\r\n                </Typography>\r\n              </Grid>\r\n            </Box>\r\n          </>\r\n        )}\r\n      </Modal>\r\n      <Snackbar\r\n        open={isAcceptedTermsSnackbar}\r\n        autoHideDuration={10000}\r\n        onClose={() => setIsAcceptedTermsSnackbar(false)}\r\n      >\r\n        <Alert\r\n          severity=\"error\"\r\n          sx={{ width: '100%' }}\r\n          onClose={() => setIsAcceptedTermsSnackbar(false)}\r\n        >\r\n          {errors.response\r\n            ? errors.response\r\n            : 'You must accept terms and conditions!'}\r\n        </Alert>\r\n      </Snackbar>\r\n      {errors.response && <Snackbar\r\n        open={isSnackbarVisible}\r\n        autoHideDuration={10000}\r\n        onClose={() => setSnackbarVisible(false)}\r\n      >\r\n        <Alert\r\n          severity={'error'}\r\n          sx={{ width: '100%' }}\r\n          onClose={() => setSnackbarVisible(false)}\r\n        >\r\n          {errors.response}\r\n        </Alert>\r\n      </Snackbar>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RegistrationForm;\r\n","export default __webpack_public_path__ + \"static/media/upload.c25c0640.png\";","export default __webpack_public_path__ + \"static/media/science.ae60a04b.png\";","export default __webpack_public_path__ + \"static/media/processing.ed520e72.png\";","export default __webpack_public_path__ + \"static/media/results.24ccf56c.png\";","export default __webpack_public_path__ + \"static/media/Helmholtz_TheisLab_Naturecover_2021_blurred.2e38101f.png\";","export default __webpack_public_path__ + \"static/media/Helmholtz_TheisLab_Naturecover_2021.2fd3d815.png\";","import axiosInstance from './axiosInstance';\r\n\r\nconst CONTACT_US = 'contactus';\r\n\r\nconst ContactUsService = {\r\n  postContactForm: async ( data ) => {\r\n    await axiosInstance.post(`/${CONTACT_US}`, data)\r\n    .then((response)=>console.log(response))\r\n    .catch((error)=>console.log(error))\r\n  }\r\n};\r\n\r\nexport default ContactUsService;\r\n","import { Box, Typography, Button, Stack, TextField, TextareaAutosize, Snackbar, Alert } from \"@mui/material\";\r\nimport { useState, useRef } from \"react\";\r\nimport CustomButton from \"components/CustomButton\";\r\nimport Input from 'components/Input/Input';\r\nimport emailjs from '@emailjs/browser';\r\nimport { SERVICE_ID, TEMPLATE_ID, PUBLIC_KEY } from '../../shared/utils/common/constants';\r\nimport ContactUsService from \"shared/services/ContactUs.service\";\r\n\r\nexport default function ContactForm() {\r\n\r\n  const [data, setData] = useState({ email: \"\", firstName: \"\", lastName: \"\", subject: \"\", message: \"\" })\r\n  const [error, setError] = useState({ email: false, firstName: false, lastName: false, subject: false, message: false })\r\n  const [snackbar, setSnackbar] = useState({ open: false, type: \"error\" });\r\n  \r\n  // submit email handler\r\n  const sendEmail = () => {\r\n    // check errors and set them\r\n    let ok = true;\r\n    const newError = { ...error }\r\n    for (const type in data) {\r\n      if (data[type] === \"\") {\r\n        newError[type] = true\r\n        ok = false\r\n      }\r\n    };\r\n    setError(newError);\r\n\r\n    // send data(the whole form's content) as email\r\n    emailjs.send(SERVICE_ID, TEMPLATE_ID, data, PUBLIC_KEY)\r\n      .then((response) => {\r\n        console.log(`email sent successfully status: ${response}`)\r\n        // \"email sent succssfully\" snackbar\r\n        setSnackbar({open: true, type: \"success\"});\r\n        // reset form values\r\n        setData({ email: \"\", firstName: \"\", lastName: \"\", subject: \"\", message: \"\" });\r\n      }, (error) => {\r\n        console.log(`error occurred: ${error}`)\r\n        setSnackbar({open: true, type: \"error\"});\r\n      });\r\n  }\r\n\r\n  const onChange = (type) =>\r\n    (event) => {\r\n      setData({ ...data, [type]: event.target.value })\r\n    }\r\n\r\n  const onFocus = (type) =>\r\n    () => {\r\n      setError({ ...error, [type]: false })\r\n    }\r\n\r\n  const onBlur = (type) =>\r\n    () => {\r\n      if (data[type] === \"\") setError({ ...error, [type]: true })\r\n      else setError({ ...error, [type]: false })\r\n    }\r\n\r\n  const onClick = () => {\r\n    let ok = true\r\n    const newError = { ...error }\r\n    for (const type in data) {\r\n      if (data[type] === \"\") {\r\n        newError[type] = true\r\n        ok = false\r\n      }\r\n    }\r\n    setError(newError)\r\n    setData({ email: \"\", firstName: \"\", lastName: \"\", subject: \"\", message: \"\" })\r\n\r\n    ContactUsService.postContactForm(data)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Box sx={{\r\n      width: \"100%\",\r\n      margin: \"2em 0 0em 0\",\r\n      padding: \"2em 0em\",\r\n      boxShadow: \"0px 4px 6px rgba(0, 0, 0, 0.10), 0px 0px 1px rgba(0, 0, 0, 0.20)\",\r\n      borderRadius: \"10px\"\r\n    }}>\r\n      <Stack sx={{ width: \"80%\", margin: \"auto\" }} direction=\"column\" spacing={4}>\r\n        <Stack direction=\"row\" justifyContent=\"space-between\" spacing={2}>\r\n          <Input value={data.email} isRequired label=\"Email\" errorHandler={error.email} helperText={error.email ? \"Email cannot be empty!\" : \"\"} onChangeEvent={onChange(\"email\")} onBlurEvent={onBlur(\"email\")} onFocusEvent={onFocus(\"email\")} />\r\n          <Input value={data.firstName} isRequired label=\"First Name\" errorHandler={error.firstName} helperText={error.firstName ? \"First Name cannot be empty!\" : \"\"} onChangeEvent={onChange(\"firstName\")} onBlurEvent={onBlur(\"firstName\")} onFocusEvent={onFocus(\"firstName\")} />\r\n          <Input value={data.lastName} isRequired label=\"Last Name\" errorHandler={error.lastName} helperText={error.lastName ? \"Last Name cannot be empty!\" : \"\"} onChangeEvent={onChange(\"lastName\")} onBlurEvent={onBlur(\"lastName\")} onFocusEvent={onFocus(\"lastName\")} />\r\n        </Stack>\r\n        <Input value={data.subject} isRequired label=\"Subject\" maxLength={100} errorHandler={error.subject} helperText={error.subject ? \"Subject cannot be empty!\" : \"\"} onChangeEvent={onChange(\"subject\")} onBlurEvent={onBlur(\"subject\")} onFocusEvent={onFocus(\"subject\")} />\r\n        <Input value={data.message} isRequired label=\"Message\" multiline maxLength={1000} errorHandler={error.message} helperText={error.message ? \"Message cannot be empty!\" : \"\"} onChangeEvent={onChange(\"message\")} onBlurEvent={onBlur(\"message\")} onFocusEvent={onFocus(\"message\")} />\r\n        <Box sx={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"center\" }}>\r\n          <CustomButton onClick={sendEmail}>Send</CustomButton>\r\n        </Box>\r\n      </Stack>\r\n    </Box>\r\n    {/* Snackbar after email being sent */}\r\n    <Snackbar\r\n        open={snackbar.open}\r\n        autoHideDuration={3000}\r\n        onClose={()=>setSnackbar({...snackbar, open: false})}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        >\r\n        <Alert onClose={()=>setSnackbar({...snackbar, open: false})} severity={snackbar.type} sx={{ width: '100%' }}>\r\n        {snackbar.type === \"success\" ? 'Email sent succesfully!' : 'Error occurred. Please send again!'}\r\n        </Alert>\r\n      </Snackbar> \r\n    </>\r\n  )\r\n}","/* eslint-disable */\r\n\r\nimport { Box, Typography, Button, Stack, TextField, TextareaAutosize } from \"@mui/material\";\r\nimport UploadIcon from '@mui/icons-material/Upload';\r\nimport AutorenewIcon from '@mui/icons-material/Autorenew';\r\nimport AssignmentIcon from '@mui/icons-material/Assignment';\r\nimport CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutline';\r\nimport Navbar from \"components/NavBar\";\r\nimport WindowiOS from \"components/WindowiOS\";\r\nimport Footer from \"components/Footer\";\r\nimport LoginForm from 'components/LoginForm'\r\nimport RegistrationForm from 'components/RegistrationForm'\r\nimport { useState, useEffect, useRef, useContext } from \"react\";\r\nimport { colors } from \"shared/theme/colors\";\r\nimport graphic1 from 'assets/landing-illustrations/science.png';\r\nimport graphic2 from 'assets/landing-illustrations/upload.png';\r\nimport graphic3 from 'assets/landing-illustrations/processing.png';\r\nimport graphic4 from 'assets/landing-illustrations/results.png';\r\nimport Helmholtz_TheisLab_Naturecover_2021_Blur from 'assets/landing-illustrations/Helmholtz_TheisLab_Naturecover_2021_blurred.png';\r\nimport Helmholtz_TheisLab_Naturecover_2021 from 'assets/landing-illustrations/Helmholtz_TheisLab_Naturecover_2021.png';\r\nimport CustomButton from \"components/CustomButton\";\r\nimport Input from 'components/Input/Input'\r\nimport { Link, NavLink, useHistory, useLocation } from \"react-router-dom\";\r\nimport PasswordForgetForm from \"components/PasswordForgetForm\";\r\nimport ContactForm from 'components/ContactForm';\r\nimport { LoginContext } from \"shared/context/loginContext\";\r\n\r\nconst Home = () => {\r\n\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const [backgroundImage, setBackgroundImage] = useState(Helmholtz_TheisLab_Naturecover_2021_Blur);\r\n\r\n  const context = useContext(LoginContext)\r\n\r\n  const onLoginClicked = () => {\r\n    context.switchRegister(false)\r\n    context.switchLogin(true)\r\n  }\r\n\r\n  const onSignUpClicked = () => {\r\n    context.switchLogin(false);\r\n    context.switchRegister(true);\r\n  }\r\n\r\n  // ref for the \"Quick Guide\" section\r\n  const getStartedRef = useRef();\r\n\r\n  // scroll down function to \"Quick Guide\" section\r\n  const onGuideClicked = () => {\r\n    getStartedRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n  }\r\n\r\n  // here we get the ref of the contact us, in order to be able to scroll to it\r\n  const contactUsBoxRef = useRef()\r\n  const executeScroll = () => contactUsBoxRef.current.scrollIntoView({ behavior: \"smooth\" })\r\n\r\n  useEffect(() => {\r\n    if (location.state && location.state.contact_us) contactUsBoxRef.current.scrollIntoView();\r\n    // check if the Quick Guide section has been redirected by another page\r\n    if (location.state && location.state.onGuideClicked) onGuideClicked();\r\n  }, [])\r\n\r\n  // we store the actual height of the Navbar, since we set the Navbar's position to fixed\r\n  // it jumps out from the document flow => the height collapse\r\n  // we need to reset it\r\n  const [navbarHeight, setNavbarHeight] = useState(0);\r\n\r\n  // load background image to full resolution and set it once loaded\r\n  useEffect(() => {\r\n    // function for loading image\r\n    function load(src) {\r\n      return new Promise((resolve, reject) => {\r\n        const image = new Image();\r\n        image.addEventListener('load', resolve);\r\n        image.addEventListener('error', reject);\r\n        image.src = src;\r\n      });\r\n    }\r\n\r\n    /** load full-res background image */\r\n    load(Helmholtz_TheisLab_Naturecover_2021).then(() => {\r\n      setBackgroundImage(Helmholtz_TheisLab_Naturecover_2021);\r\n    })\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <Box style={{ overflow: \"hidden\" }} sx={{ position: \"relative\" }}>\r\n      {context.loginVisible && <LoginForm />}\r\n      {context.registerVisible && <RegistrationForm />}\r\n      {context.forgetVisible && <PasswordForgetForm />}\r\n      {/* STARTING PAGE */}\r\n      <Box sx={{\r\n        width: window.width,\r\n        height: '100vh',\r\n        // bgcolor: colors.primary[800], \r\n        backgroundImage: `url(${backgroundImage})`,\r\n        backgroundSize: 'cover',\r\n        position: \"relative\",\r\n        paddingBottom: \"4em\",\r\n      }}>\r\n        {/* NAVBAR HERE */}\r\n        {/* the Box that contains the Navbar will collapse, so we reset the height */}\r\n        <Box sx={{ height: navbarHeight, position: \"relative\" }}>\r\n          <Navbar backgroundColor=\"transparent\" setNavbarHeight={setNavbarHeight} onLoginClicked={onLoginClicked} onSignUpClicked={onSignUpClicked} onGuideClicked={onGuideClicked} executeScroll={executeScroll} />\r\n        </Box>\r\n        {/* Quick Guide Intro Section */}\r\n        <Box id=\"title container\" width=\"100%\" height='100%' textAlign=\"center\" position=\"relative\" top=\"30%\">\r\n          <WindowiOS backgroundImageLoaded={backgroundImage === Helmholtz_TheisLab_Naturecover_2021} onGuideClick={onGuideClicked} />\r\n        </Box>\r\n      </Box>\r\n      {/* the Eclipse */}\r\n      <Box\r\n        sx={{\r\n          position: \"relative\",\r\n          width: \"140vw\",\r\n          height: \"5vw\",\r\n          left: \"-20vw\",\r\n          top: \"-2vw\",\r\n          borderRadius: \"50%\",\r\n          zIndex: \"0\"\r\n        }}\r\n      />\r\n      {/* CONTAINER */}\r\n      <Box\r\n        sx={{\r\n          position: \"relative\",\r\n          width: \"100vw\",\r\n          padding: { xs: \"0% 5%\", sm: \"0% 5%\", md: \"0% 15%\", lg: \"0% 15%\", xl: \"0% 15%\" },\r\n          top: \"-2.5vw\"\r\n        }}\r\n      >\r\n\r\n        {/* INITIAL PAGE */}\r\n        <Box ref={getStartedRef} sx={{ width: \"100%\", position: \"relative\", margin: \"auto\" }}>\r\n          <Typography sx={{ textAlign: \"center\" }} fontSize=\"2em\" fontWeight=\"bold\">What We Do</Typography>\r\n          <Box sx={{ display: \"flex\", flexDirection: { xs: \"column\", sm: \"row\", md: \"row\", lg: \"row\", xl: \"row\" }, justifyContent: \"space-between\", alignItems: \"center\", width: \"90%\", gap: \"1em\", margin: \"auto\" }}>\r\n            <Box sx={{ width: { xs: \"100%\", sm: \"50%\", md: \"50%\", lg: \"50%\", xl: \"50%\" }, backgroundColor: \"transparent\", borderRadius: \"20px\" }}>\r\n              <img style={{ width: \"100%\" }} src={\"https://storage.googleapis.com/jst-2021-bucket-static/retina.png\"} alt=\"Science\" />\r\n            </Box>\r\n            <Box sx={{ width: { xs: \"100%\", sm: \"50%\", md: \"50%\", lg: \"50%\", xl: \"50%\" } }}>\r\n              <Typography fontSize=\"1.2em\" fontWeight=\"bold\">Single-Cell Omics Analysis</Typography>\r\n              <Typography margin=\"0.5em 0 1em 0\" color={colors.neutral[600]}>\r\n                ArchMap offers single-cell omics reference mapping using <a\r\n                  style={{\r\n                    textDecoration: \"none\",\r\n                  }} href=\"https://scarches.readthedocs.io/en/latest/\"><Typography sx={{\r\n                    color: colors.primary[400],\r\n                    ':hover': { color: colors.primary[500] }\r\n                  }} display=\"inline\">scArches</Typography></a>.\r\n                Check out our reference atlases or jump right in!</Typography>\r\n              {/* Container of links to different pages */}\r\n              <Box sx={{ display: 'flex', flexDirection: { xs: \"column\", sm: \"row\", md: \"row\", lg: \"row\", xl: \"row\" }, justifyContent: \"space-evenly\", width: \"100%\" }}>\r\n                <Box id=\"References div\" sx={{ width: \"auto\", margin: '1em 0 1em 0', padding: '0px 5px 0px 5px' }}>\r\n                  <Box onClick={() => {\r\n                    history.push('/references');\r\n                    window.scrollTo(0, 0);\r\n                  }}>\r\n                    <Typography sx={{ fontWeight: \"bold\", color: colors.primary[400], ':hover': { color: colors.primary[500], cursor: 'pointer' } }}>References</Typography>\r\n                  </Box>\r\n                  <Typography color={colors.neutral[600]}>We offer multiple atlases to choose from.</Typography>\r\n                </Box>\r\n                <Box id=\"Docs div\" sx={{ width: \"auto\", margin: '1em 0 1em 0', padding: '0px 5px 0px 5px' }}>\r\n                  <Box>\r\n                    <Typography sx={{ fontWeight: \"bold\", color: colors.primary[400], ':hover': { color: colors.primary[500], cursor: 'pointer' } }}>\r\n                      <a\r\n                        style={{\r\n                          textDecoration: \"none\",\r\n                          color: colors.primary[400],\r\n                          '&:hover': { color: colors.primary[900] },\r\n                        }} href=\"https://archmap-docu.readthedocs.io/\">Docs\r\n                      </a>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Typography color={colors.neutral[600]}>Check out the docs for more information.</Typography>\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n        {/* Quick Guide */}\r\n        <Box sx={{\r\n          width: \"100%\",\r\n          marginTop: \"5em\",\r\n          backgroundColor: colors.primary[800],\r\n          p: \"1em 1em 5em 1em\",\r\n          color: \"white\",\r\n          borderRadius: \"20px\",\r\n          boxShadow: \"0px 0px 10px rgba(0, 0, 0, 0.1)\",\r\n          position: \"relative\"\r\n        }}>\r\n          <Typography sx={{ textAlign: \"center\" }} fontSize=\"2em\" fontWeight=\"bold\">Quick Guide</Typography>\r\n\r\n          {/* Log In or Start Uploading */}\r\n          <Box sx={{ position: \"relative\", gap: \"1em\", display: \"flex\", flexDirection: { xs: \"column\", sm: \"row\", md: \"row\", lg: \"row\", xl: \"row\" }, justifyContent: \"space-between\", alignItems: \"center\", width: \"90%\", margin: \"auto\", padding: \"5% 10% 0% 10%\" }}>\r\n            <Box sx={{ width: \"100%\" }}>\r\n              <Typography sx={{ fontSize: \"1.2em\", textAlign: 'center', fontWeight: \"bold\", paddingBottom: '2%' }}>\r\n                <Box sx={{ cursor: \"pointer\", display: \"inline\", color: colors.primary[400], ':hover': { color: colors.primary[500] } }} onClick={onSignUpClicked}>Sign Up</Box> Or Start Analyzing</Typography>\r\n              <Typography color={colors.neutral[500]}>\r\n                Create an account or start analyzing right away.\r\n                By creating an account, you benefit from permanent project storage and collaboration with other labs.\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n\r\n          {/* Selection Step */}\r\n          <Box sx={{ position: \"relative\", gap: \"1em\", display: \"flex\", flexDirection: { xs: \"column\", sm: \"row\", md: \"row\", lg: \"row\", xl: \"row\" }, justifyContent: \"space-between\", alignItems: \"center\", width: \"90%\", margin: \"auto\", padding: \"10% 10% 5% 10%\" }}>\r\n            <Box sx={{ position: \"absolute\", top: \"calc(5% + 8px)\", left: \"7px\", width: \"2px\", height: \"calc(95% - 8px)\", bgcolor: colors.neutral[700] }} />\r\n            <Box sx={{ width: \"16px\", height: \"16px\", position: \"absolute\", top: \"5%\", left: \"0%\", borderRadius: \"10px\", border: \"2px solid white\", bgcolor: colors.primary[800] }}></Box>\r\n            <Box sx={{ width: \"30px\", height: \"30px\", position: \"absolute\", top: \"50%\", left: \"0%\", transform: \"translate(-7px, -15px)\", bgcolor: colors.primary[800] }}>\r\n              <UploadIcon sx={{ width: \"20px\", height: \"20px\", position: \"absolute\", top: \"50%\", left: \"50%\", transform: \"translate(-50%, -50%)\" }} />\r\n            </Box>\r\n            <Box sx={{ width: { xs: \"100%\", sm: \"50%\", md: \"50%\", lg: \"50%\", xl: \"50%\" } }}>\r\n              <Typography fontSize=\"1.2em\" fontWeight=\"bold\" paddingBottom='2%'>Step 1: Select Atlas and Model</Typography>\r\n              <Typography color={colors.neutral[500]}>Start by choosing a reference atlas and one of the available pre-trained models.</Typography>\r\n            </Box>\r\n            <Box sx={{ width: { xs: \"100%\", sm: \"50%\", md: \"50%\", lg: \"50%\", xl: \"50%\" }, backgroundColor: \"white\", borderRadius: \"20px\" }}>\r\n              <img style={{ width: \"100%\" }} src={graphic2} alt=\"Upload\" />\r\n            </Box>\r\n          </Box>\r\n\r\n          {/* PROCESSING */}\r\n          <Box sx={{ position: \"relative\", gap: \"1em\", display: \"flex\", flexDirection: { xs: \"column\", sm: \"row\", md: \"row\", lg: \"row\", xl: \"row\" }, justifyContent: \"space-between\", alignItems: \"center\", width: \"90%\", margin: \"auto\", padding: \"5% 10%\" }}>\r\n            <Box sx={{ position: \"absolute\", top: \"0%\", left: \"7px\", width: \"2px\", height: \"100%\", bgcolor: colors.neutral[700] }} />\r\n            <Box sx={{ zIndex: \"1\", width: \"30px\", height: \"30px\", position: \"absolute\", top: \"50%\", left: \"0%\", transform: \"translate(-7px, -15px)\", bgcolor: colors.primary[800] }}>\r\n              <AutorenewIcon sx={{ width: \"20px\", height: \"20px\", position: \"absolute\", top: \"50%\", left: \"50%\", transform: \"translate(-50%, -50%)\" }} />\r\n            </Box>\r\n            <Box sx={{ width: { xs: \"100%\", sm: \"50%\", md: \"50%\", lg: \"50%\", xl: \"50%\" } }}>\r\n              <Typography fontSize=\"1.2em\" fontWeight=\"bold\" paddingBottom='2%'>Step 2: Upload your Data</Typography>\r\n              <Typography color={colors.neutral[500]}>After making your choice, upload your data. Afterwards, click on \"Create Project\" and wait for the processing to finish.</Typography>\r\n            </Box>\r\n            <Box sx={{ width: { xs: \"100%\", sm: \"50%\", md: \"50%\", lg: \"50%\", xl: \"50%\" }, backgroundColor: \"white\", borderRadius: \"20px\" }}>\r\n              <img style={{ width: \"100%\" }} src={graphic3} alt=\"Processing\" />\r\n            </Box>\r\n          </Box>\r\n\r\n          {/* CHECK RESULT */}\r\n          <Box sx={{ position: \"relative\", gap: \"1em\", display: \"flex\", flexDirection: { xs: \"column\", sm: \"row\", md: \"row\", lg: \"row\", xl: \"row\" }, justifyContent: \"space-between\", alignItems: \"center\", width: \"90%\", margin: \"auto\", padding: \"5% 10% 10% 10%\" }}>\r\n            <Box sx={{ position: \"absolute\", top: \"0%\", left: \"7px\", width: \"2px\", height: \"calc(95% - 8px)\", bgcolor: colors.neutral[700] }} />\r\n            <Box sx={{ zIndex: \"1\", width: \"16px\", height: \"16px\", position: \"absolute\", top: \"95%\", left: \"0%\", transform: \"translate(-0%, -100%)\", bgcolor: colors.primary[800] }}>\r\n              <CheckCircleOutlineIcon sx={{ width: \"16px\", height: \"16px\", color: colors.secondary1[400] }} />\r\n            </Box>\r\n            <Box sx={{ zIndex: \"1\", width: \"30px\", height: \"30px\", position: \"absolute\", top: \"50%\", left: \"0%\", transform: \"translate(-7px, -15px)\", bgcolor: colors.primary[800] }}>\r\n              <AssignmentIcon sx={{ width: \"20px\", height: \"20px\", position: \"absolute\", top: \"50%\", left: \"50%\", transform: \"translate(-50%, -50%)\" }} />\r\n            </Box>\r\n            <Box sx={{ width: { xs: \"100%\", sm: \"50%\", md: \"50%\", lg: \"50%\", xl: \"50%\" } }}>\r\n              <Typography fontSize=\"1.2em\" fontWeight=\"bold\" paddingBottom='2%'>Step 3: View Results</Typography>\r\n              <Typography color={colors.neutral[500]}>After processing, your result will be ready. This may take some time.\r\n                Don't worry! You can close the tab and come back later to see the results.  </Typography>\r\n            </Box>\r\n            <Box sx={{ width: { xs: \"100%\", sm: \"50%\", md: \"50%\", lg: \"50%\", xl: \"50%\" }, backgroundColor: \"white\", borderRadius: \"20px\" }}>\r\n              <img style={{ width: \"100%\" }} src={graphic4} alt=\"Check Results\" />\r\n            </Box>\r\n          </Box>\r\n\r\n          {/* CALL TO ACTION */}\r\n          <Box sx={{ position: \"relative\", gap: \"1em\", display: \"flex\", flexDirection: { xs: \"column\", sm: \"row\", md: \"row\", lg: \"row\", xl: \"row\" }, justifyContent: \"space-between\", alignItems: \"center\", width: \"90%\", margin: \"auto\", padding: \"5% 10% 0% 10%\" }}>\r\n            <Box sx={{ width: \"100%\" }}>\r\n              <Typography sx={{ fontSize: \"1.2em\", textAlign: 'center', fontWeight: \"bold\", paddingBottom: '2%' }}>\r\n                Ready? <Box\r\n                  sx={{ cursor: \"pointer\", display: \"inline\", color: colors.primary[400], ':hover': { color: colors.primary[500] }, display: 'inline' }}\r\n                  onClick={() => {\r\n                    history.push('/genemapper');\r\n                    window.scrollTo(0, 0);\r\n                  }}>\r\n                  Start Mapping!\r\n                </Box>\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n        {/* CONTACT US */}\r\n        <Box ref={contactUsBoxRef} sx={{ position: \"relative\", margin: \"4em auto\", position: \"relative\", width: \"100%\" }} >\r\n          <Typography sx={{ textAlign: \"center\" }} fontSize=\"2em\" fontWeight=\"bold\">Contact Us</Typography>\r\n          <Typography marginTop=\"1em\" sx={{ textAlign: \"center\" }} fontSize=\"1em\">Please message us in case you have any questions, feedback or collaboration-related inquiries concerning archmap.bio.</Typography>\r\n          {/* <Box sx={{\r\n            width: \"100%\",\r\n            margin: \"2em auto 0em auto\",\r\n            padding: \"2em 0em\",\r\n            boxShadow: \"0px 4px 6px rgba(0, 0, 0, 0.10), 0px 0px 1px rgba(0, 0, 0, 0.20)\",\r\n            borderRadius: \"10px\"\r\n          }}>\r\n            <Stack sx={{ width: \"80%\", margin: \"auto\" }} direction=\"column\" spacing={4}>\r\n              <Stack direction=\"row\" justifyContent=\"space-between\" spacing={2}>\r\n                <Input isRequired label=\"Email\" />\r\n                <Input isRequired label=\"First Name\" />\r\n                <Input isRequired label=\"Last Name\" />\r\n              </Stack>\r\n              <Input isRequired label=\"Subject\" maxLength={50}/>\r\n              <Input isRequired label=\"Message\" multiline maxLength={1000} />\r\n              <Box sx={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"center\" }}>\r\n                <CustomButton>Send</CustomButton>\r\n              </Box>\r\n            </Stack>\r\n          </Box> */}\r\n          <ContactForm />\r\n        </Box>\r\n      </Box>\r\n\r\n      {/* FOOTER */}\r\n      <Footer />\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default Home","/* eslint-disable max-len */\r\nimport React, { useState, useCallback } from 'react';\r\nimport Box from '@mui/material/Box';\r\nimport Link from '@mui/material/Link';\r\nimport Typography from '@mui/material/Typography';\r\nimport { useHistory } from 'react-router-dom';\r\nimport NavBar from 'components/NavBar';\r\nimport Footer from 'components/Footer';\r\nimport LoginForm from 'components/LoginForm';\r\nimport RegistrationForm from 'components/RegistrationForm';\r\nimport { useAuth } from 'shared/context/authContext';\r\n\r\nexport default function LegalNotice() {\r\n  const [isLoginFormVisible, setLoginFormVisible] = useState(false);\r\n  const [isRegistrationFormVisible, setRegistrationFormVisible] = useState(false);\r\n\r\n  const history = useHistory();\r\n  const [user, setUser] = useAuth();\r\n\r\n  const onLoginClicked = useCallback(() => {\r\n    console.log('login');\r\n    setRegistrationFormVisible(false);\r\n    setLoginFormVisible(true);\r\n  }, [setLoginFormVisible]);\r\n\r\n  const onSignUpClicked = useCallback(() => {\r\n    console.log('register');\r\n    setLoginFormVisible(false);\r\n    setRegistrationFormVisible(true);\r\n  }, [setRegistrationFormVisible]);\r\n\r\n  const onLoginFormClosed = useCallback(() => {\r\n    setLoginFormVisible(false);\r\n  }, [setLoginFormVisible]);\r\n\r\n  const onRegistrationFormClosed = useCallback(() => {\r\n    setRegistrationFormVisible(false);\r\n  }, [setRegistrationFormVisible]);\r\n\r\n  const executeScroll = () => user ? history.push({ pathname: '/sequencer/help'}) : history.push({ pathname: '/', state: { contact_us: true } });\r\n\r\n  const regForm = isRegistrationFormVisible\r\n    && <RegistrationForm visible={isRegistrationFormVisible} onClose={onRegistrationFormClosed} />;\r\n  return (\r\n    <Box sx={{ height: '100vh' }}>\r\n      {isLoginFormVisible && <LoginForm visible={isLoginFormVisible} onClose={onLoginFormClosed} />}\r\n      {regForm}\r\n\r\n      <Box>\r\n        <NavBar\r\n          position=\"relative\"\r\n          onLoginClicked={onLoginClicked}\r\n          onSignUpClicked={onSignUpClicked}\r\n          executeScroll={executeScroll}\r\n        />\r\n      </Box>\r\n\r\n      <Box sx={{\r\n        margin: '3em auto',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        width: {\r\n          xs: '90%', sm: '90%', md: '70%', lg: '70%', xl: '70%',\r\n        },\r\n      }}\r\n      >\r\n        <Typography fontWeight=\"bold\" fontSize=\"1.4em\">Legal Notice</Typography>\r\n      </Box>\r\n\r\n      <Box sx={{\r\n        margin: '3em auto',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        width: {\r\n          xs: '90%',\r\n          sm: '90%',\r\n          md: '70%',\r\n          lg: '70%',\r\n          xl: '70%',\r\n        },\r\n      }}\r\n      >\r\n        <Typography fontSize=\"1em\">\r\n          Helmholtz Zentrum Mnchen\r\n          <br />\r\n          Deutsches Forschungszentrum fr Gesundheit und Umwelt (GmbH)\r\n          <br />\r\n          Ingolstdter Landstrae 1,\r\n          <br />\r\n          D-85764 Neuherberg, Germany\r\n          <br />\r\n          <br />\r\n          Phone: +49 (0) 89 3187-0\r\n          <br />\r\n          email: info(at)helmholtz-muenchen.de\r\n          <br />\r\n          <br />\r\n          <b>Representatives</b>\r\n          <br />\r\n          Board of Representatives: Prof. Dr. Matthias H. Tschp, Kerstin Gnther, Daniela Sommer (acting)\r\n          <br />\r\n          <br />\r\n          <b>Chairwoman of Supervisory Board:</b>\r\n          <br />\r\n          MinDirin Prof. Dr. Veronika von Messling\r\n          <br />\r\n          <br />\r\n          <b>Register of Societies:</b>\r\n          <br />\r\n          Amtsgericht Mnchen HRB 6466\r\n          <br />\r\n          <br />\r\n          <b>VAT ID number in accordance with  27 a Umsatzsteuergesetz (German Turnover-Tax Law):</b> \r\n          <br />\r\n          DE 129521671\r\n          <br />\r\n          <br />\r\n          <br />\r\n        </Typography>\r\n      </Box>\r\n\r\n      <div style={{ height: 'calc(100vh - 485px)' }} />\r\n\r\n      <Footer />\r\n    </Box>\r\n  );\r\n}\r\n","/* eslint-disable react/no-danger */\r\nimport React, { useState, useCallback } from 'react';\r\nimport Box from '@mui/material/Box';\r\nimport Typography from '@mui/material/Typography';\r\nimport { useHistory } from 'react-router-dom';\r\nimport NavBar from 'components/NavBar';\r\nimport Footer from 'components/Footer';\r\nimport LoginForm from 'components/LoginForm';\r\nimport RegistrationForm from 'components/RegistrationForm';\r\nimport { useAuth } from 'shared/context/authContext';\r\n\r\nexport default function Privacy() {\r\n  const [isLoginFormVisible, setLoginFormVisible] = useState(false);\r\n  const [isRegistrationFormVisible, setRegistrationFormVisible] = useState(false);\r\n\r\n  const history = useHistory();\r\n  const [user, setUser] = useAuth()\r\n\r\n  const onLoginClicked = useCallback(() => {\r\n    console.log('login');\r\n    setRegistrationFormVisible(false);\r\n    setLoginFormVisible(true);\r\n  }, [setLoginFormVisible]);\r\n\r\n  const onSignUpClicked = useCallback(() => {\r\n    console.log('register');\r\n    setLoginFormVisible(false);\r\n    setRegistrationFormVisible(true);\r\n  }, [setRegistrationFormVisible]);\r\n\r\n  const onLoginFormClosed = useCallback(() => {\r\n    setLoginFormVisible(false);\r\n  }, [setLoginFormVisible]);\r\n\r\n  const onRegistrationFormClosed = useCallback(() => {\r\n    setRegistrationFormVisible(false);\r\n  }, [setRegistrationFormVisible]);\r\n\r\n  const executeScroll = () => user ? history.push({ pathname: '/sequencer/help' }) : history.push({ pathname: '/', state: { contact_us: true } });\r\n\r\n  const regForm = isRegistrationFormVisible\r\n    && <RegistrationForm visible={isRegistrationFormVisible} onClose={onRegistrationFormClosed} />;\r\n  return (\r\n    <Box sx={{ height: '100vh' }}>\r\n      {isLoginFormVisible && <LoginForm visible={isLoginFormVisible} onClose={onLoginFormClosed} />}\r\n      {regForm}\r\n\r\n      <Box>\r\n        <NavBar\r\n          position=\"relative\"\r\n          onLoginClicked={onLoginClicked}\r\n          onSignUpClicked={onSignUpClicked}\r\n          executeScroll={executeScroll}\r\n        />\r\n      </Box>\r\n\r\n      <Box sx={{\r\n        margin: '3em auto',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        width: {\r\n          xs: '90%', sm: '90%', md: '70%', lg: '70%', xl: '70%',\r\n        },\r\n      }}\r\n      >\r\n        <Typography fontWeight=\"bold\" fontSize=\"1.4em\">Privacy Policy</Typography>\r\n      </Box>\r\n\r\n      <Box sx={{\r\n        margin: '3em auto',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        width: {\r\n          xs: '90%',\r\n          sm: '90%',\r\n          md: '70%',\r\n          lg: '70%',\r\n          xl: '70%',\r\n        },\r\n      }}\r\n      >\r\n        <Typography fontSize=\"1em\">\r\n          <div\r\n            dangerouslySetInnerHTML={{\r\n              __html: `<h4>Privacy Policy</h4>\r\n\r\n              <p>We are very delighted that you have shown interest in our platform. Data protection is of a particularly high priority for the management of the Helmholtz Zentrum Mnchen. The use of the Internet pages of the Helmholtz Zentrum Mnchen is possible without any indication of personal data; however, if a data subject wants to use special platform services via our website, processing of personal data could become necessary. If the processing of personal data is necessary and there is no statutory basis for such processing, we generally obtain consent from the data subject.</p>\r\n              \r\n              <p>The processing of personal data, such as the name, address, e-mail address, or telephone number of a data subject shall always be in line with the General Data Protection Regulation (GDPR), and in accordance with the country-specific data protection regulations applicable to the Helmholtz Zentrum Mnchen. By means of this data protection declaration, our platform would like to inform the general public of the nature, scope, and purpose of the personal data we collect, use and process. Furthermore, data subjects are informed, by means of this data protection declaration, of the rights to which they are entitled.</p>\r\n              \r\n              <p>As the controller, the Helmholtz Zentrum Mnchen has implemented numerous technical and organizational measures to ensure the most complete protection of personal data processed through this website. However, Internet-based data transmissions may in principle have security gaps, so absolute protection may not be guaranteed. For this reason, every data subject is free to transfer personal data to us via alternative means, e.g. by telephone. </p>\r\n              \r\n              <h4>1. Definitions</h4>\r\n              <p>The data protection declaration of the Helmholtz Zentrum Mnchen is based on the terms used by the European legislator for the adoption of the General Data Protection Regulation (GDPR). Our data protection declaration should be legible and understandable for the general public, as well as our customers and business partners. To ensure this, we would like to first explain the terminology used.</p>\r\n              \r\n              <p>In this data protection declaration, we use, inter alia, the following terms:</p>\r\n              \r\n              <ul>\r\n              <li><h4>a)    Personal data</h4>\r\n              <p>Personal data means any information relating to an identified or identifiable natural person (data subject). An identifiable natural person is one who can be identified, directly or indirectly, in particular by reference to an identifier such as a name, an identification number, location data, an online identifier or to one or more factors specific to the physical, physiological, genetic, mental, economic, cultural or social identity of that natural person.</p>\r\n              </li>\r\n              <li><h4>b) Data subject</h4>\r\n              <p>Data subject is any identified or identifiable natural person, whose personal data is processed by the controller responsible for the processing.</p>\r\n              </li>\r\n              <li><h4>c)    Processing</h4>\r\n              <p>Processing is any operation or set of operations which is performed on personal data or on sets of personal data, whether or not by automated means, such as collection, recording, organisation, structuring, storage, adaptation or alteration, retrieval, consultation, use, disclosure by transmission, dissemination or otherwise making available, alignment or combination, restriction, erasure or destruction. </p>\r\n              </li>\r\n              <li><h4>d)    Restriction of processing</h4>\r\n              <p>Restriction of processing is the marking of stored personal data with the aim of limiting their processing in the future. </p>\r\n              </li>\r\n              <li><h4>e)    Profiling</h4>\r\n              <p>Profiling means any form of automated processing of personal data consisting of the use of personal data to evaluate certain personal aspects relating to a natural person, in particular to analyse or predict aspects concerning that natural person's performance at work, economic situation, health, personal preferences, interests, reliability, behaviour, location or movements. </p>\r\n              </li>\r\n              <li><h4>f)     Pseudonymisation</h4>\r\n              <p>Pseudonymisation is the processing of personal data in such a manner that the personal data can no longer be attributed to a specific data subject without the use of additional information, provided that such additional information is kept separately and is subject to technical and organisational measures to ensure that the personal data are not attributed to an identified or identifiable natural person. </p>\r\n              </li>\r\n              <li><h4>g)    Controller or controller responsible for the processing</h4>\r\n              <p>Controller or controller responsible for the processing is the natural or legal person, public authority, agency or other body which, alone or jointly with others, determines the purposes and means of the processing of personal data; where the purposes and means of such processing are determined by Union or Member State law, the controller or the specific criteria for its nomination may be provided for by Union or Member State law. </p>\r\n              </li>\r\n              <li><h4>h)    Processor</h4>\r\n              <p>Processor is a natural or legal person, public authority, agency or other body which processes personal data on behalf of the controller. </p>\r\n              </li>\r\n              <li><h4>i)      Recipient</h4>\r\n              <p>Recipient is a natural or legal person, public authority, agency or another body, to which the personal data are disclosed, whether a third party or not. However, public authorities which may receive personal data in the framework of a particular inquiry in accordance with Union or Member State law shall not be regarded as recipients; the processing of those data by those public authorities shall be in compliance with the applicable data protection rules according to the purposes of the processing. </p>\r\n              </li>\r\n              <li><h4>j)      Third party</h4>\r\n              <p>Third party is a natural or legal person, public authority, agency or body other than the data subject, controller, processor and persons who, under the direct authority of the controller or processor, are authorised to process personal data.</p>\r\n              </li>\r\n              <li><h4>k)    Consent</h4>\r\n              <p>Consent of the data subject is any freely given, specific, informed and unambiguous indication of the data subject's wishes by which he or she, by a statement or by a clear affirmative action, signifies agreement to the processing of personal data relating to him or her. </p>\r\n              </li>\r\n              </ul>\r\n              \r\n              <h4>2. Name and Address of the controller</h4>\r\n              <p>Controller for the purposes of the General Data Protection Regulation (GDPR), other data protection laws applicable in Member states of the European Union and other provisions related to data protection is:\r\n              \r\n              </p>\r\n              \r\n              <p>Helmholtz Zentrum Mnchen  Deutsches Forschungszentrum fr Gesundheit und Umwelt GmbH</p>\r\n              <p>Ingolstdter Landstrae 1</p>\r\n              <p>85764 Neuherberg</p>\r\n              <p>Deutschland</p>\r\n              <p>Phone: +498931870</p>\r\n              <p>Email: info@helmholtz-muenchen.de</p>\r\n              <p>Website: www.helmholtz-muenchen.de</p>\r\n              \r\n              <h4>3. Name and Address of the Data Protection Officer</h4>\r\n              <p>The Data Protection Officer of the controller is:</p>\r\n              Werner Bergheim\r\n              <p>Helmholtz Zentrum Mnchen</p>\r\n              <p>Ingolstdter Landstrae 1</p>\r\n              <p>85764 Neuherberg</p>\r\n              <p>Deutschland</p>\r\n              <p>Email: datenschutz@helmholtz-muenchen.de</p>\r\n              \r\n              <p>Any data subject may, at any time, contact our Data Protection Officer directly with all questions and suggestions concerning data protection.</p>\r\n              \r\n              <h4>4. Collection of general data and information</h4>\r\n              <p>The website of the Helmholtz Zentrum Mnchen collects a series of general data and information when a data subject or automated system calls up the website. This general data and information are stored in the server log files. Collected may be (1) the browser types and versions used, (2) the operating system used by the accessing system, (3) the website from which an accessing system reaches our website (so-called referrers), (4) the sub-websites, (5) the date and time of access to the Internet site, (6) an Internet protocol address (IP address), (7) the Internet service provider of the accessing system, and (8) any other similar data and information that may be used in the event of attacks on our information technology systems.</p>\r\n              \r\n              <p>When using these general data and information, the Helmholtz Zentrum Mnchen does not draw any conclusions about the data subject. Rather, this information is needed to (1) deliver the content of our website correctly, (2) optimize the content of our website as well as its advertisement, (3) ensure the long-term viability of our information technology systems and website technology, and (4) provide law enforcement authorities with the information necessary for criminal prosecution in case of a cyber-attack. Therefore, the Helmholtz Zentrum Mnchen analyzes anonymously collected data and information statistically, with the aim of increasing the data protection and data security of our platform, and to ensure an optimal level of protection for the personal data we process. The anonymous data of the server log files are stored separately from all personal data provided by a data subject.</p>\r\n              \r\n              <h4>5. Registration on our website</h4>\r\n              <p>The data subject has the possibility to register on the website of the controller with the indication of personal data. Which personal data are transmitted to the controller is determined by the respective input mask used for the registration. The personal data entered by the data subject are collected and stored exclusively for internal use by the controller, and for his own purposes. The controller may request transfer to one or more processors (e.g. a parcel service) that also uses personal data for an internal purpose which is attributable to the controller.</p>\r\n              \r\n              <p>By registering on the website of the controller, the IP addressassigned by the Internet service provider (ISP) and used by the data subjectdate, and time of the registration are also stored. The storage of this data takes place against the background that this is the only way to prevent the misuse of our services, and, if necessary, to make it possible to investigate committed offenses. Insofar, the storage of this data is necessary to secure the controller. This data is not passed on to third parties unless there is a statutory obligation to pass on the data, or if the transfer serves the aim of criminal prosecution.\r\n              \r\n              </p>\r\n              \r\n              <p>The registration of the data subject, with the voluntary indication of personal data, is intended to enable the controller to offer the data subject contents or services that may only be offered to registered users due to the nature of the matter in question. Registered persons are free to change the personal data specified during the registration at any time, or to have them completely deleted from the data stock of the controller.</p>\r\n              \r\n              <p>The data controller shall, at any time, provide information upon request to each data subject as to what personal data are stored about the data subject. In addition, the data controller shall correct or erase personal data at the request or indication of the data subject, insofar as there are no statutory storage obligations. The entirety of the controllers employees are available to the data subject in this respect as contact persons.</p>\r\n              \r\n              <h4>6. Contact possibility via the website </h4>\r\n              <p>This platform contains information that enables a quick electronic contact to our platform, as well as direct communication with us, which also includes a general address of the so-called electronic mail (e-mail address). All contact forms are sent to the employees at Helmholtz Zentrum Mnchen responsible for the platform.\r\n              If a data subject contacts the controller by e-mail or via a contact form, the personal data transmitted by the data subject are automatically stored. Such personal data transmitted on a voluntary basis by a data subject to the data controller are stored for the purpose of processing or contacting the data subject. There is no transfer of this personal data to third parties.</p>\r\n              \r\n              <h4>7. Processing of user files with ScArches</h4>\r\n              <p>\r\n              1. Scope of the processing of uploaded files<br/><br/>\r\n              Our platform offers a user the ability to process their uploaded files using the package ScArches. As a rule, our users' personal data are processed only with the consent of the user. An exception applies in those cases in which it is not possible to obtain prior consent due to factual reasons and statutory provisions permit the processing of the data.</p>\r\n              \r\n              <p>\r\n              2. Legal basis of the data processing<br/><br/>\r\n              If the user has consented, the legal basis for the processing of the uploaded user data is Article 6(1)(f) GDPR.\r\n              </p>\r\n\r\n              <p>\r\n              3. Purpose of The data processing<br/><br/>\r\n              The purpose of the data processing is in order to output the ScArches result based on the user's inputted data.\r\n              </p>\r\n              4. Storage period<br/><br/>\r\n              The user's data is deleted as soon as it is no longer necessary to achieve the purpose for which they were collected.\r\n              This means that the data is stored throughout the processing step, however, once a result is generated, it is deleted. \r\n              Only the outputted result is stored permanently. \r\n              <p>5. Possibility of withdrawal, objection or disposal<br/><br/>\r\n              The users have the option at all times to delete the results of the processing.\r\n              This is offered on the platform as a feature. Users also have the option at all times to contact us by email or by the Contact us form. \r\n              </p>\r\n              <h4>8. Routine erasure and blocking of personal data</h4>\r\n              <p>The data controller shall process and store the personal data of the data subject only for the period necessary to achieve the purpose of storage, or as far as this is granted by the European legislator or other legislators in laws or regulations to which the controller is subject to.</p>\r\n              \r\n              <p>If the storage purpose is not applicable, or if a storage period prescribed by the European legislator or another competent legislator expires, the personal data are routinely blocked or erased in accordance with legal requirements.</p>\r\n              \r\n              <h4>9. Rights of the data subject</h4>\r\n              <ul>\r\n              <li><h4>a) Right of confirmation</h4>\r\n              <p>Each data subject shall have the right granted by the European legislator to obtain from the controller the confirmation as to whether or not personal data concerning him or her are being processed. If a data subject wishes to avail himself of this right of confirmation, he or she may, at any time, contact any employee of the controller.</p>\r\n              </li>\r\n              <li><h4>b) Right of access</h4>\r\n              <p>Each data subject shall have the right granted by the European legislator to obtain from the controller free information about his or her personal data stored at any time and a copy of this information. Furthermore, the European directives and regulations grant the data subject access to the following information:</p>\r\n              \r\n              <ul>\r\n              <li>the purposes of the processing;</li>\r\n              <li>the categories of personal data concerned;</li>\r\n              <li>the recipients or categories of recipients to whom the personal data have been or will be disclosed, in particular recipients in third countries or international organisations;</li>\r\n              <li>where possible, the envisaged period for which the personal data will be stored, or, if not possible, the criteria used to determine that period;</li>\r\n              <li>the existence of the right to request from the controller rectification or erasure of personal data, or restriction of processing of personal data concerning the data subject, or to object to such processing;</li>\r\n              <li>the existence of the right to lodge a complaint with a supervisory authority;</li>\r\n              <li>where the personal data are not collected from the data subject, any available information as to their source;</li>\r\n              <li>the existence of automated decision-making, including profiling, referred to in Article 22(1) and (4) of the GDPR and, at least in those cases, meaningful information about the logic involved, as well as the significance and envisaged consequences of such processing for the data subject.</li>\r\n              \r\n              </ul>\r\n              <p>Furthermore, the data subject shall have a right to obtain information as to whether personal data are transferred to a third country or to an international organisation. Where this is the case, the data subject shall have the right to be informed of the appropriate safeguards relating to the transfer.</p>\r\n              \r\n              <p>If a data subject wishes to avail himself of this right of access, he or she may, at any time, contact any employee of the controller.</p>\r\n              </li>\r\n              <li><h4>c) Right to rectification </h4>\r\n              <p>Each data subject shall have the right granted by the European legislator to obtain from the controller without undue delay the rectification of inaccurate personal data concerning him or her. Taking into account the purposes of the processing, the data subject shall have the right to have incomplete personal data completed, including by means of providing a supplementary statement.</p>\r\n              \r\n              <p>If a data subject wishes to exercise this right to rectification, he or she may, at any time, contact any employee of the controller.</p></li>\r\n              <li>\r\n              <h4>d) Right to erasure (Right to be forgotten) </h4>\r\n              <p>Each data subject shall have the right granted by the European legislator to obtain from the controller the erasure of personal data concerning him or her without undue delay, and the controller shall have the obligation to erase personal data without undue delay where one of the following grounds applies, as long as the processing is not necessary: </p>\r\n              \r\n              <ul>\r\n              <li>The personal data are no longer necessary in relation to the purposes for which they were collected or otherwise processed.</li>\r\n              <li>The data subject withdraws consent to which the processing is based according to point (a) of Article 6(1) of the GDPR, or point (a) of Article 9(2) of the GDPR, and where there is no other legal ground for the processing.</li>\r\n              <li>The data subject objects to the processing pursuant to Article 21(1) of the GDPR and there are no overriding legitimate grounds for the processing, or the data subject objects to the processing pursuant to Article 21(2) of the GDPR. </li>\r\n              <li>The personal data have been unlawfully processed.</li>\r\n              <li>The personal data must be erased for compliance with a legal obligation in Union or Member State law to which the controller is subject.</li>\r\n              <li>The personal data have been collected in relation to the offer of information society services referred to in Article 8(1) of the GDPR.</li>\r\n              \r\n              </ul>\r\n              <p>If one of the aforementioned reasons applies, and a data subject wishes to request the erasure of personal data stored by the Helmholtz Zentrum Mnchen, he or she may, at any time, contact any employee of the controller. An employee of Helmholtz Zentrum Mnchen shall promptly ensure that the erasure request is complied with immediately.</p>\r\n              \r\n              <p>Where the controller has made personal data public and is obliged pursuant to Article 17(1) to erase the personal data, the controller, taking account of available technology and the cost of implementation, shall take reasonable steps, including technical measures, to inform other controllers processing the personal data that the data subject has requested erasure by such controllers of any links to, or copy or replication of, those personal data, as far as processing is not required. An employees of the Helmholtz Zentrum Mnchen will arrange the necessary measures in individual cases.</p>\r\n              </li>\r\n              <li><h4>e) Right of restriction of processing</h4>\r\n              <p>Each data subject shall have the right granted by the European legislator to obtain from the controller restriction of processing where one of the following applies:</p>\r\n              \r\n              <ul>\r\n              <li>The accuracy of the personal data is contested by the data subject, for a period enabling the controller to verify the accuracy of the personal data. </li>\r\n              <li>The processing is unlawful and the data subject opposes the erasure of the personal data and requests instead the restriction of their use instead.</li>\r\n              <li>The controller no longer needs the personal data for the purposes of the processing, but they are required by the data subject for the establishment, exercise or defence of legal claims.</li>\r\n              <li>The data subject has objected to processing pursuant to Article 21(1) of the GDPR pending the verification whether the legitimate grounds of the controller override those of the data subject.</li>\r\n              \r\n              </ul>\r\n              <p>If one of the aforementioned conditions is met, and a data subject wishes to request the restriction of the processing of personal data stored by the Helmholtz Zentrum Mnchen, he or she may at any time contact any employee of the controller. The employee of the Helmholtz Zentrum Mnchen will arrange the restriction of the processing. </p>\r\n              </li>\r\n              <li><h4>f) Right to data portability</h4>\r\n              <p>Each data subject shall have the right granted by the European legislator, to receive the personal data concerning him or her, which was provided to a controller, in a structured, commonly used and machine-readable format. He or she shall have the right to transmit those data to another controller without hindrance from the controller to which the personal data have been provided, as long as the processing is based on consent pursuant to point (a) of Article 6(1) of the GDPR or point (a) of Article 9(2) of the GDPR, or on a contract pursuant to point (b) of Article 6(1) of the GDPR, and the processing is carried out by automated means, as long as the processing is not necessary for the performance of a task carried out in the public interest or in the exercise of official authority vested in the controller.</p>\r\n              \r\n              <p>Furthermore, in exercising his or her right to data portability pursuant to Article 20(1) of the GDPR, the data subject shall have the right to have personal data transmitted directly from one controller to another, where technically feasible and when doing so does not adversely affect the rights and freedoms of others.</p>\r\n              \r\n              <p>In order to assert the right to data portability, the data subject may at any time contact any of the following employees of the Helmholtz Zentrum Mnchen:</p>\r\n              <ul>\r\n                <li>Mohammad Lotfollahi: mohammad (dot) lotfollahi (at) helmholtz-muenchen.de</li>\r\n                <li>Ronald Skorobogat: ronald (dot) skorobogat (at) helmholtz-muenchen.de</li>\r\n                <li>Amin Ben-Saad: amin (dot) bensaad (at) helmholtz-muenchen.de</li>\r\n              </ul>\r\n              \r\n              </li>\r\n              <li>\r\n              <h4>g) Right to object</h4>\r\n              <p>Each data subject shall have the right granted by the European legislator to object, on grounds relating to his or her particular situation, at any time, to processing of personal data concerning him or her, which is based on point (e) or (f) of Article 6(1) of the GDPR. This also applies to profiling based on these provisions.</p>\r\n              \r\n              <p>The Helmholtz Zentrum Mnchen shall no longer process the personal data in the event of the objection, unless we can demonstrate compelling legitimate grounds for the processing which override the interests, rights and freedoms of the data subject, or for the establishment, exercise or defence of legal claims.</p>\r\n              \r\n              <p>If the Helmholtz Zentrum Mnchen processes personal data for direct marketing purposes, the data subject shall have the right to object at any time to processing of personal data concerning him or her for such marketing. This applies to profiling to the extent that it is related to such direct marketing. If the data subject objects to the Helmholtz Zentrum Mnchen to the processing for direct marketing purposes, the Helmholtz Zentrum Mnchen will no longer process the personal data for these purposes.</p>\r\n              \r\n              <p>In addition, the data subject has the right, on grounds relating to his or her particular situation, to object to processing of personal data concerning him or her by the Helmholtz Zentrum Mnchen for scientific or historical research purposes, or for statistical purposes pursuant to Article 89(1) of the GDPR, unless the processing is necessary for the performance of a task carried out for reasons of public interest.</p>\r\n              \r\n              <p>In order to exercise the right to object, the data subject may contact any employee of the Helmholtz Zentrum Mnchen. In addition, the data subject is free in the context of the use of information society services, and notwithstanding Directive 2002/58/EC, to use his or her right to object by automated means using technical specifications.</p>\r\n              </li>\r\n              <li><h4>h) Automated individual decision-making, including profiling</h4>\r\n              <p>Each data subject shall have the right granted by the European legislator not to be subject to a decision based solely on automated processing, including profiling, which produces legal effects concerning him or her, or similarly significantly affects him or her, as long as the decision (1) is not is necessary for entering into, or the performance of, a contract between the data subject and a data controller, or (2) is not authorised by Union or Member State law to which the controller is subject and which also lays down suitable measures to safeguard the data subject's rights and freedoms and legitimate interests, or (3) is not based on the data subject's explicit consent.</p>\r\n              \r\n              <p>If the decision (1) is necessary for entering into, or the performance of, a contract between the data subject and a data controller, or (2) it is based on the data subject's explicit consent, the Helmholtz Zentrum Mnchen shall implement suitable measures to safeguard the data subject's rights and freedoms and legitimate interests, at least the right to obtain human intervention on the part of the controller, to express his or her point of view and contest the decision.</p>\r\n              \r\n              <p>If the data subject wishes to exercise the rights concerning automated individual decision-making, he or she may, at any time, contact any employee of the Helmholtz Zentrum Mnchen.</p>\r\n              \r\n              </li>\r\n              <li><h4>i) Right to withdraw data protection consent </h4>\r\n              <p>Each data subject shall have the right granted by the European legislator to withdraw his or her consent to processing of his or her personal data at any time. </p>\r\n              \r\n              <p>If the data subject wishes to exercise the right to withdraw the consent, he or she may, at any time, contact any employee of the Helmholtz Zentrum Mnchen.</p>\r\n              \r\n              </li>\r\n              </ul>\r\n              <h4>10. Legal basis for the processing </h4>\r\n              <p>Art. 6(1) lit. a GDPR serves as the legal basis for processing operations for which we obtain consent for a specific processing purpose. If the processing of personal data is necessary for the performance of a contract to which the data subject is party, as is the case, for example, when processing operations are necessary for the supply of goods or to provide any other service, the processing is based on Article 6(1) lit. b GDPR. The same applies to such processing operations which are necessary for carrying out pre-contractual measures, for example in the case of inquiries concerning our products or services. Is our company subject to a legal obligation by which processing of personal data is required, such as for the fulfillment of tax obligations, the processing is based on Art. 6(1) lit. c GDPR.\r\n              In rare cases, the processing of personal data may be necessary to protect the vital interests of the data subject or of another natural person. This would be the case, for example, if a visitor were injured in our company and his name, age, health insurance data or other vital information would have to be passed on to a doctor, hospital or other third party. Then the processing would be based on Art. 6(1) lit. d GDPR.\r\n              Finally, processing operations could be based on Article 6(1) lit. f GDPR. This legal basis is used for processing operations which are not covered by any of the abovementioned legal grounds, if processing is necessary for the purposes of the legitimate interests pursued by our company or by a third party, except where such interests are overridden by the interests or fundamental rights and freedoms of the data subject which require protection of personal data. Such processing operations are particularly permissible because they have been specifically mentioned by the European legislator. He considered that a legitimate interest could be assumed if the data subject is a client of the controller (Recital 47 Sentence 2 GDPR).\r\n              </p>\r\n              \r\n              <h4>11. Disclosure of information for certain purposes to to third-parties</h4>\r\n              <p>The website uses third-party services such as Google Cloud. The information that we potentially disclose to third parties is as described below:\r\n              <br/>\r\n              <br/>\r\n               Information on the browser type and the version in use\r\n              <br/>\r\n               The user's operating system\r\n              <br/>\r\n               The user's internet service provider\r\n              <br/>\r\n               The user's pseudonymized IP address\r\n              <br/>\r\n               Date and time of day of the access\r\n              <br/>\r\n               Websites from which the user's system reaches our website\r\n              <br/>\r\n               Websites that the user's system accesses through our website     \r\n              <br/> \r\n              <h4>12. Period for which the personal data will be stored</h4>\r\n              <p>The criteria used to determine the period of storage of personal data is the respective statutory retention period [PLACEHOLDER].</p>\r\n              \r\n              <h4>13. Provision of personal data as statutory or contractual requirement; Requirement necessary to enter into a contract; Obligation of the data subject to provide the personal data; possible consequences of failure to provide such data </h4>\r\n              <p>We clarify that the provision of personal data is partly required by law (e.g. tax regulations) or can also result from contractual provisions (e.g. information on the contractual partner).\r\n              \r\n              Sometimes it may be necessary to conclude a contract that the data subject provides us with personal data, which must subsequently be processed by us. The data subject is, for example, obliged to provide us with personal data when our company signs a contract with him or her. The non-provision of the personal data would have the consequence that the contract with the data subject could not be concluded.\r\n              \r\n              Before personal data is provided by the data subject, the data subject must contact any employee. The employee clarifies to the data subject whether the provision of the personal data is required by law or contract or is necessary for the conclusion of the contract, whether there is an obligation to provide the personal data and the consequences of non-provision of the personal data.\r\n              </p>\r\n              \r\n              <h4>14. Existence of automated decision-making</h4>\r\n              <p>As a responsible company, we do not use automatic decision-making or profiling.</p>\r\n              \r\n              <p>Developed by the specialists for <a href=\"https://willing-able.com/\" target=\"_blank\" rel=\"noopener noreferrer\">LegalTech</a> at Willing & Able that also developed the system for <a href=\"https://abletotrain.com/\" target=\"_blank\" rel=\"noopener noreferrer\">data protection officer training</a>. The legal texts contained in our privacy policy generator have been provided and published by <a href=\"https://dg-datenschutz.de/\" target=\"_blank\" rel=\"noopener noreferrer\">Prof. Dr. h.c. Heiko Jonny Maniero</a> from the German Association for Data Protection and <a href=\"https://www.wbs-law.de/\"  target=\"_blank\" rel=\"noopener noreferrer nofollow\">Christian Solmecke</a> from WBS law.</p>\r\n              \r\n              <style>ul { display: block; list-style: auto; }</style>\r\n              `,\r\n            }}\r\n            style={{ maxWidth: '100vw', padding: '32px' }}\r\n          />\r\n        </Typography>\r\n      </Box>\r\n\r\n      <div style={{ height: 'calc(100vh - 485px)' }} />\r\n\r\n      <Footer />\r\n    </Box>\r\n  );\r\n}\r\n","import {\r\n  Button, Toolbar, Typography, IconButton, Box,\r\n} from '@mui/material';\r\nimport React, { useState, useCallback } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport styles from './navbar.module.css';\r\nimport LoginForm from '../LoginForm';\r\nimport RegistrationForm from '../RegistrationForm';\r\n\r\nimport logo from '../../assets/logo.svg';\r\n\r\nconst NavBar = () => {\r\n  // inserting the logic from the landing page here\r\n  const [isLoginFormVisible, setLoginFormVisible] = useState(false);\r\n  const [isRegistrationFormVisible, setRegistrationFormVisible] = useState(false);\r\n\r\n  const onLoginClicked = useCallback(() => {\r\n    setRegistrationFormVisible(false);\r\n    setLoginFormVisible(true);\r\n  }, [setLoginFormVisible]);\r\n\r\n  const onSignUpClicked = useCallback(() => {\r\n    setLoginFormVisible(false);\r\n    setRegistrationFormVisible(true);\r\n  }, [setRegistrationFormVisible]);\r\n\r\n  const onLoginFormClosed = useCallback(() => {\r\n    setLoginFormVisible(false);\r\n  }, [setLoginFormVisible]);\r\n\r\n  const onRegistrationFormClosed = useCallback(() => {\r\n    setRegistrationFormVisible(false);\r\n  }, [setRegistrationFormVisible]);\r\n\r\n  // const { onLoginClicked, onSignUpClicked } = props;\r\n  return (\r\n    <div>\r\n      <div className={styles.appbar}>\r\n        <Toolbar>\r\n          <Link to=\"/\">\r\n            <IconButton\r\n              color=\"success\"\r\n              aria-label=\"open drawer\"\r\n            >\r\n              <img alt=\"logo\" src={logo} />\r\n            </IconButton>\r\n          </Link>\r\n          <Typography sx={{ fontSize: '24px', fontWeight: '500' }}>genomics.ai</Typography>\r\n          <Box sx={{ flexGrow: 1 }}>\r\n            <Typography variant=\"h6\" sx={{ flexGrow: 1 }}>\r\n              <ul>\r\n                <Box>\r\n                  <li><Link to=\"/\" className={styles.navbarcontent}>Home</Link></li>\r\n                </Box>\r\n                <li><Link to=\"about\" className={styles.navbarcontent}>Team</Link></li>\r\n                <li><Link to=\"docs\" className={styles.navbarcontent}>Docs</Link></li>\r\n                <li><Link to=\"contact\" className={styles.navbarcontent}>Contact</Link></li>\r\n              </ul>\r\n            </Typography>\r\n          </Box>\r\n          <Box className={styles.buttonContainer}>\r\n            <Button\r\n              variant=\"text\"\r\n              color=\"inherit\"\r\n              sx={{ m: 2 }}\r\n              onClick={onSignUpClicked}\r\n            >\r\n              <Typography sx={{ color: 'black', fontWeight: '500' }}>\r\n                Sign up\r\n              </Typography>\r\n            </Button>\r\n            <Button variant=\"outlined\" color=\"info\" onClick={onLoginClicked}>\r\n              <Typography sx={{ color: '#4F83CC', fontWeight: '500' }}>\r\n                Login\r\n              </Typography>\r\n            </Button>\r\n          </Box>\r\n        </Toolbar>\r\n      </div>\r\n      <div>\r\n        <LoginForm\r\n          visible={isLoginFormVisible}\r\n          onClose={onLoginFormClosed}\r\n        />\r\n        <RegistrationForm\r\n          visible={isRegistrationFormVisible}\r\n          onClose={onRegistrationFormClosed}\r\n          onSuccessfulRegistration={onLoginClicked}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n","export default __webpack_public_path__ + \"static/media/visualisation.af229bc1.png\";","export default __webpack_public_path__ + \"static/media/zoomVisualisation.982e0091.png\";","export default __webpack_public_path__ + \"static/media/allClusterLabels.06044daf.png\";","export default __webpack_public_path__ + \"static/media/clusterDetails.3b8b8559.png\";","export default __webpack_public_path__ + \"static/media/clusterLabel.30c9dce8.png\";","export default __webpack_public_path__ + \"static/media/csvformat.fb7de25a.png\";","/* eslint-disable */\r\n\r\nimport React from 'react';\r\nimport {\r\n  Stack, Typography, Divider,\r\n} from '@mui/material';\r\nimport styles from './docs.module.css';\r\nimport NavBar from 'components/NavBar/old';\r\nimport Footer from 'components/Footer';\r\nimport visualisation from 'assets/landing-illustrations/visualisation.png';\r\nimport zoom from 'assets/landing-illustrations/zoomVisualisation.png';\r\nimport allClusterLabels from 'assets/landing-illustrations/allClusterLabels.png';\r\nimport clusterDetails from 'assets/landing-illustrations/clusterDetails.png';\r\nimport clusterLabel from 'assets/landing-illustrations/clusterLabel.png';\r\nimport csvformat from 'assets/landing-illustrations/csvformat.png';\r\n\r\nconst Docs = (props) => {\r\n  return (\r\n    <div>\r\n      <NavBar />\r\n\r\n      <div className={styles.container}>\r\n        <Stack\r\n          spacing=\"30px\"\r\n        >\r\n          {/* Documentation Headline ---------------------------------------------------------*/}\r\n          <Typography sx={{ fontWeight: 'bold', fontSize: '30px' }}>Documentation</Typography>\r\n          <div className={styles.textContainer}>\r\n            <Typography\r\n              sx={{ fontSize: '25px', paddingInline: '350px', maxWidth: '1700px' }}\r\n              align=\"center\"\r\n            >\r\n              This Documentationn provides you with a basic understanding of our\r\n              implemented solution.\r\n            </Typography>\r\n          </div>\r\n\r\n          {/* Machine Learning Model-----------------------------------------------------------*/}\r\n          <Divider\r\n            variant=\"middle\"\r\n            textAlign=\"center\"\r\n            sx={{ paddingTop: '100px', paddingBottom: '40px' }}\r\n          >\r\n            <Typography sx={{ width: '400px', fontWeight: 'bold', fontSize: '30px' }}>\r\n              1. Machine Learning Model\r\n            </Typography>\r\n          </Divider>\r\n          <div className={styles.textContainer}>\r\n            <Typography\r\n              sx={{ fontSize: '20px', paddingInline: '350px', maxWidth: '1700px' }}\r\n              align=\"center\"\r\n            >\r\n              We are working hard on providing you with a documentation for our\r\n              machine learning model in the near future.\r\n              If you experience problems or have any questions\r\n              feel free to get in touch with us.\r\n            </Typography>\r\n          </div>\r\n\r\n          {/* Visualisation -------------------------------------------------------------------*/}\r\n          <Divider\r\n            variant=\"middle\"\r\n            textAlign=\"center\"\r\n            sx={{ paddingTop: '100px', paddingBottom: '40px' }}\r\n          >\r\n            <Typography sx={{ width: '250px', fontWeight: 'bold', fontSize: '30px' }}>2. Visualisation</Typography>\r\n          </Divider>\r\n          <div className={styles.textContainer}>\r\n            <Typography\r\n              sx={{ fontSize: '20px', paddingInline: '350px', maxWidth: '1700px' }}\r\n              align=\"center\"\r\n            >\r\n              Based on your input data set we will provide you with a visualisation containing\r\n              the calculated classifications for your cells. (An example can be seen below)\r\n            </Typography>\r\n          </div>\r\n          <img className={styles.mainIllustration} src={visualisation} alt=\"visualisation\" />\r\n\r\n          {/* Input Data -----------------------------------------------------------------------*/}\r\n          <Divider\r\n            variant=\"middle\"\r\n            textAlign=\"center\"\r\n            sx={{ paddingTop: '100px', paddingBottom: '40px' }}\r\n          >\r\n            <Typography sx={{ width: '150px', fontWeight: 'bold', fontSize: '30px' }}>\r\n              Input Data\r\n            </Typography>\r\n          </Divider>\r\n          <div className={styles.textContainer}>\r\n            <Typography\r\n              sx={{ fontSize: '20px', paddingInline: '350px', maxWidth: '1700px' }}\r\n              align=\"center\"\r\n            >\r\n              After processing the raw data provided by the user,\r\n              the machine learning model returns a .csv file.\r\n              This .csv file is needed as input for the visualisation in the following format\r\n\r\n            </Typography>\r\n          </div>\r\n\r\n          <div className={styles.textContainer}>\r\n            <Typography\r\n              sx={{\r\n                fontSize: '20px', paddingInline: '350px', maxWidth: '1700px', fontWeight: 'bold',\r\n              }}\r\n              align=\"center\"\r\n            >\r\n              (x,y denote the UMAP coordinates of a sample)\r\n            </Typography>\r\n          </div>\r\n          <img className={styles.csvImage} src={csvformat} alt=\"visualisation\" />\r\n\r\n          <Divider\r\n            variant=\"middle\"\r\n            textAlign=\"center\"\r\n            sx={{ paddingTop: '100px', paddingBottom: '40px' }}\r\n          >\r\n            <Typography sx={{ fontWeight: 'bold', fontSize: '30px' }}>\r\n              Features\r\n            </Typography>\r\n          </Divider>\r\n\r\n          <Stack\r\n            direction=\"column\"\r\n            spacing={25}\r\n          >\r\n\r\n            <div className={styles.infoContainer}>\r\n              <img className={styles.verticalIllustration} src={zoom} alt=\"science-guy\" />\r\n              <div className={styles.explanationLeft}>\r\n                <Typography\r\n                  className={styles.explanationTitle}\r\n                  sx={{ fontSize: '25px', fontWeight: 'bold' }}\r\n                >\r\n                  Zoom in/out\r\n                </Typography>\r\n\r\n                <Typography sx={{ fontSize: '20px' }}>\r\n                  The buttons in the top right corner of the visualisation\r\n                  allow you to zoom in on the generated sample points.\r\n                </Typography>\r\n                <br />\r\n                <Typography sx={{ fontSize: '20px' }}>\r\n                  At the highest zoom level, the sample IDs are also displayed when hovering.\r\n                  Panning is only possible from the first zoom level.\r\n                </Typography>\r\n                <br />\r\n                <br />\r\n                <Typography\r\n                  className={styles.explanationTitle}\r\n                  sx={{ fontSize: '25px', fontWeight: 'bold' }}\r\n                >\r\n                  Resetting the Zoom Level\r\n                </Typography>\r\n\r\n                <Typography sx={{ fontSize: '20px' }}>\r\n                  By clicking the &apos;Reset&apos; button in the upper right corner\r\n                  you can reset the zoom level to the original value.\r\n                </Typography>\r\n\r\n              </div>\r\n            </div>\r\n\r\n            {/* Cluster Labels ------------------------------------------------------------------*/}\r\n            <Stack direction=\"column\">\r\n              <div className={styles.infoContainer}>\r\n                <img\r\n                  className={styles.horizontalIllustration}\r\n                  src={clusterLabel}\r\n                  alt=\"cluster label\"\r\n                />\r\n                <div className={styles.explanationLeft}>\r\n                  <Typography\r\n                    className={styles.explanationTitle}\r\n                    sx={{ fontSize: '25px', fontWeight: 'bold' }}\r\n                  >\r\n                    Single Cluster Labels\r\n                  </Typography>\r\n                  <Typography sx={{ fontSize: '20px' }}>\r\n                    {' '}\r\n                    The visualization temporarily displays a clusters name when\r\n                    hovering over it.\r\n                  </Typography>\r\n                </div>\r\n              </div>\r\n\r\n              <div className={styles.infoContainer}>\r\n                <img\r\n                  className={styles.horizontalIllustration}\r\n                  src={allClusterLabels}\r\n                  alt=\"all cluster labels\"\r\n                />\r\n                <div className={styles.explanationLeft}>\r\n                  <Typography\r\n                    className={styles.explanationTitle}\r\n                    sx={{ fontSize: '25px', fontWeight: 'bold' }}\r\n                  >\r\n                    All Cluster Labels\r\n                  </Typography>\r\n                  <Typography sx={{ fontSize: '20px' }}>\r\n                    {' '}\r\n                    To permanently display all cluster labels you need\r\n                    to press the &apos;Labels&apos;\r\n                    button in the right upper corner.\r\n                  </Typography>\r\n                </div>\r\n              </div>\r\n            </Stack>\r\n\r\n            <div className={styles.infoContainer}>\r\n              <img\r\n                className={styles.horizontalIllustration}\r\n                src={clusterDetails}\r\n                alt=\"cluster Details\"\r\n              />\r\n              <div className={styles.explanationLeft}>\r\n                <Typography\r\n                  className={styles.explanationTitle}\r\n                  sx={{ fontSize: '25px', fontWeight: 'bold' }}\r\n                >\r\n                  Cluster Details\r\n                </Typography>\r\n\r\n                <Typography sx={{ fontSize: '20px' }}>\r\n                  When clicking on a cluster youll be presented with more\r\n                  detailed information about it.\r\n                </Typography>\r\n                <br />\r\n                <br />\r\n                <Typography\r\n                  className={styles.explanationTitle}\r\n                  sx={{ fontSize: '25px', fontWeight: 'bold' }}\r\n                >\r\n                  Portrayed Cluster Attributes:\r\n                </Typography>\r\n                <Typography sx={{ fontSize: '20px' }}>\r\n                  - percentage share of all samples\r\n                </Typography>\r\n                <Typography sx={{ fontSize: '20px' }}>\r\n                  - number of samples\r\n                </Typography>\r\n                <Typography sx={{ fontSize: '20px' }}>\r\n                  - average L2 distance of the samples to the mean.\r\n                </Typography>\r\n\r\n              </div>\r\n            </div>\r\n          </Stack>\r\n\r\n        </Stack>\r\n      </div>\r\n\r\n      {/* Footer ---------------------------------------------------------------------------*/}\r\n      <Footer />\r\n    </div>\r\n\r\n  );\r\n};\r\n\r\nexport default Docs;\r\n","import React, { useCallback, useState } from 'react';\r\nimport {\r\n  TextField, Typography, Grid, Button, Box, createTheme, ThemeProvider,\r\n} from '@mui/material';\r\nimport Stack from '@mui/material/Stack';\r\nimport NavBar from 'components/NavBar/old';\r\nimport styles from './contact.module.css';\r\nimport Footer from 'components/Footer';\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#0075FF',\r\n    },\r\n    secondary: {\r\n      main: '#FFFFFF',\r\n    },\r\n  },\r\n});\r\n\r\nconst Contact = () => {\r\n  const [contactDetails, setContactDetails] = useState({\r\n    email: '',\r\n    firstname: '',\r\n    lastname: '',\r\n    message: '',\r\n  });\r\n\r\n  const handleTextChange = useCallback((e) => {\r\n    setContactDetails((prevState) => ({ ...prevState, [e.target.id]: e.target.value }));\r\n  }, [setContactDetails]);\r\n\r\n  const formSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const data = {\r\n      firstname: contactDetails.firstname,\r\n      lastname: contactDetails.lastname,\r\n      email: contactDetails.email,\r\n      message: contactDetails.message,\r\n    };\r\n\r\n    try {\r\n      // send POST to the server\r\n      // await axios.post(\"BACKEND_URL\", data);\r\n      setContactDetails({\r\n        email: '',\r\n        firstname: '',\r\n        lastname: '',\r\n        message: '...sending',\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n\r\n    <ThemeProvider theme={theme}>\r\n      <div>\r\n        <NavBar />\r\n\r\n        <div className={styles.headerContainer}>\r\n          <Stack\r\n            spacing=\"30px\"\r\n          >\r\n            <Typography sx={{ fontWeight: 'bold', fontSize: '30px' }}>Contact Us</Typography>\r\n            <div className={styles.textContainer}>\r\n              <Typography\r\n                sx={{ fontSize: '25px', paddingInline: '350px', maxWidth: '1700px' }}\r\n                align=\"center\"\r\n              >\r\n                Please message us in case you have any questions,\r\n                feedback or collaboration-related inquiries concerning Archmap.bio.\r\n              </Typography>\r\n            </div>\r\n          </Stack>\r\n          <Box\r\n            component=\"span\"\r\n            margin=\"auto\"\r\n            className={styles.formContainer}\r\n            sx={{\r\n              width: '1000px',\r\n              height: '500px',\r\n              maxWidth: '100%',\r\n              justifyContent: 'center',\r\n              alignItems: 'center',\r\n            }}\r\n          >\r\n            <Grid\r\n              container\r\n              spacing={1}\r\n              direction=\"column\"\r\n              justifyContent=\"center\"\r\n              sx={{\r\n                align: 'center',\r\n                display: 'flex',\r\n              }}\r\n            >\r\n\r\n              <Grid item>\r\n                <TextField\r\n                  id=\"email\"\r\n                  label=\"Email\"\r\n                  placeholder=\"Enter your email address\"\r\n                  variant=\"filled\"\r\n                  value={contactDetails.email}\r\n                  onChange={handleTextChange}\r\n                  required\r\n                  fullWidth\r\n                  type=\"email\"\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item>\r\n                <Grid\r\n                  container\r\n                  spacing={1}\r\n                  direction=\"row\"\r\n                  sx={{\r\n                    align: 'center',\r\n                    display: 'flex',\r\n                  }}\r\n                >\r\n                  <Grid\r\n                    item\r\n                    xs={6}\r\n                  >\r\n                    <TextField\r\n                      id=\"firstname\"\r\n                      label=\"Firstname\"\r\n                      placeholder=\"Enter your firstname\"\r\n                      variant=\"filled\"\r\n                      rowsMax={1}\r\n                      value={contactDetails.firstname}\r\n                      onChange={handleTextChange}\r\n                      required\r\n                      fullWidth\r\n                      type=\"text\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid\r\n                    item\r\n                    xs={6}\r\n                  >\r\n                    <TextField\r\n                      id=\"lastname\"\r\n                      label=\"Lastname\"\r\n                      placeholder=\"Enter your lastname\"\r\n                      variant=\"filled\"\r\n                      rowsMax={1}\r\n                      value={contactDetails.lastname}\r\n                      onChange={handleTextChange}\r\n                      fullWidth\r\n                      required\r\n                      type=\"text\"\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Grid item>\r\n                <TextField\r\n                  id=\"message\"\r\n                  label=\"Message\"\r\n                  placeholder=\"Enter your message\"\r\n                  variant=\"filled\"\r\n                  multiline\r\n                  rows={8}\r\n                  rowsMax={20}\r\n                  value={contactDetails.message}\r\n                  onChange={handleTextChange}\r\n                  fullWidth\r\n                  required\r\n                  type=\"text\"\r\n                />\r\n              </Grid>\r\n              <Grid item>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  style={{\r\n                    height: '60px', width: '180px', borderRadius: '10px', fontWeight: 'bold',\r\n                  }}\r\n                  size=\"large\"\r\n                  onClick={formSubmit}\r\n                  color=\"primary\"\r\n                >\r\n                  Send\r\n                </Button>\r\n              </Grid>\r\n\r\n            </Grid>\r\n          </Box>\r\n          <Footer />\r\n        </div>\r\n      </div>\r\n    </ThemeProvider>\r\n\r\n  );\r\n};\r\n\r\nexport default Contact;\r\n","export default \"data:image/png;base64,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\"","import React, { useState, useEffect } from 'react';\r\nimport LiveHelpIcon from '@mui/icons-material/LiveHelp';\r\nimport MenuBookIcon from '@mui/icons-material/MenuBook';\r\nimport AccountBalanceIcon from '@mui/icons-material/AccountBalance';\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport Tooltip from '@mui/material/Tooltip';\r\nimport Box from '@mui/material/Box';\r\nimport { Link as NavLink, useRouteMatch, useLocation } from 'react-router-dom';\r\nimport ListItemIcon from '@mui/material/ListItemIcon';\r\nimport PolicyIcon from '@mui/icons-material/Policy';\r\nimport AdminPanelSettingsIcon from '@mui/icons-material/AdminPanelSettings';\r\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\r\nimport LogoutIcon from '@mui/icons-material/Logout';\r\nimport geneIcon from 'assets/gene.png';\r\nimport styles from './sidebar.module.css';\r\nimport ProfileService from 'shared/services/Profile.service';\r\n\r\nfunction indexIcon(index) {\r\n  switch (index) {\r\n    case 0:\r\n      return (\r\n        <img\r\n          alt=\"gene-icon\"\r\n          src={geneIcon}\r\n          className={styles.geneIcon}\r\n        />\r\n      );\r\n    case 1:\r\n      return (<AccountBalanceIcon className={styles.coloredIcon} />);\r\n    case 2:\r\n      return (<SearchIcon className={styles.coloredIcon} />);\r\n    case 3:\r\n      return (<MenuBookIcon className={styles.coloredIcon} />);\r\n    case 5:\r\n      return (<CloudUploadIcon className={styles.coloredIcon} />);\r\n    case 6:\r\n      return (<AdminPanelSettingsIcon className={styles.coloredIcon} />);\r\n    \r\n    default:\r\n      return (<LiveHelpIcon className={styles.coloredIcon} />);\r\n  }\r\n}\r\n\r\nexport default function Sidebar(props) {\r\n  const { user, setUser } = props;\r\n  const hasAdminPermission = user && user.isAdministrator === true;\r\n  const hasUploadPermission = user && user.hasPermission === true;\r\n\r\n  const commonRoutes = ['genemapper', 'community', 'search/atlases', 'documentation', 'help'];\r\n  const commonTitles = ['Gene Mapper', 'Community', 'Search', 'Documentation', 'Help'];\r\n\r\n  const adminRoutes = hasAdminPermission ? ['upload', 'admin'] : [];\r\n  const adminTitles = hasAdminPermission ? ['Upload', 'Admin'] : [];\r\n\r\n  const userRoutes = hasUploadPermission && !hasAdminPermission ? ['upload'] : [];\r\n  const userTitles = hasUploadPermission && !hasAdminPermission ? ['Upload'] : [];\r\n\r\n  const routes = [...commonRoutes, ...adminRoutes, ...userRoutes];\r\n  const titles = [...commonTitles, ...adminTitles, ...userTitles];\r\n  \r\n  \r\n  const { url } = useRouteMatch();\r\n  const location = useLocation();\r\n  const path = location.pathname;\r\n  const [checkPathActive, setCheckPathActive] = useState('/');\r\n  const pathRegex = new RegExp('.*\\/sequencer\\/(\\\\w+)(?=\\/|)', 'g');\r\n\r\n  useEffect(() => {\r\n    const result = pathRegex.exec(path);\r\n    if (result) {\r\n      setCheckPathActive(result[1]);\r\n    }\r\n  }, [path]);\r\n\r\n  return (\r\n    <Box>\r\n      <Box className={styles.sidebarNav}>\r\n        <Box className={styles.sidebarWrap}>\r\n          <Box sx={{\r\n            display: 'flex', flexDirection: 'column', justifyContent: 'space-between', height: '97vh', marginTop: '2vh',\r\n          }}\r\n          >\r\n            <Box className={styles.iconList}>\r\n              {routes.map((route, index) => (\r\n                <NavLink\r\n                  className={styles.navlink}\r\n                  to={route!=='documentation' ? `${url}/${route}` : path}\r\n                  onClick={route==='documentation' ? ()=>window.open(\"https://archmap-docu.readthedocs.io/\") : ()=>{}}\r\n                  key={route.toString()}\r\n                >\r\n                  <Tooltip\r\n                    title={titles[index]}\r\n                    placement=\"right\"\r\n                    componentsProps={{\r\n                      tooltip: {\r\n                        sx: {\r\n                          bgcolor: '#5676E4',\r\n                        },\r\n                      },\r\n                    }}\r\n                  >\r\n                    <Box\r\n                      className={styles.navbarItemContainer}\r\n                      sx={{ background: checkPathActive === route ? '#5676E5' : '#184060' }}\r\n                    >\r\n                      <ListItemIcon className={styles.listItemIcon}>\r\n                        {indexIcon(index)}\r\n                      </ListItemIcon>\r\n                    </Box>\r\n                  </Tooltip>\r\n                </NavLink>\r\n              ))}\r\n            </Box>\r\n            <Box>\r\n              {/* <NavLink\r\n                to=\"/legalnotice\"\r\n                className={styles.navlinkIcon}\r\n                style={{ display: \"block\", marginBottom: \"1em\" }}\r\n              >\r\n                <Tooltip\r\n                  title=\"legalnotice\"\r\n                  placement=\"right\"\r\n                  componentsProps={{\r\n                    tooltip: {\r\n                      sx: {\r\n                        bgcolor: '#5676E4',\r\n                      },\r\n                    },\r\n                  }}\r\n                >\r\n                  <Box\r\n                    sx={{\r\n                      display: \"flex\",\r\n                      justifyContent: \"center\",\r\n                      alignItems: \"center\",\r\n                    }}\r\n                  >\r\n                    <ListItemIcon sx={{ justifyContent: \"center\" }}>\r\n                      <PolicyIcon sx={{ color: \"white\" }} />\r\n                    </ListItemIcon>\r\n                  </Box>\r\n                </Tooltip>\r\n              </NavLink> */}\r\n\r\n              <NavLink\r\n                to=\"/\"\r\n                onClick={() => {\r\n                  setUser(null);\r\n                  ProfileService.clearProfileCache();\r\n                  localStorage.removeItem('user');\r\n                  localStorage.removeItem('jwt');\r\n                }}\r\n                className={styles.navlinkIcon}\r\n                style={{ marginBottom: '1em' }}\r\n              >\r\n                <Tooltip\r\n                  title=\"Logout\"\r\n                  placement=\"right\"\r\n                  componentsProps={{\r\n                    tooltip: {\r\n                      sx: {\r\n                        bgcolor: '#5676E4',\r\n                      },\r\n                    },\r\n                  }}\r\n                >\r\n                  <Box\r\n                    sx={{\r\n                      display: 'flex',\r\n                      justifyContent: 'center',\r\n                      alignItems: 'center',\r\n                      marginBottom: \"1em\"\r\n                    }}\r\n                  >\r\n                    <ListItemIcon sx={{ justifyContent: 'center' }}>\r\n                      <LogoutIcon sx={{ color: 'white' }} />\r\n                    </ListItemIcon>\r\n                  </Box>\r\n                </Tooltip>\r\n              </NavLink>\r\n            </Box>\r\n          </Box >\r\n        </Box >\r\n      </Box >\r\n    </Box>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport styles from './header.module.css';\r\nimport { Link } from 'react-router-dom';\r\nimport ProfileImage from 'components/ProfileImage';\r\nimport Stack from '@mui/material/Stack';\r\n\r\nfunction Header({\r\n  title,\r\n  rightOfTitle,\r\n  replaceRight,\r\n  loggedIn = true,\r\n}) {\r\n  return (\r\n    <header className={styles.header}>\r\n      <div className={styles.titleRow}>\r\n        <h1 className={styles.title}>{title}</h1>\r\n        {rightOfTitle}\r\n      </div>\r\n      {/* render avatar and settings page if logged in */}\r\n      {loggedIn && (\r\n      <Stack direction=\"row\" spacing={4} alignItems=\"flex-end\">\r\n        {replaceRight}\r\n        <Link to=\"/sequencer/settings\">\r\n          <ProfileImage sizePixels={42} />\r\n        </Link>\r\n      </Stack>\r\n      )}\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import { Box, Stack } from '@mui/material';\r\nimport React, { useContext, useEffect, useRef } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport NavBar from 'components/NavBar';\r\nimport Header from 'components/general/Header';\r\nimport Footer from 'components/Footer';\r\nimport LoginForm from 'components/LoginForm';\r\nimport RegistrationForm from 'components/RegistrationForm';\r\nimport PasswordForgetForm from 'components/PasswordForgetForm';\r\nimport { LoginContext } from 'shared/context/loginContext';\r\nimport styles from './headerView.module.css';\r\n\r\n// The GeneMapper HeaderView for both the logged-in and non-logged-in version.\r\n// For the non-logged in version the navigation bar is rendered.\r\nfunction HeaderView({\r\n  title, rightOfTitle, replaceHeaderRight, children, loggedIn = true,\r\n}) {\r\n  const ref = useRef();\r\n\r\n  useEffect(() => {\r\n    console.log(ref);\r\n  }, []);\r\n\r\n  // The below variables are only necessary to initialize when\r\n  // the non-logged in version is used.\r\n  let onLoginClicked = null;\r\n  let onSignUpClicked = null;\r\n  let history = null;\r\n  let context = null;\r\n\r\n  // if not logged in, call the following code.\r\n  if (!loggedIn) {\r\n    context = useContext(LoginContext);\r\n\r\n    onLoginClicked = () => {\r\n      context.switchRegister(false);\r\n      context.switchLogin(true);\r\n    };\r\n\r\n    onSignUpClicked = () => {\r\n      context.switchLogin(false);\r\n      context.switchRegister(true);\r\n    };\r\n\r\n    history = useHistory();\r\n  }\r\n\r\n  return (\r\n    <Box\r\n      ref={ref}\r\n      sx={{\r\n        width: '100%',\r\n        height: '100vh',\r\n        overflowY: 'auto',\r\n      }}\r\n    >\r\n      {/* render navigation bar if not logged in */}\r\n      {!loggedIn && (\r\n        <NavBar\r\n          onLoginClicked={onLoginClicked}\r\n          onSignUpClicked={onSignUpClicked}\r\n          executeScroll={() => history.push({ pathname: '/', state: { contact_us: true } })}\r\n        />\r\n      )}\r\n      {/* render of necessary pop-ups when not logged in */}\r\n      {context && context.loginVisible && <LoginForm />}\r\n      {context && context.registerVisible && <RegistrationForm />}\r\n      {context && context.forgetVisible && <PasswordForgetForm />}\r\n      <Box sx={{\r\n        minHeight: 'calc(100vh - 40px)',\r\n        padding: '12px 60px 0 60px',\r\n        boxSizing: 'border-box',\r\n        display: 'flex',\r\n      }}\r\n      >\r\n        <Stack\r\n          direction=\"column\"\r\n          sx={{\r\n            // height: \"98vh\",\r\n            width: '100%',\r\n            paddingLeft: '80px',\r\n            flexGrow: 1,\r\n          }}\r\n        >\r\n          <div style={{ paddingLeft: '60px', paddingRight: '60px' }}>\r\n            <Header\r\n              title={title}\r\n              rightOfTitle={rightOfTitle}\r\n              replaceRight={replaceHeaderRight}\r\n              loggedIn={loggedIn}\r\n            />\r\n          </div>\r\n\r\n          <Stack\r\n            ref={ref}\r\n            className=\"flexContainer\"\r\n            direction=\"row\"\r\n            sx={{ flexGrow: 1 }}\r\n          >\r\n            <div className={styles.content}>\r\n              {children}\r\n            </div>\r\n          </Stack>\r\n        </Stack>\r\n      </Box>\r\n      <Footer />\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default HeaderView;\r\n","import {\r\n  Icon, IconButton, createTheme, ThemeProvider,\r\n} from '@mui/material';\r\nimport React from 'react';\r\nimport { colors } from 'shared/theme/colors';\r\nimport AddIcon from '@mui/icons-material/Add';\r\n\r\n// const themeIcon = createTheme({\r\n//   palette: {\r\n//     primary: colors.plus,\r\n//   },\r\n// });\r\n// use primary as backgroundColor in line 21 not working. So I just hard coded the color\r\n// in order to let the plus thinner,we can not use the mui plusicon.\r\n\r\nexport default function PlusIcon({ onClick }) {\r\n  return (\r\n  // <ThemeProvider theme={themeIcon}>\r\n    <IconButton\r\n      sx={{ p: 0 }}\r\n      style={{\r\n        backgroundColor: '#5676E4', minHeight: 38, minWidth: 38,\r\n      }}\r\n      aria-label=\"plus icon\"\r\n      onClick={onClick}\r\n    >\r\n      <AddIcon sx={{ fontSize: 30, color: 'white' }} />\r\n    </IconButton>\r\n  // </ThemeProvider>\r\n\r\n  );\r\n}\r\n","// import axiosInstance from './axiosInstance';\r\nimport MockMemberService from './mock/Member.service';\r\n\r\nconst MOCK_MEMBERS = false;\r\n\r\nexport function enhanceMember(member) {\r\n  return { ...member, id: member._id };\r\n}\r\n\r\nconst MemberService = MOCK_MEMBERS ? MockMemberService : {\r\n\r\n  async getTeamMembers(teamId) {\r\n    const { data } = await axiosInstance.get(`/teams/${teamId}/members`);\r\n    return enhanceMember(data);\r\n  },\r\n};\r\n\r\nexport default MemberService;\r\n","import MemberService from '../Member.service';\r\nimport ProfileService from '../Profile.service';\r\n\r\nlet mockTeams = [\r\n  {\r\n    id: '1',\r\n    name: 'Biotechnology Team',\r\n    description: 'The Biotechnology Team works in integration of natural sciences and engineering sciences in order to achieve the application of organisms, cells, parts thereof and molecular analogues for products and services.',\r\n    adminIds: [6, 7],\r\n    invitedMemberIds: [],\r\n    memberIds: ['626bdb1ed76c8b968a50f833', 2, 3, 4, 5],\r\n    projects: [],\r\n    visibility: 'PUBLIC',\r\n    institutionId: '1',\r\n  },\r\n  {\r\n    id: '2',\r\n    name: 'Genomics Team',\r\n    description: 'The Genomics Team works in field of biology focusing on the structure, function, evolution, mapping, and editing of genomes.',\r\n    adminIds: ['626bdb1ed76c8b968a50f833'],\r\n    invitedMemberIds: [],\r\n    memberIds: [2, 3, 4, 5],\r\n    projects: [],\r\n    visibility: 'PUBLIC',\r\n    institutionId: '3',\r\n  },\r\n  {\r\n    id: '3',\r\n    name: 'Heinig Lab',\r\n    description: 'Heinig Lab bla bla',\r\n    adminIds: ['626bdb1ed76c8b968a50f833'],\r\n    invitedMemberIds: [],\r\n    memberIds: [3, 4, 5],\r\n    projects: [],\r\n    visibility: 'PRIVATE',\r\n    institutionId: '3',\r\n  },\r\n];\r\nlet runningId = 2;\r\n\r\nconst TeamService = {\r\n  async leaveTeam(team) {\r\n    mockTeams = mockTeams.filter((t) => t.id !== team.id);\r\n  },\r\n\r\n  async createTeam(name, description, institutionId) {\r\n    // fake effect\r\n    await new Promise((resolve) => setTimeout(resolve, 1000));\r\n    runningId += 1;\r\n    const user = await ProfileService.getProfile();\r\n    const newTeam = {\r\n      id: runningId.toString(),\r\n      name,\r\n      country: null,\r\n      description,\r\n      backgroundPictureURL: null,\r\n      adminIds: [user.id], // TODO: make sure that the backend puts my user ID here\r\n      memberIds: [],\r\n      invitedMemberIds: [],\r\n      visibility: 'private',\r\n      institutionId,\r\n    };\r\n    mockTeams = [...mockTeams, newTeam];\r\n    return newTeam;\r\n  },\r\n\r\n  async removeMemberFromTeam(teamId, memberId) {\r\n    const team = mockTeams.find((t) => t.id === teamId);\r\n    if (!team) {\r\n      throw new Error('Team not found');\r\n    }\r\n    team.memberIds = team.memberIds.filter((id) => id !== memberId);\r\n  },\r\n\r\n  async getTeam(id) {\r\n    const team = mockTeams.find((t) => t.id === id);\r\n    if (team == null) {\r\n      throw new Error(`Could not find team with id ${id}`);\r\n    }\r\n    return team;\r\n  },\r\n\r\n  async getInstitutionTeams(institutionId) {\r\n    return mockTeams.filter((team) => team.institutionId === institutionId);\r\n  },\r\n\r\n  async getMembers(teamId) {\r\n    const team = await TeamService.getTeam(teamId);\r\n    return Promise.all([\r\n      ...team.adminIds,\r\n      ...team.memberIds,\r\n    ].map(MemberService.getMember));\r\n  },\r\n\r\n  async getMyTeams() {\r\n    return mockTeams;\r\n  },\r\n\r\n  async getMyAdminTeams() {\r\n    const myTeams = await TeamService.getMyTeams();\r\n    const user = await ProfileService.getProfile();\r\n    return myTeams.filter((t) => t.adminIds.includes(user.id));\r\n  },\r\n  getTeams: async (params) => {\r\n    let preparedTeams = mockTeams.map(\r\n      (team) => ({ ...team, title: team.name }\r\n      ),\r\n    );\r\n    if (params.keyword) {\r\n      preparedTeams = preparedTeams.filter(\r\n        (team) => team.name.toLowerCase().includes(params.keyword.toLowerCase()),\r\n      );\r\n    }\r\n    if (params.visibility) {\r\n      preparedTeams = preparedTeams.filter(\r\n        (team) => team.visibility.toUpperCase().includes(params.visibility),\r\n      );\r\n    }\r\n\r\n    if (!params.sortBy || params.sortBy === 'name') {\r\n      preparedTeams = preparedTeams.sort((a, b) => (`${a.name}`).localeCompare(b.name));\r\n    }\r\n    return preparedTeams;\r\n  },\r\n\r\n};\r\n\r\nexport default TeamService;\r\n","import MockTeamService from './mock/Team.service';\r\nimport axiosInstance from './axiosInstance';\r\nimport ProfileService from './Profile.service';\r\n\r\nconst MOCK_TEAMS = false;\r\nconst MODEL = 'teams';\r\n\r\nfunction enhanceTeam(team) {\r\n  return { ...team, id: team._id, name: team.title };\r\n}\r\n\r\nconst TeamService = MOCK_TEAMS ? MockTeamService : {\r\n  async leaveTeam(teamId) {\r\n    try {\r\n      await axiosInstance.delete(`/teams/${teamId}/join`);\r\n    } catch (e) {\r\n      throw Error(e.response.data);\r\n    }\r\n  },\r\n\r\n  async createTeam(name, description, institutionId) {\r\n    const { data } = await axiosInstance.post('/teams', {\r\n      title: name,\r\n      description,\r\n      institutionId,\r\n      visibility: 'PRIVATE',\r\n    });\r\n    return enhanceTeam(data);\r\n  },\r\n\r\n  async joinTeam(teamId) {\r\n    const user = await ProfileService.getProfile();\r\n    const { data: updatedTeam } = await axiosInstance.put(`/${MODEL}/${teamId}/join`, { userId: user.id });\r\n    return updatedTeam;\r\n  },\r\n\r\n  async inviteMemberByEmail(teamId, email) {\r\n    try {\r\n      await axiosInstance.put(`/teams/${teamId}/invite`, { email });\r\n    } catch (e) {\r\n      throw Error(e.response.data);\r\n    }\r\n  },\r\n\r\n  async removeMemberFromTeam(teamId, memberId) {\r\n    try {\r\n      await axiosInstance.delete(`/teams/${teamId}/members/${memberId}`);\r\n    } catch (e) {\r\n      throw Error(e.response.data);\r\n    }\r\n  },\r\n\r\n  async makeTeamAdmin(teamId, userId) {\r\n    try {\r\n      await axiosInstance.put(`/teams/${teamId}/admin`, { userId });\r\n    } catch (e) {\r\n      throw Error(e.response.data);\r\n    }\r\n  },\r\n\r\n  async removeTeamAdmin(teamId, userId) {\r\n    try {\r\n      await axiosInstance.delete(`/teams/${teamId}/admins/${userId}`);\r\n    } catch (e) {\r\n      throw Error(e.response.data);\r\n    }\r\n  },\r\n\r\n  async removeProjectFromTeam(teamId, projectId) {\r\n    try {\r\n      await axiosInstance.delete(`/teams/${teamId}/projects/${projectId}`);\r\n    } catch (e) {\r\n      throw Error(e.response.data);\r\n    }\r\n  },\r\n\r\n  async getTeam(teamId) {\r\n    const { data } = await axiosInstance.get(`/teams/${teamId}`);\r\n    return enhanceTeam(data);\r\n  },\r\n\r\n  async changeTeamDescription(teamId, description) {\r\n    const { data } = await axiosInstance.put(`/teams/${teamId}`, { description });\r\n    return data;\r\n  },\r\n\r\n  async changeTeamVisibility(teamId, visibility) {\r\n    const { data } = await axiosInstance.put(`/teams/${teamId}`, { visibility });\r\n    return data;\r\n  },\r\n\r\n  async getInstitutionTeams(institutionId) {\r\n    const { data } = await axiosInstance.get(`/institutions/${institutionId}/teams`);\r\n    return data.map(enhanceTeam);\r\n  },\r\n\r\n  async getMembers(teamId) {\r\n    const { data } = await axiosInstance.get(`/teams/${teamId}/members`);\r\n    return data.map(enhanceTeam);\r\n  },\r\n\r\n  async getMyTeams() {\r\n    const user = await ProfileService.getProfile();\r\n    let { data } = await axiosInstance.get(`/users/${user.id}/teams`);\r\n    data = data.map(enhanceTeam);\r\n    return data;\r\n  },\r\n\r\n  getTeams: async (params) => {\r\n    const preparedParams = { ...params };\r\n    if (!preparedParams.sortBy || preparedParams.sortBy === 'name') {\r\n      preparedParams.sortBy = 'title';\r\n    }\r\n    const { data } = await axiosInstance.get(`/${MODEL}`, { params: preparedParams });\r\n\r\n    return data.map(enhanceTeam);\r\n  },\r\n\r\n  addProject: async (teamId, projectId) => {\r\n    const { data } = await axiosInstance.put(`/${MODEL}/${teamId}/add_project`, { projectId });\r\n    return data;\r\n  },\r\n};\r\n\r\nexport default TeamService;\r\n","import React, { useState } from 'react';\r\nimport Button from 'components/CustomButton';\r\nimport { Modal, ModalTitle } from 'components/Modal';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport Tooltip from '@mui/material/Tooltip';\r\n\r\nimport { useAuth } from 'shared/context/authContext';\r\nimport TeamService from 'shared/services/Team.service';\r\n\r\nfunction TeamLeaveButton({ team, onLeft }) {\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [user] = useAuth();\r\n\r\n  const handleOpenDialog = () => setDialogOpen(true);\r\n  const handleCloseDialog = () => setDialogOpen(false);\r\n\r\n  const onlyAdmin = team.adminIds.length === 1 && team.adminIds[0] === user._id;\r\n\r\n  async function leave() {\r\n    setErrorMessage('');\r\n    try {\r\n      await TeamService.leaveTeam(team.id);\r\n      handleCloseDialog();\r\n      onLeft(team);\r\n    } catch (e) {\r\n      setErrorMessage(e.message);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Tooltip title={onlyAdmin ? 'You are the only admin of this team.' : ''}>\r\n        <div>\r\n          <Button\r\n            type=\"critical\"\r\n            onClick={handleOpenDialog}\r\n            disabled={onlyAdmin}\r\n          >\r\n            Leave\r\n          </Button>\r\n        </div>\r\n      </Tooltip>\r\n      <Modal\r\n        isOpen={dialogOpen}\r\n        setOpen={(o) => !o && handleCloseDialog()}\r\n      >\r\n        <ModalTitle>\r\n          Leave\r\n        </ModalTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            Do you really want to leave the team &quot;\r\n            {team.name}\r\n            &quot;?\r\n          </DialogContentText>\r\n          {\r\n            errorMessage && (\r\n              <DialogContentText id=\"alert-dialog-description\" color=\"error\">\r\n                {errorMessage}\r\n              </DialogContentText>\r\n            )\r\n          }\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleCloseDialog} type=\"tertiary\">Cancel</Button>\r\n          <Button onClick={() => leave()} type=\"critical\" autoFocus>\r\n            Leave\r\n          </Button>\r\n        </DialogActions>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TeamLeaveButton;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport SettingsIcon from '@mui/icons-material/Settings';\r\nimport ListCard from 'components/general/ListCard';\r\nimport TeamLeaveButton from 'components/teams/overview/TeamLeaveButton';\r\nimport Button from 'components/CustomButton';\r\nimport styles from './teamCard.module.css';\r\nimport { useAuth } from 'shared/context/authContext';\r\n\r\nfunction TeamCard({ team, onLeft }) {\r\n  const [user] = useAuth();\r\n\r\n  const history = useHistory();\r\n  const navigateToTeam = () => history.push(`/sequencer/teams/${team.id}`);\r\n\r\n  const preventBubble = (evt) => {\r\n    evt.stopPropagation();\r\n  };\r\n\r\n  const {\r\n    name, description, adminIds, memberIds,\r\n  } = team;\r\n  return (\r\n    <ListCard\r\n      title={name}\r\n      description={description}\r\n      nextToTitle={(\r\n        <span className={styles.accessRightIndicator}>\r\n          {adminIds.indexOf(user._id) !== -1 ? 'admin' : 'member'}\r\n        </span>\r\n      )}\r\n      trailing={[\r\n        adminIds.indexOf(user._id) !== -1 ? (\r\n          <Button\r\n            key=\"settings\"\r\n            endIcon={<SettingsIcon />}\r\n            variant=\"outlined\"\r\n            sx={{ marginRight: '6px' }}\r\n            onClick={navigateToTeam}\r\n          >\r\n            Settings\r\n          </Button>\r\n        ) : <div key=\"nothing\" />,\r\n        memberIds?.includes(user._id) && (\r\n        <div key=\"leave\" onClick={preventBubble} onKeyPress={preventBubble} role=\"button\" tabIndex={0}>\r\n          <TeamLeaveButton team={team} onLeft={onLeft} />\r\n        </div>\r\n        ),\r\n      ]}\r\n      onClick={navigateToTeam}\r\n    />\r\n  );\r\n}\r\n\r\nexport default TeamCard;\r\n","import React from 'react';\r\n\r\nfunction SpaceBetweenCards() {\r\n  return (\r\n    <div style={{ height: '16px' }} />\r\n  );\r\n}\r\n\r\nexport default SpaceBetweenCards;\r\n","import React from 'react';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport SpaceBetweenCards from 'components/general/SpaceBetweenCards';\r\n\r\n/**\r\n * @param {isLoading} whether the data is still loading (spinner will be shown)\r\n * @param {elements} a list of list elements to iterate over\r\n *                   - each element needs to have the id property\r\n * @param {cardBuilder} takes an element and returns a card\r\n * @param {noElementsMessage} a message to show if there are no elements\r\n * @returns react elements\r\n */\r\nfunction LoadingList({\r\n  isLoading, elements, cardBuilder, noElementsMessage,\r\n}) {\r\n  function loadingWrapper(orElse) {\r\n    return isLoading ? (\r\n      <CircularProgress />\r\n    ) : orElse;\r\n  }\r\n\r\n  return (\r\n    loadingWrapper(\r\n      elements.length ? (\r\n        elements.map((elem) => (\r\n          <div key={elem.id || elem._id}>\r\n            {cardBuilder(elem)}\r\n            <SpaceBetweenCards />\r\n          </div>\r\n        ))\r\n      ) : (\r\n        <span>{noElementsMessage}</span>\r\n      ),\r\n    )\r\n  );\r\n}\r\n\r\nexport default LoadingList;\r\n","export default __webpack_public_path__ + \"static/media/helmholtz-logo.afeb6aa4.jpg\";","import helmholtz from 'assets/helmholtz-logo.jpg';\r\nimport tum from 'assets/tum-logo.png';\r\nimport MemberService from '../Member.service';\r\nimport ProfileService from '../Profile.service';\r\nimport TeamService from '../Team.service';\r\n\r\nconst mockLeftIds = [];\r\nlet runningId = 3;\r\n\r\nlet mockInstitutions = [\r\n  {\r\n    id: '1',\r\n    name: 'Helmholtz Institute',\r\n    country: 'Germany',\r\n    description: 'The primary objective of Helmholtz Zentrum Mnchen in its role as German Center for Environmental Health is to improve the health of each individual, but also the health of society as a whole (public health). \\n\\nTo achieve this goal, the Center conducts research on the interaction of genetics, environmental factors and lifestyle and applies the insights gained from this research to develop individualized strategies for the diagnosis, treatment and prevention of serious common diseases such as diabetes mellitus, allergies and lung diseases.',\r\n    backgroundPictureURL: 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/22/Helmholtz_Zentrum_M%C3%BCnchen.jpg/2560px-Helmholtz_Zentrum_M%C3%BCnchen.jpg',\r\n    adminIds: ['626bdb1ed76c8b968a50f833'],\r\n    memberIds: [2],\r\n    profilePictureURL: helmholtz,\r\n  },\r\n  {\r\n    id: '2',\r\n    name: 'Technische Universitt Mnchen',\r\n    country: 'Germany',\r\n    description: 'The Technical University of Munich (TUM) is one of Europes top universities. It is committed to excellence in research and teaching, interdisciplinary education and the active promotion of promising young scientists. The university also forges strong links with companies and scientific institutions across the world. \\nTUM was one of the first universities in Germany to be named a University of Excellence. Moreover, TUM regularly ranks among the best European universities in international rankings.',\r\n    backgroundPictureURL: 'https://www.in.tum.de/fileadmin/_processed_/5/5/csm_2006_1015Bild0136_9dc504e910.jpg',\r\n    profilePictureURL: tum,\r\n    adminIds: ['626bdb1ed76c8b968a50f833'],\r\n    memberIds: [1, 2, 3, 4, 5],\r\n  },\r\n  {\r\n    id: '3',\r\n    name: 'Rostlab',\r\n    country: 'Germany',\r\n    description: 'The lab\\'s research is driven by a conviction that protein and DNA sequences encode a significant core of information about the ultimate structure and function of genetic material and its gene products. \\nResearch goals of the lab involve using protein and DNA sequences along with evolutionary information to predict a protein\\'s: overall function, interaction partners, secondary structure, disordered regions, subcellular localization, membrane spanning protein structure, intra-chain residue contacts, cell cycle control, and domain boundaries. \\nAnother significant research focus is to improve the effectiveness and efficiency of structural genomics projects\\' ability to determine the structures of proteins on a large scale.',\r\n    profilePictureURL: 'https://avatars.githubusercontent.com/u/4093405?s=200&v=4',\r\n    adminIds: [1],\r\n    memberIds: ['626bdb1ed76c8b968a50f833', 2, 3, 4, 5],\r\n  },\r\n];\r\n\r\nconst InstitutionService = {\r\n  async createInstitution(name, country) {\r\n    // fake effect\r\n    await new Promise((resolve) => setTimeout(resolve, 1000));\r\n    const user = await ProfileService.getProfile();\r\n    runningId += 1;\r\n    const newInstitution = {\r\n      id: runningId.toString(),\r\n      name,\r\n      country,\r\n      description: '',\r\n      avatarUrl: null,\r\n      backgroundPictureURL: null,\r\n      adminIds: [user.id], // TODO: make sure that the backend puts my user ID here\r\n      memberIds: [],\r\n    };\r\n    mockInstitutions = [...mockInstitutions, newInstitution];\r\n    return newInstitution;\r\n  },\r\n\r\n  async leaveInstitution(institutionId) {\r\n    mockLeftIds.push(institutionId);\r\n  },\r\n\r\n  async getMyInstitutions() {\r\n    return mockInstitutions.filter((institution) => !mockLeftIds.includes(institution.id));\r\n  },\r\n\r\n  async getMyAdminInstitutions() {\r\n    const myInstitutions = await InstitutionService.getMyInstitutions();\r\n    const user = await ProfileService.getProfile();\r\n    return myInstitutions.filter((i) => i.adminIds.includes(user.id));\r\n  },\r\n\r\n  async getInstitution(id) {\r\n    return mockInstitutions.find((institution) => institution.id === id);\r\n  },\r\n\r\n  async getMembers(institutionId) {\r\n    const institution = await InstitutionService.getInstitution(institutionId);\r\n    return Promise.all([\r\n      ...institution.adminIds,\r\n      ...institution.memberIds,\r\n    ].map(MemberService.getMember));\r\n  },\r\n\r\n  async removeMemberFromInstitution(institutionId, memberId) {\r\n    const institution = mockInstitutions.find((i) => i.id === institutionId);\r\n    if (!institution) {\r\n      throw new Error('Institution not found');\r\n    }\r\n    institution.memberIds = institution.memberIds.filter((id) => id !== memberId);\r\n  },\r\n\r\n  getInstitutionById: async (id) => InstitutionService.getInstitution(`${id}`),\r\n\r\n  getInstitutions: async (params) => {\r\n    let preparedInstitution = mockInstitutions.map((institution) => ({\r\n      ...institution,\r\n      profilePictureURL: institution.avatarUrl,\r\n    }));\r\n    if (params.keyword) {\r\n      preparedInstitution = preparedInstitution.filter(\r\n        (team) => team.name.toLowerCase().includes(params.keyword.toLowerCase()),\r\n      );\r\n    }\r\n\r\n    if (!params.sortBy || params.sortBy === 'name') {\r\n      preparedInstitution = preparedInstitution.sort((a, b) => (`${a.name}`).localeCompare(b.name));\r\n    }\r\n    return preparedInstitution;\r\n  },\r\n\r\n  getTeamsOfInstitutionById: async (id) => TeamService.getInstitutionTeams(id)\r\n  ,\r\n\r\n};\r\n\r\nexport default InstitutionService;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA4QAAAH0BAMAAACX3f7gAAAAMFBMVEVjk8X4+v2Xt9l5o85ZjMLZ5fGqxODP3u3L2+yCqNFRh7+yyuO/0+ihvt0wcLP///+uRon8AAAEaUlEQVR4XuzRQREAMAgAoDVZXQv71gIW0IMKvFqOe4UKUYhCFCpEIQpRqBCFKEShQhSiEIUKUYhCFCpEIQpRmHHWHwqbPTomAhCGAQDoAA1cjOAAS/UKeyb2YiGZuHL/Fj5XcMyWJ39rKFyJQoUKFSpUqFChQoUKFSpUqFChQoUKFSpUqFChQoUKFSpUqFChQoUKFSpUqFChQoUKFSpUqFChQoUKFSpUqFChQoUKFSpUqFChQoUKFSpUqFChQoUKFSpUqFChQoUKFSpUqFChQoUKFSpUqFChQoUKFSpUqFChQoUKFSpUqFChQoUKFSpUqFChQoUKFSpUqFChQoUKFSpUqFChQoUKFUbVlkV3VH1fGD1nFl3RstcLX/bo2ASAEAiAYMeWZG+mmptq+uEd8ggyW8Am8yFMV6KEI7y8TthXrhodt9x3vkmIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAgRIkSIECFChAjPQ4gQIUKECBEiRIgQIUKECBEiRIgQIUKECBEiRIgQIUKECBEiRIgQIUKECBEiRIgQIUKECBEiRIgQIUKECBEiRIgQIUKECBEiRIgQIUKECBEiRIgQIUKECBEi/DuECBEiRIgQIUKECBEiRIgQIUKECBEiRIgQIUKECBEiRIgQIUKECBEiRIgQIUKECBEiRIgQIUKECBEiRIgQIUKECBEiRIhwt0fHJgACMQAAA9/Y/Yiu6gg/kBBbywQLEe9WuCeFRxRtWRVvG9mzomhmyxlV+63wm/h5oUIUohCFClGIQhQqRCEKUagQhShEoUIUohCFClGIQi7zFYd6tLsECgAAAABJRU5ErkJggg==\"","import MockInstitutionService from './mock/Institution.service';\r\nimport axiosInstance from './axiosInstance';\r\nimport { enhanceMember } from './Member.service';\r\nimport ProfileService from './Profile.service';\r\n\r\nconst MOCK_INSTUTITIONS = false;\r\n\r\nconst MODEL = 'institutions';\r\n\r\nfunction enhanceInstitution(institution) {\r\n  return { ...institution, id: institution._id };\r\n}\r\n\r\nconst InstitutionService = MOCK_INSTUTITIONS ? MockInstitutionService : {\r\n  async createInstitution(name, country) {\r\n    const { data } = await axiosInstance.post('/institutions', {\r\n      name,\r\n      country,\r\n    });\r\n    return enhanceInstitution(data);\r\n  },\r\n\r\n  async getMyInstitutions() {\r\n    const user = await ProfileService.getProfile();\r\n    let { data } = await axiosInstance.get(`/users/${user.id}/institutions`);\r\n    data = data.map(enhanceInstitution);\r\n    return data;\r\n  },\r\n\r\n  async getMyAdminInstitutions() {\r\n    const myInstitutions = await InstitutionService.getMyInstitutions();\r\n    const user = await ProfileService.getProfile();\r\n    return myInstitutions.filter((i) => i.adminIds.includes(user.id));\r\n  },\r\n\r\n  async getInstitution(institutionId) {\r\n    const { data } = await axiosInstance.get(`/institutions/${institutionId}`);\r\n    return enhanceInstitution(data);\r\n  },\r\n\r\n  async leaveInstitution(institutionId) {\r\n    try {\r\n      await axiosInstance.delete(`/institutions/${institutionId}/join`);\r\n    } catch (e) {\r\n      throw Error(e.response.data);\r\n    }\r\n  },\r\n\r\n  async getMembers(institutionId) {\r\n    const { data } = await axiosInstance.get(`/institutions/${institutionId}/members`);\r\n    return data.map(enhanceMember);\r\n  },\r\n\r\n  getInstitutions: async (params) => {\r\n    const preparedParams = { ...params };\r\n    if (!preparedParams.sortBy) {\r\n      preparedParams.sortBy = 'name';\r\n    }\r\n    const { data } = await axiosInstance.get(`/${MODEL}`, { params: preparedParams });\r\n    return data.map(enhanceInstitution);\r\n  },\r\n\r\n  getInstitutionById: async (id) => {\r\n    // change later with getInstitution(...)\r\n    const { data } = await axiosInstance.get(`/${MODEL}/${id}`);\r\n    return data;\r\n  },\r\n\r\n  getTeamsOfInstitutionById: async (id) => {\r\n    const { data } = await axiosInstance.get(`/${MODEL}/${id}/teams`);\r\n    return data;\r\n  },\r\n\r\n  async updateDetails(institutionId, details) {\r\n    await axiosInstance.put(`/institutions/${institutionId}`, { description: details });\r\n  },\r\n\r\n  async inviteMember(institutionId, invitedMail) {\r\n    await axiosInstance.put(`/institutions/${institutionId}/invite`, { email: invitedMail });\r\n  },\r\n\r\n  async removeMemberFromInstitution(institutionId, memberId) {\r\n    try {\r\n      await axiosInstance.delete(`/institutions/${institutionId}/members/${memberId}`);\r\n    } catch (e) {\r\n      throw Error(e.response.data);\r\n    }\r\n  },\r\n\r\n  async makeInstitutionAdmin(institutionId, memberId) {\r\n    await axiosInstance.put(`/institutions/${institutionId}/admin`, { userId: memberId });\r\n  },\r\n\r\n  async removeInstitutionAdmin(institutionId, memberId) {\r\n    await axiosInstance.delete(`/institutions/${institutionId}/admins/${memberId}`);\r\n  },\r\n};\r\n\r\nexport default InstitutionService;\r\n","import React, { useState } from 'react';\r\nimport Button from 'components/CustomButton';\r\nimport { Modal, ModalTitle } from 'components/Modal';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport Tooltip from '@mui/material/Tooltip';\r\n\r\nimport { useAuth } from 'shared/context/authContext';\r\nimport InstitutionService from 'shared/services/Institution.service';\r\n\r\nfunction InstitutionLeaveButton({ institution, onLeft }) {\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [user] = useAuth();\r\n\r\n  const handleOpenDialog = () => setDialogOpen(true);\r\n  const handleCloseDialog = () => setDialogOpen(false);\r\n\r\n  const onlyAdmin = institution.adminIds.length === 1 && institution.adminIds[0] === user._id;\r\n\r\n  async function leave() {\r\n    setErrorMessage('');\r\n    try {\r\n      await InstitutionService.leaveInstitution(institution.id);\r\n      handleCloseDialog();\r\n      onLeft(institution);\r\n    } catch (e) {\r\n      setErrorMessage(e.message);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Tooltip title={onlyAdmin ? 'You are the only admin of this institution.' : ''}>\r\n        <div>\r\n          <Button\r\n            type=\"critical\"\r\n            onClick={handleOpenDialog}\r\n            disabled={onlyAdmin}\r\n          >\r\n            Leave\r\n          </Button>\r\n        </div>\r\n      </Tooltip>\r\n      <Modal\r\n        isOpen={dialogOpen}\r\n        setOpen={(o) => !o && handleCloseDialog()}\r\n      >\r\n        <ModalTitle>\r\n          Leave institution\r\n        </ModalTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            Do you really want to leave the institution &quot;\r\n            {institution.name}\r\n            &quot;?\r\n          </DialogContentText>\r\n          {\r\n            errorMessage && (\r\n              <DialogContentText id=\"alert-dialog-description\" color=\"error\">\r\n                {errorMessage}\r\n              </DialogContentText>\r\n            )\r\n          }\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleCloseDialog}>Cancel</Button>\r\n          <Button onClick={() => leave()} type=\"critical\" autoFocus>\r\n            Leave\r\n          </Button>\r\n        </DialogActions>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default InstitutionLeaveButton;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport SettingsIcon from '@mui/icons-material/Settings';\r\nimport Button from 'components/CustomButton';\r\nimport ListCard from 'components/general/ListCard';\r\nimport InstitutionLeaveButton from 'components/institutions/InstitutionLeaveButton';\r\nimport styles from './institutionCard.module.css';\r\n\r\nimport { useAuth } from 'shared/context/authContext';\r\n\r\nfunction InstitutionCard({\r\n  institution, onLeft, replaceTrailing, disableLink,\r\n}) {\r\n  const [user] = useAuth();\r\n\r\n  const history = useHistory();\r\n  const navigateToInstitution = () => {\r\n    if (disableLink) return;\r\n    history.push(`/sequencer/institutions/${institution.id}`);\r\n  };\r\n\r\n  const {\r\n    name, profilePictureURL, adminIds, memberIds,\r\n  } = institution;\r\n  return (\r\n    <ListCard\r\n      title={name}\r\n      imageURL={profilePictureURL}\r\n      enforceImage\r\n      nextToTitle={(\r\n        <span className={styles.accessRightIndicator}>\r\n          {adminIds.indexOf(user._id) !== -1 ? 'admin' : 'member'}\r\n        </span>\r\n      )}\r\n      trailing={replaceTrailing ? replaceTrailing(institution) : [\r\n        adminIds.indexOf(user._id) !== -1 ? (\r\n          <Button\r\n            key=\"settings\"\r\n            endIcon={<SettingsIcon />}\r\n            variant=\"outlined\"\r\n            sx={{ marginRight: '6px' }}\r\n            onClick={navigateToInstitution}\r\n          >\r\n            Settings\r\n          </Button>\r\n        ) : <div key=\"nothing\" />,\r\n        memberIds?.includes(user._id) && <InstitutionLeaveButton key=\"leave\" institution={institution} onLeft={onLeft} />,\r\n      ]}\r\n      onClick={navigateToInstitution}\r\n      sx={{ pointer: 'cursor' }}\r\n    />\r\n  );\r\n}\r\n\r\nexport default InstitutionCard;\r\n","import React from 'react';\r\nimport LoadingList from 'components/general/LoadingList';\r\nimport InstitutionCard from 'components/institutions/InstitutionCard';\r\n\r\nfunction InstitutionList({\r\n  isLoading, institutions, disableLinks, replaceTrailing, onLeft,\r\n}) {\r\n  return (\r\n    <LoadingList\r\n      isLoading={isLoading}\r\n      elements={institutions}\r\n      cardBuilder={(institution) => (\r\n        <InstitutionCard\r\n          institution={institution}\r\n          replaceTrailing={replaceTrailing}\r\n          disableLink={disableLinks}\r\n          onLeft={onLeft}\r\n        />\r\n      )}\r\n      noElementsMessage=\"No institutions.\"\r\n    />\r\n  );\r\n}\r\n\r\nexport default InstitutionList;\r\n","import React, { useEffect, useState } from 'react';\r\nimport InstitutionService from 'shared/services/Institution.service';\r\n\r\nconst InstitutionContext = React.createContext();\r\nInstitutionContext.displayName = 'Institution Context';\r\n\r\nfunction InstitutionProvider(props) {\r\n  const [institutions, setInstitutions] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    InstitutionService.getMyInstitutions()\r\n      .then((newInstitutions) => {\r\n        setInstitutions(newInstitutions);\r\n        setIsLoading(false);\r\n      })\r\n      .finally(() => setIsLoading(false));\r\n  }, []);\r\n\r\n  const value = { isLoading, institutions, setInstitutions };\r\n\r\n  return (\r\n    // eslint-disable-next-line react/jsx-props-no-spreading\r\n    <InstitutionContext.Provider value={value} {...props} />\r\n  );\r\n}\r\n\r\nfunction useInstitutions() {\r\n  const context = React.useContext(InstitutionContext);\r\n  if (context === undefined) {\r\n    throw new Error('useInstitutions must be used within a InstitutionContext');\r\n  }\r\n  return context;\r\n}\r\n\r\nexport { InstitutionProvider, useInstitutions };\r\n","import Button from 'components/CustomButton';\r\nimport React, { useState } from 'react';\r\nimport InstitutionList from '../InstitutionList';\r\nimport { useInstitutions } from 'shared/context/institutionContext';\r\n\r\nfunction InstitutionChoice({ onChoiceChange }) {\r\n  const { institutions } = useInstitutions();\r\n  const [chosen, setChosen] = useState(institutions[0]);\r\n\r\n  return (\r\n    <InstitutionList\r\n      institutions={institutions}\r\n      disableLinks\r\n      replaceTrailing={(institution) => (\r\n        <Button\r\n          onClick={() => {\r\n            setChosen(institution.id);\r\n            onChoiceChange(institution.id);\r\n          }}\r\n          type={institution.id === chosen ? 'primary' : 'tertiary'}\r\n        >\r\n          {institution.id === chosen ? 'Chosen' : 'Choose'}\r\n        </Button>\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nexport default InstitutionChoice;\r\n","/* eslint-disable no-return-assign */\r\nimport React, { useState } from 'react';\r\nimport Button from 'components/CustomButton';\r\nimport TextField from '@mui/material/TextField';\r\nimport Alert from '@mui/material/Alert';\r\nimport AlertTitle from '@mui/material/AlertTitle';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport { Modal, ModalTitle } from 'components/Modal';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport TeamService from 'shared/services/Team.service';\r\nimport InstitutionChoice from 'components/institutions/InstitutionChoice';\r\nimport { useInstitutions } from 'shared/context/institutionContext';\r\n\r\nexport default function TeamCreationDialog({ open, handleClose, onCreated }) {\r\n  const [name, setName] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [nameError, setNameError] = useState('');\r\n  const [descriptionError, setDescriptionError] = useState('');\r\n  const [institutionId, setInstitutionId] = useState(null);\r\n  const [creationError, setCreationError] = useState('');\r\n  const { institutions } = useInstitutions();\r\n\r\n  async function create() {\r\n    if (!name) {\r\n      setNameError('Please enter a name.');\r\n    }\r\n    if (!description) {\r\n      setDescriptionError('Please enter a description.');\r\n    }\r\n    if (!name || !description) return;\r\n    setLoading(true);\r\n    try {\r\n      const newTeam = await TeamService.createTeam(name, description, institutionId);\r\n      onCreated(newTeam);\r\n      handleClose();\r\n      setName('');\r\n      setDescription('');\r\n    } catch (e) {\r\n      setCreationError(e.response.data);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={open}\r\n      setOpen={(o) => !o && handleClose()}>\r\n      <ModalTitle>Create a Team</ModalTitle>\r\n      <DialogContent>\r\n        {institutions.length > 0 && (\r\n          <>\r\n            <TextField\r\n              autoFocus\r\n              margin=\"dense\"\r\n              id=\"name\"\r\n              label=\"Name\"\r\n              type=\"text\"\r\n              variant=\"standard\"\r\n              required\r\n              error={!!nameError}\r\n              helperText={nameError}\r\n              onChange={(evt) => { setName(evt.target.value); setNameError(''); }}\r\n            />\r\n            <TextField\r\n              margin=\"dense\"\r\n              id=\"description\"\r\n              label=\"Description\"\r\n              type=\"text\"\r\n              fullWidth\r\n              multiline\r\n              maxRows={3}\r\n              variant=\"standard\"\r\n              required\r\n              error={!!descriptionError}\r\n              helperText={descriptionError}\r\n              onChange={(evt) => { setDescription(evt.target.value); setDescriptionError(''); }}\r\n            />\r\n            <br />\r\n            <br />\r\n          </>\r\n        )}\r\n        {institutions.length === 0 ? (\r\n          <Alert\r\n            severity=\"warning\"\r\n            sx={{ width: '100%' }}\r\n          >\r\n            <AlertTitle>You are not an admin of any institution.</AlertTitle>\r\n            To create a team, you need to be the admin of an institution.\r\n            That is because you can only create teams within institutions directly.\r\n          </Alert>\r\n        ) : <InstitutionChoice onChoiceChange={setInstitutionId} />}\r\n        {creationError && (\r\n          <Alert severity=\"error\" sx={{ marginTop: '12px' }}>\r\n            {creationError}\r\n          </Alert>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} type=\"tertiary\">\r\n          Cancel\r\n        </Button>\r\n        {\r\n          loading ? (\r\n            <CircularProgress />\r\n          ) : (\r\n            <Button onClick={() => create()} disabled={!name || !institutionId}>\r\n              Create\r\n            </Button>\r\n          )\r\n        }\r\n      </DialogActions>\r\n    </Modal >\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Alert } from '@mui/material';\r\nimport Stack from '@mui/material/Stack';\r\nimport Typography from '@mui/material/Typography';\r\nimport PlusIcon from 'components/general/PlusIcon';\r\nimport TeamCard from 'components/teams/TeamCard';\r\nimport styles from './teamOverview.module.css';\r\nimport TeamService from 'shared/services/Team.service';\r\nimport TeamCreationDialog from 'components/teams/overview/TeamCreationDialog';\r\n\r\nfunction TeamOverview() {\r\n  const [teams, setTeams] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    TeamService.getMyTeams()\r\n      .then(setTeams)\r\n      .finally(() => setIsLoading(false));\r\n  }, []);\r\n\r\n  function onLeft(team) {\r\n    setTeams(teams.filter((i) => i.id !== team.id));\r\n  }\r\n\r\n  const [createOpen, setCreateOpen] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      <Stack direction=\"row\" className=\"stack\" alignItems=\"Center\">\r\n        <Typography variant=\"h5\" sx={{ pr: 1 }}>Your Teams</Typography>\r\n        <PlusIcon onClick={() => setCreateOpen(true)} />\r\n      </Stack>\r\n      <br />\r\n      {!isLoading && teams.length === 0 ? (\r\n        <Alert severity=\"info\">\r\n          You have not created any teams yet. Create one by clicking the Plus-Icon.\r\n        </Alert>\r\n      ) : ''}\r\n      {teams.map((team) => (\r\n        <div key={team.id}>\r\n          <TeamCard\r\n            team={team}\r\n            onLeft={(t) => onLeft(t)}\r\n          />\r\n          <div className={styles.cardSpacing} />\r\n        </div>\r\n      ))}\r\n      {createOpen && <TeamCreationDialog\r\n        open={createOpen}\r\n        handleClose={() => setCreateOpen(false)}\r\n        onCreated={(newTeam) => setTeams([...teams, newTeam])}\r\n      /> }\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TeamOverview;\r\n","/* eslint-disable no-return-assign */\r\nimport React, { useState } from 'react';\r\nimport Button from 'components/CustomButton';\r\nimport TextField from '@mui/material/TextField';\r\nimport { Modal, ModalTitle } from 'components/Modal';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport Alert from '@mui/material/Alert';\r\nimport InstitutionService from 'shared/services/Institution.service';\r\nimport { CircularProgress } from '@mui/material';\r\n\r\nexport default function InstitutionCreationDialog({ open, handleClose, onCreated }) {\r\n  const [name, setName] = useState('');\r\n  const [country, setCountry] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [nameError, setNameError] = useState('');\r\n  const [countryError, setCountryError] = useState('');\r\n  const [creationError, setCreationError] = useState('');\r\n\r\n  async function create() {\r\n    if (!name) {\r\n      setNameError('Please enter a name.');\r\n    }\r\n    if (!country) {\r\n      setCountryError('Please enter a description.');\r\n    }\r\n    if (!name || !country) return;\r\n    setLoading(true);\r\n    try {\r\n      const newInstitution = await InstitutionService.createInstitution(name, country);\r\n      onCreated(newInstitution);\r\n      handleClose();\r\n      setName('');\r\n      setCountry('');\r\n    } catch (e) {\r\n      setCreationError(e.response.data);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Modal isOpen={open} setOpen={(o) => !o && handleClose()}>\r\n      <ModalTitle>Create an Institution</ModalTitle>\r\n      <DialogContent>\r\n        <TextField\r\n          autoFocus\r\n          label=\"Name\"\r\n          type=\"text\"\r\n          variant=\"standard\"\r\n          required\r\n          error={!!nameError}\r\n          helperText={nameError}\r\n          onChange={(evt) => { setName(evt.target.value); setNameError(''); }}\r\n        />\r\n        <TextField\r\n          label=\"Country\"\r\n          type=\"text\"\r\n          fullWidth\r\n          multiline\r\n          variant=\"standard\"\r\n          required\r\n          error={!!countryError}\r\n          helperText={countryError}\r\n          onChange={(evt) => { setCountry(evt.target.value); setCountryError(''); }}\r\n        />\r\n        {creationError && (\r\n          <Alert severity=\"error\" sx={{ marginTop: '12px' }}>\r\n            {creationError}\r\n          </Alert>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button type=\"tertiary\" onClick={handleClose}>Cancel</Button>\r\n        {\r\n          loading ? (\r\n            <CircularProgress />\r\n          ) : (\r\n            <Button type=\"primary\" disabled={!name || !country} onClick={() => create()}>\r\n              Create\r\n            </Button>\r\n          )\r\n        }\r\n      </DialogActions>\r\n    </Modal>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport Stack from '@mui/material/Stack';\r\nimport Typography from '@mui/material/Typography';\r\nimport PlusIcon from 'components/general/PlusIcon';\r\nimport InstitutionCreationDialog from 'components/institutions/InstitutionCreationDialog';\r\nimport InstitutionList from 'components/institutions/InstitutionList';\r\nimport { useInstitutions } from 'shared/context/institutionContext';\r\n\r\nfunction InstitutionOverview() {\r\n  const { institutions, isLoading, setInstitutions } = useInstitutions();\r\n\r\n  function onLeft(institution) {\r\n    setInstitutions(institutions.filter((i) => i.id !== institution.id));\r\n  }\r\n\r\n  const [createOpen, setCreateOpen] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      <Stack direction=\"row\" className=\"stack\" alignItems=\"Center\">\r\n        <Typography variant=\"h5\" sx={{ pr: 1 }}>Your Institutions</Typography>\r\n        <PlusIcon onClick={() => setCreateOpen(true)} />\r\n      </Stack>\r\n      <br />\r\n      <InstitutionList\r\n        isLoading={isLoading}\r\n        institutions={institutions}\r\n        onLeft={(inst) => onLeft(inst)}\r\n      />\r\n      <InstitutionCreationDialog\r\n        open={createOpen}\r\n        handleClose={() => setCreateOpen(false)}\r\n        onCreated={(newInstitution) => setInstitutions([...institutions, newInstitution])}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default InstitutionOverview;\r\n","import React from 'react';\r\nimport HeaderView from 'components/general/HeaderView';\r\nimport styles from './communityOverview.module.css';\r\nimport TeamOverview from 'components/teams/overview/TeamOverview';\r\nimport InstitutionOverview from 'components/institutions/InstitutionOverview';\r\nimport { Divider } from '@mui/material';\r\n\r\nfunction CommunityOverview({ sidebarShown }) {\r\n  return (\r\n    <HeaderView\r\n      sidebarShown={sidebarShown}\r\n      title=\"Community\"\r\n    >\r\n      <div className={styles.content}>\r\n        <TeamOverview />\r\n        <br />\r\n        <Divider />\r\n        <br />\r\n        <InstitutionOverview />\r\n      </div>\r\n    </HeaderView>\r\n  );\r\n}\r\n\r\nexport default CommunityOverview;\r\n","import axiosInstance from './axiosInstance';\r\n\r\nconst MODELS = 'models';\r\nconst MODEL = 'model';\r\n\r\nconst ModelsService = {\r\n  getModels: async () => {\r\n    const { data } = await axiosInstance.get(`/${MODELS}`);\r\n    return data;\r\n  },\r\n  getModelById: async (id) => {\r\n    const { data } = await axiosInstance.get(`${MODEL}/${id}`);\r\n    return data;\r\n  },\r\n};\r\n\r\nexport default ModelsService;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Box, Link, Typography } from '@mui/material';\r\nimport ModelsService from 'shared/services/Models.service';\r\nimport { useParams } from 'react-router-dom';\r\nimport CustomButton from 'components/CustomButton';\r\nimport { useHistory, useLocation } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport { colors } from \"shared/theme/colors\";\r\n\r\nexport const LearnMoreModelComponent = ({ onClick, id, isMap = false, isSearchPage = false }) => {\r\n\r\n  const [model, setModel] = useState(null);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      ModelsService.getModelById(id)\r\n        .then((data) => setModel(data))\r\n        .catch((err) => console.log(err));\r\n    }\r\n  }, [id]);\r\n\r\n  return (\r\n    <Box sx={{\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'flex-start',\r\n      justifyContent: 'space-between',\r\n    }}\r\n    >\r\n      {isSearchPage && <Typography onClick={history.goBack} sx={{ cursor: \"pointer\", fontSize: \"18px\", fontWeight: 500,  color: colors.neutral[800], \":hover\": { color: colors.primary[500] }}}>Go Back</Typography>}\r\n      <Box sx={{\r\n        display: 'flex', flexDirection: 'row', width: '100%', justifyContent: 'space-between',\r\n      }}\r\n      >\r\n        <Typography sx={{ fontSize: '36px', fontWeigth: 700 }}>{model?.name}</Typography>\r\n      </Box>\r\n      <Box>\r\n        <Typography sx={{ fontSize: '20px', fontWeight: 600, borderBottom: '1px solid black' }}>Overview</Typography>\r\n      </Box>\r\n\r\n      <Typography sx={{ width: '100%', maxWidth: '800px' }}>Description: {model?.description}</Typography>\r\n      {\r\n        // isSelect\r\n        isMap && !isSearchPage &&\r\n        <CustomButton sx={{ marginTop: \"1em\", padding: \"0.5em 2em 0.5em 2em\" }} type=\"primary\" onClick={() => onClick(model)}>Select</CustomButton>\r\n      }\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default function LearnMore({handleSelect}) {\r\n  const { id } = useParams();\r\n  const path = useLocation();\r\n\r\n  return (\r\n    <Box sx={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n      <Box sx={{\r\n        marginTop: '12px',\r\n        width: '80%',\r\n        height: '80vh'\r\n      }}\r\n      >\r\n        <LearnMoreModelComponent id={id} isMap={true} onClick={handleSelect} isSearchPage={path.pathname.includes(\"search\")}/>\r\n      </Box>\r\n    </Box>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { Modal } from 'components/Modal';\r\nimport { LearnMoreModelComponent } from 'views/References/LearnMoreModel';\r\nimport { Container } from '@mui/material';\r\n\r\n/**\r\n * Modal displaying info about the model with the given model id\r\n * @param id Model id\r\n * @param open True if the info modal should be shown\r\n * @param open Function accepting true or false as a parameter\r\n */\r\nfunction ModelInfo({ id, open, setOpen }) {\r\n  return (\r\n    <Modal\r\n      isOpen={open}\r\n      setOpen={setOpen}\r\n    >\r\n      <Container>\r\n        <LearnMoreModelComponent id={id} />\r\n      </Container>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default ModelInfo;\r\n","import React from 'react';\r\nimport { Skeleton } from '@mui/material';\r\n\r\nconst RectSkeleton = ({ width, height,sx }) => (\r\n  <Skeleton variant=\"rectangular\" width={width} height={height} sx={sx} />\r\n);\r\n\r\nexport default RectSkeleton;\r\n","import { Box, Button, Container, Typography } from \"@mui/material\"\r\nimport ModelInfo from \"components/GeneMapper/ModelInfo\"\r\nimport { Modal } from \"components/Modal\"\r\nimport { useEffect, useRef, useState } from \"react\"\r\nimport { colors } from \"shared/theme/colors\"\r\nimport { LearnMoreModelComponent } from \"views/References/LearnMoreModel\"\r\nimport RectSkeleton from \"components/Skeletons/RectSkeleton\"\r\n\r\n// Outlined Button specific to Models and Atlases\r\n/**\r\n * OutlinedButton\r\n * Specific to Model and Atlas Cards\r\n * @param content text content to be displayed\r\n * @param link button href link  \r\n */\r\nexport const OutlinedButtonSelect = ({ content, onSelect, disabled=false }) => {\r\n return (\r\n  <Button\r\n    variant=\"outlined\"\r\n    disableRipple\r\n    onClick={onSelect}\r\n    sx={{\r\n      color: !disabled ? colors.primary[100] : colors.neutral[800] , borderWidth: \"2px\", \r\n      borderColor: !disabled ? colors.primary[100] : colors.neutral[800], \r\n      borderRadius: \"1.2rem\", justifyContent: 'center', textAlign: 'center',\r\n      \":hover\": { \r\n        borderColor: !disabled ? '#01579B' : colors.neutral[600], borderWidth: \"2px\", \r\n        backgroundColor: !disabled ? colors.primary[100] : colors.neutral[100], \r\n        color: !disabled ? '#01579B' : colors.neutral[600], transition: '0.5s' \r\n    }\r\n    }}\r\n  >\r\n    {content}\r\n   </Button>\r\n )\r\n}\r\n\r\n/**\r\n * ModelCard\r\n * @param width default value 100% of parent\r\n * @param height default value 100% of parent\r\n * @param title\r\n * @param description\r\n * @param mapLink onHover button Map url\r\n * @param learnMoreLink onHover button Learn More url\r\n */\r\nexport const ModelCardSelect = ({ \r\n  width = \"100%\", height = \"100%\", title, description, onSelect, \r\n  selected, learnMoreLink, modelObject={}, disabled=false,isLoading=true\r\n}) => {\r\n\r\n  const [hover, setHover] = useState(false)\r\n  const ref = useRef()\r\n  const [flexDir, setFlexDir] = useState(\"column\")\r\n  const [modelInfoOpen, setModelInfoOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n\r\n    // checks if the parent element is wider than it is longer\r\n    // if it is, converts the flex direction to row\r\n    if(!isLoading && ref.current.clientWidth > ref.current.clientHeight) {\r\n      setFlexDir(\"row\")\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    (isLoading)? (\r\n      <RectSkeleton width={width} height={height} sx={{borderRadius: \"1.2rem\"}} />\r\n  ) :\r\n    <Box\r\n      sx={{\r\n        width: width,\r\n        height: height,\r\n      }}\r\n    >\r\n      <Box\r\n        ref={ref}\r\n        sx={{ \r\n          width: \"100%\", \r\n          height: \"100%\", \r\n          position: \"relative\", \r\n          cursor: disabled ? \"pointer\": \"initial\", \r\n          display: \"flex\", \r\n          flexDirection: \"column\", \r\n          justifyContent: \"center\"\r\n        }}\r\n        onMouseEnter={() => setHover(true)}\r\n        onMouseLeave={() => setHover(false)}\r\n        >  \r\n        {(hover || disabled) &&\r\n          <Box \r\n          style={{ background: !disabled ? \"linear-gradient(#4F83CC, #01579B)\" : \"linear-gradient(#e7e7e7, #d0d0d0)\" }} \r\n          sx={{ \r\n            position: \"absolute\", \r\n            width: \"100%\", \r\n            height: \"100%\", \r\n            borderRadius: \"1.2rem\",\r\n            p:\"1rem\",\r\n            opacity: 0.9\r\n          }}>\r\n          {disabled &&\r\n            <Typography sx={{ position: \"absolute\", fontSize: \"12px\", fontWeight: \"bold\", color: colors.neutral[900], textAlign: \"center\", left: \"30%\", top:'7%' }}>\r\n              Not Compatible\r\n            </Typography>}\r\n            <Box\r\n              sx={{\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                gap: \"1rem\",\r\n                // styles below center the buttons to the very center of the component\r\n                position: \"absolute\",\r\n                top: \"50%\",\r\n                left: \"50%\",\r\n                transform: \"translate(-50%, -50%)\"\r\n              }}  \r\n              >\r\n              {!disabled && <OutlinedButtonSelect content=\"Select\" onSelect={() => onSelect(modelObject)}/>}\r\n              {hover && <OutlinedButtonSelect content=\"Learn More\" onSelect={() => setModelInfoOpen(true)} disabled={disabled}/>}\r\n            </Box>\r\n          </Box>\r\n        }\r\n      <Box sx={{\r\n          width: '100%',\r\n          height: \"100%\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          p: \"1.2rem\",\r\n          boxShadow: hover ? \"none\" : \"0px 0px 10px rgba(0, 0, 0, 0.15)\",\r\n          borderRadius: \"1.2rem\",\r\n          borderStyle:\"solid\",\r\n          borderColor: selected ? \"#008BF5\" : 'transparent',\r\n          borderWidth:\"4px\",\r\n        }}\r\n      >\r\n        <Typography sx={{ fontSize: \"1.4rem\", fontWeight: \"bold\", color: \"#000000\"}}>{title}</Typography>\r\n        <Typography \r\n          className=\"modelDescription\" \r\n          sx={{\r\n            paddingTop: '10px', \r\n            fontSize: \"1rem\", \r\n            color: colors.neutral[800],\r\n            display: '-webkit-box',\r\n            overflow: 'hidden',\r\n            WebkitBoxOrient: 'vertical',\r\n            WebkitLineClamp: 2,\r\n          }}>{description}</Typography>\r\n      </Box>\r\n      </Box>\r\n      <ModelInfo id={modelObject._id} open={modelInfoOpen} setOpen={setModelInfoOpen} />\r\n    </Box>\r\n  )\r\n}","import axiosInstance from './axiosInstance';\r\n\r\nconst ATLASES = 'atlases';\r\nconst ATLAS = 'atlas';\r\n\r\nconst AtlasService = {\r\n  getAtlases: async () => {\r\n    const { data } = await axiosInstance.get(`/${ATLASES}`);\r\n    return data;\r\n  },\r\n  getAtlasById: async (id) => {\r\n    const { data } = await axiosInstance.get(`/${ATLAS}/${id}`);\r\n    return data;\r\n  },\r\n};\r\n\r\nexport default AtlasService;\r\n","import { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport axiosInstance from \"shared/services/axiosInstance\";\r\n\r\nconst { Dialog, DialogTitle, DialogContent, TextField, DialogActions, Button } = require(\"@mui/material\")\r\n\r\n\r\n\r\n\r\nconst EditAtlasModal = (props) => {\r\n\r\n    const navigate = useHistory();\r\n    const {isEditModalOpen, setIsEditModalOpen, atlasDetailsForm, setAtlasDetailsForm} = props;\r\n    const [atlasInDialog, setAtlasInDialog] = useState({...atlasDetailsForm});\r\n    const handleEdit = () => {\r\n        // Implement the logic to handle the atlas details update\r\n        // You can access the updated atlas details from the form inputs\r\n        // and update the state or make an API request to update the data\r\n\r\n        axiosInstance\r\n          .put(`/api/atlases/${atlasDetailsForm._id}`, atlasInDialog)\r\n          .then(() => {\r\n            setIsEditModalOpen(false);\r\n            navigate.goBack()\r\n            window.location.reload();\r\n            setAtlasDetailsForm(atlasInDialog);\r\n          })\r\n          .catch((error) => {\r\n            console.error(error);\r\n          });\r\n    \r\n        // After the update is successful, close the modal\r\n      };\r\n\r\n      useEffect(() => {\r\n        setAtlasInDialog({ ...atlasDetailsForm });\r\n      }, [atlasDetailsForm]);\r\n    \r\n    return(\r\n        <Dialog\r\n              open={isEditModalOpen}\r\n              onClose={() => setIsEditModalOpen(false)}\r\n              aria-labelledby=\"edit-dialog-title\"\r\n              aria-describedby=\"edit-dialog-description\"\r\n              maxWidth=\"md\"\r\n              fullWidth\r\n            >\r\n              <DialogTitle id=\"edit-dialog-title\">Edit Atlas</DialogTitle>\r\n              <DialogContent dividers>\r\n                <form onSubmit={handleEdit}>\r\n                  <TextField\r\n                    label=\"Name\"\r\n                    value={atlasInDialog?.name || \"\"}\r\n                    onChange={(e) =>\r\n                        setAtlasInDialog((prevAtlasDetails) => ({\r\n                        ...prevAtlasDetails,\r\n                        name: e.target.value,\r\n                      }))\r\n                    }\r\n                    fullWidth\r\n                    margin=\"normal\"\r\n                  />\r\n                  <TextField\r\n                    label=\"Preview Picture URL\"\r\n                    value={atlasInDialog?.previewPictureURL || \"\"}\r\n                    onChange={(e) =>\r\n                        setAtlasInDialog((prevAtlasDetails) => ({\r\n                        ...prevAtlasDetails,\r\n                        previewPictureURL: e.target.value,\r\n                      }))\r\n                    }\r\n                    fullWidth\r\n                    margin=\"normal\"\r\n                  />\r\n                  <TextField\r\n                    label=\"Modalities\"\r\n                    value={atlasInDialog?.modalities || \"\"}\r\n                    onChange={(e) =>\r\n                        setAtlasInDialog((prevAtlasDetails) => ({\r\n                        ...prevAtlasDetails,\r\n                        modalities: e.target.value,\r\n                      }))\r\n                    }\r\n                    fullWidth\r\n                    margin=\"normal\"\r\n                  />\r\n                  <TextField\r\n                    label=\"Number of Cells\"\r\n                    value={atlasInDialog?.numberOfCells || \"\"}\r\n                    onChange={(e) =>\r\n                        setAtlasInDialog((prevAtlasDetails) => ({\r\n                        ...prevAtlasDetails,\r\n                        numberOfCells: e.target.value,\r\n                      }))\r\n                    }\r\n                    fullWidth\r\n                    margin=\"normal\"\r\n                  />\r\n\r\n                  <TextField\r\n                    label=\"Species\"\r\n                    value={atlasInDialog?.species || \"\"}\r\n                    onChange={(e) =>\r\n                        setAtlasInDialog((prevAtlasDetails) => ({\r\n                        ...prevAtlasDetails,\r\n                        species: e.target.value,\r\n                      }))\r\n                    }\r\n                    fullWidth\r\n                    margin=\"normal\"\r\n                  />\r\n\r\n                  <TextField\r\n                    label=\"Compatible Models\"\r\n                    value={atlasInDialog?.compatibleModels || \"\"}\r\n                    onChange={(e) =>\r\n                        setAtlasInDialog((prevAtlasDetails) => ({\r\n                        ...prevAtlasDetails,\r\n                        compatibleModels: e.target.value,\r\n                      }))\r\n                    }\r\n                    fullWidth\r\n                    margin=\"normal\"\r\n                  />\r\n\r\n                  {/* Add more fields for other atlas details */}\r\n                </form>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button onClick={() => setIsEditModalOpen(false)}>\r\n                  Cancel\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={handleEdit}\r\n                >\r\n                  Save\r\n                </Button>\r\n              </DialogActions>\r\n            </Dialog>\r\n\r\n    )\r\n\r\n}\r\n\r\nexport default EditAtlasModal;","import React, { useEffect, useState } from 'react';\r\nimport { Box, Typography, Link, Tooltip, Button, Dialog, DialogTitle, DialogContent, DialogActions, DialogContentText } from '@mui/material';\r\nimport CustomButton from 'components/CustomButton';\r\nimport AtlasService from 'shared/services/Atlas.service';\r\nimport { useParams, useHistory, useLocation } from 'react-router-dom';\r\nimport StarIcon from '@mui/icons-material/Star';\r\nimport { colors } from 'shared/theme/colors';\r\nimport { useAuth } from 'shared/context/authContext';\r\nimport axiosInstance from 'shared/services/axiosInstance';\r\nimport EditAtlasModal from 'components/EditAtlasModal';\r\n\r\nexport const LearnMoreAtlasComponent = ({ onClick, id, isMap = false, isSearchPage = false }) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [atlas, setAtlas] = useState(null);\r\n  const history = useHistory();\r\n\r\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const path = useLocation().pathname;\r\n  const [user, setUser] = useAuth();\r\n\r\n\r\n  const handleDelete = () => {\r\n    setIsLoading(true);\r\n    axiosInstance\r\n      .delete(`/api/atlases/${id}`)\r\n      .then(() => {\r\n        setIsDeleteModalOpen(false);\r\n        setIsLoading(false);\r\n        history.goBack();\r\n        alert(\"Atlas  deleted successfully\");\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        setIsLoading(false);\r\n      });\r\n      setIsLoading(false);\r\n  };\r\n  \r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      AtlasService.getAtlasById(id)\r\n        .then((data) => setAtlas(data))\r\n        .catch((err) => console.log(err));\r\n    }\r\n  }, [id]);\r\n\r\n  return (\r\n    <>\r\n    <Box sx={{\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'flex-start',\r\n      justifyContent: 'space-between',\r\n    }}\r\n    >\r\n      {isSearchPage && <Typography onClick={history.goBack} sx={{ cursor: \"pointer\", fontSize: \"18px\", fontWeight: 500, color: colors.neutral[800], \":hover\": { color: colors.primary[500] } }}>Go Back</Typography>}\r\n      <Box sx={{\r\n        display: 'flex', flexDirection: 'row', width: '100%', justifyContent: 'space-between',\r\n      }}\r\n      >\r\n        <Tooltip title=\"atlas rating, 3 stars highest\" placement=\"bottom-end\">\r\n          <Typography sx={{ fontSize: '36px', fontWeight: 700 }}>\r\n            {atlas?.name} {atlas?.rating && [...Array(atlas?.rating)].map((e, i) => <StarIcon sx={{ color: 'gold' }} />)}\r\n          </Typography>\r\n        </Tooltip>\r\n      </Box>\r\n      <Box>\r\n        <Typography sx={{ fontSize: '20px', fontWeight: 600, borderBottom: '1px solid black' }}>Overview</Typography>\r\n      </Box>\r\n      {/* Species */}\r\n      <Box sx={{ display: 'flex', flexDirection: 'row', paddingTop: '16px' }}>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 500 }}>\r\n          Species:\r\n          &nbsp;\r\n        </Typography>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 300 }}>\r\n          {atlas?.species ? atlas.species : \"Not available\"}\r\n        </Typography>\r\n      </Box>\r\n      {/* Number of Samples/Individuals */}\r\n      <Box sx={{ display: 'flex', flexDirection: 'row' }}>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 500 }}>\r\n          Number of samples/individuals:\r\n          &nbsp;\r\n        </Typography>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 300 }}>\r\n          {atlas?.samples ? atlas.samples : \"Not available\"}\r\n        </Typography>\r\n      </Box>\r\n      {/* Number of Studies/Datasets */}\r\n      <Box sx={{ display: 'flex', flexDirection: 'row' }}>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 500 }}>\r\n          Number of Studies:\r\n          &nbsp;\r\n        </Typography>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 300 }}>\r\n          {atlas?.studies ? atlas.studies : \"Not available\"}\r\n        </Typography>\r\n      </Box>\r\n      {/* Cells in reference */}\r\n      <Box sx={{ display: 'flex', flexDirection: 'row' }}>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 500 }}>\r\n          Cells in Reference:\r\n          &nbsp;\r\n        </Typography>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 300 }}>\r\n          {atlas?.numberOfCells ? atlas.numberOfCells : \"Not available\"}\r\n        </Typography>\r\n      </Box>\r\n      {/* Modalities */}\r\n      <Box sx={{ display: 'flex', flexDirection: 'row' }}>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 500 }}>\r\n          Modalities:\r\n          &nbsp;\r\n        </Typography>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 300 }}>\r\n          {atlas?.modalities ? atlas.modalities : \"Not available\"}\r\n        </Typography>\r\n      </Box>\r\n      {/* DOI */}\r\n      <Box sx={{ display: 'flex', flexDirection: 'row' }}>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 500 }}>\r\n          DOI:\r\n          &nbsp;\r\n        </Typography>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 300 }}>\r\n          {atlas?.doi ? <Link href={atlas.doi} sx={{ textDecoration: 'none' }} target=\"_blank\" rel=\"noopener\">{atlas.doi}</Link> : \"Not available\"}\r\n        </Typography>\r\n      </Box>\r\n      {/* Atlas URL */}\r\n      <Box sx={{ display: 'flex', flexDirection: 'row' }}>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 500 }}>\r\n          URL:\r\n          &nbsp;\r\n        </Typography>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 300 }}>\r\n          {atlas?.url ? <Link href={atlas.url} sx={{ textDecoration: 'none' }} target=\"_blank\" rel=\"noopener\">{atlas.url}</Link> : \"Not available\"}\r\n        </Typography>\r\n      </Box>\r\n      {/* Atlas cell_type_key */}\r\n      <Box sx={{ display: 'flex', flexDirection: 'row' }}>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 500 }}>\r\n          Atlas cell type key:\r\n          &nbsp;\r\n        </Typography>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 300 }}>\r\n          {atlas?.cell_type_key ? atlas?.cell_type_key : \"Not available\"}\r\n        </Typography>\r\n      </Box>\r\n      {/* Atlas batch_key */}\r\n      <Box sx={{ display: 'flex', flexDirection: 'row' }}>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 500 }}>\r\n          Atlas batch key:\r\n          &nbsp;\r\n        </Typography>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 300 }}>\r\n          {atlas?.atlas_batch_key ? atlas?.atlas_batch_key : \"Not available\"}\r\n        </Typography>\r\n      </Box>\r\n      {/* Create an Edit and Delete Button */}\r\n      {user && user.isAdministrator && \r\n      <Box sx={{ display: 'flex', flexDirection: 'row' }}>\r\n        <Button sx={{ margin: '1em', padding: \"1em 2em 0.5em 2em\" }} type=\"primary\"  onClick={ () => setIsEditModalOpen(true) }>Edit</Button>\r\n        <Button sx={{ margin: '1em', padding: \"1em 2em 0.5em 2em\" }} type=\"primary\" onClick={ () => setIsDeleteModalOpen(true) } >Delete</Button>\r\n      </Box> }\r\n      \r\n\r\n      <Box sx={{ display: 'flex', flexDirection: 'row' }}>\r\n        \r\n      </Box>\r\n\r\n\r\n      {\r\n        isMap\r\n        &&\r\n        !isSearchPage\r\n        &&\r\n        <>\r\n          <CustomButton sx={{ marginTop: '1em', padding: \"0.5em 2em 0.5em 2em\" }} type=\"primary\" onClick={() => onClick(atlas)}>Select</CustomButton>\r\n        </>\r\n      }\r\n    </Box>\r\n    \r\n    <EditAtlasModal atlasDetailsForm= {atlas} setAtlasDetailsForm={setAtlas} isEditModalOpen={isEditModalOpen} setIsEditModalOpen={setIsEditModalOpen}></EditAtlasModal>\r\n    <Dialog\r\n      open={isDeleteModalOpen}\r\n      onClose={() => setIsDeleteModalOpen(false)}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n        <DialogTitle id=\"alert-dialog-title\">\r\n          {\"Do you want to delete this atlas?\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n        {isLoading ? <CircularProgress /> : <DialogContentText id=\"alert-dialog-description\">\r\n            Are you sure you want to delete this atlas?\r\n          </DialogContentText>\r\n        }\r\n        </DialogContent>  \r\n        <DialogActions>\r\n          <Button onClick={() => setIsDeleteModalOpen(false)}>\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={handleDelete} autoFocus>\r\n            Yes, Delete it!\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default function LearnMore({ handleSelect }) {\r\n  const path = useLocation();\r\n  const { id } = useParams();\r\n\r\n  return (\r\n    <Box sx={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n      <Box sx={{\r\n        marginTop: '12px',\r\n        width: '80%',\r\n        height: '80vh'\r\n      }}\r\n      >\r\n        <LearnMoreAtlasComponent id={id} isMap={true} onClick={handleSelect} isSearchPage={path.pathname.includes(\"search\")} />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Modal } from 'components/Modal';\r\nimport { LearnMoreAtlasComponent } from 'views/References/LearnMoreAtlas';\r\nimport { Container } from '@mui/material';\r\n\r\n/**\r\n * Modal displaying info about the atlas with the given atlas id\r\n * @param id Atlas id\r\n * @param open True if the info modal should be shown\r\n * @param open Function accepting true or false as a parameter\r\n */\r\nfunction AtlasInfo({ id, open, setOpen }) {\r\n  return (\r\n    <Modal\r\n      isOpen={open}\r\n      setOpen={setOpen}\r\n    >\r\n      <Container>\r\n        <LearnMoreAtlasComponent id={id} />\r\n      </Container>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default AtlasInfo;\r\n","import { useState, useRef, useEffect } from \"react\"\r\n\r\nimport { Box, Container, Typography } from '@mui/material'\r\n\r\nimport { OutlinedButtonSelect } from './ModelCardSelect'\r\n\r\nimport { borders } from \"@mui/system\"\r\nimport { Modal } from \"components/Modal\"\r\nimport { LearnMoreAtlasComponent } from \"views/References/LearnMoreAtlas\"\r\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\"\r\nimport AtlasInfo from \"components/GeneMapper/AtlasInfo\"\r\nimport RectSkeleton from \"components/Skeletons/RectSkeleton\"\r\n\r\n/**\r\n * Atlas Card \r\n * @param width default value is 100% of parent\r\n * @param height default value is 100% of parent\r\n * @param title title of AtlasCard\r\n * @param imgLink thumbnail photo url\r\n * @param modalities \r\n * @param cellsInReference\r\n * @param species\r\n * @param mapLink onHover button Map url\r\n * @param learnMoreLink onHover button Learn More url\r\n */\r\nexport default function AtlasCardSelect({\r\n  width = \"100%\", height = \"100%\", title, imgLink, modalities,\r\n  cellsInReference, species, mapLink, learnMoreLink, selected=false, \r\n  onSelect, atlasObject={},isLoading=true\r\n}) {\r\n\r\n  //check if the mouse is hovering above the card\r\n  const [isHover, setHover] = useState(false)\r\n\r\n  //check if the card is flat(width > height)\r\n  const [isFlat, setFlat] = useState(false)\r\n\r\n\r\n  const [atlasInfoOpen, setAtlasInfoOpen] = useState(false);\r\n\r\n  //ref to get the out most Box\r\n  const boxRef = useRef()\r\n  const history = useHistory();\r\n\r\n  //skleton image\r\n  const [isImageLoaded, setIsImageLoaded] = useState(false);\r\n  useEffect(() => {\r\n    const image = new Image();\r\n    image.src = imgLink;\r\n    image.onload = () => {\r\n      setIsImageLoaded(true);\r\n    };\r\n    image.onerror = () => {\r\n      setIsImageLoaded(true);\r\n    };\r\n  }, [imgLink]);\r\n\r\n  useEffect(() => {\r\n    //each time the card is rerendered, check if the card is flat or not\r\n    if (isImageLoaded && boxRef.current.clientWidth > boxRef.current.clientHeight) setFlat(true)\r\n  }, [])\r\n\r\n  return (\r\n    (!isImageLoaded || isLoading)? (\r\n      <RectSkeleton width={width} height={height} sx={{borderRadius: \"1.2rem\"}} />\r\n    ) :\r\n    <Box\r\n      sx={{\r\n        width, height\r\n      }}\r\n    >\r\n      <Box\r\n        ref={boxRef}\r\n        onMouseEnter={() => setHover(true)}\r\n        onMouseLeave={() => setHover(false)}\r\n        sx={{\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n          position: \"relative\",\r\n        }}\r\n      >\r\n        {\r\n          isHover &&\r\n          <Box\r\n            style={{\r\n              background: \"linear-gradient(#4F83CC, #01579B)\"\r\n            }}\r\n            sx={{\r\n              position: \"absolute\",\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              borderRadius: \"1.2rem\",\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n              justifyContent: \"center\",\r\n              opacity: 0.95\r\n            }}\r\n          >\r\n            <Box\r\n              sx={{\r\n                margin: \"auto\",\r\n                width: isFlat ? \"70%\" : \"60%\",\r\n                height: isFlat ? \"auto\" : \"40%\",\r\n                display: \"flex\",\r\n                flexDirection: isFlat ? \"row\" : \"column\",\r\n                justifyContent: \"space-evenly\",\r\n              }}\r\n            >\r\n              <OutlinedButtonSelect content=\"Select\" onSelect={() => onSelect(atlasObject)} />\r\n              <OutlinedButtonSelect content=\"Learn More\" onSelect={() => setAtlasInfoOpen(true)} />\r\n            </Box>\r\n          </Box>\r\n        }\r\n\r\n        <Box\r\n          sx={{\r\n            width: '100%',\r\n            height: '100%',\r\n            padding: '1rem',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            boxShadow: isHover ? 'none' : '0px 4px 6px 0px rgba(33, 37, 41, .2), 0px 0px 1px 0px rgba(33, 37, 41, .32)',\r\n            borderRadius: '1.2rem',\r\n            justifyContent: 'center',\r\n            borderStyle: 'solid',\r\n            borderColor: selected ? '#008BF5' : 'transparent',\r\n            borderWidth: '4px',\r\n          }}\r\n        >\r\n          <Typography\r\n            sx={{\r\n              fontSize: \"1.4rem\",\r\n              fontWeight: \"bold\"\r\n            }}\r\n          >\r\n            {title}\r\n          </Typography>\r\n\r\n          <Box component=\"img\" src={imgLink} alt=\"Atlas preview img\"\r\n            sx={{\r\n              width: \"80%\",\r\n              margin: \"auto\",\r\n              objectFit: \"cover\"\r\n            }}\r\n          />\r\n\r\n          <Box\r\n            sx={{\r\n              display: \"flex\",\r\n              flexDirection: \"row\",\r\n            }}\r\n          >\r\n            <Typography\r\n              sx={{\r\n                fontSize: \"1rem\",\r\n                fontWeight: \"bold\"\r\n              }}\r\n            >\r\n              Modalities:\r\n            </Typography>\r\n            &nbsp;\r\n            <Typography noWrap>{modalities}</Typography>\r\n          </Box>\r\n\r\n          <Box\r\n            sx={{\r\n              display: \"flex\",\r\n              flexDirection: \"row\",\r\n            }}\r\n          >\r\n            <Typography\r\n              sx={{\r\n                fontSize: \"1rem\",\r\n                fontWeight: \"bold\"\r\n              }}\r\n            >\r\n              Cells in Reference:\r\n            </Typography>\r\n            &nbsp;\r\n            <Typography>{cellsInReference}</Typography>\r\n          </Box>\r\n\r\n          <Box\r\n            sx={{\r\n              display: \"flex\",\r\n              flexDirection: \"row\",\r\n            }}\r\n          >\r\n            <Typography\r\n              sx={{\r\n                fontSize: \"1rem\",\r\n                fontWeight: \"bold\"\r\n              }}\r\n            >\r\n              Species:\r\n            </Typography>\r\n            &nbsp;\r\n            <Typography>{species}</Typography>\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n      <AtlasInfo id={atlasObject._id} open={atlasInfoOpen} setOpen={setAtlasInfoOpen} />\r\n    </Box>\r\n\r\n  )\r\n}","import React, { useRef, useState, useEffect } from 'react';\r\nimport { useLocation, Link } from 'react-router-dom';\r\n\r\nimport { Tab, Tabs, Box } from '@mui/material';\r\n\r\n/**\r\n * Styled Tab\r\n * packaged the Tab from the MUI and add style to fit our mock\r\n *\r\n * need a boolean parameter\r\n * - darkBackground\r\n * in order to render the Tab accordingly\r\n *\r\n * and a label, the content\r\n *\r\n * see the example StyledTab in TabGroup below for how to combine the Tab with a Link from react-router-dom\r\n */\r\nexport function StyledTab(props) {\r\n  const {\r\n    darkBackground, label, component, to, ...rest\r\n  } = props;\r\n\r\n  return (\r\n    <Tab\r\n      {...rest}\r\n      disableRipple\r\n      label={label}\r\n      component={component}\r\n      to={to}\r\n      sx={{\r\n        textTransform: 'none',\r\n        fontWeight: 'bold',\r\n        color: darkBackground ? 'white' : 'black',\r\n        opacity: 1,\r\n        '&.Mui-selected': {\r\n          fontWeight: 'bold',\r\n          color: darkBackground ? 'white' : 'black',\r\n          opacity: 1,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\n/**\r\n * Tab Group, the collection of Tabs\r\n *\r\n * !!! important\r\n * the value state is now designed to be organizd by it's parent to make it more flexble\r\n *\r\n * like the StyledTab, it also need a boolean parameter\r\n * - darkBackground\r\n * to render the Tab accordingly\r\n *\r\n * it also need an array of objects containing labels and paths / additionalContent\r\n *\r\n * for example:\r\n * [\r\n *     {\r\n *         label: \"tab 1\",\r\n *         path: \"/tab_1\"\r\n *     },\r\n *     {\r\n *         label: \"tab 2\",\r\n *         path: \"/tab_2\"\r\n *     },\r\n *     {\r\n *         label: \"tab 3\",\r\n *         path: \"/tab_3\"\r\n *     }\r\n * ]\r\n *\r\n * or:\r\n * [\r\n *     {\r\n *         label: \"tab 1\",\r\n *         additionalContent: (<Box>something</Box>)\r\n *     },\r\n *     {\r\n *         label: \"tab 2\",\r\n *         additionalContent: (<Box>something else</Box>)\r\n *     }\r\n * ]\r\n *\r\n * the default width and height is 100% of the containing block\r\n * but it is also possible to customize it\r\n *\r\n */\r\nexport function TabGroup(props) {\r\n  const position = useLocation();\r\n\r\n  const {\r\n    value, onValueChange, darkBackground, tabsInfo, width = '100%', height = '100%',\r\n  } = props;\r\n\r\n  const tabsRef = useRef();\r\n  const [tabsHeight, setTabsHeight] = useState(0);\r\n\r\n  useEffect(() => {\r\n    setTabsHeight(tabsRef.current.clientHeight);\r\n  }, []);\r\n\r\n  return (\r\n    <Box sx={{ width, height, position: 'relative' }}>\r\n      <Box ref={tabsRef}>\r\n        <Tabs\r\n          value={value}\r\n          onChange={(_, newValue) => onValueChange(newValue)}\r\n          sx={{\r\n            '& .MuiTabs-indicator': {\r\n              backgroundColor: darkBackground ? 'white' : 'black',\r\n            },\r\n          }}\r\n        >\r\n          {\r\n            tabsInfo.map((tabInfo, index) => (\r\n              <StyledTab\r\n                key={tabInfo.label}\r\n                value={index}\r\n                label={tabInfo.label}\r\n                component={Link}\r\n                to={tabInfo.path ? tabInfo.path : position.pathname}\r\n                darkBackground={darkBackground}\r\n              />\r\n            ))\r\n          }\r\n        </Tabs>\r\n      </Box>\r\n\r\n      {\r\n        tabsInfo[value].additionalContent\r\n        && (\r\n          <Box sx={{ width: '100%', height: `calc(100% - ${tabsHeight}px)`, overflowY: 'scroll' }}>\r\n            {tabsInfo[value].additionalContent}\r\n          </Box>\r\n        )\r\n      }\r\n\r\n    </Box>\r\n  );\r\n}\r\n","/* eslint-disable import/prefer-default-export */\r\nimport React from 'react';\r\nimport { Box, Stack } from '@mui/material';\r\nimport Typography from '@mui/material/Typography';\r\nimport { colors } from 'shared/theme/colors';\r\nimport RectSkeleton from \"components/Skeletons/RectSkeleton\"\r\n\r\n/**\r\n * TabCard for TabGroup Component / List of cards with select feature\r\n * @param width\r\n * @param height\r\n * @param data object containing information to be displayed on the card,\r\n * currently different for teams and demos.\r\n * Add property isDemo to demo datasets \"data\" property to visualize properly\r\n * @param handleOnClick executed function on card click\r\n * @param selected boolean parameter to indicate if a card element is selected\r\n * @param minimal makes the tabcard view minimal and shows only the most essential information\r\n*/\r\nexport const TabCard = ({\r\n  style, width, height, data, handleOnClick, selected, minimal, isLoading = true\r\n}) => (\r\n  (isLoading) ? (\r\n    <RectSkeleton width={width} height={height} sx={{ borderRadius: '0.625rem', marginBottom: '0.67em' }} />\r\n  ) :\r\n    <Box\r\n      onClick={handleOnClick}\r\n      sx={{\r\n        ...style,\r\n        width: { width }, height: { height }, backgroundColor: 'white', borderRadius: '0.625rem', marginBottom: '0.67em', cursor: 'pointer',\r\n      }}\r\n    >\r\n      <Box\r\n        sx={selected ? {\r\n          boxShadow: '0px 0px 2px rgba(0,0,0, 0.15)',\r\n          p: '0.5em',\r\n          borderRadius: '0.625rem',\r\n          borderColor: data.isAtlas ? '#008BF5' : 'transparent',\r\n          borderWidth: data.isAtlas ? '2px' : '0px',\r\n          borderStyle: data.isAtlas ? 'solid' : 'none',\r\n          backgroundColor: data.isAtlas ? 'none' : colors.primary[300],\r\n          color: !data.isAtlas ? 'white' : '',\r\n        }\r\n          : {\r\n            boxShadow: '0px 0px 2px rgba(0,0,0, 0.15)',\r\n            p: '0.5em',\r\n            borderRadius: '0.625rem',\r\n            backgroundColor: 'white',\r\n            ':hover': {\r\n              color: colors.primary,\r\n              ':hover': {\r\n                background: data.isAtlas ? \"linear-gradient(#4F83CC, #01579B)\" : colors.primary[300], transition: data.isAtlas ? '0.0s' : '0.4s',\r\n                color: 'white', opacity: data.isAtlas ? 0.95 : 100,\r\n                boxShadow: data.isAtlas ? 'none' : '0px 4px 6px 0px rgba(33, 37, 41, .2), 0px 0px 1px 0px rgba(33, 37, 41, .32)'\r\n              },\r\n              ':focus': { backgroundColor: colors.primary[300], transition: '0.4s', color: 'white' },\r\n              ':disabled': { backgroundColor: '#EBEFFF', transition: '0.4s', color: colors.primary[600] },\r\n            },\r\n          }}\r\n      >\r\n        <Stack spacing={0} p=\"0.1em\" pl=\"0.3em\" alignItems=\"center\" justifyContent=\"space-between\" flexDirection=\"row\">\r\n          <Typography height={data.isAtlas ? \"5px\" : \"auto\"} fontSize={minimal ? \"1em\" : \"p\"}> {/* This is the issue. Set the height here. */}\r\n            {data?.type === \"team\" ? data.title : data.text}\r\n          </Typography>\r\n          {data?.type === \"team\" && data.added && (\r\n            <Typography variant=\"caption\" fontWeight=\"light\"> \r\n              <span sx={{ ':hover': { color: 'white' } }}>Already added</span>\r\n            </Typography>\r\n          )}\r\n        </Stack>\r\n        <Typography spacing={0} p=\"0.1em\" pl=\"0.3em\" variant=\"caption\" fontWeight=\"\">\r\n          {!minimal && data.isDemo ? `Demo dataset for ${data.atlas} & ${data.model}` : data.visibility}\r\n        </Typography>\r\n      </Box>\r\n    </Box>\r\n);\r\n","export default __webpack_public_path__ + \"static/media/scvi-logo.8588e44b.svg\";","import axiosInstance from \"./axiosInstance\";\r\n\r\nconst CLASSIFIER = \"classifier\";\r\nconst CLASSIFIERS = \"classifiers\";\r\n\r\nconst ClassifierService = {\r\n  getClassifiers: async () => {\r\n    const { data } = await axiosInstance.get(`/${CLASSIFIERS}`);\r\n    return data;\r\n  },\r\n\r\n  getClassifierById: async (id) => {\r\n    const { data } = await axiosInstance.get(`/${CLASSIFIER}/${id}`);\r\n    return data;\r\n  },\r\n};\r\n\r\nexport default ClassifierService;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Box, Link, Typography } from '@mui/material';\r\nimport { useParams } from 'react-router-dom';\r\nimport CustomButton from 'components/CustomButton';\r\nimport { useHistory, useLocation } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport { colors } from \"shared/theme/colors\";\r\nimport ClassifierService from 'shared/services/Classifier.service';\r\n\r\nexport const LearnMoreClassifierComponent = ({ onClick, id, isMap = false, isSearchPage = false }) => {\r\n\r\n  const [classifier, setClassifier] = useState(null);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n        ClassifierService.getClassifierById(id)\r\n        .then((data) => setClassifier(data))\r\n        .catch((err) => console.log(err));\r\n    }\r\n  }, [id]);\r\n\r\n  return (\r\n    <Box sx={{\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'flex-start',\r\n      justifyContent: 'space-between',\r\n    }}\r\n    >\r\n      {isSearchPage && <Typography onClick={history.goBack} sx={{ cursor: \"pointer\", fontSize: \"18px\", fontWeight: 500,  color: colors.neutral[800], \":hover\": { color: colors.primary[500] }}}>Go Back</Typography>}\r\n      <Box sx={{\r\n        display: 'flex', flexDirection: 'row', width: '100%', justifyContent: 'space-between',\r\n      }}\r\n      >\r\n        <Typography sx={{ fontSize: '36px', fontWeigth: 700 }}>{classifier?.name}</Typography>\r\n      </Box>\r\n      <Box>\r\n        <Typography sx={{ fontSize: '20px', fontWeight: 600, borderBottom: '1px solid black' }}>Overview</Typography>\r\n      </Box>\r\n\r\n      <Typography sx={{ width: '100%', maxWidth: '800px' }}>Description: {classifier?.description}</Typography>\r\n      {\r\n        // isSelect\r\n        isMap && !isSearchPage &&\r\n        <CustomButton sx={{ marginTop: \"1em\", padding: \"0.5em 2em 0.5em 2em\" }} type=\"primary\" onClick={() => onClick(classifier)}>Select</CustomButton>\r\n      }\r\n      <Box sx={{ display: 'flex', flexDirection: 'row' }}>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 500 }}>\r\n          URL:\r\n          &nbsp;\r\n        </Typography>\r\n        <Typography sx={{ fontSize: '16px', fontWeight: 300 }}>\r\n          {classifier?.url ? <Link href={classifier.url} sx={{ textDecoration: 'none' }} target=\"_blank\" rel=\"noopener\">{classifier.url}</Link> : \"Not available\"}\r\n      </Typography>\r\n      </Box>\r\n\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default function LearnMore({handleSelect}) {\r\n  const { id } = useParams();\r\n  const path = useLocation();\r\n\r\n  return (\r\n    <Box sx={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n      <Box sx={{\r\n        marginTop: '12px',\r\n        width: '80%',\r\n        height: '80vh'\r\n      }}\r\n      >\r\n        <LearnMoreClassifier id={id} isMap={true} onClick={handleSelect} isSearchPage={path.pathname.includes(\"search\")}/>\r\n      </Box>\r\n    </Box>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { Modal } from 'components/Modal';\r\nimport { Container } from '@mui/material';\r\nimport { LearnMoreClassifierComponent } from 'views/References/LearnMoreClassifier';\r\n/**\r\n * Modal displaying info about the classifier with the given classifier id\r\n * @param id classifier id\r\n * @param open True if the info modal should be shown\r\n * @param open Function accepting true or false as a parameter\r\n */\r\nfunction ClassifierInfo({ id, open, setOpen }) {\r\n  return (\r\n    <Modal\r\n      isOpen={open}\r\n      setOpen={setOpen}\r\n    >\r\n      <Container>\r\n        <LearnMoreClassifierComponent id={id} />\r\n      </Container>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default ClassifierInfo;\r\n","import { Box, Button, Typography } from \"@mui/material\"\r\nimport ClassifierInfo from \"components/GeneMapper/ClassifierInfo\"\r\nimport { useEffect, useRef, useState } from \"react\"\r\nimport { colors } from \"shared/theme/colors\"\r\nimport RectSkeleton from \"components/Skeletons/RectSkeleton\"\r\n\r\n// Outlined Button specific to Models and Atlases\r\n/**\r\n * OutlinedButton\r\n * Specific to Model and Atlas Cards\r\n * @param content text content to be displayed\r\n * @param link button href link  \r\n */\r\nconst OutlinedButtonSelect = ({ content, onSelect, disabled = false }) => {\r\n  return (\r\n    <Button\r\n      variant=\"outlined\"\r\n      disableRipple\r\n      onClick={onSelect}\r\n      sx={{\r\n        color: !disabled ? colors.primary[100] : colors.neutral[800], borderWidth: \"2px\",\r\n        borderColor: !disabled ? colors.primary[100] : colors.neutral[800],\r\n        borderRadius: \"1.2rem\", justifyContent: 'center', textAlign: 'center',\r\n        \":hover\": {\r\n          borderColor: !disabled ? '#01579B' : colors.neutral[600], borderWidth: \"2px\",\r\n          backgroundColor: !disabled ? colors.primary[100] : colors.neutral[100],\r\n          color: !disabled ? '#01579B' : colors.neutral[600], transition: '0.5s'\r\n        }\r\n      }}\r\n    >\r\n      {content}\r\n    </Button>\r\n  )\r\n}\r\n\r\n/**\r\n * ClassifierCard\r\n * @param width default value 100% of parent\r\n * @param height default value 100% of parent\r\n * @param title\r\n * @param description\r\n * @param mapLink onHover button Map url\r\n * @param learnMoreLink onHover button Learn More url\r\n */\r\nexport const ClassifierCard = ({\r\n  width = \"100%\", height = \"100%\", title, description, onSelect,\r\n  selected, learnMoreLink, selectedClassifier, classifierObject = {}, disabled = false, isLoading = true\r\n}) => {\r\n\r\n  const [hover, setHover] = useState(false)\r\n  const ref = useRef()\r\n  const [flexDir, setFlexDir] = useState(\"column\")\r\n  const [classifierInfoOpen, setClassifierInfoOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // checks if the parent element is wider than it is longer\r\n    // if it is, converts the flex direction to row\r\n    if (!isLoading && ref.current.clientWidth > ref.current.clientHeight) {\r\n      setFlexDir(\"row\")\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    (isLoading) ? (\r\n      <RectSkeleton width={width} height={height} sx={{ borderRadius: \"1.2rem\" }} />\r\n    ) :\r\n      <Box\r\n        sx={{\r\n          width: width,\r\n          height: height,\r\n        }}\r\n      >\r\n        <Box\r\n          ref={ref}\r\n          sx={{\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            position: \"relative\",\r\n            cursor: disabled ? \"pointer\" : \"initial\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"center\"\r\n          }}\r\n          onMouseEnter={() => setHover(true)}\r\n          onMouseLeave={() => setHover(false)}\r\n        >\r\n          {(hover || disabled) &&\r\n            <Box\r\n              style={{ background: !disabled ? \"linear-gradient(#4F83CC, #01579B)\" : \"linear-gradient(#e7e7e7, #d0d0d0)\" }}\r\n              sx={{\r\n                position: \"absolute\",\r\n                width: \"100%\",\r\n                height: \"100%\",\r\n                borderRadius: \"1.2rem\",\r\n                p: \"1rem\",\r\n                opacity: 0.9\r\n              }}>\r\n              {disabled &&\r\n                <Typography sx={{ position: \"absolute\", fontSize: \"10px\", fontWeight: \"bold\", color: colors.neutral[900], textAlign: \"center\", left: \"25%\", top: '10%' }}>\r\n                  Not Compatible\r\n                </Typography>}\r\n              <Box\r\n                sx={{\r\n                  display: \"flex\",\r\n                  flexDirection: \"column\",\r\n                  gap: \"1rem\",\r\n                  position: \"absolute\",\r\n                  top: \"50%\",\r\n                  left: \"50%\",\r\n                  transform: \"translate(-50%, -50%)\",\r\n                }}\r\n              >\r\n                {!disabled &&\r\n                  <OutlinedButtonSelect\r\n                    content={selected ? \"Deselect\" : \"Select\"}\r\n                    onSelect={() => selectedClassifier?.name === classifierObject?.name ? onSelect('') : onSelect(classifierObject)}\r\n                  />}\r\n                {hover && <OutlinedButtonSelect content=\"Learn More\" onSelect={() => setClassifierInfoOpen(true)} disabled={disabled} />}\r\n              </Box>\r\n            </Box>\r\n          }\r\n          <Box sx={{\r\n            width: '100%',\r\n            height: \"100%\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            p: \"1.2rem\",\r\n            boxShadow: hover ? \"none\" : \"0px 0px 10px rgba(0, 0, 0, 0.15)\",\r\n            borderRadius: \"1.2rem\",\r\n            borderStyle: \"solid\",\r\n            borderColor: selected ? \"#008BF5\" : 'transparent',\r\n            borderWidth: \"4px\",\r\n          }}\r\n          >\r\n            <Typography sx={{ fontSize: \"1.4rem\", fontWeight: \"bold\", color: \"#000000\" }}>{title}</Typography>\r\n            <Typography\r\n              className=\"modelDescription\"\r\n              sx={{\r\n                paddingTop: '10px',\r\n                fontSize: \"1rem\",\r\n                color: colors.neutral[800],\r\n                display: '-webkit-box',\r\n                overflow: 'hidden',\r\n                WebkitBoxOrient: 'vertical',\r\n                WebkitLineClamp: 2,\r\n              }}>\r\n              {description}\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n        <ClassifierInfo id={classifierObject._id} open={classifierInfoOpen} setOpen={setClassifierInfoOpen} />\r\n      </Box>\r\n  )\r\n}","import {\r\n  Grid, Typography, Stack, Alert, Box, Tooltip, Divider,\r\n  Accordion, AccordionSummary, AccordionDetails, Button,\r\n  Avatar\r\n} from '@mui/material';\r\nimport AtlasCardSelect from 'components/Cards/AtlasCardSelect';\r\nimport { TabGroup } from 'components/Tab';\r\nimport { TabCard } from 'components/GeneMapper/TabCard';\r\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\r\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess';\r\nimport { ModelCardSelect } from 'components/Cards/ModelCardSelect';\r\nimport CustomButton from 'components/CustomButton';\r\nimport scviLogo from 'assets/scvi-logo.svg';\r\nimport { colors } from 'shared/theme/colors';\r\nimport { useHistory } from 'react-router-dom';\r\nimport React, { useState, useEffect } from 'react';\r\nimport Clear from '@mui/icons-material/Clear';\r\nimport ArrowForwardIcon from '@mui/icons-material/ArrowForward';\r\nimport styles from '../UploadFilePage/uploadfilepage.module.css';\r\nimport { ClassifierCard } from 'components/Cards/ClassifierCard';\r\n\r\nfunction AtlasModelChoice({\r\n  setActiveStep,\r\n  selectedAtlas, setSelectedAtlas,\r\n  selectedModel, setSelectedModel, path,\r\n  compatibleModels, atlases, models, scviHubAtlases,\r\n  selectedClassifier, setSelectedClassifier, compatibleClassifiers, classifiers,\r\n}) {\r\n  const [showWarning, setShowWarning] = useState(false);\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const history = useHistory();\r\n\r\n  //for showing Skeleton when loading\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      try {\r\n        // Simulate data loading delay\r\n        await new Promise((resolve) => setTimeout(resolve, 100));\r\n        setIsLoading(false);\r\n      } catch (error) {\r\n        setIsLoading(false);\r\n        setIsError(true);\r\n      }\r\n    };\r\n    loadData();\r\n  }, []);\r\n\r\n  const handleTabChange = (newValue) => {\r\n    setSelectedTab(newValue);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {showWarning\r\n        && (\r\n          <Alert severity=\"error\">\r\n            Select an Atlas and a fitting Model before continuing\r\n          </Alert>\r\n        )}\r\n      <Stack\r\n        direction=\"column\"\r\n        divider={(<Divider className={styles.divider} orientation=\"horizontal\" flexItem />)}\r\n        sx={{ gap: '1.5rem' }}\r\n      />\r\n      <Box>\r\n      <Typography\r\n        variant=\"h5\"\r\n        sx={{\r\n          fontWeight: 'bold',\r\n          pb: '1em',\r\n          mt: '1.0em',\r\n        }}\r\n      >\r\n        Pick an Atlas\r\n      </Typography>\r\n      {/* Core Archmap Atlases */}\r\n      <Typography variant=\"h6\" sx={{ mb: '1.5em' }}>\r\n        Archmap Core Atlases\r\n      </Typography>\r\n      <Grid container spacing={2} width=\"100%\" overflow=\"auto\" wrap=\"nowrap\">\r\n        {\r\n          atlases && atlases.map((a) => (\r\n            <Grid item height=\"330px\">\r\n              <AtlasCardSelect\r\n                width=\"225px\"\r\n                height=\"97%\"\r\n                title={a.name.includes(\"atlas\") ? a.name.replace(\"atlas\", \"\") : a.name} \r\n                modalities={a.modalities}\r\n                cellsInReference={a.numberOfCells}\r\n                species={a.species}\r\n                imgLink={a.previewPictureURL}\r\n                selected={selectedAtlas.name === a.name}\r\n                onSelect={setSelectedAtlas}\r\n                atlasObject={a}\r\n                isLoading={isLoading}\r\n              />\r\n            </Grid>\r\n          ))\r\n        }\r\n      </Grid>\r\n      <Box display=\"flex\" alignItems=\"center\" sx={{mt:'1.5em', mb:'0.5em'}}>\r\n        <Typography variant=\"h6\">scVI Hub Atlases</Typography>\r\n        <Avatar src={scviLogo} sx={{width: 36, height: 36, marginLeft: '5px'}}/>\r\n        \r\n      </Box>\r\n      <Box display=\"flex\" sx={{mt: '1em'}}>\r\n        {(!scviHubAtlases || scviHubAtlases.length===0) && <Alert severity=\"info\"sx={{width: '33%'}}>No existing datasets available. </Alert>}\r\n      </Box>\r\n      {/* SCVI Hub Atlases */}\r\n      {scviHubAtlases && scviHubAtlases.length>0 && (<Box>\r\n        {isExpanded ? (\r\n        <Box style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'center', alignItems: 'center' }}>\r\n          {scviHubAtlases &&\r\n            scviHubAtlases.map((a) => (\r\n              <TabCard\r\n                style={{ flex: '1 0 auto', maxWidth: '33.33%', minWidth: '33.33%', padding: '8px' }}\r\n                height=\"50px\"\r\n                data={{\r\n                  text: a.name[0].toUpperCase() + a.name.substring(1),\r\n                  isAtlas: true\r\n                }}\r\n                isLoading={false}\r\n                handleOnClick={() => setSelectedAtlas(a)}\r\n                selected={selectedAtlas && selectedAtlas.name === a.name}\r\n              />\r\n            ))}\r\n        </Box>\r\n        ) : (\r\n          <Box style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'center', alignItems: 'center' }}>\r\n            {scviHubAtlases.slice(0, 3).map((a) => (\r\n              <TabCard\r\n                key={a.name}\r\n                style={{ flex: '1 0 auto', maxWidth: '33.33%', minWidth: '33.33%', padding: '8px', color: 'black' }}\r\n                height=\"50px\"\r\n                data={{\r\n                  text: a.name[0].toUpperCase() + a.name.substring(1),\r\n                  isAtlas: true\r\n                }}\r\n                isLoading={false}\r\n                handleOnClick={() => setSelectedAtlas(a)}\r\n                selected={selectedAtlas && selectedAtlas.name === a.name}\r\n              />\r\n            ))}\r\n          </Box>\r\n        )}\r\n        <Box sx={{display: 'flex', justifyContent: 'center', pt: '1em'}}>\r\n          <Button \r\n            style={{textTransform: 'none', padding: '0px'}}\r\n            variant=\"text\" \r\n            color=\"primary\"\r\n            onClick={()=>{setIsExpanded(!isExpanded)}}\r\n            disableRipple\r\n            >\r\n            <Typography>{isExpanded ? 'Expand less' : 'Expand more'}</Typography>\r\n            {isExpanded ? <ExpandLessIcon/> : <ExpandMoreIcon/>}\r\n          </Button>\r\n        </Box>\r\n      </Box>)}\r\n      <Box width=\"100%\" display=\"flex\" marginTop=\"10px\">\r\n        <Box id=\"Grid\" width=\"50%\">\r\n          <Typography variant=\"h5\" sx={{ fontWeight: 'bold', pb: '1em' }} marginTop=\"32px\">\r\n            Pick a Model\r\n          </Typography>\r\n\r\n          <Grid container spacing={2} direction=\"row\" wrap=\"nowrap\">\r\n            {\r\n              models && models.map((m) => (\r\n                <Grid item height=\"200px\">\r\n                  <ModelCardSelect\r\n                    width=\"170px\"\r\n                    height=\"97%\"\r\n                    title={m.name}\r\n                    description={m.description}\r\n                    selected={selectedModel.name === m.name}\r\n                    onSelect={setSelectedModel}\r\n                    modelObject={m}\r\n                    disabled={!compatibleModels\r\n                      || !compatibleModels.map(\r\n                        (m) => m.toLowerCase()\r\n                      ).includes(m.name.toLowerCase()) || compatibleModels.length === 0} \r\n                      isLoading={isLoading}\r\n                      />\r\n                </Grid>\r\n              ))\r\n            }\r\n          </Grid>\r\n          </Box>\r\n\r\n          <Box id=\"Grid\" width=\"50%\" marginLeft=\"36px\">\r\n              <Typography variant=\"h5\" sx={{ fontWeight: 'bold', pb: '1em' }} marginTop=\"32px\">\r\n                Pick a Classifier (Optional)\r\n              </Typography>\r\n\r\n              <Grid container spacing={2} direction=\"row\"wrap=\"nowrap\">\r\n                {\r\n              classifiers && classifiers.map((cl) => (\r\n                <Grid item height=\"200px\">\r\n                  <ClassifierCard\r\n                    width=\"170px\"\r\n                    height=\"97%\"\r\n                    title={cl.name}\r\n                    description={cl.description}\r\n                    selected={selectedClassifier.name === cl.name}\r\n                    selectedClassifier={selectedClassifier}\r\n                    onSelect={setSelectedClassifier}\r\n                    classifierObject={cl}\r\n                    disabled={!compatibleClassifiers\r\n                      || !compatibleClassifiers.map( // incomptaible model\r\n                        (cc) => cc.toLowerCase(),\r\n                      ).includes(cl.name.toLowerCase()) \r\n                      || compatibleClassifiers.length === 0  \r\n                      || selectedAtlas?.scviAtlas} // scvi atlas\r\n                    isLoading={isLoading}\r\n                  />\r\n                </Grid>\r\n              ))\r\n            }\r\n              </Grid>\r\n            </Box>\r\n        </Box>\r\n      </Box>\r\n      <Stack direction=\"row\" justifyContent=\"space-between\" sx={{ marginTop: '50px', marginBottom: '3em', marginRight: '30px'}}>\r\n        <CustomButton type=\"tertiary\" onClick={() => history.push(`${path}`)}>\r\n          <Clear />\r\n          &nbsp; Cancel\r\n        </CustomButton>\r\n        <Tooltip title={!selectedAtlas || !selectedModel ? 'Select an Atlas and a fitting Model before continuing' : ''} placement=\"top\">\r\n          <Box\r\n            onClick={!selectedAtlas || !selectedModel ? () => setShowWarning(true) : () => { }}\r\n          >\r\n            <CustomButton\r\n              type=\"primary\"\r\n              disabled={!selectedAtlas || !selectedModel}\r\n              onClick={() => setActiveStep(1)}\r\n            >\r\n              Confirm&nbsp;\r\n              <ArrowForwardIcon />\r\n            </CustomButton>\r\n          </Box>\r\n        </Tooltip>\r\n      </Stack>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AtlasModelChoice;\r\n","import { CloudDone, CloudUpload } from \"@mui/icons-material\"\r\nimport { Box, Typography } from \"@mui/material\"\r\nimport { useCallback } from \"react\"\r\nimport { useDropzone } from \"react-dropzone\"\r\nimport { colors } from \"shared/theme/colors\"\r\n\r\nconst BeforeDrag = () => {\r\n  return (\r\n    <Box sx={{ \r\n      display: \"flex\", \r\n      flexDirection: \"column\", \r\n      alignItems: \"center\", \r\n      gap: \"1em\", \r\n      color: colors.primary[800],\r\n      position: \"absolute\",\r\n      left: \"50%\",\r\n      top: \"50%\",\r\n      transform: \"translate(-50%, -50%)\",\r\n      color: 'inherit'\r\n    }}>\r\n      <CloudUpload sx={{ fontSize: 80 }} />\r\n      <Typography fontWeight=\"bold\" fontSize=\"1.2em\" sx={{ textAlign: \"center\" }}>Drag and drop or browse files</Typography>\r\n    </Box>\r\n  )\r\n}\r\n\r\nconst DuringDrag = () => {\r\n  return (\r\n    <Box sx={{ \r\n      display: \"flex\", \r\n      flexDirection: \"column\", \r\n      alignItems: \"center\", \r\n      gap: \"1em\", \r\n      color: colors.primary[500], \r\n      position: \"absolute\",\r\n      left: \"50%\",\r\n      top: \"50%\",\r\n      transform: \"translate(-50%, -50%)\"\r\n    }}>\r\n      <CloudDone style={{ fontSize: 80 }}/>\r\n      <Typography fontWeight=\"bold\" fontSize=\"1.2em\" sx={{ textAlign: \"center\" }}>Drop files here</Typography>\r\n    </Box>\r\n  )\r\n}\r\n\r\n/**\r\n * FileUpload\r\n * @param width default value is 100% -> set it like \"100px\" or \"8em\"\r\n * @param height default value is 100% -> set it like \"100px\" or \"8em\"\r\n * @param handleFileUpload function that will handle all accepted files\r\n * @param rejectionHandler\r\n */\r\nconst FileUpload = ({ width = \"100%\", height = \"100%\", handleFileUpload, validator, rejectionHandler }) => {\r\n\r\n  const onDropAccepted = useCallback( acceptedFiles => {\r\n    handleFileUpload(acceptedFiles)\r\n  }, [])\r\n\r\n  const onDropRejected = useCallback(() => {\r\n    rejectionHandler();\r\n  }, [])\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDropAccepted, onDropRejected, validator: validator })\r\n\r\n  return (\r\n    <Box\r\n      {...getRootProps()}\r\n      sx={{\r\n        width: width,\r\n        height: height,\r\n        boxShadow: \"0px 4px 6px rgba(0, 0, 0, 0.25), 0px 0px 1px rgba(0, 0, 0, 0.32)\",\r\n        p: \"3em\",\r\n        borderRadius: \"20px\",\r\n        cursor: \"pointer\",\r\n        position: \"relative\",\r\n        backgroundColor: colors.primary[100],\r\n        '&:hover': {\r\n          boxShadow: \"inset 0px 8px 12px rgba(0, 0, 0, 0.25), 0px 0px 2px rgba(0, 0, 0, 0.32)\",\r\n          transition: '0.4s',\r\n          backgroundColor: colors.primary[300],\r\n          color: 'white'\r\n        }\r\n      }}\r\n    >\r\n     <input {...getInputProps()}/>\r\n      {\r\n        isDragActive ? \r\n        <DuringDrag />\r\n        :\r\n        <BeforeDrag />\r\n      } \r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default FileUpload","import axiosInstance from './axiosInstance';\r\n\r\nconst DEMOS = 'demos';\r\n\r\nconst DemoService = {\r\n  getDemos: async () => {\r\n    const { data } = await axiosInstance.get(`/${DEMOS}`);\r\n    return data;\r\n  },\r\n};\r\n\r\nexport default DemoService;\r\n","import axiosInstance from './axiosInstance';\r\n\r\nconst PATH = \"model_setup_anndata_args\";\r\n\r\nconst AnndataArgsService = {\r\n  postAnndataArgs: async (scviHubId) => {\r\n    const postData = {\r\n      scviHubId: scviHubId\r\n    }\r\n\r\n    const { data } = await axiosInstance.post(`/${PATH}`, postData);\r\n    return data;\r\n  }\r\n}\r\n\r\nexport default AnndataArgsService;\r\n","import React, { useState } from 'react';\r\nimport { MULTIPART_UPLOAD_STATUS } from 'shared/utils/common/constants';\r\n\r\nconst SubmissionProgressContext = React.createContext();\r\nSubmissionProgressContext.displayName = 'SubmissionProgressContext';\r\n\r\nconst initSubmissionProgress = (uploadId) => ({\r\n  status: MULTIPART_UPLOAD_STATUS.IDLE,\r\n  uploadId,\r\n  chunks: 0,\r\n  uploaded: 0,\r\n  remaining: [],\r\n  uploadedParts: [],\r\n});\r\n\r\nfunction SubmissionProgressProvider(props) {\r\n  const [submissionProgress, setSubmissionProgress] = useState({});\r\n\r\n  const value = [submissionProgress, setSubmissionProgress];\r\n\r\n  // eslint-disable-next-line react/jsx-props-no-spreading\r\n  return <SubmissionProgressContext.Provider value={value} {...props} />;\r\n}\r\n\r\nfunction useSubmissionProgress() {\r\n  const context = React.useContext(SubmissionProgressContext);\r\n  if (context === undefined) {\r\n    throw new Error('useSubmissionProgress must be used within a SubmissionProgressProvider');\r\n  }\r\n  return context;\r\n}\r\n\r\nexport { SubmissionProgressProvider, useSubmissionProgress, initSubmissionProgress };\r\n","const mockProjects = [\r\n  {\r\n    \"_id\": \"626f20715c2633c6573652d3\",\r\n    \"owner\": \"626bdb1ed76c8b968a50f833\",\r\n    \"name\": \"myproject\",\r\n    \"modelId\": \"626ea2361d7d1a27de465b5f\",\r\n    \"atlasId\": \"626ea3311d7d1a27de465b63\",\r\n    \"fileName\": \"pancreas_query.h5ad\",\r\n    \"fileSize\": 21892149,\r\n    \"uploadDate\": \"2022-05-02T00:06:09.219Z\",\r\n    \"status\": \"DONE\",\r\n    \"resultSize\": -1,\r\n    \"__v\": 0,\r\n    \"uploadId\": \"ABPnzm64TXY8lmYTzYiCOoX4J5S-VsKxK26LilPb3aex0I6LOtNXBVyU8XnT88ns76ZBY3cz\",\r\n    \"teamId\": \"626edd8b75993ffbfb5ae41d\",\r\n  },\r\n  {\r\n    \"_id\": \"626fc5d175993ffbfb5ae46c\",\r\n    \"owner\": \"626bdb1ed76c8b968a50f833\",\r\n    \"name\": \"This is Project\",\r\n    \"modelId\": \"626ea2361d7d1a27de465b5f\",\r\n    \"atlasId\": \"626ea3311d7d1a27de465b63\",\r\n    \"fileName\": \"pbmc_query.h5ad\",\r\n    \"fileSize\": 21892149,\r\n    \"uploadDate\": \"2022-05-02T00:06:09.219Z\",\r\n    \"status\": \"PROCESSING_PENDING\",\r\n    \"resultSize\": -1,\r\n    \"__v\": 0,\r\n    \"uploadId\": \"ABPnzm64TXY8lmYTzYiCOoX4J5S-VsKxK26LilPb3aex0I6LOtNXBVyU8XnT88ns76ZBY3cz\",\r\n    \"teamId\": \"626edd8b75993ffbfb5ae41d\",\r\n  },\r\n];\r\n\r\nconst ProjectService = {\r\n  async getProjects() {\r\n    return mockProjects;\r\n  },\r\n\r\n  async getTeamProjects(teamId) {\r\n    return mockProjects;\r\n  },\r\n\r\n  getOwnProjects: async () => ProjectService.getProjects(),\r\n\r\n  async getProject(id) {\r\n    const project = mockProjects.find((p) => String(p._id) === String(id));\r\n    return project ?? {\r\n      _id: id,\r\n      owner: 'mock',\r\n      uploadId: '12345-abcde',\r\n      atlasId: '626ea3311d7d1a27de465b63',\r\n      fileName: 'test1.h5ad',\r\n      location: `./testData/test_file${id}.csv`,\r\n      fileSize: 10000000,\r\n      modelId: '626ea2361d7d1a27de465b5e',\r\n      name: `Test project ${id}`,\r\n      resultSize: '10000',\r\n      status: 'DONE',\r\n      uploadDate: '2022-04-30T106:00:00.000Z',\r\n    };\r\n  },\r\n};\r\n\r\nexport default ProjectService;\r\n","import axiosInstance from \"./axiosInstance\";\r\nimport MockProjectService from \"./mock/Project.service\";\r\n\r\nconst MODEL = \"projects\";\r\nconst MOCK_PROJECTS = false;\r\n\r\nconst ProjectService = MOCK_PROJECTS\r\n  ? MockProjectService\r\n  : {\r\n      getProjects: async (params) => {\r\n        const { data } = await axiosInstance.get(`/${MODEL}`, { params });\r\n        return data;\r\n      },\r\n\r\n      getOwnProjects: async () => {\r\n        const { data } = await axiosInstance.get(\"/ownprojects\");\r\n        return data;\r\n      },\r\n\r\n      getProject: async (id) => {\r\n        const { data } = await axiosInstance.get(`/project/${id}`);\r\n        return data;\r\n      },\r\n\r\n      createProject: async ({\r\n        projectName,\r\n        atlasId,\r\n        modelId,\r\n        fileName,\r\n        classifierId,\r\n        scviHubId = null,\r\n        model_setup_anndata_args = null,\r\n      }) => {\r\n        // POST request for scvi hub atlas.\r\n        if (scviHubId && model_setup_anndata_args) {\r\n          const { data } = await axiosInstance.post(\r\n            \"/file_upload/start_upload\",\r\n            {\r\n              projectName,\r\n              atlasId,\r\n              modelId,\r\n              fileName,\r\n              classifierId,\r\n              scviHubId,\r\n              model_setup_anndata_args,\r\n            }\r\n          );\r\n          return data;\r\n        }\r\n        // Create a POST request with an Archmap Core atlas.\r\n        const { data } = await axiosInstance.post(\"/file_upload/start_upload\", {\r\n          projectName,\r\n          atlasId,\r\n          modelId,\r\n          fileName,\r\n          classifierId,\r\n        });\r\n\r\n        return data;\r\n      },\r\n\r\n      deleteProject: async (id) => {\r\n        await axiosInstance.delete(`/project/${id}`);\r\n      },\r\n\r\n      getDeletedProjects: async () => {\r\n        const { data } = await axiosInstance.get(\"/deletedprojects\");\r\n        return data;\r\n      },\r\n\r\n      restoreProject: async (id) => {\r\n        await axiosInstance.post(`/deletedprojects/${id}/restore`);\r\n      },\r\n\r\n      getTeamProjects: async (teamId) => {\r\n        const { data } = await axiosInstance.get(`/teams/${teamId}/projects`);\r\n        return data;\r\n      },\r\n    };\r\n\r\nexport default ProjectService;\r\n","import { BACKEND_ADDRESS, MULTIPART_UPLOAD_STATUS, MULTIPART_UPLOAD_STATUS as Status, UPLOAD_CHUNK_SIZE } from '../utils/common/constants';\r\nimport removeItemFromArray from '../utils/common/utils';\r\n\r\nexport function getSubmissionProgressPercentage(progress) {\r\n  if (progress.chunks === 0) {\r\n    return 0;\r\n  }\r\n  return (progress.uploaded / progress.chunks) * 100;\r\n}\r\n\r\nfunction expectStatus(response, requestName, code) {\r\n  if (response.status !== code) {\r\n    throw new Error(`Invalid status for request \"${requestName}\" (${response.status})`);\r\n  }\r\n  return response;\r\n}\r\n\r\nfunction getAuthHeader() {\r\n  return {\r\n    auth: localStorage.getItem('jwt'),\r\n  };\r\n}\r\n\r\nfunction getAuthAndJsonHeader() {\r\n  return {\r\n    auth: localStorage.getItem('jwt'),\r\n    'content-type': 'application/json',\r\n  };\r\n}\r\n\r\nasync function uploadChunks(chunkCount, remaining, selectedFile, uploadId,\r\n  submissionProgress, setSubmissionProgress, promiseArray) {\r\n  for (let index = 1;\r\n    index < chunkCount + 1 && !localStorage.getItem(`cancelUpload_${uploadId}`);\r\n    index += 1) {\r\n    if (!remaining.includes(index)) {\r\n      console.log(`Skipping chunk ${index}`);\r\n      // eslint-disable-next-line no-continue\r\n      continue;\r\n    }\r\n    const start = (index - 1) * UPLOAD_CHUNK_SIZE;\r\n    const end = (index) * UPLOAD_CHUNK_SIZE;\r\n    const blob = (index < chunkCount) ? selectedFile.slice(start, end)\r\n      : selectedFile.slice(start);\r\n\r\n    const currentPromise = fetch(`${BACKEND_ADDRESS}/file_upload/get_upload_url?${new URLSearchParams({\r\n      partNumber: index,\r\n      uploadId,\r\n    })}`, { method: 'GET', headers: getAuthHeader() })\r\n      .then((response) => expectStatus(response, 'get_upload_url', 200))\r\n      .then((response) => response.json())\r\n      .then(async ({ presignedUrl }) => fetch(presignedUrl, {\r\n        body: blob,\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': selectedFile.type },\r\n      })\r\n        .then((chunkResponse) => {\r\n          if (chunkResponse.status !== 200) {\r\n            throw new Error(`Invalid status code received for chunk upload (${chunkResponse.status})`);\r\n          }\r\n          const etag = chunkResponse.headers.get('ETag');\r\n          const newRemaining = removeItemFromArray(submissionProgress.remaining, index);\r\n          setSubmissionProgress((prevState) => (\r\n            { ...prevState, uploaded: prevState.uploaded + 1, newRemaining }\r\n          ));\r\n          return { etag, index };\r\n        }));\r\n    promiseArray.push(currentPromise);\r\n    try {\r\n      // sequentializing upload\r\n      // eslint-disable-next-line no-await-in-loop\r\n      await currentPromise;\r\n    } catch (ignored) { /* ignored */ }\r\n  }\r\n}\r\n\r\n\r\n\r\nasync function uploadChunksForAtlas(chunkCount, remaining, selectedFile, uploadId, keyPath, updateAndGetLatestProgress, promiseArray, uploadFileType) {\r\n  console.log(\"promiseArray before push:\", promiseArray, Array.isArray(promiseArray));\r\n\r\n  for (let index = 1; index <= chunkCount && !localStorage.getItem(`cancelUpload_${uploadId}`); index++) {\r\n    if (!remaining.includes(index)) {\r\n      console.log(`Skipping chunk ${index}`);\r\n      continue;\r\n    }\r\n\r\n    const start = (index - 1) * UPLOAD_CHUNK_SIZE;\r\n    const end = index < chunkCount ? start + UPLOAD_CHUNK_SIZE : selectedFile.size;\r\n    const blob = selectedFile.slice(start, end);\r\n\r\n    const currentPromise = fetch(`${BACKEND_ADDRESS}/file_upload/get_upload_url`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            ...getAuthHeader()\r\n        },\r\n        body: JSON.stringify({\r\n            partNumber: index,\r\n            uploadId: uploadId,\r\n            keyPath: keyPath\r\n        })\r\n      })\r\n      .then(response => {\r\n        console.log(\"Response after get_upload_url:\", response);\r\n        expectStatus(response, 'get_upload_url', 200)\r\n        return response;\r\n      })\r\n      .then(response => {\r\n        console.log(\"Response after get_upload_url after:\", response);\r\n        return response.json()\r\n      })\r\n      .then(async ({ presignedUrl }) => {\r\n        console.log(\"presignedUrl:\", presignedUrl);\r\n        return fetch(presignedUrl, {\r\n          body: blob,\r\n          method: 'PUT',\r\n          headers: { 'Content-Type': selectedFile.type },\r\n        });\r\n      })\r\n      .then(chunkResponse => {\r\n        console.log(\"chunkResponse:\", chunkResponse);\r\n\r\n        if (chunkResponse.status !== 200) {\r\n          throw new Error(`Invalid status code received for chunk upload (${chunkResponse.status})`);\r\n        }\r\n        const etag = chunkResponse.headers.get('ETag');\r\n        console.log(\"etag:\", etag);\r\n\r\n        // Get the latest upload progress before updating it\r\n        let latestUploadProgress = updateAndGetLatestProgress({});\r\n        // Log the uploadId and the latestUploadProgress for debugging\r\n        console.log(\"uploadId:\", uploadId, \"latestUploadProgress:\", latestUploadProgress);\r\n\r\n        if (!latestUploadProgress ) {\r\n          throw new Error(`Upload progress not found for uploadId: ${uploadId}`);\r\n        }\r\n        \r\n        let { remaining } = latestUploadProgress;\r\n        console.log(\"remaining:\", remaining);\r\n        const newRemaining = removeItemFromArray(remaining, index);\r\n        console.log(\"newRemaining:\", newRemaining);\r\n\r\n        // Update the progress and get the latest state again\r\n        latestUploadProgress = updateAndGetLatestProgress({uploaded: latestUploadProgress.uploaded + 1, remaining: newRemaining});\r\n        return { etag, index, uploadFileType };\r\n      }).catch(error => {\r\n        console.error(`Error uploading chunk, selectedPath ${index}, ${keyPath}:`, error);\r\n        // Handle error (e.g., retry logic, abort, etc.)\r\n      });\r\n\r\n    promiseArray.push(currentPromise);\r\n\r\n    try {\r\n      await currentPromise; // sequential upload\r\n    } catch (error) {\r\n      console.error(`Error uploading chunk for ${index}:`, error);\r\n      // Handle error (e.g., retry logic, abort, etc.)\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport function finishAtlasUploads(chunkCount, promiseArray, latestUploadProgress, onProgressUpdate, uploadId, uploadFileType){\r\n\r\n  // check for the values if they are not null\r\n  if (!chunkCount || !promiseArray || !latestUploadProgress || !onProgressUpdate || !uploadId || !uploadFileType) {\r\n    console.error(\"Invalid arguments for finishAtlasUploads\");\r\n    throw new Error(\"Invalid arguments for finishAtlasUploads\");\r\n  }\r\n  Promise.all(promiseArray.map((promise) => promise.catch((e) => e)))\r\n    .then(async (promises) => {\r\n      if (localStorage.getItem(`cancelUpload_${uploadId}`)) {\r\n        localStorage.removeItem(`cancelUpload_${uploadId}`);\r\n        return;\r\n      }\r\n      if (latestUploadProgress.remaining.length > 0) {\r\n        onProgressUpdate(uploadId, { status: Status.ERROR_PROGRESS });\r\n        return;\r\n      }\r\n      const uploadPartsArray = latestUploadProgress.uploadedParts;\r\n      promises.forEach(({ etag, index }) => {\r\n        uploadPartsArray.push({\r\n          ETag: etag,\r\n          PartNumber: index,\r\n        });\r\n      });\r\n      onProgressUpdate(uploadId, { uploadedParts: uploadPartsArray, status: Status.UPLOAD_FINISHING });\r\n      console.log(\"Sending complete upload for atlas\")\r\n      console.log(\"data to be sent:\", JSON.stringify({\r\n        parts: uploadPartsArray.sort((a, b) => (a.PartNumber - b.PartNumber)),\r\n        uploadId,\r\n        uploadFileType: uploadFileType\r\n      }));\r\n      fetch(`${BACKEND_ADDRESS}/file_upload/complete_upload_for_atlas`, {\r\n        method: 'POST',\r\n        headers: getAuthAndJsonHeader(),\r\n        body: JSON.stringify({\r\n          parts: uploadPartsArray.sort((a, b) => (a.PartNumber - b.PartNumber)),\r\n          uploadId,\r\n          uploadFileType: uploadFileType\r\n        }),\r\n      })\r\n      .then((response) => {\r\n        console.log('Response received from the backend for uploadId, uploadFileType :', response, uploadId, uploadFileType);\r\n        expectStatus(response, 'complete_upload', 200);\r\n      })\r\n      .then(() => {\r\n        console.log('Upload complete for uploadId, for uploadFileType:', uploadId, uploadFileType);\r\n        onProgressUpdate(uploadId, { status: MULTIPART_UPLOAD_STATUS.COMPLETE });\r\n      })\r\n      .catch((err) => {\r\n        console.log('Error in completing upload for uploadId, for uploadFileType:', uploadId, uploadFileType);\r\n        console.log(err);\r\n        onProgressUpdate(uploadId, { status: MULTIPART_UPLOAD_STATUS.ERROR_FINISH });\r\n      });\r\n      \r\n    }).catch((err) => console.log(err)); \r\n}\r\n\r\n\r\n\r\n\r\nfunction finishUpload(chunkCount, promiseArray, submissionProgress, setSubmissionProgress,\r\n  selectedFile, uploadId) {\r\n  Promise.all(promiseArray.map((promise) => promise.catch((e) => e)))\r\n    .then(async (promises) => {\r\n      if (localStorage.getItem(`cancelUpload_${uploadId}`)) {\r\n        localStorage.removeItem(`cancelUpload_${uploadId}`);\r\n        return;\r\n      }\r\n      if (submissionProgress.remaining.length > 0) {\r\n        setSubmissionProgress((prevState) => ({\r\n          ...prevState,\r\n          status: Status.ERROR_PROGRESS,\r\n        }));\r\n        return;\r\n      }\r\n      const uploadPartsArray = submissionProgress.uploadedParts;\r\n      promises.forEach(({ etag, index }) => {\r\n        uploadPartsArray.push({\r\n          ETag: etag,\r\n          PartNumber: index,\r\n        });\r\n      });\r\n      setSubmissionProgress((prevState) => ({\r\n        ...prevState, uploadedParts: uploadPartsArray, status: Status.UPLOAD_FINISHING,\r\n      }));\r\n\r\n      fetch(`${BACKEND_ADDRESS}/file_upload/complete_upload`, {\r\n        method: 'POST',\r\n        headers: getAuthAndJsonHeader(),\r\n        body: JSON.stringify({\r\n          parts: uploadPartsArray.sort((a, b) => (a.PartNumber - b.PartNumber)),\r\n          uploadId,\r\n        }),\r\n      }).then((response) => expectStatus(response, 'complete_upload', 200))\r\n        .then(() => setSubmissionProgress((prevState) => ({ ...prevState, status: 'complete' })))\r\n        .catch(() => {\r\n          setSubmissionProgress((prevState) => ({\r\n            ...prevState,\r\n            status: 'error_finish',\r\n          }));\r\n        });\r\n    }).catch((err) => console.log(err));\r\n}\r\n\r\n\r\n// This is how it is called \r\n// uploadAtlasAndModelFiles(uploadId, file, keyPath, (uploadId, uploadProgress) => {\r\n//   console.log(\"upload progress\", uploadProgress);\r\n//   setProgress(uploadId, uploadProgress);\r\n// });\r\n\r\n\r\n\r\n/**\r\n * Uploads a file (e.g., atlas, model, classifier) in chunks, tracking the progress and updating the state\r\n * as the upload progresses.\r\n *\r\n * @async\r\n * @function uploadAtlasAndModelFiles\r\n * @param {string} uploadId - The unique identifier for this upload.\r\n * @param {File} selectedFile - The file to be uploaded.\r\n * @param {string} keyPath - The key path where the file will be stored.\r\n * @param {ProgressUpdateCallback} onProgressUpdate - A callback function to update the upload progress in the parent component.\r\n * @param {object} currentUploadProgress - The current upload progress state.\r\n * @param {string} uploadFileType - The type of the file being uploaded (e.g., ATLAS, MODEL, CLASSIFIER).\r\n * @returns {Promise<void>} - A promise that resolves when the upload is completed.\r\n */\r\nexport async function uploadAtlasAndModelFiles(uploadId, selectedFile, keyPath, onProgressUpdate, currentUploadProgress, uploadFileType) {\r\n  const chunkCount = Math.floor(selectedFile.size / UPLOAD_CHUNK_SIZE) + 1;\r\n  const promiseArray = [];\r\n  console.log(\"chunk count for \", keyPath, chunkCount);\r\n\r\n  onProgressUpdate(uploadId, { chunks: chunkCount, keyPath: keyPath, uploadFileType: uploadFileType, fileName: selectedFile.name });\r\n  \r\n  // Use the passed currentUploadProgress instead of getLatestUploadProgress\r\n  let latestUploadProgress = currentUploadProgress;\r\n  \r\n  // Check if the state for this uploadId is defined\r\n  if (latestUploadProgress[uploadId]) {\r\n    if (latestUploadProgress[uploadId].status !== Status.ERROR_FINISH) {\r\n      let { remaining } = latestUploadProgress[uploadId];\r\n      console.log(\"remaining is \", remaining);\r\n\r\n      if (!remaining || remaining.length === 0) {\r\n        remaining = Array.from({ length: chunkCount }, (_, i) => i + 1);\r\n        onProgressUpdate(uploadId, { remaining: remaining });\r\n      }\r\n\r\n      onProgressUpdate(uploadId, { status: Status.UPLOAD_PROGRESS });\r\n      \r\n\r\n      await uploadChunksForAtlas(chunkCount, remaining, selectedFile, uploadId, keyPath,\r\n        (update) => {\r\n          onProgressUpdate(uploadId, update); // Update the state\r\n          return currentUploadProgress[uploadId]; // Return the latest state\r\n        }, promiseArray, uploadFileType);\r\n        onProgressUpdate(uploadId, { status: Status.UPLOAD_FINISHING });\r\n        console.log(\"latestUploadProgress before finishUploads for the upload id :\", uploadId , latestUploadProgress, latestUploadProgress[uploadId]);\r\n        finishAtlasUploads(chunkCount, promiseArray, latestUploadProgress[uploadId], onProgressUpdate, uploadId, uploadFileType);\r\n\r\n    }else{\r\n      console.error(\"Progress state found for uploadId:\", uploadId, \"but it is in error state\");\r\n    }\r\n  } else {\r\n    console.error(\"No progress state found for uploadId:\", uploadId);\r\n  }\r\n\r\n}\r\n\r\n\r\nexport async function uploadMultipartFile(uploadId, selectedFile,\r\n  submissionProgress, setSubmissionProgress) {\r\n  const chunkCount = Math.floor(selectedFile.size / UPLOAD_CHUNK_SIZE) + 1;\r\n  const promiseArray = [];\r\n\r\n  setSubmissionProgress((prevState) => ({ ...prevState, chunks: chunkCount }));\r\n\r\n  if (submissionProgress.status !== Status.ERROR_FINISH) {\r\n    const { remaining } = submissionProgress;\r\n    if (remaining.length === 0) {\r\n      for (let i = 1; i < chunkCount + 1; i += 1) {\r\n        remaining.push(i);\r\n      }\r\n      setSubmissionProgress((prevState) => ({ ...prevState, remaining }));\r\n    }\r\n    setSubmissionProgress((prevState) => ({ ...prevState, status: Status.UPLOAD_PROGRESS }));\r\n    await uploadChunks(chunkCount, remaining, selectedFile,\r\n      uploadId, submissionProgress, setSubmissionProgress, promiseArray);\r\n  }\r\n  finishUpload(chunkCount, promiseArray, submissionProgress,\r\n    setSubmissionProgress, selectedFile, uploadId);\r\n}\r\n\r\nconst startUpload = (selectedFile,\r\n  submissionProgress,\r\n  setSubmissionProgress,\r\n  projectData = null) => fetch(\r\n  `${BACKEND_ADDRESS}/file_upload/start_upload`,\r\n  {\r\n    method: 'POST',\r\n    headers: getAuthAndJsonHeader(),\r\n    body: JSON.stringify(projectData || { fileName: selectedFile.name }),\r\n  },\r\n)\r\n  .then((response) => expectStatus(response, 'start_upload', 200))\r\n  .then((response) => response.json())\r\n  .then(({ uploadId }) => {\r\n    setSubmissionProgress((prevState) => ({ ...prevState, uploadId }));\r\n    return uploadMultipartFile(uploadId,\r\n      selectedFile, submissionProgress, setSubmissionProgress);\r\n  })\r\n  .catch(() => {\r\n    setSubmissionProgress((prevState) => ({\r\n      ...prevState,\r\n      status: Status.ERROR_START,\r\n    }));\r\n  });\r\n\r\nexport async function startOrContinueUpload(\r\n  selectedFile,\r\n  submissionProgress,\r\n  setSubmissionProgress,\r\n  projectData = null,\r\n) {\r\n  localStorage.removeItem('cancelUpload');\r\n  const { status, uploadId } = submissionProgress;\r\n  if (status === Status.ERROR_PROGRESS || status === Status.ERROR_FINISH) {\r\n    return uploadMultipartFile(uploadId, selectedFile, submissionProgress, setSubmissionProgress);\r\n  }\r\n  return startUpload(selectedFile, submissionProgress, setSubmissionProgress, projectData);\r\n}\r\n","// General constants for the umap\r\nexport const width = 1860;\r\nexport const height = 965;\r\nexport const margin = 20;\r\nexport const initialPointRadius = 2;\r\nexport const increasedPointRadius = 4;\r\nexport const cornerRadius = 5;\r\nexport const cellBorderWidth = 1;\r\nexport const centroidRadius = 4;\r\nexport const centroidBorderWidth = 2;\r\nexport const padding = 20;\r\nexport const buttonWidth = 40;\r\nexport const zoomStep = 2;\r\nexport const innerPieRadius = 27;\r\nexport const outerPieRadius = 47;\r\nexport const labelHeight = 20;\r\nexport const barWidth = 120;\r\nexport const barHeight = 80;\r\nexport const textLabelHeight = 12;\r\nexport const textHeight = 20;\r\nexport const offset = 11;\r\nexport const searchRadius = 0.02;\r\n\r\n// Newly added constants\r\nexport const originalOpacity = 0.85;\r\nexport const reducedOpacity = 0.3;\r\nexport const fill = '#000000';\r\nexport const gradientColors = [\"#42e91f\", \"#0a43c8\"];\r\nexport const colors = [\r\n\r\n  \"#FF0000\", \"#9ACD32\", \"#00BFFF\", \"#FF8C00\", \"#FFD700\", \"#BA55D3\", \"#A0522D\", \"#8B0000\",\r\n  \"#FF69B4\", \"#FF4500\", \"#4B0082\", \"#006400\", \"#191970\", \"#696969\", \"#008080\", '#1CE6FF',\r\n  '#FF34FF', '#FF4A46', '#008941', '#006FA6', '#A30059', '#5B656C', '#00B57F', '#D25B88',\r\n  '#0000A6', '#63FFAC', '#B79762', '#997D87', '#92896B', '#365D25', '#866097', '#6C5E46',\r\n  '#5A0007', '#809693', '#3B5DFF', '#4A3B53', '#674E60', '#252F99', '#00CCFF', '#545C46',\r\n  '#61615A', '#BA0900', '#6B7900', '#00C2A0', '#FFAA92', '#FF90C9', '#B903AA', '#D16100',\r\n  '#DDEFFF', '#000035', '#7B4F4B', '#A1C299', '#300018', '#0AA6D8', '#013349', '#00846F',\r\n  '#372101', '#FFB500', '#C2FFED', '#A079BF', '#CC0744', '#C0B9B2', '#C2FF99', '#001E09',\r\n  '#00489C', '#6F0062', '#0CBD66', '#EEC3FF', '#456D75', '#B77B68', '#7A87A1', '#788D66',\r\n  '#885578', '#FAD09F', '#FF8A9A', '#D157A0', '#BEC459', '#456648', '#0086ED', '#886F4C',\r\n  '#34362D', '#B4A8BD', '#00A6AA', '#452C2C', '#636375', '#A3C8C9', '#FF913F', '#938A81',\r\n  '#575329', '#00FECF', '#B05B6F', '#8CD0FF', '#3B9700', '#04F757', '#C8A1A1', '#1E6E00',\r\n  '#7900D7', '#A77500', '#6367A9', '#A05837', '#6B002C', '#772600', '#D790FF', '#9B9700',\r\n  '#549E79', '#FFF69F', '#201625', '#72418F', '#BC23FF', '#99ADC0', '#3A2465', '#922329',\r\n  '#5B4534', '#FDE8DC', '#404E55', '#0089A3', '#CB7E98', '#A4E804', '#324E72', '#6A3A4C',\r\n  '#83AB58', '#001C1E', '#D1F7CE', '#004B28', '#C8D0F6', '#A3A489', '#806C66', '#222800',\r\n  '#BF5650', '#E83000', '#66796D', '#DA007C', '#FF1A59', '#8ADBB4', '#1E0200', '#5B4E51',\r\n  '#C895C5', '#320033', '#FF6832', '#66E1D3', '#CFCDAC', '#D0AC94', '#7ED379', '#012C58',\r\n  '#7A7BFF', '#D68E01', '#353339', '#78AFA1', '#FEB2C6', '#75797C', '#837393', '#943A4D',\r\n  '#B5F4FF', '#D2DCD5', '#9556BD', '#6A714A', '#001325', '#02525F', '#0AA3F7', '#E98176',\r\n  '#DBD5DD', '#5EBCD1', '#3D4F44', '#7E6405', '#02684E', '#962B75', '#8D8546', '#9695C5',\r\n  '#E773CE', '#D86A78', '#3E89BE', '#CA834E', '#518A87', '#5B113C', '#55813B', '#E704C4',\r\n  '#00005F', '#A97399', '#4B8160', '#59738A', '#FF5DA7', '#F7C9BF', '#643127', '#513A01',\r\n  '#6B94AA', '#51A058', '#A45B02', '#1D1702', '#E20027', '#E7AB63', '#4C6001', '#9C6966',\r\n  '#64547B', '#97979E', '#006A66', '#391406', '#F4D749', '#0045D2', '#006C31', '#DDB6D0',\r\n  '#7C6571', '#9FB2A4', '#00D891', '#15A08A', '#BC65E9', '#FFFFFE', '#C6DC99', '#203B3C',\r\n  '#671190', '#6B3A64', '#F5E1FF', '#FFA0F2', '#CCAA35', '#374527', '#8BB400', '#797868',\r\n  '#C6005A', '#3B000A', '#C86240', '#29607C', '#402334', '#7D5A44', '#CCB87C', '#B88183',\r\n  '#AA5199', '#B5D6C3', '#A38469', '#9F94F0', '#A74571', '#B894A6', '#71BB8C', '#00B433',\r\n  '#789EC9', '#6D80BA', '#953F00', '#5EFF03', '#E4FFFC', '#1BE177', '#BCB1E5', '#76912F',\r\n  '#003109', '#0060CD', '#D20096', '#895563', '#29201D', '#5B3213', '#A76F42', '#89412E',\r\n  '#1A3A2A', '#494B5A', '#A88C85', '#F4ABAA', '#A3F3AB', '#00C6C8', '#EA8B66', '#958A9F',\r\n  '#BDC9D2', '#9FA064', '#BE4700', '#658188', '#83A485', '#453C23', '#47675D', '#3A3F00',\r\n  '#061203', '#DFFB71', '#868E7E', '#98D058', '#6C8F7D', '#D7BFC2', '#3C3E6E', '#D83D66',\r\n];\r\n\r\n\r\n// General constants for the bar graphs\r\nexport const plotTitleOffset = 25;\r\nexport const plotTitleCentered = 25;\r\nexport const fontSizeTBig = \"20px\";\r\nexport const fontSizeTSmall = \"12px\";\r\nexport const fontSizeOBig = \"15px\";\r\nexport const fontSizeOSmall = \"8px\";\r\nexport const marginBottomBig = 200;\r\nexport const marginBottomSmall = 100;\r\n","/* eslint-disable react/no-children-prop */\r\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\r\nimport CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutlineOutlined';\r\nimport {\r\n  Alert, Box, Button, Container, Divider, Stack, TextField, Tooltip, Typography,\r\n} from '@mui/material';\r\nimport { GeneralCard as Card } from 'components/Cards/GeneralCard';\r\nimport CustomButton from 'components/CustomButton';\r\nimport FileUpload from 'components/FileUpload';\r\nimport DemoService from 'shared/services/Demo.service';\r\nimport AnndataArgsService from 'shared/services/AnndataArgs.service';\r\nimport { Modal, ModalTitle } from 'components/Modal';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { TabCard } from 'components/GeneMapper/TabCard';\r\nimport { MULTIPART_UPLOAD_STATUS } from 'shared/utils/common/constants';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { initSubmissionProgress, useSubmissionProgress } from 'shared/context/submissionProgressContext';\r\nimport ProjectService from 'shared/services/Project.service';\r\nimport { uploadMultipartFile } from 'shared/services/UploadLogic';\r\nimport { LearnMoreAtlasComponent } from 'views/References/LearnMoreAtlas';\r\nimport { LearnMoreModelComponent } from 'views/References/LearnMoreModel';\r\nimport { LearnMoreClassifierComponent } from 'views/References/LearnMoreClassifier';\r\n\r\nimport styles from './uploadfilepage.module.css';\r\nimport { width } from 'components/Visualization/src/constants';\r\n\r\n/**\r\n * @param datasetIsSelected indicates whether a demo dataset has been selected.\r\n * @param selectedDataset indicates the dataset that has been selected.\r\n */\r\nfunction UploadFilePage({\r\n  path, selectedAtlas, selectedModel, setActiveStep, demos,\r\n  selectedDataset, setSelectedDataset,\r\n  datasetIsSelected, setDatasetIsSelected,selectedClassifier\r\n}) {\r\n  const [uploadedFile, setUploadedFile] = useState();\r\n  const [mappingName, setMappingName] = useState('');\r\n  const [requirements, setRequirements] = useState([]);\r\n  const [open, setOpen] = useState(false);\r\n  const [atlasInfoOpen, setAtlasInfoOpen] = useState(false);\r\n  const [modelInfoOpen, setModelInfoOpen] = useState(false);\r\n  const [model_setup_anndata_args, setAnndataArgs] = useState();\r\n  const [classifierInfoOpen, setClassifierInfoOpen] = useState(false);\r\n  const [submissionProgress, setSubmissionProgress] = useSubmissionProgress();\r\n  const [showWarning, setShowWarning] = useState(false);\r\n  const [showFileWarning, setShowFileWarning] = useState(false);\r\n  const [showAcceptedFile, setShowAcceptedFile] = useState(false);\r\n  const history = useHistory();\r\n  const [availableDemos, setAvailableDemos] = useState([]);\r\n  const [demoDatasets, setDemoDatasets] = useState([]);\r\n  const [scviHubModel, setScviHubModel] = useState(null); \r\n\r\n  useEffect(() => {\r\n    setRequirements(selectedModel.requirements);\r\n  }, [selectedModel]);\r\n\r\n  // Show available demos\r\n  useEffect(() => {\r\n    if (demoDatasets) {\r\n      const matchingDemos = demoDatasets.filter(\r\n        (d) =>\r\n          d.atlas.toLowerCase() === selectedAtlas.name.toLowerCase() &&\r\n          d.model.toLowerCase() === selectedModel.name.toLowerCase()\r\n      );\r\n  \r\n      setAvailableDemos(matchingDemos);\r\n    }\r\n  }, [demoDatasets, selectedAtlas.name, selectedModel.name]);\r\n  \r\n  useEffect(() => {\r\n    DemoService.getDemos().then((a) => {\r\n      setDemoDatasets(a);\r\n    });\r\n    // Set the scvi hub model if scvi hub atlas is chosen.\r\n    if(selectedAtlas.scviAtlas){\r\n      const model = selectedAtlas.modelIds.find(modelId => modelId.model === selectedModel.name.toLowerCase());\r\n      setScviHubModel(model);\r\n    }   \r\n  }, []);\r\n\r\n  const handleOnDropChange = (file) => {\r\n    setUploadedFile(file);\r\n  };\r\n\r\n  // handle demo dataset selection\r\n  const handleDemoClick = (dataset) => {\r\n    if (!selectedDataset || selectedDataset._id !== dataset._id) {\r\n      setDatasetIsSelected(true);\r\n      setSelectedDataset(dataset);\r\n    } else {\r\n      setDatasetIsSelected(false);\r\n      setSelectedDataset(null);\r\n    }\r\n  };\r\n\r\n  // custom file extension validator\r\n  const validateUploadFile = (file) => {\r\n    if (file.name.split('.').pop() !== 'h5ad') {\r\n      setShowFileWarning(true);\r\n      // error object returned in case of rejection\r\n      return {\r\n        code: 'Wrong file format',\r\n        message: 'File must be in h5ad format',\r\n      };\r\n    }\r\n    setShowFileWarning(false);\r\n\r\n    return null; // file accepted\r\n  };\r\n\r\n  // Fetch the model_setup_anndata_args if the chosen atlas is an scvi hub atlas.\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      if(selectedAtlas.scviAtlas){\r\n        try{\r\n          const model = selectedAtlas.modelIds.find(modelId => modelId.model === selectedModel.name.toLowerCase());\r\n          const scviHubId = model.scviHubId;\r\n          \r\n          const response = await AnndataArgsService.postAnndataArgs(scviHubId);\r\n          setAnndataArgs(response.model_setup_anndata_args);\r\n        }catch(err){\r\n          console.error(`Error fetching the model_setup_anndata_args. Error: ${err}`);\r\n        }\r\n      }\r\n    }\r\n\r\n    fetchData();\r\n  }, [selectedAtlas]);\r\n\r\n  const createProject = useCallback(({projectName, atlasId, modelId, file, classifierId, scviHubId = \"\", model_setup_anndata_args = null}) => {\r\n    ProjectService.createProject({\r\n      projectName: projectName,\r\n      atlasId: atlasId,\r\n      modelId: modelId,\r\n      fileName: file.name,\r\n      classifierId: classifierId,\r\n      scviHubId: scviHubId, \r\n      model_setup_anndata_args: model_setup_anndata_args,\r\n    }).then((project) => {\r\n      uploadMultipartFile(\r\n        project.uploadId,\r\n        file,\r\n        // Sets the initial value of the submission progress\r\n        initSubmissionProgress(project.uploadId),\r\n        // The \"update\" parameter is the arrow function inside the setSubmissionProgress() function\r\n        (update) => {\r\n          setSubmissionProgress((prev) => ({\r\n            ...prev,\r\n            [project._id]: update(prev[project._id] ?? initSubmissionProgress(project.uploadId)),\r\n          }));\r\n        },\r\n      );\r\n      history.push(path); // go back to GeneMapper home\r\n    });\r\n  }, [submissionProgress]);\r\n\r\n  // the function to create a demo dataset project\r\n  const createDemoProject = ({projectName, atlasId, modelId, demoDataset}) => {\r\n    ProjectService.createProject({\r\n      projectName: projectName,\r\n      atlasId: atlasId,\r\n      modelId: modelId,\r\n      fileName: demoDataset.name,\r\n  });\r\n    history.push(path); // go back to GeneMapper home\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e?.preventDefault();\r\n    // save mapping name\r\n    setOpen(false); // opens modal to input mapping name\r\n    // choose what type of project to create.\r\n    if (datasetIsSelected) { // Demo project\r\n      createDemoProject({\r\n        projectName:mappingName, \r\n        atlasId: selectedAtlas._id, \r\n        modelId: selectedModel._id,\r\n        demoDataset: selectedDataset\r\n      });\r\n    } else {\r\n      if(selectedAtlas.scviAtlas){\r\n        createProject({\r\n          projectName: mappingName, \r\n          atlasId: scviHubModel.scviHubId, \r\n          modelId: scviHubModel.model, \r\n          file: uploadedFile[0],\r\n          classifierId: selectedClassifier._id,\r\n          scviHubId: scviHubModel.scviHubId,\r\n          model_setup_anndata_args: model_setup_anndata_args,\r\n        });\r\n      }\r\n      else{ // create a project with a core atlas.\r\n        createProject({\r\n          projectName: mappingName, \r\n          atlasId: selectedAtlas._id, \r\n          modelId: selectedModel._id,\r\n          file: uploadedFile ? uploadedFile[0]: selectedDataset,\r\n          classifierId: selectedClassifier._id});\r\n      }\r\n    }\r\n  };\r\n\r\n  // finding all matching demos for the current choice combination\r\n  useEffect(() => {\r\n    if (demoDatasets) {\r\n      const matchingDemos = demoDatasets\r\n        .filter((d) => d.atlas.toLowerCase() === selectedAtlas.name.toLowerCase()\r\n        && d.model.toLowerCase() === selectedModel.name.toLowerCase());\r\n\r\n      setAvailableDemos(matchingDemos);\r\n    } else {\r\n      setAvailableDemos([]);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <Box sx={{ marginTop: '2.5em' }}>\r\n      {showWarning\r\n        && (\r\n          <Alert severity=\"error\" xs={{ marginTop: '100px' }}>\r\n            Select or upload a dataset before continuing\r\n          </Alert>\r\n        )}\r\n      <Stack\r\n        direction=\"row\"\r\n        divider={(<Divider className={styles.divider} orientation=\"vertical\" flexItem />)}\r\n        sx={showWarning ? { marginTop: '1em' } : {}}\r\n      >\r\n        {/* Left side */}\r\n        <Box width=\"60%\" mr=\"3%\">\r\n          <Stack direction=\"column\" >\r\n            <Typography variant=\"h5\" fontWeight=\"bold\" pb=\"1em\">Your Choice</Typography>\r\n            <Stack direction=\"row\" spacing={2} sx={{ paddingBottom: '1.5em' }}>\r\n              <Card\r\n                width=\"50%\"\r\n                children={(\r\n                  <Stack direction=\"column\" height={180} >\r\n                    <Typography variant=\"caption\" fontWeight=\"bold\">Atlas</Typography>\r\n                    <Typography gutterBottom variant=\"h6\" fontWeight=\"bold\">{selectedAtlas.name .includes(\"atlas\") ? selectedAtlas.name.replace(\"atlas\", \"\") : selectedAtlas.name}</Typography>\r\n                    <Typography\r\n                      gutterBottom\r\n                      variant=\"caption\"\r\n                      sx={{\r\n                        overflow: '-moz-hidden-unscrollable', whiteSpace: 'nowrap', textOverflow: 'ellipsis', maxWidth: '200px',\r\n                      }}\r\n                    >\r\n                      {`Modalities:  ${selectedAtlas.modalities}`}\r\n                    </Typography>\r\n                    <Typography  gutterBottom variant=\"caption\">{`Cells in Reference:  ${selectedAtlas.numberOfCells}`}</Typography>\r\n                    <Typography gutterBottom variant=\"caption\">{`Species: ${selectedAtlas.species}`}</Typography>\r\n                    <Button\r\n                      size=\"small\"\r\n                      variant=\"outlined\"\r\n                      onClick={() => setAtlasInfoOpen(true)}\r\n                      sx={{\r\n                        borderRadius: 100, width: '55%', ml: '50%', mb: '-1em', mt: '0.5em', textTransform: 'none',\r\n                      }}\r\n                    >\r\n                      Learn more\r\n                    </Button>\r\n                    <Modal\r\n                      isOpen={atlasInfoOpen}\r\n                      setOpen={setAtlasInfoOpen}\r\n                      children={(\r\n                        <Container>\r\n                          <LearnMoreAtlasComponent id={selectedAtlas._id} onClick={() => history.push(`/references/atlases/${selectedAtlas._id}/visualization`)} />\r\n                        </Container>\r\n                      )}\r\n                    />\r\n                  </Stack>\r\n                )}\r\n              />\r\n              <Card\r\n                width=\"50%\"\r\n                children={(\r\n                  <Stack direction=\"column\" height={180} >\r\n                    <Typography variant=\"caption\" fontWeight=\"bold\">Model</Typography>\r\n                    <Typography gutterBottom variant=\"h6\" fontWeight=\"bold\">{selectedModel.name}</Typography>\r\n                    <Typography\r\n                      gutterBottom\r\n                      variant=\"caption\"\r\n                      sx={{\r\n                        display: 'block',\r\n                        textOverflow: 'ellipsis',\r\n                        wordWrap: 'break-word',\r\n                        overflow: 'hidden',\r\n                        maxHeight: '5.7em',\r\n                        lineHeight: '1.9em',\r\n                      }}\r\n                    >\r\n                      {selectedModel.description}\r\n                    </Typography>\r\n                    <Button\r\n                      size=\"small\"\r\n                      variant=\"outlined\"\r\n                      onClick={() => setModelInfoOpen(true)}\r\n                      sx={{\r\n                        borderRadius: 100, width: '55%',  ml: '50%', mb: '-1em', mt: '0.5em', textTransform: 'none',\r\n                      }}\r\n                    >\r\n                      Learn more\r\n                    </Button>\r\n                    <Modal\r\n                      isOpen={modelInfoOpen}\r\n                      setOpen={setModelInfoOpen}\r\n                      children={(\r\n                        <Container>\r\n                          <LearnMoreModelComponent id={selectedModel._id} />\r\n                        </Container>\r\n                      )}\r\n                    />\r\n                  </Stack>\r\n                )}\r\n              />\r\n              {/* classifier */}\r\n              { (!selectedClassifier || selectedModel==='totalVI') ? null :\r\n              <Card\r\n                width=\"50%\"\r\n                children={(\r\n                  <Stack direction=\"column\" height={180} >\r\n                    <Typography variant=\"caption\" fontWeight=\"bold\">Classifier</Typography>\r\n                    <Typography gutterBottom variant=\"h6\" fontWeight=\"bold\">{selectedClassifier.name}</Typography>\r\n                    <Typography\r\n                      gutterBottom\r\n                      variant=\"caption\"\r\n                      sx={{\r\n                        display: 'block',\r\n                        textOverflow: 'ellipsis',\r\n                        wordWrap: 'break-word',\r\n                        overflow: 'hidden',\r\n                        maxHeight: '5.7em',\r\n                        lineHeight: '1.9em',\r\n                      }}\r\n                    >\r\n                      {selectedClassifier.description}\r\n                    </Typography>\r\n                    \r\n                    <Button\r\n                      size=\"small\"\r\n                      variant=\"outlined\"\r\n                      onClick={() => setClassifierInfoOpen(true)}\r\n                      sx={{\r\n                        borderRadius: 100, width: '55%', ml: '50%', mb: '-1em', mt: '0.5em', textTransform: 'none',\r\n                      }}\r\n                    >\r\n                      Learn more\r\n                    </Button>\r\n                    <Modal\r\n                      isOpen={classifierInfoOpen}\r\n                      setOpen={setClassifierInfoOpen}\r\n                      children={(\r\n                        <Container>\r\n                          <LearnMoreClassifierComponent id={selectedClassifier._id} />\r\n                        </Container>\r\n                      )}\r\n                    />\r\n                  </Stack>\r\n                )}\r\n              />  }\r\n              {/* classifier */}\r\n            </Stack>\r\n            <Stack>\r\n              <Typography variant=\"h5\" fontWeight=\"bold\" pb=\"1em\">Consequent Requirements</Typography>\r\n              <Card>\r\n                <Box sx={{ flexDirection: 'column', minHeight: '6em' }}>\r\n                  {requirements\r\n                    ? requirements.map((text, index) => (\r\n                      <Box key={text} sx={{ display: 'flex' }}>\r\n                        <Typography variant=\"body2\" sx={{ pr: 1, fontWeight: 'bold' }}>{++index}</Typography>\r\n                        <Typography variant=\"body2\">\r\n                          {text}\r\n                        </Typography>\r\n                      </Box>\r\n                    ))\r\n                    : (\r\n                      <Typography variant=\"body2\" gutterBottom>\r\n                        There are no consequent requirements!\r\n                      </Typography>\r\n                    )}\r\n                </Box>\r\n\r\n              </Card>\r\n            </Stack>\r\n          </Stack>\r\n        </Box>\r\n        {/* Right side */}\r\n        <Box width=\"40%\" ml=\"3%\">\r\n          <Modal\r\n            isOpen={open}\r\n            setOpen={setOpen}\r\n            children={(\r\n              <Container>\r\n                <ModalTitle>Give your mapping a name </ModalTitle>\r\n                <form onSubmit={handleSubmit}>\r\n                  {' '}\r\n                  {/* this handles the submission of the file and the project */}\r\n                  <TextField\r\n                    variant=\"standard\"\r\n                    placeholder=\"Enter name here\"\r\n                    fullWidth\r\n                    onChange={(e) => setMappingName(e.target.value)}\r\n                    required\r\n                    label=\"Mapping name\"\r\n                  />\r\n                  <Stack direction=\"row\" justifyContent=\"space-between\" mt=\"1.5em\">\r\n                    <CustomButton\r\n                      type=\"tertiary\"\r\n                      onClick={() => {\r\n                        setOpen(false);\r\n                      }}\r\n                    >\r\n                      Close\r\n                    </CustomButton>\r\n                    <CustomButton\r\n                      type=\"primary\"\r\n                      onClick={handleSubmit}\r\n                      disabled={!mappingName}\r\n                    >\r\n                      Submit\r\n                    </CustomButton>\r\n                  </Stack>\r\n                </form>\r\n              </Container>\r\n            )}\r\n          />\r\n          <Stack className=\"flexContainer\" direction=\"column\" pb=\"1em\">\r\n            <Typography variant=\"h5\" fontWeight=\"bold\" pb=\"1em\">Select Datasets for Upload</Typography>\r\n            <FileUpload\r\n              height=\"250px\"\r\n              handleFileUpload={handleOnDropChange}\r\n              validator={validateUploadFile}\r\n              rejectionHandler={() => setUploadedFile()}\r\n            />\r\n            {\r\n              showFileWarning\r\n              && (\r\n                <Alert severity=\"error\" sx={{ marginTop: '1em' }}>\r\n                  File must be in h5ad format.\r\n                </Alert>\r\n              )\r\n            }\r\n            {\r\n              uploadedFile && uploadedFile[0]\r\n              && (\r\n                <Alert severity=\"success\" sx={{ marginTop: '1em' }}>\r\n                  Selected file:\r\n                  {' '}\r\n                  {uploadedFile[0].name}\r\n                </Alert>\r\n              )\r\n            }\r\n          </Stack>\r\n          <Stack maxHeight=\"50%\">\r\n            <Typography variant=\"h5\" fontWeight=\"bold\" mb=\"0.5em\">Or Select Demo Dataset</Typography>\r\n            {\r\n              availableDemos.length > 0 ? (\r\n                availableDemos.map((dataset) => (\r\n                  <TabCard\r\n                    width=\"100%\"\r\n                    height=\"50px\"\r\n                    data={{\r\n                      name: `${dataset.name.split('_')[0]} + ${dataset.name.split('_')[1]}`,\r\n                      text: `Atlas: ${dataset.atlas} | Model: ${dataset.model}`,\r\n                      atlas: dataset.atlas,\r\n                      model: dataset.model,\r\n                      isDemo: true,\r\n                    }}\r\n                    isLoading={false}\r\n                    handleOnClick={() => handleDemoClick(dataset)}\r\n                    selected={\r\n                        !uploadedFile\r\n                        && datasetIsSelected\r\n                        && selectedDataset._id === dataset._id\r\n                      }\r\n                  />\r\n                ))\r\n              ) : <Alert severity=\"info\"> No existing datasets available. </Alert>\r\n            }\r\n          </Stack>\r\n        </Box>\r\n      </Stack>\r\n      <Stack direction=\"row\" justifyContent=\"space-between\" sx={{ marginTop: '2em', marginBottom: '3em' }}>\r\n        <CustomButton type=\"tertiary\" onClick={() => setActiveStep(0)}>\r\n          <ArrowBackIcon sx={{ marginRight: '2px' }} />\r\n          Back\r\n        </CustomButton>\r\n        <Stack direction=\"row\" spacing={3} alignItems=\"center\">\r\n          <Typography variant=\"h6\" fontWeight=\"bold\" />\r\n          <Tooltip title={(!uploadedFile && !selectedDataset) ? \"You haven't selected or uploaded a dataset!\" : ''} placement=\"top\">\r\n            <Box onClick={!uploadedFile && !selectedDataset ? () => setShowWarning(true) : () => { }}>\r\n              <span>\r\n                <CustomButton\r\n                  type=\"primary\"\r\n                  disabled={!uploadedFile && !selectedDataset}\r\n                  onClick={() => {\r\n                    setOpen(true);\r\n                  }}\r\n                >\r\n                  Create Project\r\n                  <CheckCircleOutlineIcon sx={{ marginLeft: '4px' }} />\r\n                </CustomButton>\r\n              </span>\r\n            </Box>\r\n          </Tooltip>\r\n        </Stack>\r\n      </Stack>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default UploadFilePage;\r\n","const projects = [\r\n  {\r\n    _id: 1,\r\n    owner: 'mock',\r\n    uploadId: '12345-abcde',\r\n    atlasId: '626ea3311d7d1a27de465b63',\r\n    fileName: 'test1.h5ad',\r\n    location: './testData/test_file1.csv',\r\n    fileSize: 10000000,\r\n    modelId: '626ea2361d7d1a27de465b5e',\r\n    name: 'Demo project 01',\r\n    resultSize: '10000',\r\n    status: 'DONE',\r\n    uploadDate: '2022-04-30T106:00:00.000Z',\r\n  },\r\n  {\r\n    _id: 2,\r\n    owner: 'mock',\r\n    uploadId: 'abcde-12345',\r\n    atlasId: '626ea3311d7d1a27de465b64',\r\n    fileName: 'test2.h5ad',\r\n    location: './testData/test_file2.csv',\r\n    fileSize: 10000000,\r\n    modelId: '626ea2361d7d1a27de465b60',\r\n    name: 'Another sample project',\r\n    resultSize: '10000',\r\n    status: 'DONE',\r\n    uploadDate: '2022-04-30T106:00:00.000Z',\r\n  },\r\n  {\r\n    _id: 3,\r\n    owner: 'mock',\r\n    uploadId: 'abcde-12345',\r\n    atlasId: '626ea3311d7d1a27de465b64',\r\n    fileName: 'test3.h5ad',\r\n    location: './testData/test_file3.csv',\r\n    fileSize: 10000000,\r\n    modelId: '626ea2361d7d1a27de465b60',\r\n    name: 'Test project 03',\r\n    resultSize: '10000',\r\n    status: 'PROCESSING_PENDING',\r\n    uploadDate: '2022-04-30T106:00:00.000Z',\r\n  },\r\n  {\r\n    _id: 4,\r\n    owner: 'mock',\r\n    uploadId: 'abcde-12345',\r\n    atlasId: '626ea3311d7d1a27de465b63',\r\n    fileName: 'test3.h5ad',\r\n    location: './testData/test_file4.csv',\r\n    fileSize: 10000000,\r\n    modelId: '626ea2361d7d1a27de465b5f',\r\n    name: 'Sample project',\r\n    resultSize: '10000',\r\n    status: 'ABORTED',\r\n    uploadDate: '2022-04-30T106:00:00.000Z',\r\n  },\r\n];\r\n\r\nconst ownTeams = [\r\n  {\r\n    _id: 1,\r\n    title: 'test team 01',\r\n  },\r\n  {\r\n    _id: 2,\r\n    title: 'test team 02',\r\n  },\r\n];\r\n\r\nconst atlases = [\r\n  {\r\n    _id: '626ea3311d7d1a27de465b63',\r\n    name: 'Pancreas',\r\n    previewPictureURL: 'https://images-na.ssl-images-amazon.com/images/I/81+6yFP1sQL.jpg',\r\n    modalities: ['No'],\r\n    numberOfCells: 10293,\r\n    species: ['Human'],\r\n    compatibleModels: ['scVI', 'scanVI'],\r\n  },\r\n  {\r\n    _id: '626ea3311d7d1a27de465b64',\r\n    name: 'PBMC',\r\n    previewPictureURL: 'https://images-na.ssl-images-amazon.com/images/I/81+6yFP1sQL.jpg',\r\n    modalities: ['CITE-seq: CD3_TotalSeqB, CD4_TotalSeqB, CD8a_TotalSeqB, CD14_TotalSeqB, CD15_TotalSeqB, CD16_TotalSeqB, CD56_TotalSeqB, CD19_TotalSeqB, CD25_TotalSeqB, CD45RA_TotalSeqB, CD45RO_TotalSeqB, PD-1_TotalSeqB, TIGIT_TotalSeqB, CD127_TotalSeqB'],\r\n    numberOfCells: 10849,\r\n    species: ['Human'],\r\n    compatibleModels: ['totalVI'],\r\n  }];\r\n\r\nconst models = [\r\n  {\r\n    _id: '626ea2361d7d1a27de465b5e',\r\n    name: 'scANVI',\r\n    description: 'The scANVI model lorem impsum blablabla lorem impsum blablabla lorem impsum blablabla lorem impsum blablabla lorem impsum blablabla lorem impsum blablabla',\r\n  },\r\n  {\r\n    _id: '626ea2361d7d1a27de465b5f',\r\n    name: 'scVI',\r\n    description: 'The scVI model lorem impsum blablabla lorem impsum blablabla lorem impsum blablabla lorem impsum blablabla lorem impsum blablabla lorem impsum blablabla',\r\n  },\r\n  {\r\n    _id: '626ea2361d7d1a27de465b60',\r\n    name: 'totalVI',\r\n    description: 'The totalVI model lorem impsum blablabla lorem impsum blablabla lorem impsum blablabla lorem impsum blablabla lorem impsum blablabla lorem impsum blablabla',\r\n  },\r\n];\r\n\r\nconst datasets = [\r\n  {\r\n    _id: 1,\r\n    name: 'Hao and Hao et al, bioRvix 2020',\r\n    status: 'DONE',\r\n  },\r\n  {\r\n    _id: 2,\r\n    name: 'Keller, Lennart et al, FastGenomics.ai 2022',\r\n    status: 'IN PROGRESS',\r\n  },\r\n  {\r\n    _id: 3,\r\n    name: 'Hbsch und Hbner et al, ToTheMoon.crypto 2021',\r\n    status: 'UPLOAD FAILED',\r\n  },\r\n  {\r\n    _id: 4,\r\n    name: 'Xu Fan Lu et al, BINGO 2022',\r\n    status: 'DONE',\r\n  },\r\n  {\r\n    _id: 5,\r\n    name: 'Christopher, Evan et al, TUM.UNICORN 2023',\r\n    status: 'IN PROGRESS',\r\n  },\r\n];\r\n\r\nconst ProjectMock = {\r\n  getProjects: async () => projects,\r\n  getProject: async (id) => projects.find((project) => project._id === Number(id)),\r\n\r\n  addProjectToTeam: async (teamId, projectId) => { throw new Error('400'); },\r\n  getOwnTeams: async () => ownTeams,\r\n\r\n  getAtlases: async () => atlases,\r\n  getAtlas: async (id) => atlases.find((atlas) => atlas._id === Number(id)),\r\n\r\n  getModel: async (id) => models.find((model) => model._id === Number(id)),\r\n  getModels: async () => models,\r\n\r\n  getDataset: async (id) => models.find((dataset) => dataset._id === Number(id)),\r\n  getDatasets: async () => datasets,\r\n\r\n  deleteProject: async (id) => {\r\n    const i = projects.findIndex((project) => project._id === Number(id));\r\n    return i > -1 ? projects.splice(i, 1) : false;\r\n  },\r\n};\r\n\r\nexport default ProjectMock;\r\n","import axiosInstance from './axiosInstance';\r\nimport ProjectMock from './mock/projects';\r\n\r\nconst MODEL = 'models';\r\n\r\nconst ModelService = {\r\n  getModels: async () => {\r\n    const { data } = await axiosInstance.get(`/${MODEL}`);\r\n    return data?.length ? data : ProjectMock.getModels();\r\n  },\r\n\r\n  getModel: async (id) => {\r\n    const { data } = await axiosInstance.get(`/model/${id}`);\r\n    return data;\r\n  },\r\n};\r\n\r\nexport default ModelService;\r\n","import axiosInstance from './axiosInstance';\r\n\r\n// Endpoint name\r\nconst SCVI_ATLASES = 'scvi-atlases';\r\n\r\nconst ScviAtlasService = {\r\n  getAtlases: async () => {\r\n    const { data } = await axiosInstance.get(`/${SCVI_ATLASES}`);\r\n    return data;\r\n  },\r\n};\r\n\r\nexport default ScviAtlasService;\r\n","import {\r\n  Box, Container, Step, StepButton, Stepper,\r\n} from '@mui/material';\r\nimport React, { useState, useEffect } from 'react';\r\nimport AtlasModelChoice from '../AtlasModelChoice/AtlasModelChoice';\r\nimport UploadFilePage from '../UploadFilePage';\r\nimport { useLocation, useHistory } from 'react-router-dom';\r\nimport ModelService from 'shared/services/Model.service';\r\nimport AtlasService from 'shared/services/Atlas.service';\r\nimport DemoService from 'shared/services/Demo.service';\r\nimport ScviAtlasService from 'shared/services/ScviAtlas.service';\r\nimport ClassifierService from 'shared/services/Classifier.service';\r\n\r\n/**\r\n * GeneMapperState\r\n * Renders the necessary step during the creation of a new project\r\n * @param path\r\n * @param loggedIn set to true when the user is logged in\r\n * */\r\nfunction GeneMapperState({ path }) {\r\n  const { search } = useLocation();\r\n  const history = useHistory();\r\n  const searchParams = new URLSearchParams(search);\r\n  const urlParams = new URLSearchParams(searchParams);\r\n  const filterParams = Object.fromEntries(urlParams);\r\n\r\n  const atlasId = filterParams.atlas;\r\n  const modelId = filterParams.model;\r\n  const [selectedAtlas, setSelectedAtlas] = useState('');\r\n  const [selectedModel, setSelectedModel] = useState('');\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [selectedDemoDataset, setSelectedDemoDataset] = useState(null);\r\n  const [demoDatasetIsSelected, setDemoDatasetIsSelected] = useState(false);\r\n  const [demoDatasets, setDemoDatasets] = useState(null);\r\n  const [scviHubAtlases, setScviHubAtlases] = useState(null);\r\n  const steps = ['Pick Atlas and Model', 'Choose File and Project details'];\r\n  const [atlases, setAtlases] = useState(null);\r\n  const [models, setModels] = useState(null);\r\n  const [classifiers, setClassifiers] = useState(null);\r\n  const [selectedClassifier, setSelectedClassifier] = useState('');\r\n\r\n  const handleAtlasSelection = (newAtlas) => {\r\n    setSelectedAtlas(newAtlas);\r\n    setSelectedModel('');\r\n    setSelectedClassifier('');\r\n  };\r\n  const handleModelSelection = (newModel) => {\r\n    setSelectedModel(newModel);\r\n    let {batch_key, cell_type_key} = selectedAtlas\r\n    newModel.requirements = [\r\n      'Ensure your data is in h5ad format',\r\n      `Batch/Study information is mandatory and should be labeled as ${batch_key}`,\r\n    ];\r\n    if (newModel.name === 'scVI') {\r\n      newModel.requirements.push(`Cell type information should be labeled as ${cell_type_key}`);\r\n      newModel.requirements.push(`For unlabeled cells, the value for ${cell_type_key} should be Unknown`);\r\n    }\r\n    else if (newModel.name === 'scANVI' || newModel.name === 'scPoli') {\r\n      newModel.requirements.push(`Cell type information should be labeled as ${cell_type_key}`);\r\n    }\r\n    setSelectedClassifier('')\r\n  };\r\n\r\n  // function to update the state in the URL\r\n  const updateQueryParams = (param, value) => {\r\n    const params = new URLSearchParams(history.location.search);\r\n    if (value) {\r\n      params.set(param, value);\r\n    } else {\r\n      params.delete(param);\r\n    }\r\n\r\n    history.replace({\r\n      pathname: history.location.pathname,\r\n      search: params.toString(),\r\n    });\r\n  };\r\n\r\n  const handleStep = (step) => {\r\n    setActiveStep(step);\r\n    if (step === 1 && selectedAtlas && selectedModel) {\r\n      if(selectedAtlas?.scviAtlas){\r\n        updateQueryParams('atlas', selectedAtlas.name);\r\n        updateQueryParams('model', selectedModel._id);\r\n      }else{\r\n        updateQueryParams('atlas', selectedAtlas._id);\r\n        updateQueryParams('model', selectedModel._id);\r\n        updateQueryParams('classifier', selectedClassifier._id);\r\n      }\r\n\r\n    }\r\n  };\r\n\r\n  // get demo projects\r\n  useEffect(() => {\r\n    DemoService.getDemos().then((a) => {\r\n      setDemoDatasets(a);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    AtlasService.getAtlases().then((a) => {\r\n      a.map((a) => {\r\n        // adjust numberOfCells\r\n        let { numberOfCells } = a;\r\n        let dimension = '';\r\n        if (numberOfCells > 1000000000) {\r\n          numberOfCells = Math.round(numberOfCells / 1000000000);\r\n          dimension = 'B';\r\n        } else if (numberOfCells > 1000000) {\r\n          numberOfCells = Math.round(numberOfCells / 1000000);\r\n          dimension = 'M';\r\n        } else if (numberOfCells > 1000) {\r\n          numberOfCells = Math.round(numberOfCells / 1000);\r\n          dimension = 'K';\r\n        }\r\n        a.numberOfCells = numberOfCells + dimension;\r\n\r\n        // adjust modalities\r\n        if (!(typeof a.modalities === 'string')) {\r\n          // modalities ist array of strings\r\n          if (a.modalities.length == 0) {\r\n            a.modalities = 'None';\r\n          } else if (a.modalities.length == 1) {\r\n            a.modalities = a.modalities[0];\r\n          } else {\r\n            a.modalities = `${a.modalities[0]}, ...`;\r\n          }\r\n        }\r\n\r\n        if (a._id === atlasId) {\r\n          setSelectedAtlas(a);\r\n        }\r\n        return a;\r\n      });\r\n      setAtlases(a);\r\n    });\r\n\r\n    ModelService.getModels().then((m) => {\r\n      m.map((model) => {\r\n        if (model._id === modelId) {\r\n          setSelectedModel(model);\r\n        }\r\n      });\r\n      setModels(m);\r\n    });\r\n\r\n    ScviAtlasService.getAtlases().then((atlases) => {\r\n      setScviHubAtlases(atlases);\r\n    })\r\n\r\n    ClassifierService.getClassifiers().then((cl) => {\r\n      setClassifiers(cl)\r\n    })\r\n\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (atlasId && selectedAtlas && modelId && selectedModel) {\r\n      handleStep(1);\r\n    } else if (atlases && models && classifiers) {\r\n      history.push({\r\n        pathname: history.location.pathname,\r\n        search: '',\r\n      });\r\n      setSelectedAtlas('');\r\n      setSelectedModel('');\r\n      setSelectedClassifier('');\r\n    } else if (atlases && models) { // Push to history only if the atlas and model are chosen.\r\n      history.push({\r\n        pathname: history.location.pathname,\r\n        search: '',\r\n      });\r\n      setSelectedAtlas('');\r\n      setSelectedModel('');\r\n    }\r\n  }, [atlases, models, classifiers]);\r\n\r\n  return (\r\n    <Container>\r\n      <Box height=\"100%\" width=\"500px\" margin=\"auto\" sx={{ marginTop: '1%', marginBottom: '1%' }}>\r\n        <Stepper activeStep={activeStep}>\r\n          {steps.map((labelText, index) => (\r\n            <Step index={index}>\r\n              <StepButton color=\"inherit\" onClick={() => handleStep(index)}>\r\n                {labelText}\r\n              </StepButton>\r\n            </Step>\r\n          ))}\r\n        </Stepper>\r\n      </Box>\r\n      {\r\n        activeStep === 0\r\n          ? (\r\n            <AtlasModelChoice\r\n              path={path}\r\n              selectedAtlas={selectedAtlas}\r\n              selectedModel={selectedModel}\r\n              selectedClassifier={selectedClassifier}\r\n              steps={steps}\r\n              setSelectedAtlas={handleAtlasSelection}\r\n              setSelectedModel={handleModelSelection}\r\n              setSelectedClassifier={setSelectedClassifier}\r\n              setActiveStep={handleStep}\r\n              compatibleModels={selectedAtlas ? selectedAtlas.compatibleModels : []}\r\n              compatibleClassifiers={selectedModel ? selectedModel.compatibleClassifiers : []}\r\n              atlases={atlases}\r\n              scviHubAtlases={scviHubAtlases}\r\n              models={models}\r\n              demos={demoDatasets}\r\n              classifiers={classifiers}\r\n              selectedDataset={selectedDemoDataset}\r\n              setSelectedDataset={setSelectedDemoDataset}\r\n              datasetIsSelected={demoDatasetIsSelected}\r\n              setDatasetIsSelected={setDemoDatasetIsSelected}\r\n            />\r\n          )\r\n          : (\r\n            <UploadFilePage\r\n              path={path}\r\n              selectedAtlas={selectedAtlas}\r\n              selectedModel={selectedModel}\r\n              selectedClassifier={selectedClassifier}\r\n              setActiveStep={handleStep}\r\n              demos={demoDatasets}\r\n              selectedDataset={selectedDemoDataset}\r\n              setSelectedDataset={setSelectedDemoDataset}\r\n              datasetIsSelected={demoDatasetIsSelected}\r\n              setDatasetIsSelected={setDemoDatasetIsSelected}\r\n            />\r\n          )\r\n      }\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default GeneMapperState;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport {\r\n  Box, ButtonBase, Stack, Typography,\r\n} from '@mui/material';\r\nimport { Search as SearchIcon, FilterAlt } from '@mui/icons-material';\r\n// eslint-disable-next-line import/no-extraneous-dependencies\r\nimport { styled } from '@mui/system';\r\nimport { colors } from 'shared/theme/colors';\r\n\r\nconst SearchInput = styled('input')(({ theme }) => ({\r\n  border: 'none',\r\n  outline: 'none',\r\n  fontSize: 20,\r\n  width: '100%',\r\n  color: theme.palette.primary.main,\r\n}));\r\n\r\nconst FilterButton = ({ onClick }) => (\r\n  <ButtonBase\r\n    onClick={onClick}\r\n    disableRipple\r\n    sx={{\r\n      p: '12px',\r\n      ':hover': {\r\n        color: 'primary.light',\r\n      },\r\n    }}\r\n  >\r\n    <FilterAlt />\r\n    <Typography fontSize={20}>Filter</Typography>\r\n  </ButtonBase>\r\n);\r\n\r\n/**\r\n * \r\n * @param {*} filterComponent - The filter component used in the search bar.\r\n * @param {*} handleSearch - search handler\r\n * @param {string} value - the value that is being searched for.\r\n * @param {string} padding - padding value.\r\n * @param {boolean} visible - variable that decides whether the search bar is boolean or not.\r\n * @param {boolean} noFilterComponent - boolean variable for whether there is a filter component or not. \r\n * @returns search bar component \r\n */\r\nconst Search = ({ filterComponent, handleSearch, value, padding = '10px', visible = true, noFilterComponent = false }) => {\r\n\r\n  const [active, setActive] = useState(false)\r\n  const [filterEnabled, setFilterEnabled] = useState(false)\r\n  const filterBox = useRef()\r\n\r\n  useEffect(() => {\r\n    // TODO\r\n    /*\r\n     * Want to achieve this effect: click outside box -> close filter\r\n     * Problem: current solution detects clicks on other components except the filter\r\n     *          works when clicking outside, but when you click a child component inside filter\r\n     *          it still closes.\r\n     */\r\n    // const handleFilterClose = (e) => {\r\n    //   if (filterBox.current && !filterBox.current.contains(e.target)) {\r\n    //     // setFilterEnabled(false)\r\n    //   }\r\n    // }\r\n    // window.addEventListener(\"click\", handleFilterClose, true)\r\n    // return () => {\r\n    //   window.removeEventListener(\"click\", handleFilterClose, true);\r\n    // }\r\n  }, [])\r\n\r\n  return (\r\n    <Stack\r\n      direction=\"row\"\r\n      justifyContent=\"space-between\"\r\n      sx={{\r\n        position: 'relative',\r\n        p: padding,\r\n        border: `2px solid ${active ? colors.primary[400] : colors.primary[700]}`,\r\n        borderRadius: '40px',\r\n        display: visible ? 'flex' : 'none',\r\n        height: '58px'\r\n      }}\r\n    >\r\n      {/* Left part */}\r\n      <Stack direction=\"row\" alignItems=\"center\" gap=\"5px\" sx={{ marginLeft: \"20px\", width: \"100%\", paddingRight:\"5px\" }}>\r\n        <SearchIcon sx={{ color: active ? \"primary.light\" : \"primary.main\" }} />\r\n        <SearchInput onChange={(e) => handleSearch(e.target.value)} placeholder=\"Search\" onMouseEnter={() => setActive(true)} onMouseLeave={() => setActive(false)} value={value} />\r\n      </Stack>\r\n      {/* Right part */}\r\n\r\n      {noFilterComponent ? null : (\r\n        <Stack direction=\"row\" sx={{ marginRight: '20px' }}>\r\n          <FilterButton onClick={() => setFilterEnabled(!filterEnabled)} />\r\n        </Stack>\r\n      )}\r\n      {\r\n        noFilterComponent || !filterEnabled ? null : (\r\n          <Box\r\n            ref={filterBox}\r\n            sx={{\r\n              position: 'absolute',\r\n              zIndex: '20',\r\n              top: '55px',\r\n              right: '40px',\r\n            }}\r\n          >\r\n            {filterComponent}\r\n          </Box>\r\n        )\r\n      }\r\n    </Stack>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","import axiosInstance from './axiosInstance';\r\n\r\nconst CELLXGENE = 'cellxgene';\r\n\r\nconst CellxgeneService = {\r\n    postCellxgeneService: async (fileURL) => {\r\n        try{\r\n            const { data }  = await axiosInstance.post(`/${CELLXGENE}`, { location: fileURL});\r\n            return data;\r\n        }catch(err){\r\n            console.log(err);\r\n        }\r\n    }\r\n}\r\n\r\nexport default CellxgeneService;","import React, { useState } from 'react';\r\nimport { IconButton, Typography } from '@mui/material';\r\nimport AtlasInfo from '../AtlasInfo';\r\nimport ModelInfo from '../ModelInfo';\r\nimport InfoOutlinedIcon from '@mui/icons-material/InfoOutlined';\r\n/**\r\n * Displays information about the given project\r\n * @param project Object containing project data\r\n * @param atlas Object containing atlas data\r\n * @param model Object containing model data\r\n */\r\nfunction ProjectInfo({ project, atlas, model }) {\r\n  const [atlasInfoOpen, setAtlasInfoOpen] = useState(false);\r\n  const [modelInfoOpen, setModelInfoOpen] = useState(false);\r\n  return (\r\n    <>\r\n      <Typography>\r\n        {`Atlas: ${atlas?.name}`}\r\n        {atlas?._id && <IconButton size=\"small\" onClick={() => setAtlasInfoOpen(true)}>\r\n          <InfoOutlinedIcon fontSize=\"small\" />\r\n        </IconButton>}\r\n      </Typography>\r\n      <Typography>\r\n        {`Model: ${model?.name}`}\r\n        {model?._id && <IconButton size=\"small\" onClick={() => setModelInfoOpen(true)}>\r\n          <InfoOutlinedIcon fontSize=\"small\" />\r\n        </IconButton>}\r\n      </Typography>\r\n      <Typography>{`Dataset: ${project?.fileName}`}</Typography>\r\n      {atlas?._id\r\n      && <AtlasInfo id={atlas._id} open={atlasInfoOpen} setOpen={setAtlasInfoOpen} />}\r\n      {model?._id\r\n      && <ModelInfo id={model._id} open={modelInfoOpen} setOpen={setModelInfoOpen} />}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ProjectInfo;\r\n","import React, { useEffect, useState } from 'react';\r\nimport Typography from '@mui/material/Typography';\r\nimport {\r\n  Box, IconButton, LinearProgress, Stack, CardActionArea, Snackbar, Collapse, Link, Divider, Grid, Alert, Button, CircularProgress,\r\n} from '@mui/material';\r\nimport CircleIcon from '@mui/icons-material/Circle';\r\nimport DownloadIcon from '@mui/icons-material/Download';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { getSubmissionProgressPercentage } from 'shared/services/UploadLogic';\r\nimport {\r\n  MULTIPART_UPLOAD_STATUS, MULTIPART_UPLOAD_STATUS as Status, statusIsError, statusIsUpload, PROJECT_STATUS,\r\n} from 'shared/utils/common/constants';\r\nimport Clear from '@mui/icons-material/Clear';\r\nimport ReplayIcon from '@mui/icons-material/Replay';\r\nimport ProgressBar from 'components/ProgressBar';\r\nimport DeleteOutlineIcon from '@mui/icons-material/DeleteOutline';\r\nimport {\r\n  ExpandLess, ExpandMore, InfoOutlined, StarBorder,\r\n} from '@mui/icons-material';\r\nimport { Modal, ModalTitle } from 'components/Modal';\r\nimport TeamService from 'shared/services/Team.service';\r\nimport ProjectService from 'shared/services/Project.service';\r\nimport CellxgeneService from 'shared/services/Cellxgene.service';\r\nimport CustomButton from 'components/CustomButton';\r\nimport { TabCard } from '../TabCard';\r\nimport { colors } from 'shared/theme/colors';\r\nimport InfoOutlinedIcon from '@mui/icons-material/InfoOutlined';\r\nimport { GeneralCard } from 'components/Cards/GeneralCard';\r\nimport ProjectInfo from '../ProjectInfo';\r\nimport { initSubmissionProgress, useSubmissionProgress } from 'shared/context/submissionProgressContext';\r\nimport axiosInstance from 'shared/services/axiosInstance';\r\n\r\nfunction ProcessingStatus() {\r\n  return (\r\n    <>\r\n      <Box sx={{ pr: 2, flexGrow: 1 }}>\r\n        <LinearProgress />\r\n      </Box>\r\n      <Typography variant=\"caption\" noWrap sx={{ pr: 2 }}>Processing by scArches...</Typography>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction CanceldOrFailedStatus() {\r\n  return (\r\n    <Typography variant=\"caption\">\r\n      Upload failed or canceled\r\n    </Typography>\r\n  );\r\n}\r\n\r\n/**\r\n * Displays information in a card about the given project\r\n * @param project Object containing project data\r\n * @param atlas Object containing atlas data\r\n * @param model Object containing model data\r\n * @param userTeams Array containg objects with data about each team the user is a member of\r\n * @param handleDelete Function that is executed when the delete button is clicked.\r\n * If the project is already deleted, this function is executed when the restore button is clicked\r\n * Expects no parameter\r\n * @param deleted True if the project is deleted\r\n * @param loggedIn True if the user is logged in when creating the project.\r\n * When the user is not logged in, then some of the functionality of the project card is disabled.\r\n */\r\n\r\nexport default function ProjectBarCard({\r\n  project, atlas, model, userTeams, handleDelete, deleted, loggedIn = true,\r\n}) {\r\n  const history = useHistory();\r\n  const [submissionProgresses, setSubmissionProgresses] = useSubmissionProgress();\r\n\r\n  const submissionProgress = submissionProgresses[project._id];\r\n\r\n  const cancelUpload = () => {\r\n    setSubmissionProgresses((prev) => ({\r\n      ...prev,\r\n      [project._id]: {\r\n        ...(prev[project._id] ?? initSubmissionProgress(project.uploadId)),\r\n        status: MULTIPART_UPLOAD_STATUS.CANCELING,\r\n      },\r\n    }));\r\n    localStorage.setItem(`cancelUpload_${project.uploadId}`, '1');\r\n  };\r\n\r\n  const addProjectToTeam = async (teamId) => {\r\n    TeamService.addProject(teamId, project._id);\r\n  };\r\n\r\n  const color = project.status === PROJECT_STATUS.DONE || project.status === PROJECT_STATUS.DOWNLOAD_READY\r\n    ? 'lightGreen'\r\n    : project.status === PROJECT_STATUS.ABORTED\r\n      || (!submissionProgress && project.status === PROJECT_STATUS.UPLOAD_PENDING)\r\n      || project.status === PROJECT_STATUS.PROCESSING_FAILED\r\n      || submissionProgress?.status === MULTIPART_UPLOAD_STATUS.CANCELING\r\n      || (submissionProgress && statusIsError(submissionProgress.status))\r\n      ? 'red'\r\n      : 'orange';\r\n\r\n  // The team that the project has been added to.\r\n  const [projectTeam, setProjectTeam] = useState([]);\r\n  const [addTeam, setAddTeam] = useState(false);\r\n  const [selectedTeam, setSelectedTeam] = useState('');\r\n  const [open, setOpen] = useState(false);\r\n  const [showInfo, setShowInfo] = useState(false);\r\n  const [fetchingUrl, setFetchingUrl] = useState(false);\r\n  const [fetchUrlError, setFetchUrlError] = useState(null);\r\n\r\n\r\n  useEffect(() => {\r\n    const fetchProjects = async () => {\r\n      const updatedProjectTeam = [];\r\n      await Promise.all(\r\n        userTeams.map(async (team) => {\r\n          let projects = await ProjectService.getTeamProjects(team._id);\r\n          projects = projects.filter((pr) => pr._id === project._id);\r\n          // If the project belongs to the team, add the team to updatedProjectTeam.\r\n          if (projects.length > 0) {\r\n            updatedProjectTeam.push(team);\r\n          }\r\n        })\r\n      );\r\n      setProjectTeam(updatedProjectTeam);\r\n    };\r\n  \r\n    fetchProjects();\r\n  }, [userTeams, project._id]);\r\n\r\n  const handleOpen = () => setAddTeam(true);\r\n  const handleClose = () => setAddTeam(false);\r\n\r\n  const handleClickCard = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const fetchPresignedUrlAndDownload = async (projectId) => {\r\n    setFetchingUrl(true);\r\n    setFetchUrlError(null);\r\n\r\n    try {\r\n      const response = await axiosInstance.post('/file_download/results', {\r\n        id: projectId,\r\n      });\r\n\r\n      \r\n\r\n      const data = await response.data;\r\n      const presignedUrl = data.presignedUrl;\r\n      // Create a temporary anchor tag and programmatically click it to download the file\r\n      const link = document.createElement('a');\r\n      link.href = presignedUrl;\r\n      link.download = `${project.name}.h5ad`; // Set the download filename\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n\r\n    } catch (err) {\r\n      console.error('Error fetching presigned URL:', err);\r\n      setFetchUrlError('Failed to download file.');\r\n    } finally {\r\n      setFetchingUrl(false);\r\n    }\r\n  };\r\n\r\n  // Cellxgene-specific variables\r\n  // Status types: launching, ready, or null \r\n  const [cellxgene, setCellxgene] = useState({ status: null });\r\n  const [snackbar, setSnackbar] = useState({ open: false, type: \"error\" });\r\n\r\n  const launchCellxgene = async (fileURL) => {\r\n    // Create Cellxgene instance\r\n    setSnackbar({ open: true, type: \"success\" });\r\n    setCellxgene({ ...cellxgene, status: \"launching\" });\r\n    let res = await CellxgeneService.postCellxgeneService(fileURL);\r\n    // setURL of the result for visualization\r\n    if(!res){\r\n      setSnackbar({ open: true, type: \"error\", message: \"Error occurred!\" });\r\n      setCellxgene({ ...cellxgene, status: null });\r\n      return;\r\n    }\r\n    setCellxgene({ ...res, status: \"ready\" });\r\n    setSnackbar({ open: true, type: \"success\", message: \"Cellxgene instance launched. Timeout set to 1 hr.\" });\r\n    // Update cache\r\n    let cachedProjects = JSON.parse(localStorage.getItem(\"cached_projects\"));\r\n    cachedProjects[project._id][\"cellxgene\"] = res;\r\n    localStorage.setItem(\"cached_projects\", JSON.stringify(cachedProjects));\r\n  }\r\n\r\n  // Set cellxgene state based on the cache value\r\n  useEffect(() => {\r\n    const cachedProjects = JSON.parse(localStorage.getItem(\"cached_projects\"));\r\n    const cxgValue = cachedProjects[project._id]?.cellxgene;\r\n    if(cxgValue && cxgValue.timeout > Date.now())  setCellxgene({ ...cxgValue, status: \"ready\" })\r\n  }, [project]);\r\n\r\n  return (\r\n    <Box sx={{ mb: 2 }}>\r\n      <GeneralCard padding={0}>\r\n        <CardActionArea\r\n          disableTouchRipple\r\n          sx={{\r\n            p: 2, borderRadius: 'inherit',\r\n          }}\r\n        >\r\n          <Grid container direction=\"row\" justifyContent=\"space-between\" sx={{ width: '100%', justifyContent: 'space-between', alignItems: 'center' }}>\r\n            <Grid\r\n              item\r\n              xs={12}\r\n              md={8}\r\n              container\r\n              direction=\"row\"\r\n              alignItems=\"center\"\r\n              onClick={handleClickCard}\r\n            >\r\n              <Grid container item xs={4} alignItems=\"center\">\r\n                <Box sx={{ flexDirection: 'row', alignItems: 'center' }}>\r\n                  {open ? (\r\n                    <ExpandLess sx={{\r\n                      fontSize: 30,\r\n                      transform: 'rotate(180deg)',\r\n                    }}\r\n                    />\r\n                  ) : (\r\n                    <ExpandMore sx={{\r\n                      fontSize: 30,\r\n                      transform: 'rotate(-90deg)',\r\n                    }}\r\n                    />\r\n                  )}\r\n                </Box>\r\n                <CircleIcon sx={{\r\n                  fontSize: 30, color, mr: 1,\r\n                }}\r\n                />\r\n                <Typography noWrap>\r\n                  {project.name}\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item xs={8}>\r\n                {submissionProgress ? (\r\n                  <Box\r\n                    sx={{\r\n                      flexGrow: 1, display: 'flex', alignItems: 'center',\r\n                    }}\r\n                  >\r\n                    {statusIsUpload(submissionProgress.status)\r\n                      && (\r\n                        <>\r\n                          <Box sx={{ pr: 2, flexGrow: 1 }}>\r\n                            <LinearProgress variant=\"determinate\" value={getSubmissionProgressPercentage(submissionProgress)} />\r\n                          </Box>\r\n                          <Typography variant=\"caption\">Uploading...</Typography>\r\n                          <IconButton\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              cancelUpload();\r\n                            }}\r\n                          >\r\n                            <Clear color=\"error\" />\r\n                          </IconButton>\r\n                        </>\r\n                      )}\r\n                    {statusIsError(submissionProgress.status)\r\n                      && <CanceldOrFailedStatus />}\r\n                    {submissionProgress.status === MULTIPART_UPLOAD_STATUS.CANCELING\r\n                      && <CanceldOrFailedStatus />}\r\n                    {submissionProgress.status === MULTIPART_UPLOAD_STATUS.COMPLETE\r\n                      && project.status !== PROJECT_STATUS.DONE\r\n                      && project.status !== PROJECT_STATUS.DOWNLOAD_READY\r\n                      && project.status !== PROJECT_STATUS.ABORTED\r\n                      && project.status !== PROJECT_STATUS.PROCESSING_FAILED\r\n                      && <ProcessingStatus />}\r\n                    {(project.status === PROJECT_STATUS.ABORTED\r\n                      || project.status === PROJECT_STATUS.PROCESSING_FAILED)\r\n                      && <>\r\n                    <Typography variant=\"caption\" color=\"error\">\r\n                      Processing failed\r\n                    </Typography>\r\n                    {project.errorMessage &&\r\n                      <Typography variant=\"caption\" color=\"error\" sx={{ ml: 2 }}>\r\n                        ({project.errorMessage})\r\n                      </Typography>\r\n                    }\r\n                  </>}\r\n                  </Box>\r\n                ) : null}\r\n                {!submissionProgress\r\n                  ? (\r\n                    <Box\r\n                      sx={{\r\n                        flexGrow: 1, display: 'flex', alignItems: 'center',\r\n                      }}\r\n                    >\r\n                      {project.status === PROJECT_STATUS.UPLOAD_PENDING\r\n                        && <CanceldOrFailedStatus />}\r\n                      {project.status === PROJECT_STATUS.PROCESSING_PENDING\r\n                        && <ProcessingStatus />}\r\n                      {(project.status === PROJECT_STATUS.ABORTED\r\n                        || project.status === PROJECT_STATUS.PROCESSING_FAILED)\r\n                && <>\r\n                    <Typography variant=\"caption\" color=\"error\">\r\n                      Processing failed\r\n                    </Typography>\r\n                    {project.errorMessage &&\r\n                      <Typography variant=\"caption\" color=\"error\" sx={{ ml: 2 }}>\r\n                        ({project.errorMessage})\r\n                      </Typography>\r\n                    }\r\n                  </>}\r\n                    </Box>\r\n                  )\r\n                  : null}\r\n              </Grid>\r\n            </Grid>\r\n            <Grid container item md={4} justifyContent=\"flex-end\">\r\n              <Box sx={{\r\n                p: 0.1, bgcolor: 'background.paper', borderRadius: 3, width: 'flex', display: 'flex', alignItems: 'center',\r\n              }}\r\n              >\r\n                {!deleted\r\n                  && (\r\n                    <>\r\n                      {/* render team button if logged in */}\r\n                      {\r\n                        loggedIn && (projectTeam?.title // TODO: you might need to remove this. \r\n                          ? (\r\n                            <CustomButton type=\"tertiary\" sx={{ mr: 1 }} onClick={() => history.push(`/sequencer/teams/${projectTeam._id || projectTeam.id}`)}>\r\n                              <Typography>\r\n                                {projectTeam.title}\r\n                              </Typography>\r\n                            </CustomButton>\r\n                          )\r\n                          : (\r\n                            <Button\r\n                              variant=\"outlined\"\r\n                              sx={{\r\n                                borderRadius: 100,\r\n                                mr: 1,\r\n                              }}\r\n                              style={{ textTransform: 'none' }}\r\n                              onClick={handleOpen}\r\n                            >\r\n                              <Typography>\r\n                                Add To Team\r\n                              </Typography>\r\n                            </Button>\r\n                          ))\r\n                      }\r\n                      {/* Launch Button */}\r\n                      {((!cellxgene.status) || (Date.now() > cellxgene.timeout && cellxgene?.status!==\"launching\"))\r\n                        && (<CustomButton\r\n                          type=\"primary\"\r\n                          onClick={() => launchCellxgene(project.location)}\r\n                          // disable it if the project status is neither done nor DOWNLOAD_READY\r\n                          disabled={project.status !== \"DONE\" && project.status !== \"DOWNLOAD_READY\"}\r\n                        >\r\n                          <Typography>Launch</Typography>\r\n                        </CustomButton>)\r\n                      }\r\n                      \r\n                      {/* View Button */}\r\n                      {cellxgene.status === \"launching\"\r\n                        && (<CustomButton type=\"primary\" disabled={cellxgene.status !== \"ready\"} style={{ display: 'flex', alignItems: 'center' }}>\r\n                          <Typography>\r\n                            Launching\r\n                            <CircularProgress style={{width: '20px', height: '20px', marginLeft: '10px'}} />\r\n                          </Typography>\r\n                        </CustomButton>\r\n                        )}\r\n                      {cellxgene.status === \"ready\" && Date.now() <= cellxgene.timeout\r\n                        && (<CustomButton\r\n                          type=\"primary\"\r\n                          disabled={cellxgene.status !== \"ready\"}>\r\n                          <Typography>\r\n                            <Link\r\n                              target=\"_blank\"\r\n                              style={{\r\n                                textDecoration: \"none\",\r\n                                color: \"white\",\r\n                              }}\r\n                              rel=\"noopener noreferrer\"\r\n                              href={cellxgene.url}>\r\n                              View Results\r\n                            </Link>\r\n                          </Typography>\r\n                        </CustomButton>)\r\n                      }\r\n                      {/* Snackbar after launching cellxgene */}\r\n                      <Snackbar\r\n                        open={snackbar.open}\r\n                        autoHideDuration={10000}\r\n                        onClose={() => setSnackbar({ ...snackbar, open: false })}\r\n                        anchorOrigin={{\r\n                          vertical: 'bottom',\r\n                          horizontal: 'left',\r\n                        }}\r\n                      >\r\n                        <Alert onClose={() => setSnackbar({ ...snackbar, open: false })} severity={snackbar.type} sx={{ width: '100%' }}>\r\n                          {\r\n                            // let setMessage = () => {\r\n                            //   if (snackbar.type === \"success\") {\r\n                            //     if (snackbar.message)\r\n                            //       return 'snackbar.message';\r\n\r\n                            //     return 'Launching a CellxGene instance. This may take a while...';\r\n                            //   }\r\n                            //   return 'Error occurred!';\r\n                            // }\r\n                            // setMessage();\r\n\r\n                          }\r\n                          {snackbar.message ? snackbar.message :\r\n                            (snackbar.type === \"success\"\r\n                              ? 'Launching a CellxGene instance. This may take a while...' : 'Error occurred!')\r\n                          }\r\n                        </Alert>\r\n                      </Snackbar>\r\n                      <Box sx={{paddingLeft: '10px'}}>\r\n                        <IconButton\r\n                            onClick={() => fetchPresignedUrlAndDownload(project._id)}\r\n                            disabled={project.status !== 'DOWNLOAD_READY' || fetchingUrl}\r\n                          >\r\n                            {fetchingUrl ? <CircularProgress size={24} /> : <DownloadIcon />}\r\n                        </IconButton>\r\n                        {fetchUrlError && <Typography color=\"error\">{fetchUrlError}</Typography>}\r\n                        <IconButton onClick={() => handleDelete()}>\r\n                        {deleted\r\n                          ? <ReplayIcon />\r\n                          : <DeleteOutlineIcon color=\"error\" />}\r\n                        </IconButton>\r\n                      </Box>\r\n                    </>\r\n                  )}\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n        </CardActionArea>\r\n\r\n        <Collapse in={open} timeout=\"auto\">\r\n          <Divider variant=\"middle\" />\r\n          <Box sx={{ pl: 11.5, pb: 1, pt: 1 }}>\r\n            <ProjectInfo project={project} atlas={atlas} model={model} />\r\n          </Box>\r\n        </Collapse>\r\n\r\n      </GeneralCard>\r\n      <Modal\r\n        isOpen={addTeam}\r\n        setOpen={setAddTeam}\r\n        sx={{ position: 'fixed', top: '20%' }}\r\n      >\r\n        <ModalTitle>\r\n          <Stack direction=\"row\" alignItems=\"center\">\r\n            Select a Team\r\n            <IconButton size=\"small\" onClick={() => setShowInfo(true)}>\r\n              <InfoOutlined fontSize=\"small\" />\r\n            </IconButton>\r\n          </Stack>\r\n        </ModalTitle>\r\n        <Modal\r\n          isOpen={showInfo}\r\n          setOpen={setShowInfo}\r\n          sx={{ position: 'fixed', top: '20%' }}\r\n        >\r\n          <Box sx={{\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'flex-start',\r\n            justifyContent: 'space-between',\r\n            ml: 3,\r\n            mr: 3,\r\n          }}\r\n          >\r\n            <Box sx={{\r\n              display: 'flex', flexDirection: 'row', width: '100%', justifyContent: 'center',\r\n            }}\r\n            >\r\n              <ModalTitle>\r\n                Why Adding to a Team?\r\n              </ModalTitle>\r\n            </Box>\r\n\r\n            <Box>\r\n              <Typography sx={{ width: '100%', maxWidth: '800px' }}>\r\n                By Adding to a team, the visibility of\r\n                a project will be inherited\r\n                from the visibility of the team.\r\n                If the assigned team is public,\r\n                all teams will have access to the project.\r\n                If the assigned team is private, the project will be\r\n                accessible only to this team.\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n\r\n        </Modal>\r\n        {userTeams?.length === 0\r\n          && (\r\n            <Alert severity=\"info\">\r\n              You have no existing teams. Please add your teams in community.\r\n            </Alert>\r\n          )}\r\n        <Box>\r\n          {userTeams.map( \r\n            (team) => {\r\n              const added = projectTeam.filter((t) => t._id === team._id).length > 0;\r\n              return (<TabCard\r\n                key={team._id}\r\n                data={{name: team.name, title: team.title, type: \"team\", visibility: team.visibility.toLowerCase(), added: added}}\r\n                selected={team?._id === selectedTeam || team?.id === selectedTeam}\r\n                handleOnClick={() => setSelectedTeam(team?._id || team?.id)}\r\n                isLoading={false}\r\n              />)\r\n            }\r\n          )}\r\n\r\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', pt: 4 }}>\r\n            <CustomButton\r\n              type=\"tertiary\"\r\n              onClick={() => {\r\n                setSelectedTeam('');\r\n                setAddTeam(false);\r\n              }}\r\n            >\r\n              Close\r\n\r\n            </CustomButton>\r\n            <CustomButton\r\n              type=\"primary\"\r\n              onClick={async () => {\r\n                addProjectToTeam(selectedTeam);\r\n                setAddTeam(false);\r\n                setSelectedTeam('');\r\n                await TeamService.getTeam(selectedTeam).then((team) => setProjectTeam([...projectTeam, team]));\r\n              }}\r\n              disabled={selectedTeam === ''}\r\n            >\r\n              Confirm\r\n            </CustomButton>\r\n          </Box>\r\n        </Box>\r\n      </Modal>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport Box from '@mui/material/Box';\r\nimport {\r\n  Typography, createTheme, ThemeProvider, Stack, TextField, Alert, CircularProgress,\r\n} from '@mui/material';\r\nimport PlusIcon from 'components/general/PlusIcon';\r\nimport Search from 'components/Search';\r\nimport ProjectBarCard from 'components/GeneMapper/projectBarCard';\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport { colors } from 'shared/theme/colors';\r\nimport ProjectService from 'shared/services/Project.service';\r\n\r\nimport {\r\n  MULTIPART_UPLOAD_STATUS, PROJECTS_UPDATE_INTERVAL, PROJECT_STATUS, statusIsError,\r\n} from 'shared/utils/common/constants';\r\nimport ProjectMock from 'shared/services/mock/projects';\r\nimport AtlasService from 'shared/services/Atlas.service';\r\nimport ModelService from 'shared/services/Model.service';\r\nimport DemoService from 'shared/services/Demo.service';\r\nimport TeamService from 'shared/services/Team.service';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#000000',\r\n    },\r\n    secondary: {\r\n      main: '#5676E4',\r\n    },\r\n  },\r\n});\r\n\r\n// The loggedIn parameter is set to true when the user is logged in\r\nfunction GeneMapperHome({ style, loggedIn }) {\r\n  const [projects, setProjects] = useState(null);\r\n  const [deletedProjects, setDeletedProjects] = useState([]);\r\n  const [atlases, setAtlases] = useState([]);\r\n  const [models, setModels] = useState([]);\r\n  const [userTeams, setUserTeams] = useState([]);\r\n  const [demoDatasets, setDemoDatasets] = useState([]);\r\n\r\n  const [findString, setFindString] = useState('');\r\n\r\n  const history = useHistory();\r\n\r\n  /**\r\n   * Function to find matching demos in the data variable.\r\n   * If demos are found, the information stored about them in the \"data\" variable is updated.\r\n   * @param data: The data variable containing the projects to search for demos in.\r\n   * @param demos: The array of available demos\r\n   */\r\n  const findDemos = (data, demos) => {\r\n    // loop over projects and search for demo datasets and set their attributes\r\n    for (let i = 0; i < data.length; i++) {\r\n      for (let j = 0; j < demos.length; j++) {\r\n        // If the project is a demo, the id is stored in the file name.\r\n        // file_name: <atlas>_<model>_<demo_id>\r\n        const id = data[i].fileName.split('_')[2];\r\n        // update the stored information about the demo datasets\r\n        if (id && id === demos[j]._id) {\r\n          // updating the demo dataset\r\n          data[i] = {\r\n            ...data[i],\r\n            status: PROJECT_STATUS.DONE,\r\n            location: demos[j].h5adURL,\r\n          };\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // function to handle deletion of project\r\n  const handleDeleteProject = (id) => {\r\n    DemoService.getDemos().then((demos) => {\r\n      // delete project from cache permanently\r\n      let cachedProjects = JSON.parse(localStorage.getItem(\"cached_projects\"));\r\n      delete cachedProjects[id];\r\n      localStorage.setItem(\"cached_projects\", JSON.stringify(cachedProjects));\r\n\r\n      const updatedProjects = projects.filter((project) => project._id !== id);\r\n\r\n      // Set deleted projects\r\n      setProjects(updatedProjects)\r\n\r\n      // update the projects that are not deleted\r\n      ProjectService.deleteProject(id).then(() => {\r\n        ProjectService.getOwnProjects().then((data) => {\r\n          // search for demos and set the information stored about them\r\n          findDemos(data, demos);\r\n          setProjects(data);\r\n        });\r\n        // update the projects that are deleted\r\n        ProjectService.getDeletedProjects().then((data) => {\r\n          // search for demos and set the information stored about them\r\n          findDemos(data, demos);\r\n          console.log(data);\r\n          setDeletedProjects(data);\r\n        });\r\n      });\r\n    });\r\n  };\r\n\r\n  // function to handle restoration of project\r\n  const handleRestoreProject = (id) => {\r\n    DemoService.getDemos().then((demos) => {\r\n      ProjectService.restoreProject(id).then(() => {\r\n        ProjectService.getOwnProjects().then((data) => {\r\n          // search for demos and set the information stored about them\r\n          findDemos(data, demos);\r\n          // update the information about the demos\r\n          setProjects(data);\r\n        });\r\n        ProjectService.getDeletedProjects().then((data) => {\r\n          // search for demos and set the information stored about them\r\n          findDemos(data, demos);\r\n          setDeletedProjects(data);\r\n        });\r\n      });\r\n    });\r\n  };\r\n\r\n  const getProjects = () => {\r\n    // fetch demos\r\n    DemoService.getDemos().then((demos) => {\r\n      ProjectService.getOwnProjects().then((data) => {\r\n        // search for demos and set the information stored about them\r\n        findDemos(data, demos);\r\n        setDemoDatasets(demos);\r\n\r\n        // check if indexedDB is available for caching the projects\r\n        if (!window.indexedDB) {\r\n          setProjects(data);\r\n          return;\r\n        }\r\n        // Save an object that consists of the projects in the local storage.\r\n        if (localStorage.getItem(\"cached_projects\") === null) {\r\n          localStorage.setItem(\"cached_projects\", JSON.stringify({}));\r\n        }\r\n        let cachedProjects = JSON.parse(localStorage.getItem(\"cached_projects\"));\r\n\r\n        // filter out duplicate projects\r\n        data.forEach((obj) => {\r\n          let id = obj._id;\r\n          let status = obj.status;\r\n          // If the cached projects object doesn't have a project with a matching id,\r\n          // add it to the cache. \r\n          if (!cachedProjects.hasOwnProperty(id) || cachedProjects[id].status !== status) {\r\n            cachedProjects[id] = obj;\r\n          }\r\n        });\r\n        // turn cached project object to array and reverse the order\r\n        let projectArr = Object.keys(cachedProjects).map((key) => cachedProjects[key]).reverse();\r\n        setProjects(projectArr);\r\n        // update the local storage\r\n        localStorage.setItem(\"cached_projects\", JSON.stringify(cachedProjects));\r\n      });\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getProjects();\r\n    const timer = setInterval(() => getProjects(), PROJECTS_UPDATE_INTERVAL);\r\n\r\n    return () => {\r\n      clearInterval(timer);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    AtlasService.getAtlases().then((data) => setAtlases(data));\r\n    ModelService.getModels().then((data) => setModels(data));\r\n    if (loggedIn) {\r\n      TeamService.getMyTeams().then((teams) => setUserTeams(teams));\r\n      DemoService.getDemos().then((demos) => {\r\n        ProjectService.getDeletedProjects().then((data) => {\r\n          findDemos(data, demos);\r\n          setDeletedProjects(data);\r\n        });\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div style={style}>\r\n      <ThemeProvider theme={theme}>\r\n        <Box\r\n          sx={{\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            justifyContent: 'space-between',\r\n            pt: 2,\r\n            pb: 3,\r\n          }}\r\n        >\r\n          <Stack direction=\"row\" className=\"stack\" alignItems=\"Center\">\r\n            <Typography variant=\"h5\" sx={{ pr: 1 }}>Your Mappings</Typography>\r\n            <PlusIcon onClick={() => { history.push('genemapper/create'); }} />\r\n          </Stack>\r\n          {/* Search bar */}\r\n          <Box sx={{ alignSelf: 'center', width: { xs: '95%', md: '25%' }, marginBlock: '2%' }}>\r\n            <Search\r\n              value={findString}\r\n              handleSearch={(str) => setFindString(str)}\r\n              noFilterComponent={true}\r\n            />\r\n          </Box>\r\n        </Box>\r\n        {/* Check if project cache exists to make sure that checking the projects is even necessary */}\r\n        {localStorage.getItem('cached_projects') && projects === null\r\n          && (\r\n            <Box sx={{ textAlign: 'center' }}>\r\n              <CircularProgress />\r\n            </Box>\r\n          )}\r\n        {/* If there is no project cached, no projects exist either. */}\r\n        {(!localStorage.getItem('cached_projects') || projects?.length === 0)\r\n          && (\r\n            <Alert severity=\"info\">\r\n              You have not created any mappings yet. There are\r\n              Create one by clicking the Plus Icon.\r\n            </Alert>\r\n          )}\r\n        {projects\r\n          && (\r\n            <div>\r\n              {projects.filter((project) => ( // TODO: to add the search, use the findString like here\r\n                (findString === '' || project.name.toLowerCase().includes(findString.toLowerCase())))).map((project) => {\r\n                  let atlas = atlases.find((atlas) => String(atlas._id) === String(project.atlasId));\r\n                  if(!atlas) atlas = { name: project.atlasId }; // set values for scvi hub atlas\r\n                  let model = models.find((model) => String(model._id) === String(project.modelId));\r\n                  if(!model){ // set values for the model if it is from scvi hub\r\n                    let name;\r\n                    if(project?.modelId) name = project?.modelId.slice(0,2) + project?.modelId?.slice(2).toUpperCase();\r\n                    model = { name: name };\r\n                  }\r\n                  return (<ProjectBarCard\r\n                    key={project._id}\r\n                    project={project}\r\n                    atlas={atlas}\r\n                    model={model}\r\n                    userTeams={userTeams}\r\n                    handleDelete={() => handleDeleteProject(project._id)}\r\n                    loggedIn={loggedIn}\r\n                  />);\r\n                })}\r\n            </div>\r\n          )}\r\n        {loggedIn && deletedProjects.length > 0\r\n          && (\r\n            <Box>\r\n              <Typography variant=\"h6\" sx={{ mt: 4, mb: 2 }}>Deleted Projects</Typography>\r\n              {deletedProjects.map((project) => (\r\n                <ProjectBarCard\r\n                  key={project._id}\r\n                  project={project}\r\n                  atlas={atlases.find((atlas) => String(atlas._id) === String(project.atlasId))}\r\n                  model={models.find((model) => String(model._id) === String(project.modelId))}\r\n                  userTeams={userTeams}\r\n                  loggedIn={loggedIn}\r\n                  handleDelete={() => handleRestoreProject(project._id)}\r\n                  deleted\r\n                />\r\n              ))}\r\n            </Box>\r\n          )}\r\n      </ThemeProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GeneMapperHome;\r\n","import ContentCopyIcon from '@mui/icons-material/ContentCopy';\r\nimport EmailIcon from '@mui/icons-material/Email';\r\nimport TwitterIcon from '@mui/icons-material/Twitter';\r\nimport { Box, IconButton } from '@mui/material';\r\nimport React from 'react';\r\nimport { colors } from 'shared/theme/colors';\r\n\r\nconst mailIconColor = colors.neutral['600'];\r\nconst copyIconColor = colors.neutral['600'];\r\nconst twitterIconColor = '#00aced';\r\n/**\r\n * @param projectName Name of a project\r\n * @param url Url that should be shared\r\n */\r\nfunction ShareMenu({ projectName, url }) {\r\n  return (\r\n    <Box>\r\n      <IconButton href={`https://twitter.com/share?ref_src=twsrc%5Etfw&url=${encodeURIComponent(url)}`} target=\"_blank\">\r\n        <TwitterIcon sx={{ color: twitterIconColor }} />\r\n      </IconButton>\r\n      <IconButton href={`mailto:?subject=${encodeURIComponent(projectName)}&body=${url}`}>\r\n        <EmailIcon sx={{ color: mailIconColor }} />\r\n      </IconButton>\r\n      <IconButton onClick={() => navigator.clipboard.writeText(url)}>\r\n        <ContentCopyIcon sx={{ color: copyIconColor }} />\r\n      </IconButton>\r\n      <script async src=\"https://platform.twitter.com/widgets.js\" charSet=\"utf-8\" />\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default ShareMenu;\r\n","import { ArrowBackIos, InfoOutlined } from '@mui/icons-material';\r\nimport DownloadIcon from '@mui/icons-material/Download';\r\nimport {\r\n  Box, Divider, IconButton, Typography,\r\n} from '@mui/material';\r\nimport CustomButton from 'components/CustomButton';\r\nimport { Modal } from 'components/Modal';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport AtlasService from 'shared/services/Atlas.service';\r\nimport ModelsService from 'shared/services/Models.service';\r\nimport ProjectInfo from '../ProjectInfo';\r\nimport ShareMenu from '../ShareMenu';\r\n\r\n/**\r\n * Header shown on the result page, including navigation buttons, project info,\r\n * and sharing and download options\r\n * @param project Object containing project data\r\n */\r\nfunction GeneMapperResultHeader({ project }) {\r\n  const history = useHistory();\r\n  const [showInfo, setShowInfo] = useState(false);\r\n  const [atlas, setAtlas] = useState(null);\r\n  const [model, setModel] = useState(null);\r\n\r\n  useEffect(() => {\r\n    AtlasService.getAtlasById(project.atlasId).then((data) => setAtlas(data));\r\n    ModelsService.getModelById(project.modelId).then((data) => setModel(data));\r\n  }, [project.atlasId, project.modelId]);\r\n\r\n  return (\r\n    <>\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\r\n        <CustomButton type=\"tertiary\" onClick={() => history.goBack()}>\r\n          <ArrowBackIos sx={{ ml: -2 }} fontSize=\"small\" />\r\n          <Typography variant=\"caption\">Back</Typography>\r\n        </CustomButton>\r\n        <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n          <Typography variant=\"h6\">\r\n            {project.name}\r\n          </Typography>\r\n          <IconButton aria-label=\"learn more\" size=\"small\" onClick={() => setShowInfo(true)}>\r\n            <InfoOutlined fontSize=\"small\" />\r\n          </IconButton>\r\n        </Box>\r\n        <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n          <ShareMenu projectName={project.name} url={window.location} />\r\n          <Divider orientation=\"vertical\" flexItem variant=\"middle\" />\r\n          <IconButton href={project.location} download={`${project.name}.tsv`}>\r\n            <DownloadIcon />\r\n          </IconButton>\r\n        </Box>\r\n      </Box>\r\n      <Divider sx={{ mt: 1, mb: 1 }} />\r\n      <Modal isOpen={showInfo} setOpen={setShowInfo}>\r\n        <Box sx={{ p: 1 }}>\r\n          <Typography variant=\"h4\" sx={{ pb: 1 }}>{project.name}</Typography>\r\n          <ProjectInfo project={project} atlas={atlas} model={model} />\r\n        </Box>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default GeneMapperResultHeader;\r\n","import * as d3 from \"d3\";\r\n\r\n// Zooms in a certain amount. Used for the zoom buttons\r\nexport const zoomInN = () => {\r\n\r\n  d3.select('#vis_svg')\r\n    .style(\"transform-origin\", \"20% 20% 0\")\r\n    .transition()\r\n    .call(zoomM.scaleBy, 1.75);\r\n}\r\n\r\n// Zooms out a certain amount. Used for the zoom buttons\r\nexport const zoomOutN = () => {\r\n  d3.select('#vis_svg')\r\n    .style(\"transform-origin\", \"20% 20% 0\")\r\n    .transition()\r\n    .call(zoomM.scaleBy, 0.5);\r\n}\r\n\r\n// Constructs the event-handler\r\nexport let zoomM =\r\n  d3.zoom()\r\n    .scaleExtent([0.5, 16])\r\n    .on('zoom', handleZoom);\r\n\r\n// Handles the zoom with the mouse wheel\r\nexport function handleZoom(e) {\r\n  d3.select('svg g')\r\n    .style(\"transform-origin\", null)\r\n    .attr('transform', e.transform);\r\n}\r\n\r\n// Resets the scale\r\nexport const resetZoom = () => {\r\n  d3.select('#vis_svg')\r\n    .transition()\r\n    .call(zoomM.transform, d3.zoomIdentity);\r\n}\r\n\r\n","import * as d3 from \"d3\";\r\nimport \"./bar.css\"\r\nimport * as cons from \"./constants\";\r\n\r\n/*\r\nMost of the styling is in the bar.css file\r\n*/\r\n\r\n// Groups the data based on a category specified in cat\r\nconst groupBy = (data, cat) => {\r\n  let list = []\r\n  let groupedBy = new Map();\r\n  for (const row in data) {\r\n    const item = data[row];\r\n\r\n    if (groupedBy.has(item[cat])) {\r\n      list = groupedBy.get(item[cat]);\r\n      list.push(item);\r\n      groupedBy.set(item[cat], list);\r\n\r\n    } else {\r\n      groupedBy.set(item[cat], [item]);\r\n    }\r\n  }\r\n\r\n  return groupedBy;\r\n}\r\n\r\n//Randomizes the row of the bars/values, to reduce label overlapping\r\nconst shuffleArray = (array) => {\r\n  for (var i = array.length - 1; i > 0; i--) {\r\n      var j = Math.floor(Math.random() * (i + 1));\r\n      var temp = array[i];\r\n      array[i] = array[j];\r\n      array[j] = temp;\r\n  }\r\n}\r\n\r\n// Constructs the graph\r\nconst addBarPlot = (barContainer, data, groupedBy, title, cWidth, cHeight) => {\r\n  const svg = d3.select(barContainer).append(\"svg\");\r\n\r\n  let h = cHeight;\r\n  let w = cWidth;\r\n  svg\r\n    .attr(\"width\", w)\r\n    .attr(\"height\", h)\r\n\r\n  // Changes the font size/bottom margin based on the size of the graph (mostly important for the pop up)\r\n  let fontSizeTitle;\r\n  let fontSizeOther;\r\n  let marginBottom;\r\n  let big = h > 350; // to change the pop up based on if it's big or not\r\n  if (big) {\r\n    fontSizeTitle = cons.fontSizeTBig;\r\n    fontSizeOther = cons.fontSizeOBig;\r\n    marginBottom = cons.marginBottomBig;\r\n  } else {\r\n    fontSizeTitle = cons.fontSizeTSmall;\r\n    fontSizeOther = cons.fontSizeOSmall;\r\n    marginBottom = cons.marginBottomSmall;\r\n  }\r\n  \r\n  const numberOfGraphValues = 15; // Has to be one more than specified\r\n\r\n  const sortedData = Array.from(groupedBy).sort((a, b) => {if (a[1] === b[1]) {\r\n        return 0;\r\n    }\r\n    else {\r\n        return (a[1] > b[1]) ? -1 : 1;\r\n    }});\r\n  const splicedData = sortedData.slice(0, sortedData.length >= numberOfGraphValues ? numberOfGraphValues : sortedData.length);\r\n  shuffleArray(splicedData);\r\n\r\n  // Defines the scales\r\n  const info = splicedData.filter(d => d[0] !== undefined).map(d => [d[0], d[1].length]);\r\n\r\n  const max = d3.max(info.map(d => d[1])) * 1.1;\r\n\r\n  const labels = splicedData.map(([k, v]) => k).filter(d => d !== undefined); //gets the names of the category values\r\n\r\n  //Scales\r\n  const xScale = d3.scaleBand().domain(labels).range([marginBottom, w]).padding(0.4);\r\n  const yScale = d3.scaleLinear().domain([0, max]).range([h, marginBottom + cons.plotTitleOffset]);\r\n\r\n  const g = svg.append(\"g\")\r\n\r\n  //Title of the graph\r\n  g.append(\"text\")\r\n    .attr(\"class\", \"title\")\r\n    .attr(\"x\", marginBottom + cons.plotTitleCentered)\r\n    .attr(\"y\", 15)\r\n    .attr(\"font-size\", fontSizeTitle)\r\n    .text(title)\r\n    .style(\"font-family\", \"inherit\")\r\n    .style(\"font-weight\", 640)\r\n\r\n  // Axes\r\n  const xAxis = d3.axisBottom(xScale);\r\n  const yAxis = d3.axisLeft(yScale).tickFormat(d => d).ticks(5).tickSize(-h);\r\n\r\n  // Makes the x-axis\r\n  g.append(\"g\")\r\n    .attr(\"id\", \"x-axis\")\r\n    .attr(\"class\", \"x-axis\")\r\n    .attr(\"transform\", \"translate(0, \" + (h - marginBottom) + \")\")\r\n    .call(xAxis)\r\n    .selectAll(\"text\")\r\n    //styling ticks\r\n    .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\r\n    .style(\"text-anchor\", \"end\")\r\n    .style(\"color\", \"black\")\r\n    .attr(\"font-size\", fontSizeOther)\r\n\r\n  // Makes the y-axis\r\n  g.append(\"g\")\r\n    .attr(\"id\", \"y-axis\")\r\n    .attr(\"class\", \"y-axis\")\r\n    .attr(\"transform\", \"translate(\" + marginBottom + \",\" + (-marginBottom) + \")\")\r\n    .call(yAxis)\r\n    //styling ticks\r\n    .selectAll(\"text\")\r\n    .style(\"text-anchor\", \"end\")\r\n    .style(\"color\", \"black\")\r\n    .attr(\"font-size\", fontSizeOther);\r\n\r\n  // Draws the bars\r\n  g.append(\"g\")\r\n    .attr(\"id\", \"bars\")\r\n    .selectAll(\"rect\")\r\n    .data(info)\r\n    .enter()\r\n    .append(\"rect\")\r\n    .attr(\"class\", \"bar\")\r\n    .attr(\"x\", (d) => xScale(d[0]))\r\n    .attr(\"y\", (d) => yScale(d[1]))\r\n    .attr(\"width\", xScale.bandwidth())\r\n    .attr(\"height\", (d) => {\r\n      return h - yScale(d[1])\r\n    })\r\n    .attr(\"transform\", \"translate( 0, \" + (-marginBottom) + \")\")\r\n    .append(\"title\")\r\n    .text((d) => (d[1]))\r\n\r\n  // Only the big pop up has labels\r\n  if (big) {\r\n    // Adds the values on top of the bars\r\n    g.append(\"g\")\r\n      .attr(\"id\", \"labels\")\r\n      .selectAll(\"label\")\r\n      .data(info)\r\n      .enter()\r\n      .append(\"text\")\r\n      .attr(\"class\", \"label\")\r\n      .attr(\"x\", (d) => xScale(d[0]))\r\n      .attr(\"y\", (d) => yScale(d[1]) - marginBottom - 13)\r\n      .attr(\"dy\", \".75em\")\r\n      .text((d) => d[1])\r\n      .attr(\"fill\", \"black\")\r\n      .attr(\"font-size\", fontSizeOther)\r\n  }\r\n\r\n}\r\n\r\n// Draws the cell_type chart\r\nexport const addBarPlotCell = (barContainer, data, w, h) => {\r\n  const groupedByCellTypes = groupBy(data, \"cell_type\");\r\n  addBarPlot(barContainer, data, groupedByCellTypes, \"#Cells per Cell Type\", w, h);\r\n}\r\n\r\n// Draws the batch chart\r\nexport const addBarPlotBatch = (barContainer, data, w, h) => {\r\n  const groupedByBatch = groupBy(data, \"batch\");\r\n  addBarPlot(barContainer, data, groupedByBatch, \"#Cells per Batch\", w, h);\r\n}","import * as cons from \"./constants\";\r\nimport * as d3 from \"d3\";\r\n\r\n//Gets a list of the unique values of a given cathegory, e.g. cell_type\r\nexport const listColoringDomain = (data, mode) => {\r\n    let coloringDomain = data.map(x => x[mode]).filter((x, i, a) => {\r\n      return a.indexOf(x) == i \r\n    });\r\n    return coloringDomain;\r\n  }\r\n\r\n//Makes a coloring scale, values are sorted alphabetically\r\nexport const setColoring = (mode, data) => {\r\n    let colorScale;\r\n    if (!parseFloat(data[0][mode])) {\r\n      //For non-numeric values we have separate colours\r\n      let colorDomain = listColoringDomain(data, mode).sort();\r\n      colorScale =\r\n        d3.scaleOrdinal()\r\n          .domain(colorDomain)\r\n          .range(cons.colors.slice(0, colorDomain.length));\r\n  \r\n    }\r\n    else {\r\n      //For numeric values, we have a gradient\r\n      var colorDomain = data.map(d => parseFloat(d[mode]));\r\n      colorScale =\r\n        d3.scaleLinear()\r\n          .domain([d3.min(colorDomain), d3.max(colorDomain)])\r\n          .range(cons.gradientColors);\r\n  \r\n    }\r\n    return colorScale;\r\n  }\r\n\r\nlet keyExists = (key, obj) => key in obj;\r\n\r\n\r\n//This function returns the coloring modes as an object in the form\r\n//\"category\":\r\n//    \"subcat1\": \"color1\"\r\n//    \"subcat2\": \"color2\"\r\nexport const getColoringModes = (data) =>\r\nObject.assign({},\r\n  //Getting all the categories a cell has\r\n  ...(Object.keys(data[0])\r\n    .map(d => d.trim())\r\n    //Filtering out the coordinates and categories with no name\r\n    .filter(d => (d !== \"x\" && d !== \"y\" && d !== \"\"))\r\n    .map(d => {\r\n      var a = {};\r\n      //If the category has numeric values\r\n      //values and colors are assigned after sorting to match the color scale\r\n      if (parseFloat(data[0][d])) {\r\n        //Choose min and max\r\n        const max = d3.max(data.map(val => parseFloat(val[d])));\r\n        const min = d3.min(data.map(val => parseFloat(val[d])));\r\n        //Make an object of type: <category value>: <color> \r\n        a[d] = Object.assign({}, ...listColoringDomain(data, d).map(val => parseFloat(val)).filter(val => val == max || val == min).sort((a, b) => a - b)\r\n          .map((d, i) => {\r\n            const obj = new Object();\r\n            obj[d] = cons.gradientColors[i];\r\n            return obj;\r\n          }));\r\n        return a;\r\n      }\r\n      //If the category has non-numeric values\r\n      const colorDomain = listColoringDomain(data, d).sort()\r\n      //Make an object of type: <category value>: <color> \r\n        .map((d, i) => {\r\n          const obj = new Object();\r\n          obj[d] = cons.colors[i];\r\n          return obj;\r\n        });\r\n      a[d] = Object.assign({},\r\n        ...colorDomain)\r\n      return a;\r\n    })));\r\n\r\n\r\n//Unused due to non-general accuracy, aims to improve performance\r\n// get the possible color modes with their values\r\nexport const getColoringModes2 = (data) => { // convert K-V -> key->{..}\r\n  var colorModes = new Object();\r\n  for(const block of data) {\r\n    for(const [key, value] of Object.entries(block)) {\r\n      key.trim();\r\n      if(key != \"x\" && key != \"y\" && key != \"\") {\r\n        if(!keyExists(key, colorModes) || !keyExists(value, colorModes[key])) {\r\n          if(!keyExists(key, colorModes)) {\r\n              colorModes[key] = {};\r\n          }\r\n          if(!isNaN(value)) { // expand min/max at the same time; without iterating just to figure out the min/max\r\n            if (value < Object.keys(colorModes[key])[0] || Object.keys(colorModes[key]).length == 0) {\r\n              delete colorModes[key][Object.keys(colorModes[key])[0]];\r\n              colorModes[key][value] = cons.gradientColors[0];\r\n            } else if (Number(value) > Number(Object.keys(colorModes[key])[1]) || Object.keys(colorModes[key]).length <= 1) {\r\n              delete colorModes[key][Object.keys(colorModes[key])[1]];\r\n              colorModes[key][value] = cons.gradientColors[1];\r\n            }\r\n          }else{\r\n            colorModes[key][value] = \"\";\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  const cloneColorModes = { ...colorModes };\r\n  for(const [key, value] of Object.entries(cloneColorModes)) {\r\n    if(! keyExists('0', value)) {\r\n      colorModes[key] = {};\r\n      const tmp = Object.keys(value).sort(function (a, b) {\r\n        return ('' + a).localeCompare(b); // force into string, not too important since we have the parseFloat but it covers edge cases\r\n      })\r\n      for(var i = 0; i < tmp.length; i++) {\r\n        colorModes[key][tmp[i]] = cons.colors[i];\r\n      }\r\n    }\r\n  }\r\n  return colorModes;\r\n}\r\n","import * as d3 from \"d3\";\r\nimport * as cons from \"./constants\";\r\nimport { zoomM } from \"./newZoom\";\r\nimport \"./tooltip.css\";\r\nimport { addBarPlotCell, addBarPlotBatch, addBarPlotPredict } from \"./barChart\"\r\nimport { getColoringModes, setColoring } from \"./coloring\"\r\n\r\n//Gets the minimum out of 2 values - used to determine the smaller side of the container, to make scatter plot square\r\nconst getMin = (w, h) => {\r\n  return d3.min([h, w]);\r\n}\r\n\r\n//Adds a group\r\nconst addGroup = (svg, id) => {\r\n  return svg.append('g').attr('id', `${id}`);\r\n};\r\n\r\nexport class UmapVisualization2 {\r\n\r\n  constructor(container, data) {\r\n    d3.select(container).selectAll(\"*\").remove();\r\n    this.svg = d3.select(container).append('svg')\r\n      .attr('id', 'vis_svg');\r\n    this.gCells = addGroup(this.svg, 'cells');\r\n    this.coloringModes = getColoringModes(data);\r\n    this.tooltip = d3.select(container).append(\"div\");\r\n    this.mode = undefined; //coloring mode\r\n    this.data = data;\r\n    this.graphs = [\"batch\", \"cell\"]; //constant attributes expected cells to have\r\n    this.hiddenCells = [];\r\n  };\r\n\r\n  // Returns all available graphs\r\n  getAvailableGraphs() {\r\n    //If the cells don't have a cell type, as with totalVI, we only have a batch graph\r\n    return (Object.keys(this.coloringModes).includes(\"cell_type\"))? this.graphs: [\"batch\"];\r\n  }\r\n\r\n  // Draws a graph, which is in the this.graphs list \r\n  drawGraph(container, graph, width, height) {\r\n    switch (graph) {\r\n      case this.graphs[0]: // Draws the batch graph\r\n        if (Object.keys(this.coloringModes).includes(\"batch\")) {\r\n          d3.select(container).append(\"div\");\r\n          addBarPlotBatch(container, this.data, width, height);\r\n        }\r\n        break;\r\n      case this.graphs[1]: // Draws the cell type graph\r\n        if (Object.keys(this.coloringModes).includes(\"cell_type\")) {\r\n          d3.select(container).append(\"div\");\r\n          this.barChartCell = addBarPlotCell(container, this.data, width, height);\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  // Checks if a cell fullfills one of the [category, value] of the this.hiddenCells list\r\n  // If yes -> true\r\n  // If not -> false\r\n  isHidden(cell) {\r\n    for (let i = 0; i < this.hiddenCells.length; i++) {\r\n      if (cell[this.hiddenCells[i][0]] === this.hiddenCells[i][1]) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Hide the cells that have the given value in the given category\r\n  after(category, value) {\r\n    this.addHiddenCell(category, value);\r\n    this.hideShowCells();\r\n  }\r\n\r\n  // Show the cells that have the given value in the given category\r\n  before(category, value) {\r\n    this.deleteHiddenCell(category, value);\r\n    this.hideShowCells();\r\n  }\r\n\r\n  // Resets the visibility for all cells\r\n  beforeAll() {\r\n    this.hiddenCells = [];\r\n    this.cells\r\n      .style(\"visibility\", \"visible\");\r\n  }\r\n\r\n  // Changes the visibility of the cells based on the content of this.hiddenCells\r\n  hideShowCells() {\r\n    this.cells\r\n      .style(\"visibility\", (d) => { return this.isHidden(d) ? \"hidden\" : \"visible\" });\r\n  }\r\n\r\n  // Add a [category, value] to the hidden cells\r\n  addHiddenCell(category, value) {\r\n    this.hiddenCells.push([category, value]);\r\n  }\r\n\r\n  filterCells(cell) {\r\n    cell[0] == this[0] && cell[1] == this[1];\r\n  }\r\n\r\n  // Removes a [category, value] from the hidden cells\r\n  deleteHiddenCell(category, value) {\r\n    this.hiddenCells = this.hiddenCells.filter(function (cell) {\r\n      return !(cell[0] == category && cell[1] == value)\r\n    });\r\n  }\r\n\r\n  // Unhides the reference cells\r\n  showReference() {\r\n    this.before(\"type\", \"reference\");\r\n  }\r\n\r\n  // Unhides the query cells\r\n  showQuery() {\r\n    this.before(\"type\", \"query\");\r\n  }\r\n\r\n  // Hides the query cells\r\n  hideQuery() {\r\n    this.after(\"type\", \"query\");\r\n  }\r\n\r\n  // Hides the reference cells\r\n  hideReference() {\r\n    this.after(\"type\", \"reference\");\r\n  }\r\n\r\n  /* The following methods are their own methods to allow for \r\n  the option to add the possibility of changing the opacity based \r\n  on multiple attributes */\r\n\r\n  // Sets the opacity of all predicted cells to a reduced value\r\n  predictedCellsTransparent() {\r\n    this.reduceOpacity(\"predicted\", \"yes\");\r\n  }\r\n\r\n  // Sets the opacity of all predicted cells to the original value\r\n  predictedCellsVisible() {\r\n    this.resetOpacity();\r\n  }\r\n\r\n  // Reduces the opacity of the cells that have the given value in the given category\r\n  reduceOpacity(category, value) {\r\n    this.cells\r\n      .style(\"opacity\", (d) => { return d[category] === value ? cons.reducedOpacity : cons.originalOpacity });\r\n  }\r\n\r\n  // Resets the opacity of all cells (back to the original opacity)\r\n  resetOpacity() {\r\n    this.cells\r\n      .style(\"opacity\", cons.originalOpacity);\r\n  }\r\n\r\n  // Colors the cells based on the specified mode\r\n  setColorMode(mode) {\r\n    const colorScale = setColoring(mode, this.data);\r\n    if (this.cells != null) {\r\n\r\n      this.cells.style(\"fill\", (d) => colorScale(d[mode]));\r\n    }\r\n    this.mode = mode;\r\n    this.colorScale = colorScale;\r\n  }\r\n\r\n  // Sizing and resizing the cells\r\n  resize(w, h) {\r\n    if (this.cells === undefined) {\r\n      return this.render(w, h);\r\n    }\r\n\r\n    const min = getMin(w, h);\r\n    const data = this.data;\r\n    const r = 0.003 * min;\r\n\r\n    //Makes an x-axis scale helper, using min and max value as domain, and the distance from margin to margin for range \r\n    const xScaleHelper = d3.scaleLinear()\r\n      .domain([d3.min(data.map(d => parseFloat(d.x))), d3.max(data.map(d => parseFloat(d.x)))])\r\n      .range([cons.margin, min - cons.margin]);\r\n\r\n    //As the previous scale makes the scatterplot off-center, we compute a translation distance\r\n    const translate = (w - cons.margin - (xScaleHelper(d3.max(data.map(d => parseFloat(d.x)))))) / 2;\r\n\r\n    // Scales\r\n    //Official x-axis scale, adding the transaltion distance\r\n    const xScale = d3.scaleLinear()\r\n      .domain([d3.min(data.map(d => parseFloat(d.x))), d3.max(data.map(d => parseFloat(d.x)))])\r\n      .range([translate, min - cons.margin + translate]);\r\n\r\n    //y-axis scale\r\n    const yScale = d3.scaleLinear()\r\n      .domain([d3.min(data.map(d => parseFloat(d.y))), d3.max(data.map(d => parseFloat(d.y)))])\r\n      .range([cons.margin, min - cons.margin]);\r\n\r\n    //Setting attributes\r\n    this.cells\r\n      .attr(\"cx\", d => xScale(parseFloat(d.x)))\r\n      .attr(\"cy\", d => yScale(parseFloat(d.y)))\r\n\r\n    this.cells\r\n      .attr(\"r\", r);\r\n\r\n    return [xScale, yScale];\r\n  }\r\n\r\n  // Constructing the svg\r\n  async render(w, h) {\r\n    const data = this.data;\r\n\r\n    const min = getMin(w, h);\r\n\r\n    const r = 0.003 * min;\r\n\r\n    const _this = this;\r\n\r\n    this.svg\r\n      .attr(\"width\", w)\r\n      .attr(\"height\", h)\r\n\r\n    //To avoid multiples of the same shape(cell) when re-rendering\r\n    this.gCells.selectAll(\"*\").remove();\r\n\r\n    //Adding the cells(circle shapes)\r\n    this.cells =\r\n      this.gCells\r\n        .selectAll(\"cell\")\r\n        .data(data)\r\n        .enter()\r\n        .append(\"circle\")\r\n        .attr(\"r\", r)\r\n        .style(\"fill\", (d) => (_this.mode ? _this.colorScale(d[_this.mode]) : \"black\"))\r\n        .style(\"opacity\", cons.originalOpacity)\r\n\r\n\r\n    //Setting coordinates\r\n    const [xScale, yScale] = this.resize(w, h);\r\n\r\n    //tooltip\r\n    var tooltip =\r\n      this.tooltip\r\n        .attr('class', 'tooltip')\r\n        .attr('opacity', 1)\r\n        .style(\"visibility\", \"hidden\")\r\n\r\n    //Tooltip functionality\r\n    this.cells\r\n      .on(\"mouseover\", function (m, d) { \r\n        d3.select(this)\r\n          .transition()\r\n          .duration(100)\r\n          .attr('r', r * 1.5) //getting bigger on hover\r\n          .style(\"stroke\", \"black\") //getting a black outline\r\n          .style(\"opacity\", 1)\r\n        //Positioning tooltip\r\n        if (!_this.mode) return;\r\n        const att = d[_this.mode];\r\n        const xPos = parseFloat(m.x) + 5;\r\n        const yPos = parseFloat(m.y) - 35;\r\n\r\n        tooltip\r\n          .style(\"visibility\", \"visible\")\r\n\r\n        tooltip\r\n          .html(att)\r\n          .style(\"top\", `${yPos}px`)\r\n          .style(\"left\", `${xPos}px`)\r\n\r\n      })\r\n      //Remove all tooltip effects\r\n      .on(\"mouseout\", function () {\r\n        tooltip.style(\"visibility\", \"hidden\");\r\n        d3.select(this)\r\n          .transition()\r\n          .duration(100)\r\n          .attr('r', r)\r\n          .style(\"stroke\", \"none\")\r\n          .style(\"opacity\", 0.8)\r\n      })\r\n\r\n\r\n    // Pan and mouse zoom\r\n    this.svg\r\n      .attr('class', 'mouse-capture')\r\n      .attr('x', -w)\r\n      .attr('y', -h)\r\n      .attr('width', w)\r\n      .attr('height', h)\r\n      .style('fill', 'white')\r\n      .lower() //creates a layer underneath the diagram, so the mouse zoom and path work with React\r\n      .call(zoomM)\r\n\r\n    this.cells\r\n      .attr(\"cx\", d => xScale(parseFloat(d.x)))\r\n      .attr(\"cy\", d => yScale(parseFloat(d.y)))\r\n\r\n  }\r\n\r\n}\r\n","import {\r\n  ExpandLess, ExpandMore, Visibility, VisibilityOff,\r\n} from '@mui/icons-material';\r\nimport OpacityIcon from '@mui/icons-material/Opacity';\r\nimport {\r\n  Box, Collapse, IconButton, ListItem, ListItemButton, Tooltip, Typography,\r\n} from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { colors } from 'shared/theme/colors';\r\n\r\nconst activatedColor = colors.primary['400'];\r\nconst deactivatedColor = colors.primary['200'];\r\n\r\n/**\r\n * One category entry in the categories list\r\n * @param title Name of the cateogiry\r\n * @param values An object containing the values and colors of a category as key-value pairs\r\n * @param colored True if the category is selected as the color mode\r\n * @param toggleColored Function that should be executed when the color button is clicked.\r\n * Expects no parameter\r\n * @param hide A function that will hide a category value in the UMAP.\r\n * Expects a value as parameter\r\n * @param show A function that will set a category value in the UMAP visible if it was hidden\r\n * Expects a value as parameter\r\n */\r\nfunction Category({\r\n  title, values, colored, toggleColored, hide, show,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  return (\r\n    <Box sx={{ display: 'flex', flexDirection: 'column' }}>\r\n      <ListItemButton onClick={() => setOpen(!open)} sx={{ p: 0 }}>\r\n        <ListItem\r\n          secondaryAction={(\r\n            <IconButton edge=\"end\" onClick={(e) => { toggleColored(); e.stopPropagation(); }}>\r\n              <OpacityIcon sx={{ color: colored ? activatedColor : deactivatedColor }} />\r\n            </IconButton>\r\n          )}\r\n          sx={{ pl: 1 }}\r\n        >\r\n          {open\r\n            ? <ExpandLess sx={{ transform: 'rotate(180deg)' }} />\r\n            : <ExpandMore sx={{ transform: 'rotate(-90deg)' }} />}\r\n          <Typography sx={{ pr: 1 }} noWrap>{title}</Typography>\r\n\r\n        </ListItem>\r\n      </ListItemButton>\r\n      <Collapse in={open}>\r\n        <Box sx={{ display: 'flex', flexDirection: 'column' }}>\r\n          {Object.entries(values).map(([value, color]) => (\r\n            <Value\r\n              title={value}\r\n              color={color}\r\n              key={value}\r\n              hide={() => hide(value)}\r\n              show={() => show(value)}\r\n            />\r\n          ))}\r\n        </Box>\r\n      </Collapse>\r\n    </Box>\r\n  );\r\n}\r\n\r\n/**\r\n * One value entry belonging to a category\r\n * @param title Name of the value\r\n * @param color Color of the value in the UMAP\r\n * @param hide A function that will hide the category value in the UMAP.\r\n * Expects no parameter\r\n * @param show A function that will set the category value in the UMAP visible if it was hidden\r\n * Expects no parameter\r\n */\r\nfunction Value({\r\n  title, color, hide, show,\r\n}) {\r\n  const [visible, setVisible] = useState(true);\r\n\r\n  return (\r\n    <Box sx={{\r\n      display: 'flex', alignItems: 'center', pl: 3, pr: 2,\r\n    }}\r\n    >\r\n      <IconButton onClick={() => {\r\n        if (visible) {\r\n          hide();\r\n        } else {\r\n          show();\r\n        }\r\n        setVisible(!visible);\r\n      }}\r\n      >\r\n        { visible\r\n          ? <Visibility sx={{ color }} />\r\n          : <VisibilityOff sx={{ color: deactivatedColor }} />}\r\n      </IconButton>\r\n      <Tooltip title={title} placement=\"right\">\r\n        <Typography sx={{ flexGrow: 1 }} noWrap>{title}</Typography>\r\n      </Tooltip>\r\n    </Box>\r\n  );\r\n}\r\n\r\n/**\r\n * Displays the catogries of a result in a vertical layout\r\n * @param categories An object containing available categories and their values as key-value pairs\r\n * @param setColorMode A function accepting a category to be colored\r\n * @param hide A function that will hide a category value in the UMAP.\r\n * Expects category and value as parameter\r\n * @param show A function that will set a category value in the UMAP visible if it was hidden\r\n * Expects category and value as parameter\r\n */\r\nfunction GeneMapperCategories({\r\n  categories, setColorMode, hide, show,\r\n}) {\r\n  const [coloredCategoryTitle, setColoredCategoryTitle] = useState(null);\r\n\r\n  const handleSetColorMode = (colorMode) => {\r\n    setColoredCategoryTitle(colorMode);\r\n    setColorMode(colorMode);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (categories) {\r\n      const coloringModes = Object.keys(categories);\r\n\r\n      if (coloringModes.includes('cell_type')) {\r\n        handleSetColorMode('cell_type');\r\n      } else if (coloringModes.includes('batch')) {\r\n        handleSetColorMode('batch');\r\n      } else if (coloringModes.length) {\r\n        handleSetColorMode(coloringModes[0]);\r\n      }\r\n    }\r\n  }, [categories]);\r\n\r\n  return (\r\n    <Box sx={{ maxWidth: '270px' }}>\r\n      { categories\r\n        ? Object.entries(categories).map(([title, values]) => (\r\n          title !== 'predicted'\r\n            ? (\r\n              <Category\r\n                key={title}\r\n                title={title}\r\n                values={values}\r\n                colored={title === coloredCategoryTitle}\r\n                toggleColored={() => handleSetColorMode(title)}\r\n                hide={(value) => {\r\n                  hide(title, value);\r\n                }}\r\n                show={(value) => {\r\n                  show(title, value);\r\n                }}\r\n              />\r\n            ) : null\r\n        ))\r\n        : null}\r\n    </Box>\r\n\r\n  );\r\n}\r\n\r\nexport default GeneMapperCategories;\r\n","import { ExpandLess, ExpandMore } from '@mui/icons-material';\r\nimport {\r\n  Box, Collapse, IconButton, Tooltip, Typography,\r\n} from '@mui/material';\r\nimport React, { useState } from 'react';\r\n\r\n/**\r\n * A sidepanel for the GeneMapper to show additional information\r\n * that can be collaped to either the right or left side.\r\n * @param title Heading to show at the top of the sidepanel\r\n * @param collapseToRight Set to true if panel should be collapsing to the right\r\n * @param children Child nodes inside the panel\r\n */\r\nfunction Sidepanel({ title, collapseToRight, children }) {\r\n  const [open, setOpen] = useState(true);\r\n\r\n  const expandIconAngle = collapseToRight ? 90 : -90;\r\n  const toolTipPlacement = collapseToRight ? 'left' : 'right';\r\n  const flexDirection = collapseToRight ? 'row-reverse' : 'row';\r\n\r\n  return (\r\n    <Box sx={{\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'strech',\r\n      height: '100%',\r\n    }}\r\n    >\r\n      {open\r\n        ? (\r\n          <Box sx={{ display: 'flex', alignItems: 'center', flexDirection }}>\r\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }}>{title}</Typography>\r\n            <IconButton onClick={() => setOpen(false)}>\r\n              <ExpandLess fontSize=\"large\" sx={{ transform: `rotate(${expandIconAngle}deg)` }} />\r\n            </IconButton>\r\n          </Box>\r\n        )\r\n        : (\r\n          <Tooltip title={title} placement={toolTipPlacement}>\r\n            <IconButton onClick={() => setOpen(true)}>\r\n              <ExpandMore fontSize=\"large\" sx={{ transform: `rotate(${expandIconAngle}deg)` }} />\r\n            </IconButton>\r\n          </Tooltip>\r\n        )}\r\n      <Collapse in={open} orientation=\"horizontal\" sx={{ overflowY: 'auto', overflowX: 'hidden', pr: 2 }}>\r\n        {children}\r\n      </Collapse>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Sidepanel;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Box, IconButton } from '@mui/material';\r\nimport ZoomOutMapIcon from '@mui/icons-material/ZoomOutMap';\r\nimport { Modal } from 'components/Modal';\r\n\r\nfunction GeneMapperGraphs({ graphs, drawGraph }) {\r\n  const graphContainers = useRef({});\r\n  const [open, setOpen] = useState('');\r\n\r\n  useEffect(() => {\r\n    Object.entries(graphContainers.current).forEach(([id, elem]) => {\r\n      drawGraph(elem, id, 270, 270);\r\n    });\r\n  }, [graphContainers.current]);\r\n\r\n  return (\r\n    <>\r\n      <Box sx={{ height: '100%' }}>\r\n        {graphs.map((id) => (\r\n          <Box\r\n            key={id}\r\n            ref={(elem) => { graphContainers.current[id] = elem; }}\r\n            sx={{ position: 'relative' }}\r\n          >\r\n            <IconButton\r\n              size=\"small\"\r\n              sx={{ position: 'absolute', left: 50 }}\r\n              onClick={() => {\r\n                setOpen(id);\r\n              }}\r\n            >\r\n              <ZoomOutMapIcon />\r\n            </IconButton>\r\n          </Box>\r\n        ))}\r\n      </Box>\r\n\r\n      <Modal isOpen={open} setOpen={() => setOpen('')} maxWidth=\"false\">\r\n        <Box ref={(elem) => drawGraph(elem, open, 750, 750)} />\r\n      </Modal>\r\n\r\n    </>\r\n  );\r\n}\r\n\r\nexport default GeneMapperGraphs;\r\n","import CenterFocusWeakIcon from '@mui/icons-material/CenterFocusWeak';\r\nimport ZoomInIcon from '@mui/icons-material/ZoomIn';\r\nimport ZoomOutIcon from '@mui/icons-material/ZoomOut';\r\nimport PublicIcon from '@mui/icons-material/Public';\r\nimport BiotechIcon from '@mui/icons-material/Biotech';\r\nimport BlurOnIcon from '@mui/icons-material/BlurOn';\r\nimport {\r\n  Box, CircularProgress, Divider, IconButton, Tooltip,\r\n} from '@mui/material';\r\nimport { resetZoom, zoomInN, zoomOutN } from 'components/Visualization/src/newZoom';\r\nimport { UmapVisualization2 } from 'components/Visualization/src/umapVisualization';\r\nimport { csv } from 'd3';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport GeneMapperCategories from '../Categories';\r\nimport Sidepanel from '../Sidepanel';\r\nimport { colors } from 'shared/theme/colors';\r\nimport GeneMapperGraphs from '../Graphs';\r\nimport { INDEXED_DB_NAME, DB_VERSION } from 'shared/utils/common/constants';\r\n\r\nconst activatedColor = colors.primary['400'];\r\nconst deactivatedColor = colors.primary['200'];\r\n\r\n/**\r\n * Displays scArches result data (csv) in a UMAP. By default, additional side panels are shown\r\n * with details about the result data.\r\n * @param dataUrl Download link for the csv data\r\n * @param onlyUmap Set to true if only the UMAP should be shown\r\n */\r\nfunction ResultVisualization({ dataUrl, onlyUmap, loggedIn = true }) {\r\n  const umapContainer = useRef(null);\r\n  const graphContainer = useRef(null);\r\n\r\n  const [umap, setUmap] = useState(null);\r\n  const [umapSize, setUmapSize] = useState({\r\n    width: 0,\r\n    height: 0,\r\n  });\r\n\r\n  const [showQuery, setShowQuery] = useState(true);\r\n  const [showReference, setShowReference] = useState(true);\r\n  const [showPredictions, setShowPredictions] = useState(true);\r\n\r\n  /**\r\n   * Fetch the csv and set umap accordingly.\r\n   * First check the indexedDB cache to see if the file has already been cached there.\r\n   */\r\n  useEffect(() => {\r\n    // check if indexed DB is available in the user's browser\r\n    if (!window.indexedDB) {\r\n      if (loggedIn) {\r\n        csv(dataUrl).then((data) => {\r\n          // set the UMAP for the visualization\r\n          setUmap(new UmapVisualization2(umapContainer.current, data, graphContainer.current));\r\n        });\r\n      } else {\r\n        window.alert(\"This browser doesn't support IndexedDB. Please update your browser.\");\r\n        return;\r\n      }\r\n    }\r\n    // open indexDB and check cache for stored results\r\n    console.log('opening indexedDB...');\r\n    const req = window.indexedDB.open(INDEXED_DB_NAME, DB_VERSION);\r\n    let db;\r\n\r\n    req.onerror = () => console.log('Error opening indexedDB');\r\n\r\n    // fired when database is opened for the first time.\r\n    // Create object store\r\n    req.onupgradeneeded = () => {\r\n      console.log('onupgradeNeeded fired');\r\n      db = req.result;\r\n      db.createObjectStore('project');\r\n      // error\r\n      db.onerror = (event) => {\r\n        console.log(`indexedDB error occurred: ${event}`);\r\n      };\r\n    };\r\n\r\n    // db access successful\r\n    req.onsuccess = () => {\r\n      db = req.result;\r\n\r\n      // read data from db\r\n      let objectStore = db.transaction('project', 'readonly').objectStore('project');\r\n      const readRequest = objectStore.get(dataUrl);\r\n\r\n      // generic db error\r\n      db.onerror = (event) => {\r\n        console.log(`indexedDB error occurred: ${event}`);\r\n      };\r\n\r\n      // on succssful read of cache\r\n      readRequest.onsuccess = () => {\r\n        const data = readRequest.result;\r\n        // if data is stored in db, use it\r\n        if (data) {\r\n          console.log('reading from indexed db');\r\n          setUmap(new UmapVisualization2(umapContainer.current, data, graphContainer.current));\r\n        } else { // otherwise, fetch the data\r\n          csv(dataUrl).then((result) => {\r\n            // set the UMAP for the visualization\r\n            setUmap(new UmapVisualization2(umapContainer.current, result, graphContainer.current));\r\n            // save fetched result in db\r\n            objectStore = db.transaction(['project'], 'readwrite').objectStore('project');\r\n            const request = objectStore.add(result, dataUrl);\r\n            request.onsuccess = () => { console.log('new project result added to db.'); };\r\n          });\r\n        }\r\n      };\r\n      console.log('Finished operations on indexedDB.');\r\n    };\r\n  }, [dataUrl]);\r\n\r\n  useEffect(() => {\r\n    if (umap && umapSize.width > 0 && umapSize.height > 0) {\r\n      umap.resize(umapSize.width, umapSize.height);\r\n    }\r\n  }, [umap, umapSize]);\r\n\r\n  useEffect(() => {\r\n    if (umapContainer?.current) {\r\n      const observer = new ResizeObserver((entries) => {\r\n        const container = entries[0];\r\n        setUmapSize({\r\n          width: container.contentRect.width,\r\n          height: container.contentRect.height,\r\n        });\r\n      });\r\n      observer.observe(umapContainer.current);\r\n      return () => observer.disconnect();\r\n    }\r\n    return () => {};\r\n  }, [umapContainer.current]);\r\n\r\n  return (\r\n    <Box sx={{ display: 'flex', width: '100%', height: '100%' }}>\r\n      {!umap ? (\r\n        <Box sx={{\r\n          position: 'absolute', top: '50%', left: '50%', transform: 'translate(-50%, -50%)',\r\n        }}\r\n        >\r\n          <CircularProgress disableShrink />\r\n        </Box>\r\n      ) : null}\r\n      <Box sx={{ display: onlyUmap ? 'none' : 'block' }}>\r\n        <Sidepanel title=\"Categories\">\r\n          <GeneMapperCategories\r\n            categories={umap?.coloringModes}\r\n            setColorMode={(mode) => umap.setColorMode(mode)}\r\n            hide={(category, value) => {\r\n              umap.after(category, value);\r\n            }}\r\n            show={(category, value) => {\r\n              umap.before(category, value);\r\n            }}\r\n          />\r\n        </Sidepanel>\r\n      </Box>\r\n      <Box\r\n        sx={{\r\n          flexGrow: 1,\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          justifyContent: 'center',\r\n          overflow: 'hidden',\r\n        }}\r\n      >\r\n        <Box sx={{ display: 'flex', justifyContent: 'center' }}>\r\n          {umap\r\n          && Object.keys(umap.coloringModes).includes('predicted')\r\n          && (\r\n            <>\r\n              <Box>\r\n                <Tooltip title={`${showPredictions ? 'Hide' : 'Show'} predicted data`}>\r\n                  <IconButton onClick={() => {\r\n                    setShowPredictions(!showPredictions);\r\n                    if (showPredictions) {\r\n                      umap.predictedCellsTransparent();\r\n                    } else {\r\n                      umap.predictedCellsVisible();\r\n                    }\r\n                  }}\r\n                  >\r\n                    <BlurOnIcon\r\n                      sx={{ color: showPredictions ? activatedColor : deactivatedColor }}\r\n                    />\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </Box>\r\n              <Divider orientation=\"vertical\" flexItem variant=\"middle\" />\r\n            </>\r\n          )}\r\n          {\r\n            umap\r\n            && Object.keys(umap.coloringModes).includes('type')\r\n            && (\r\n              <>\r\n                <Box>\r\n                  <Tooltip title={`${showReference ? 'Hide' : 'Show'} reference data`}>\r\n                    <IconButton onClick={() => {\r\n                      setShowReference(!showReference);\r\n                      if (showReference) {\r\n                        setShowQuery(true);\r\n                        umap.showQuery();\r\n                        umap.hideReference();\r\n                      } else {\r\n                        umap.showReference();\r\n                      }\r\n                    }}\r\n                    >\r\n                      <PublicIcon\r\n                        sx={{ color: showReference ? activatedColor : deactivatedColor }}\r\n                      />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                  <Tooltip title={`${showQuery ? 'Hide' : 'Show'} query data`}>\r\n                    <IconButton onClick={() => {\r\n                      setShowQuery(!showQuery);\r\n                      if (showQuery) {\r\n                        setShowReference(true);\r\n                        umap.showReference();\r\n                        umap.hideQuery();\r\n                      } else {\r\n                        umap.showQuery();\r\n                      }\r\n                    }}\r\n                    >\r\n                      <BiotechIcon sx={{ color: showQuery ? activatedColor : deactivatedColor }} />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                </Box>\r\n                <Divider orientation=\"vertical\" flexItem variant=\"middle\" />\r\n              </>\r\n            )\r\n          }\r\n          <Box>\r\n            <IconButton onClick={() => zoomInN()}>\r\n              <ZoomInIcon />\r\n            </IconButton>\r\n            <IconButton onClick={() => zoomOutN()}>\r\n              <ZoomOutIcon />\r\n            </IconButton>\r\n            <IconButton onClick={() => resetZoom()}>\r\n              <CenterFocusWeakIcon />\r\n            </IconButton>\r\n          </Box>\r\n        </Box>\r\n        <Box\r\n          sx={{\r\n            flexGrow: 1, display: 'flex', justifyContent: 'center', overflow: 'hidden',\r\n          }}\r\n          ref={umapContainer}\r\n        />\r\n      </Box>\r\n      <Box sx={{ display: onlyUmap ? 'none' : 'block' }}>\r\n        <Sidepanel title=\"Graphs\" collapseToRight>\r\n          {umap\r\n          && (\r\n          <GeneMapperGraphs\r\n            graphs={umap.getAvailableGraphs()}\r\n            drawGraph={(container, graph, width, height) => {\r\n              umap.drawGraph(container, graph, width, height);\r\n            }}\r\n          />\r\n          )}\r\n        </Sidepanel>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default ResultVisualization;\r\n","import { Box, CircularProgress } from '@mui/material';\r\nimport GeneMapperResultHeader from 'components/GeneMapper/ResultHeader';\r\nimport ResultVisualization from 'components/GeneMapper/ResultVisualization';\r\nimport React, {\r\n  useEffect, useState,\r\n} from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport ProjectMock from 'shared/services/mock/projects';\r\nimport ProjectService from 'shared/services/Project.service';\r\nimport DemoService from 'shared/services/Demo.service';\r\nimport { PROJECT_STATUS } from 'shared/utils/common/constants';\r\n\r\n/**\r\n * Shows the UMAP visualization for a given project.\r\n */\r\nfunction GeneMapperResultView({ loggedIn = true }) {\r\n  const [project, setProject] = useState(null);\r\n\r\n  const { projectId } = useParams();\r\n\r\n  /** Function to update information about demos\r\n   * @param {*} data the array of projects  \r\n   */\r\n  function updateDemos(data) {\r\n    let updatedData = data;\r\n    DemoService.getDemos().then((demos) => {\r\n      // loop over demo datasets and check whether the project is a demo\r\n      demos.forEach((demo) => {\r\n        const id = data.fileName.split('_')[2];\r\n        if (id && id === demo._id) {\r\n          // updating the demo dataset\r\n          updatedData = {\r\n            ...data,\r\n            status: PROJECT_STATUS.DONE,\r\n            location: demo.h5adURL,\r\n          };\r\n        }\r\n      });\r\n      setProject(updatedData);\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    let projectInCache = JSON.parse(localStorage.getItem(\"cached_projects\"))[projectId];\r\n    \r\n    // check if the project data is stored in the cache\r\n    if (projectInCache) {\r\n      updateDemos(projectInCache);\r\n    } // fetch the project if the result is not in the cache\r\n    else {\r\n      ProjectService.getProject(projectId)\r\n        .then((data) => {\r\n          // update information about the demo datasets\r\n          updateDemos(data);\r\n        })\r\n        .catch(() => {\r\n          ProjectMock.getProject(projectId).then((data) => setProject(data));\r\n        });\r\n    }\r\n  }, [projectId]);\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        // 100vh - HeaderView header height - HeaderView content padding - Footer height\r\n        height: 'calc(100vh - 75px - 24px - 40px)',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n      }}\r\n    >\r\n      {project\r\n        ? (\r\n          <>\r\n            <GeneMapperResultHeader project={project} loggedIn={loggedIn} />\r\n            <Box\r\n              sx={{\r\n                flexGrow: 1,\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'stretch',\r\n                overflow: 'hidden',\r\n              }}\r\n            >\r\n              <ResultVisualization dataUrl={project.location} loggedIn={loggedIn} />\r\n            </Box>\r\n          </>\r\n        )\r\n        : (\r\n          <Box sx={{\r\n            flexGrow: 1, display: 'flex', justifyContent: 'Center', alignItems: 'center',\r\n          }}\r\n          >\r\n            <CircularProgress disableShrink />\r\n          </Box>\r\n        )}\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default GeneMapperResultView;\r\n","import { Container, Box, Typography } from '@mui/material';\r\nimport React, { useCallback, useState } from 'react';\r\nimport {\r\n  Redirect, Route, Switch, useRouteMatch,\r\n} from 'react-router-dom';\r\nimport GeneMapperState from './GeneMapperState';\r\nimport NavBar from 'components/NavBar';\r\nimport GeneMapperHome from './Home';\r\nimport GeneMapperResultView from './Result';\r\nimport HeaderView from 'components/general/HeaderView';\r\nimport HelpIcon from '@mui/icons-material/Help';\r\nimport { Modal } from 'components/Modal';\r\nimport { colors } from 'shared/theme/colors';\r\n\r\n/*\r\nparams: sidebarShown, loggedIn\r\nThe GeneMapper. Offers both the logged-in and non-logged-in version. \r\nloggedIn is set to true by default\r\n*/\r\nfunction GeneMapper({ sidebarShown, loggedIn = true }) {\r\n  const { path, url } = useRouteMatch();\r\n\r\n  const headerStyle = {\r\n    color: '#003560',\r\n    fontSize: '1.6rem',\r\n    fontWeight: 'bold',\r\n    paddingTop: '20px',\r\n  };\r\n  const [showScarchesInfo, setShowScarchesInfo] = useState(false);\r\n\r\n  return (\r\n    <div>\r\n      <HeaderView\r\n        sidebarShown={sidebarShown}\r\n        // title=\"ScArches Gene Mapper\"\r\n        // rightOfTitle={(\r\n        //   <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n        //     &nbsp;\r\n        //     <HelpIcon\r\n        //       onClick={() => setShowScarchesInfo(true)}\r\n        //       color=\"primary\"\r\n        //       sx={{\r\n        //         cursor: 'pointer',\r\n        //       }}\r\n        //     />\r\n        //   </Box>\r\n        // )}\r\n        loggedIn={loggedIn}\r\n      >\r\n        <Switch>\r\n          <Route exact path={`${path}`}>\r\n            <GeneMapperHome basePath={path} loggedIn={loggedIn} />\r\n          </Route>\r\n\r\n          <Route path={`${path}/create`}>\r\n            <GeneMapperState path={`${path}`} loggedIn={loggedIn} />\r\n          </Route>\r\n\r\n          <Route path={`${path}/result/:projectId`}>\r\n            <GeneMapperResultView loggedIn={loggedIn} />\r\n          </Route>\r\n\r\n          <Route path={`${path}/*`}>\r\n            <Redirect to={`${url}`} />\r\n          </Route>\r\n        </Switch>\r\n      </HeaderView>\r\n      <Modal\r\n        isOpen={showScarchesInfo}\r\n        setOpen={setShowScarchesInfo}\r\n        children={(\r\n          <Container>\r\n            <Box sx={{\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              alignItems: 'flex-start',\r\n              justifyContent: 'space-between',\r\n            }}\r\n            >\r\n              <Typography sx={{ fontSize: '36px', fontWeigth: 700 }}>What is ScArches?</Typography>\r\n              <Typography sx={{ fontSize: '16px', fontWeight: 300, paddingBottom: '16px' }}>\r\n                <p>\r\n                  ScArches is a novel deep learning model that enables mapping query to reference datasets. The model allows the user to construct single or multi-modal (CITE-seq) references as well as classifying unlabelled query cells.\r\n                  On ArchMap, currently only mapping of query to reference datasets is offered.\r\n\r\n                </p>\r\n                <p>\r\n                  For further information, please check out the ScArches paper:\r\n                  <a href=\"https://www.nature.com/articles/s41587-021-01001-7\" target=\"_blank\" rel=\"noreferrer\">https://www.nature.com/articles/s41587-021-01001-7</a>\r\n                </p>\r\n              </Typography>\r\n            </Box>\r\n          </Container>\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GeneMapper;\r\n","import * as React from 'react';\r\nimport Typography from '@mui/material/Typography';\r\nimport Box from '@mui/material/Box';\r\n\r\nfunction TabPanel({ children, value, index }) {\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`simple-tabpanel-${index}`}\r\n      aria-labelledby={`simple-tab-${index}`}\r\n    >\r\n      {value === index && (\r\n        <Box sx={{ p: 3 }}>\r\n          <Typography>{children}</Typography>\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TabPanel;\r\n","import axiosInstance from './axiosInstance';\r\n\r\nconst MODEL = 'users';\r\n\r\nfunction enhanceInstitution(institution) {\r\n  return { ...institution, id: institution._id };\r\n}\r\n\r\nfunction enhanceTeam(team) {\r\n  return { ...team, id: team._id, name: team.title };\r\n}\r\n\r\nconst UserService = {\r\n  getUsers: async (params) => {\r\n    const preparedParams = { ...params };\r\n    if (!preparedParams.sortBy || preparedParams.sortBy === 'name') {\r\n      preparedParams.sortBy = 'lastName';\r\n    }\r\n    const { data } = await axiosInstance.get(`/${MODEL}`, { params: preparedParams });\r\n    return data;\r\n  },\r\n\r\n  getOwnTeams: async () => {\r\n    const { data } = await axiosInstance.get(`/${MODEL}/ownteams`);\r\n    return data;\r\n  },\r\n\r\n  getUser: async (id) => {\r\n    const { data } = await axiosInstance.get(`${MODEL}/${id}`)\r\n    return data;\r\n  },\r\n  getUserInstitutions: async (id) => {\r\n    const { data } = await axiosInstance.get(`${MODEL}/${id}/institutions`)\r\n    return data.map(enhanceInstitution);\r\n  },\r\n  getUserTeams: async (id) => {\r\n    const { data } = await axiosInstance.get(`${MODEL}/${id}/teams`)\r\n    return data.map(enhanceTeam);\r\n  }\r\n};\r\n\r\nexport default UserService;\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\n/* eslint-disable react/jsx-one-expression-per-line */\r\nimport React, { useState, useEffect } from 'react';\r\nimport HeaderView from 'components/general/HeaderView';\r\nimport InstitutionList from 'components/institutions/InstitutionList';\r\nimport TabPanel from 'components/TabPanel';\r\nimport Tabs from '@mui/material/Tabs';\r\nimport Tab from '@mui/material/Tab';\r\nimport Grid from '@mui/material/Grid';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport TeamCard from 'components/teams/TeamCard';\r\nimport UserService from 'shared/services/User.service'\r\nimport stringToColor from 'shared/utils/stringColor';\r\nimport {\r\n  useParams\r\n} from \"react-router-dom\";\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Box from '@mui/material/Box';\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `simple-tab-${index}`,\r\n    'aria-controls': `simple-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nconst testInstitutions = [\r\n  {\r\n    id: 5,\r\n    name: 'Helmholtz Institute',\r\n    country: 'Germany',\r\n    profilePictureURL: 'https://www.hzdr.de/db/Pic?pOid=55058',\r\n    backgroundPictureURL: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdjsC9c9x8ABK8CXkzrf1cAAAAASUVORK5CYII=',\r\n    adminIds: [],\r\n    memberIds: [],\r\n  },\r\n  {\r\n    id: 6,\r\n    name: 'Technische Universitt Mnchen',\r\n    country: 'Germany',\r\n    profilePictureURL: 'https://scalings.eu/wp-content/uploads/2019/11/tum-logo.png',\r\n    backgroundPictureURL: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdjsC9c9x8ABK8CXkzrf1cAAAAASUVORK5CYII=',\r\n    adminIds: [1],\r\n    memberIds: [],\r\n  },\r\n  {\r\n    id: 7,\r\n    name: 'Rostlab',\r\n    country: 'Germany',\r\n    profilePictureURL: 'https://avatars.githubusercontent.com/u/4093405?s=200&v=4',\r\n    backgroundPictureURL: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdjsC9c9x8ABK8CXkzrf1cAAAAASUVORK5CYII=',\r\n    adminIds: [1],\r\n    memberIds: [],\r\n  },\r\n];\r\n\r\nconst mockTeams = [\r\n  {\r\n    id: 1,\r\n    name: 'Biotechnology Team',\r\n    description: 'Biotechnology Team bla bla',\r\n    adminIds: [6, 7],\r\n    invitedMemberIds: [],\r\n    memberIds: [1, 2, 3, 4, 5],\r\n    visibility: 'public',\r\n    institutionId: 2,\r\n  },\r\n];\r\n\r\nfunction UserProfile({ sidebarShown }) {\r\n  const [value, setValue] = useState(0);\r\n  let { id } = useParams();\r\n\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const [user, setUser] = useState({})\r\n  const [isUserLoading, setIsUserLoading] = useState(false)\r\n  const [userInstitutions, setUserInstitutions] = useState([])\r\n  const [isInstitutionLoading, setIsInstitutionLoading] = useState(false)\r\n  const [userTeams, setUserTeams] = useState([])\r\n  const [isTeamLoading, setIsTeamLoading] = useState(false)\r\n\r\n\r\n  useEffect(() => {\r\n    setIsUserLoading(true)\r\n    UserService.getUser(id).then((data) => setUser(data)).finally(setIsUserLoading(false))\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    setIsInstitutionLoading(true)\r\n    UserService.getUserInstitutions(id).then((data) => setUserInstitutions(data)).finally(setIsInstitutionLoading(false))\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    setIsTeamLoading(true)\r\n    UserService.getUserTeams(id).then((data) => setUserTeams(data)).finally(setIsTeamLoading(false))\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      <HeaderView\r\n        sidebarShown={sidebarShown}\r\n        title=\"Profile\"\r\n      >\r\n        {isUserLoading ? <Box sx={{ display: 'flex' }}>\r\n          <CircularProgress />\r\n        </Box> :\r\n          <Grid container justifyContent=\"center\" alignItems=\"center\" spacing={3}>\r\n            <Grid item>\r\n              <Avatar\r\n                src={user.avatarUrl}\r\n                alt={`${user.firstName} ${user.lastName}`}\r\n                sx={{\r\n                  backgroundColor: stringToColor(`${user.firstName} ${user.lastName}`),\r\n                  width: 160,\r\n                  height: 160,\r\n                }}\r\n              >\r\n                {(user.firstName || '?')[0]}\r\n              </Avatar>\r\n            </Grid>\r\n            <Grid item>\r\n              <h2>\r\n                {user.firstName} {user.lastName}\r\n              </h2>\r\n              <span>{user.email}</span>\r\n            </Grid>\r\n          </Grid>}\r\n        <Box sx={{ width: '100%' }}>\r\n          <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\r\n            <Tabs value={value} onChange={handleChange} aria-label=\"basic tabs example\">\r\n              <Tab label=\"Institutions\" {...a11yProps(0)} />\r\n              <Tab label=\"Teams\" {...a11yProps(1)} />\r\n            </Tabs>\r\n          </Box>\r\n          <TabPanel value={value} index={0}>\r\n            <InstitutionList\r\n              isLoading={isInstitutionLoading}\r\n              institutions={userInstitutions}\r\n            />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={1}>\r\n            {userTeams.length === 0 ? 'No teams.' : ''}\r\n            {userTeams.map((team) => (\r\n              <div key={team.id}>\r\n                <TeamCard\r\n                  team={team}\r\n                  onLeft={(t) => onLeft(t)}\r\n                />\r\n                <div style={{ marginBottom: \"15px\" }} />\r\n              </div>\r\n            ))}\r\n          </TabPanel>\r\n        </Box>\r\n      </HeaderView>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default UserProfile;\r\n","import React from 'react';\r\nimport { Divider, Stack, Typography } from '@mui/material';\r\nimport styles from './documentation.module.css';\r\nimport visualisation from 'assets/landing-illustrations/visualisation.png';\r\nimport csvformat from 'assets/landing-illustrations/csvformat.png';\r\nimport zoom from 'assets/landing-illustrations/zoomVisualisation.png';\r\nimport clusterLabel from 'assets/landing-illustrations/clusterLabel.png';\r\nimport allClusterLabels from 'assets/landing-illustrations/allClusterLabels.png';\r\nimport clusterDetails from 'assets/landing-illustrations/clusterDetails.png';\r\n\r\nfunction Documentation() {\r\n  return (\r\n    <div className={styles.container}>\r\n      <Stack\r\n        spacing=\"30px\"\r\n      >\r\n        {/* Documentation Headline ---------------------------------------------------------*/}\r\n        <Typography sx={{ fontWeight: 'bold', fontSize: '30px' }}>Documentation</Typography>\r\n        <div className={styles.textContainer}>\r\n          <Typography\r\n            sx={{ fontSize: '25px', paddingInline: '350px', maxWidth: '1700px' }}\r\n            align=\"center\"\r\n          >\r\n            This Documentationn provides you with a basic understanding of our\r\n            implemented solution.\r\n          </Typography>\r\n        </div>\r\n\r\n        {/* Machine Learning Model-----------------------------------------------------------*/}\r\n        <Divider\r\n          variant=\"middle\"\r\n          textAlign=\"center\"\r\n          sx={{ paddingTop: '100px', paddingBottom: '40px' }}\r\n        >\r\n          <Typography sx={{ width: '400px', fontWeight: 'bold', fontSize: '30px' }}>\r\n            1. Machine Learning Model\r\n          </Typography>\r\n        </Divider>\r\n        <div className={styles.textContainer}>\r\n          <Typography\r\n            sx={{ fontSize: '20px', paddingInline: '350px', maxWidth: '1700px' }}\r\n            align=\"center\"\r\n          >\r\n            We are working hard on providing you with a documentation for our\r\n            machine learning model in the near future.\r\n            If you experience problems or have any questions\r\n            feel free to get in touch with us.\r\n          </Typography>\r\n        </div>\r\n\r\n        {/* Visualisation -------------------------------------------------------------------*/}\r\n        <Divider\r\n          variant=\"middle\"\r\n          textAlign=\"center\"\r\n          sx={{ paddingTop: '100px', paddingBottom: '40px' }}\r\n        >\r\n          <Typography sx={{ width: '250px', fontWeight: 'bold', fontSize: '30px' }}>2. Visualisation</Typography>\r\n        </Divider>\r\n        <div className={styles.textContainer}>\r\n          <Typography\r\n            sx={{ fontSize: '20px', paddingInline: '350px', maxWidth: '1700px' }}\r\n            align=\"center\"\r\n          >\r\n            Based on your input data set we will provide you with a visualisation containing\r\n            the calculated classifications for your cells. (An example can be seen below)\r\n          </Typography>\r\n        </div>\r\n        <img className={styles.mainIllustration} src={visualisation} alt=\"visualisation\" />\r\n\r\n        {/* Input Data -----------------------------------------------------------------------*/}\r\n        <Divider\r\n          variant=\"middle\"\r\n          textAlign=\"center\"\r\n          sx={{ paddingTop: '100px', paddingBottom: '40px' }}\r\n        >\r\n          <Typography sx={{ width: '150px', fontWeight: 'bold', fontSize: '30px' }}>\r\n            Input Data\r\n          </Typography>\r\n        </Divider>\r\n        <div className={styles.textContainer}>\r\n          <Typography\r\n            sx={{ fontSize: '20px', paddingInline: '350px', maxWidth: '1700px' }}\r\n            align=\"center\"\r\n          >\r\n            After processing the raw data provided by the user,\r\n            the machine learning model returns a .csv file.\r\n            This .csv file is needed as input for the visualisation in the following format\r\n\r\n          </Typography>\r\n        </div>\r\n\r\n        <div className={styles.textContainer}>\r\n          <Typography\r\n            sx={{\r\n              fontSize: '20px', paddingInline: '350px', maxWidth: '1700px', fontWeight: 'bold',\r\n            }}\r\n            align=\"center\"\r\n          >\r\n            (x,y denote the UMAP coordinates of a sample)\r\n          </Typography>\r\n        </div>\r\n        <img className={styles.csvImage} src={csvformat} alt=\"visualisation\" />\r\n\r\n        {/* Features ---------------------------------------------------------------------------*/}\r\n        <Divider\r\n          variant=\"middle\"\r\n          textAlign=\"center\"\r\n          sx={{ paddingTop: '100px', paddingBottom: '40px' }}\r\n        >\r\n          <Typography sx={{ fontWeight: 'bold', fontSize: '30px' }}>\r\n            Features\r\n          </Typography>\r\n        </Divider>\r\n\r\n        <Stack\r\n          direction=\"column\"\r\n          spacing={25}\r\n        >\r\n          {/* Zoom in/out -----------------------------------------------------------------------*/}\r\n\r\n          <div className={styles.infoContainer}>\r\n            <img className={styles.verticalIllustration} src={zoom} alt=\"science-guy\" />\r\n            <div className={styles.explanationLeft}>\r\n              <Typography\r\n                className={styles.explanationTitle}\r\n                sx={{ fontSize: '25px', fontWeight: 'bold' }}\r\n              >\r\n                Zoom in/out\r\n              </Typography>\r\n\r\n              <Typography sx={{ fontSize: '20px' }}>\r\n                The buttons in the top right corner of the visualisation\r\n                allow you to zoom in on the generated sample points.\r\n              </Typography>\r\n              <br />\r\n              <Typography sx={{ fontSize: '20px' }}>\r\n                At the highest zoom level, the sample IDs are also displayed when hovering.\r\n                Panning is only possible from the first zoom level.\r\n              </Typography>\r\n              <br />\r\n              <br />\r\n              <Typography\r\n                className={styles.explanationTitle}\r\n                sx={{ fontSize: '25px', fontWeight: 'bold' }}\r\n              >\r\n                Resetting the Zoom Level\r\n              </Typography>\r\n\r\n              <Typography sx={{ fontSize: '20px' }}>\r\n                By clicking the &apos;Reset&apos; button in the upper right corner\r\n                you can reset the zoom level to the original value.\r\n              </Typography>\r\n\r\n            </div>\r\n          </div>\r\n\r\n          {/* Cluster Labels ------------------------------------------------------------------*/}\r\n          <Stack direction=\"column\">\r\n            <div className={styles.infoContainer}>\r\n              <img\r\n                className={styles.horizontalIllustration}\r\n                src={clusterLabel}\r\n                alt=\"cluster label\"\r\n              />\r\n              <div className={styles.explanationLeft}>\r\n                <Typography\r\n                  className={styles.explanationTitle}\r\n                  sx={{ fontSize: '25px', fontWeight: 'bold' }}\r\n                >\r\n                  Single Cluster Labels\r\n                </Typography>\r\n                <Typography sx={{ fontSize: '20px' }}>\r\n                  {' '}\r\n                  The visualization temporarily displays a clusters name when\r\n                  hovering over it.\r\n                </Typography>\r\n              </div>\r\n            </div>\r\n\r\n            <div className={styles.infoContainer}>\r\n              <img\r\n                className={styles.horizontalIllustration}\r\n                src={allClusterLabels}\r\n                alt=\"all cluster labels\"\r\n              />\r\n              <div className={styles.explanationLeft}>\r\n                <Typography\r\n                  className={styles.explanationTitle}\r\n                  sx={{ fontSize: '25px', fontWeight: 'bold' }}\r\n                >\r\n                  All Cluster Labels\r\n                </Typography>\r\n                <Typography sx={{ fontSize: '20px' }}>\r\n                  {' '}\r\n                  To permanently display all cluster labels you need to press the &apos;Labels&apos;\r\n                  button in the right upper corner.\r\n                </Typography>\r\n              </div>\r\n            </div>\r\n          </Stack>\r\n\r\n          {/* Cluster Details ------------------------------------------------------------------*/}\r\n          <div className={styles.infoContainer}>\r\n            <img\r\n              className={styles.horizontalIllustration}\r\n              src={clusterDetails}\r\n              alt=\"cluster Details\"\r\n            />\r\n            <div className={styles.explanationLeft}>\r\n              <Typography\r\n                className={styles.explanationTitle}\r\n                sx={{ fontSize: '25px', fontWeight: 'bold' }}\r\n              >\r\n                Cluster Details\r\n              </Typography>\r\n\r\n              <Typography sx={{ fontSize: '20px' }}>\r\n                When clicking on a cluster youll be presented with more\r\n                detailed information about it.\r\n              </Typography>\r\n              <br />\r\n              <br />\r\n              <Typography\r\n                className={styles.explanationTitle}\r\n                sx={{ fontSize: '25px', fontWeight: 'bold' }}\r\n              >\r\n                Portrayed Cluster Attributes:\r\n              </Typography>\r\n              <Typography sx={{ fontSize: '20px' }}>\r\n                - percentage share of all samples\r\n              </Typography>\r\n              <Typography sx={{ fontSize: '20px' }}>\r\n                - number of samples\r\n              </Typography>\r\n              <Typography sx={{ fontSize: '20px' }}>\r\n                - average L2 distance of the samples to the mean.\r\n              </Typography>\r\n\r\n            </div>\r\n          </div>\r\n        </Stack>\r\n\r\n      </Stack>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Documentation;\r\n","import React, { useCallback, useState } from 'react';\r\nimport Stack from '@mui/material/Stack';\r\nimport TextField from '@mui/material/TextField';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport Switch from '@mui/material/Switch';\r\nimport { Alert, Snackbar } from '@mui/material';\r\nimport validator from 'validator';\r\n\r\nimport Button from 'components/CustomButton';\r\nimport ProfileImage from 'components/ProfileImage';\r\n\r\nimport styles from './settings.module.css';\r\nimport { useAuth } from 'shared/context/authContext';\r\nimport ProfileService from 'shared/services/Profile.service';\r\n\r\n\r\nfunction PasswordSection({ onPasswordInfoChange, errors, changePassword }) {\r\n  if (changePassword) {\r\n    return (\r\n      <Stack\r\n        spacing={5}\r\n        direction=\"column\"\r\n      >\r\n        <div className={styles.inputComponent}>\r\n          <div className={styles.inputText}> New password </div>\r\n          <TextField\r\n            id=\"newPassword\"\r\n            required\r\n            label=\"New Password\"\r\n            type=\"password\"\r\n            style={{ width: '600px', background: 'white' }}\r\n            onChange={onPasswordInfoChange}\r\n            error={!!errors.newPassword}\r\n            helperText={errors.newPassword}\r\n          />\r\n        </div>\r\n\r\n        <div className={styles.inputComponent}>\r\n          <div className={styles.inputText}> Repeat new password </div>\r\n          <TextField\r\n            id=\"newPasswordRepeated\"\r\n            required\r\n            label=\"Repeat old password\"\r\n            type=\"password\"\r\n            style={{ width: '600px', background: 'white' }}\r\n            onChange={onPasswordInfoChange}\r\n            error={!!errors.newPasswordRepeated}\r\n            helperText={errors.newPasswordRepeated}\r\n          />\r\n        </div>\r\n      </Stack>\r\n    );\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction Settings() {\r\n  const [user] = useAuth();\r\n\r\n  // Password Change\r\n  const [changePassword, setChangePassword] = React.useState(false);\r\n  const handleChangePassword = () => setChangePassword(!changePassword);\r\n  // Errors\r\n  const [errors, setErrors] = useState({});\r\n  const [saveInProgress, setSaveInProgress] = useState(false);\r\n  const [isSnackbarVisible, setSnackbarVisible] = useState(false);\r\n\r\n  /* Input Text Fields */\r\n  // General Information\r\n  const [userInfo, setUserInfo] = useState({\r\n    firstName: user.firstName,\r\n    lastName: user.lastName,\r\n    emailAddress: user.email,\r\n    affiliation: user.note,\r\n  });\r\n\r\n  const onUserInfoChange = useCallback((e) => {\r\n    setUserInfo((prevState) => ({ ...prevState, [e.target.id]: e.target.value }));\r\n  }, [userInfo]);\r\n\r\n  // Password\r\n  const [passwordInfo, setPasswordInfo] = useState({\r\n    newPassword: '',\r\n    newPasswordRepeated: '',\r\n  });\r\n\r\n  const onPasswordInfoChange = (e) => {\r\n    setPasswordInfo((prevState) => ({ ...prevState, [e.target.id]: e.target.value }));\r\n  };\r\n\r\n  /* Input Validation */\r\n  function isValidInput() {\r\n    let currentErrors = {};\r\n    if (!validator.isEmail(userInfo.emailAddress)) {\r\n      currentErrors = { ...currentErrors, emailAddress: 'Please provide a valid email' };\r\n    }\r\n    if (userInfo.firstName === '') {\r\n      currentErrors = { ...currentErrors, firstname: 'Please enter your first name!' };\r\n    }\r\n    if (userInfo.lastName === '') {\r\n      currentErrors = { ...currentErrors, lastname: 'Please enter your last name!' };\r\n    }\r\n    setErrors(currentErrors);\r\n    return !Object.keys(currentErrors).length;\r\n  }\r\n\r\n  function isValidPasswordInfo() {\r\n    let newErrors = {};\r\n    // password correctly repeated?\r\n    if (passwordInfo.newPassword !== passwordInfo.newPasswordRepeated) {\r\n      newErrors = { ...newErrors, newPasswordRepeated: 'The passwords must match!' };\r\n    }\r\n    setErrors((currentErrors) => ({ ...currentErrors, ...newErrors }));\r\n    console.log(`${passwordInfo.newPassword} ${passwordInfo.newPasswordRepeated}`);\r\n    return !Object.keys(newErrors).length;\r\n  }\r\n\r\n  const saveUserData = () => {\r\n    if (isValidInput() && isValidPasswordInfo()) {\r\n      setSaveInProgress(true);\r\n      ProfileService.updateProfile(userInfo, changePassword ? passwordInfo.newPassword : null)\r\n        .catch((err) => {\r\n          setErrors((prevState) => ({ ...prevState, response: \"Couldn't save changes :/\" }));\r\n          console.log(err);\r\n        }).finally(() => {\r\n          setSaveInProgress(false);\r\n          setSnackbarVisible(true);\r\n        });\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <Stack\r\n        direction=\"column\"\r\n        sx={{\r\n          paddingTop: '100px',\r\n          paddingLeft: '130px',\r\n          display: 'flex',\r\n          width: '100%',\r\n          justifyContent: 'center',\r\n        }}\r\n      >\r\n        <div className={styles.title}>\r\n          <h1>Settings</h1>\r\n        </div>\r\n\r\n        <Stack\r\n          className={styles.background}\r\n          spacing={5}\r\n          direction=\"column\"\r\n        >\r\n          {/* Profile Image --------------------------------------------------------------*/}\r\n          <div className={styles.profilePicture}>\r\n            <ProfileImage sizePixels={180} editable />\r\n          </div>\r\n\r\n          {/* Input Fields --------------------------------------------------------------*/}\r\n          <Stack\r\n            spacing={2}\r\n            style={{ display: 'flex' }}\r\n            direction=\"row\"\r\n          >\r\n            <div className={styles.inputComponent}>\r\n              <div className={styles.inputText}> First Name </div>\r\n              <TextField\r\n                id=\"firstName\"\r\n                value={userInfo.firstName}\r\n                required\r\n                label=\"First Name\"\r\n                type=\"text\"\r\n                style={{ width: '290px', background: 'white' }}\r\n                onChange={onUserInfoChange}\r\n                error={!!errors.firstName}\r\n                helperText={errors.firstName}\r\n              />\r\n            </div>\r\n\r\n            <div className={styles.inputComponent}>\r\n              <div className={styles.inputText}> Last Name</div>\r\n              <TextField\r\n                id=\"lastName\"\r\n                value={userInfo.lastName}\r\n                required\r\n                label=\"Last Name\"\r\n                type=\"text\"\r\n                style={{ width: '290px', background: 'white' }}\r\n                onChange={onUserInfoChange}\r\n                error={!!errors.lastName}\r\n                helperText={errors.lastName}\r\n              />\r\n            </div>\r\n          </Stack>\r\n\r\n          <div className={styles.inputComponent}>\r\n            <div className={styles.inputText}> Email Address </div>\r\n            <TextField\r\n              id=\"emailAddress\"\r\n              disabled\r\n              value={userInfo.emailAddress}\r\n              required\r\n              label=\"Email\"\r\n              type=\"text\"\r\n              style={{ width: '600px', background: 'white' }}\r\n              onChange={onUserInfoChange}\r\n              error={!!errors.emailAddress}\r\n              helperText={errors.emailAddress}\r\n            />\r\n          </div>\r\n\r\n          <div className={styles.inputComponent}>\r\n            <div className={styles.inputText}>Affiliation</div>\r\n            <TextField\r\n              id=\"affiliation\"\r\n              value={userInfo.affiliation}\r\n              label=\"Affiliation (e.g. University or research institute)\"\r\n              type=\"text\"\r\n              style={{ width: '600px', background: 'white' }}\r\n              onChange={onUserInfoChange}\r\n            />\r\n          </div>\r\n\r\n          <div className={styles.inputComponent}>\r\n            <div className={styles.inputText}>Password</div>\r\n            <FormControlLabel\r\n              label=\"Change Password\"\r\n              sx={{ m: 1 }}\r\n              control={(\r\n                <Switch\r\n                  checked={changePassword}\r\n                  onClick={handleChangePassword}\r\n                />\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          <PasswordSection\r\n            errors={errors}\r\n            changePassword={changePassword}\r\n            passwordInfo={passwordInfo}\r\n            onPasswordInfoChange={onPasswordInfoChange}\r\n          />\r\n\r\n          <div style={{\r\n            display: 'flex',\r\n            justifyContent: 'flex-start',\r\n          }}\r\n          >\r\n            <Button disabled={saveInProgress} onClick={saveUserData}>\r\n              {saveInProgress ? 'Saving...' : 'Save'}\r\n            </Button>\r\n          </div>\r\n        </Stack>\r\n\r\n      </Stack>\r\n\r\n      {/* Snackbar --------------------------------------------------------------*/}\r\n      <Snackbar\r\n        open={isSnackbarVisible}\r\n        autoHideDuration={10000}\r\n        onClose={() => setSnackbarVisible(false)}\r\n      >\r\n        <Alert\r\n          severity={errors.response ? 'error' : 'success'}\r\n          sx={{ width: '100%' }}\r\n          onClose={() => setSnackbarVisible(false)}\r\n        >\r\n          {errors.response ? errors.response : 'Changes saved.'}\r\n        </Alert>\r\n      </Snackbar>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Settings;\r\n","import React, { useCallback, useState } from 'react';\r\nimport { Box, Typography, Button, Stack, TextField, TextareaAutosize } from \"@mui/material\";\r\nimport Input from 'components/Input/Input'\r\nimport HeaderView from 'components/general/HeaderView';\r\nimport CustomButton from \"components/CustomButton\";\r\nimport ContactForm from 'components/ContactForm';\r\n\r\nexport default function Help({ sidebarShown }) {\r\n  const [contactDetails, setContactDetails] = useState({\r\n    message: '',\r\n  });\r\n\r\n  const handleTextChange = useCallback((e) => {\r\n    setContactDetails((prevState) => ({ ...prevState, [e.target.id]: e.target.value }));\r\n  }, [setContactDetails]);\r\n\r\n  const formSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const data = {\r\n      message: contactDetails.message,\r\n    };\r\n\r\n    try {\r\n      // send POST to the server\r\n      // await axios.post(\"BACKEND_URL\", data);\r\n      setContactDetails({\r\n        message: '...sending',\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <HeaderView\r\n      sidebarShown={sidebarShown}\r\n      title=\"Contact Us\"\r\n    >\r\n\r\n      <Box sx={{margin: \"1em auto\", display: \"flex\", flexDirection: \"column\", alignItems: \"center\", textAlign: \"center\"}}>\r\n        <Typography fontWeight={400} fontSize=\"1.2em\">Please describe to us the problem you are experiencing in the contact form below.</Typography>\r\n      </Box>\r\n\r\n      <Box sx={{margin: \"1em auto\", display: \"flex\", flexDirection: \"column\", alignItems: \"center\", textAlign: \"center\"}}>\r\n        <Typography fontSize=\"1em\">We will get back to you as soon as possible.</Typography>\r\n      </Box>\r\n\r\n      <Box sx={{ position: \"relative\", width: \"60vw\", margin: \"1em auto\" }} >\r\n        {/* <Box sx={{\r\n          width: \"100%\",\r\n          margin: \"2em 0 0em 0\",\r\n          padding: \"2em 0em\",\r\n          boxShadow: \"0px 4px 6px rgba(0, 0, 0, 0.10), 0px 0px 1px rgba(0, 0, 0, 0.20)\",\r\n          borderRadius: \"10px\"\r\n        }}>\r\n          <Stack sx={{ width: \"80%\", margin: \"auto\" }} direction=\"column\" spacing={4}>\r\n            <Stack direction=\"row\" justifyContent=\"space-between\" spacing={2}>\r\n              <Input isRequired label=\"Email\" />\r\n              <Input isRequired label=\"First Name\" />\r\n              <Input isRequired label=\"Last Name\" />\r\n            </Stack>\r\n            <Input label=\"Subject\" maxLength={100} />\r\n            <Input isRequired label=\"Message\" multiline maxLength={1000} />\r\n            <Box sx={{display: \"flex\", flexDirection: \"row\", justifyContent: \"center\"}}>\r\n              <CustomButton>Send</CustomButton>\r\n            </Box>\r\n          </Stack>\r\n        </Box> */}\r\n        <ContactForm />\r\n      </Box>\r\n    </HeaderView>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { TabGroup } from 'components/Tab';\r\nimport { setSeachCategoryInUrl } from 'shared/utils/common/utils';\r\n\r\nconst SearchTabs = ({\r\n  value, searchParams, path, onChange = () => {},\r\n}) => {\r\n  let categories = ['atlases', 'models', 'teams', 'institutions', 'users'];\r\n  const keyword = searchParams.get('keyword');\r\n  const newParams = keyword ? `?keyword=${keyword}` : '';\r\n  categories = categories.map((category) => ({\r\n    label: category.toUpperCase(),\r\n    path: `${setSeachCategoryInUrl(path, category)}${newParams}`,\r\n  }));\r\n  // Not nice solution but TabGroup works only with integer at the moment.\r\n  const index = categories.findIndex(\r\n    (item) => item.label.toLowerCase() === value,\r\n  );\r\n  return (\r\n    <TabGroup\r\n      value={index}\r\n      onValueChange={() => onChange()}\r\n      setValue={() => onChange()}\r\n      tabsInfo={categories}\r\n    />\r\n  );\r\n};\r\n\r\nexport default SearchTabs;\r\n","import React from 'react';\r\n\r\nimport { List } from '@mui/material';\r\n\r\n// display the listing of the searched item\r\nfunction SearchResultList({\r\n  listItemWrapper, searchResult, user, fetchSearchHandler,\r\n}) {\r\n  const ListItemWrapper = listItemWrapper;\r\n  return (\r\n    <List style={{\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n    }}\r\n    >\r\n      {searchResult.map((searchedItem) => (\r\n        <ListItemWrapper\r\n          key={searchedItem.id}\r\n          item={searchedItem}\r\n          user={user}\r\n          onAction={fetchSearchHandler}\r\n        />\r\n      ))}\r\n    </List>\r\n  );\r\n}\r\n\r\nexport default SearchResultList;\r\n","import React from 'react';\r\n\r\nimport {\r\n  ListItem,\r\n  Stack,\r\n  Link,\r\n  Typography,\r\n  ListItemAvatar,\r\n  Avatar,\r\n} from '@mui/material';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport tittleToColor from 'shared/utils/stringColor';\r\n\r\n// Generic card component to reuse the same structure for the\r\n// different search card items as Institution, team, ...\r\nfunction SearchCard({\r\n  action, avatar, title, link,\r\n  primary, secondary, tertiary,\r\n  displayAvatar = false,\r\n}) {\r\n  return (\r\n    <ListItem divider alignItems=\"flex-start\" secondaryAction={action}>\r\n      {displayAvatar\r\n      && (\r\n      <ListItemAvatar spacing={10}>\r\n        <Avatar\r\n          sx={{ bgcolor: tittleToColor(title), width: 45, height: 45 }}\r\n          alt={title}\r\n          src={avatar || 'dummy.png'}\r\n        />\r\n      </ListItemAvatar>\r\n      )}\r\n      <Stack direction=\"column\" spacing={0.5}>\r\n        {/* primary */}\r\n        <Stack direction=\"row\" spacing={2} alignItems=\"center\">\r\n          <Link\r\n            sx={{ fontSize: '24px' }}\r\n            component={RouterLink}\r\n            to={link}\r\n            underline=\"hover\"\r\n          >\r\n            <b>{title}</b>\r\n          </Link>\r\n          {primary}\r\n        </Stack>\r\n        {/* secondary */}\r\n        <Typography sx={{ color: 'text.secondary' }}>\r\n          {secondary}\r\n        </Typography>\r\n        {/* tertiary */}\r\n        <Stack\r\n          direction=\"row\"\r\n          sx={{ color: 'text.secondary' }}\r\n          alignItems=\"flex-end\"\r\n          spacing={2}\r\n        >\r\n          {tertiary}\r\n        </Stack>\r\n      </Stack>\r\n    </ListItem>\r\n  );\r\n}\r\n\r\nexport default SearchCard;\r\n","import React from 'react';\r\n\r\nimport { Stack, Link, Tooltip } from '@mui/material';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\n// Common link with label component used in the search cards.\r\n// eslint-disable-next-line arrow-body-style\r\nfunction LabeledLink({\r\n  label, to, content, tooltip,\r\n}) {\r\n  return (\r\n    <Stack>\r\n      {!tooltip && <div>{label}</div>}\r\n      {tooltip && <Tooltip title={tooltip} placement=\"right\"><div>{label}</div></Tooltip>}\r\n      <Link\r\n        component={RouterLink}\r\n        to={to}\r\n        underline=\"hover\"\r\n      >\r\n        {content}\r\n      </Link>\r\n    </Stack>\r\n  );\r\n}\r\n\r\nexport default LabeledLink;\r\n","import React, { useState } from 'react';\r\nimport { Modal, ModalTitle } from 'components/Modal';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport Button from 'components/CustomButton';\r\nimport TeamService from 'shared/services/Team.service';\r\n\r\nfunction TeamJoinButton({ team, onJoin, isDisabled }) {\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  const handleOpenDialog = () => setDialogOpen(true);\r\n  const handleCloseDialog = () => setDialogOpen(false);\r\n\r\n  async function join() {\r\n    setErrorMessage('');\r\n    try {\r\n      await TeamService.joinTeam(team.id);\r\n      handleCloseDialog();\r\n      onJoin(team);\r\n    } catch (e) {\r\n      setErrorMessage(e.message);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button type=\"primary\" disabled={isDisabled} onClick={handleOpenDialog}>Join</Button>\r\n      <Modal\r\n        isOpen={dialogOpen}\r\n        setOpen={(o) => !o && handleCloseDialog()}\r\n      >\r\n        <ModalTitle>\r\n          Join\r\n        </ModalTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            Do you really want to join the team &quot;\r\n            {team.name}\r\n            &quot;?\r\n          </DialogContentText>\r\n          {\r\n            errorMessage && (\r\n              <DialogContentText id=\"alert-dialog-description\" color=\"error\">\r\n                {errorMessage}\r\n              </DialogContentText>\r\n            )\r\n          }\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleCloseDialog} type=\"critical\">Cancel</Button>\r\n          <Button onClick={() => join()} type=\"primary\" autoFocus>\r\n            Join\r\n          </Button>\r\n        </DialogActions>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TeamJoinButton;\r\n","import React from 'react';\r\n\r\nimport { Chip, Tooltip } from '@mui/material';\r\n\r\nimport SearchCard from '../SearchCard';\r\nimport LabeledLink from '../LabeledLink';\r\n\r\nimport TeamJoinButton from 'components/teams/detail/TeamJoinButton';\r\nimport { formatDate } from 'shared/utils/common/utils';\r\n\r\n// Card to display search result for a single team\r\n// eslint-disable-next-line arrow-body-style\r\nconst TeamCard = ({ item: team, user, onAction }) => {\r\n  const joinTeam = async () => {\r\n    onAction();\r\n  };\r\n\r\n  const visibility = team.visibility.toLowerCase().replace('_', ' ');\r\n  let canJoin = false; // target to remove if backend implements rules checks\r\n  let visibilityTooltip;\r\n  const isTeamMember = team.memberIds.includes(user._id); // check if user already joined\r\n\r\n  switch (visibility) {\r\n    case 'public':\r\n      visibilityTooltip = 'Anybody can join the team!';\r\n      canJoin = !isTeamMember;\r\n      break;\r\n    case 'private':\r\n      visibilityTooltip = 'Only invited members can join the team!';\r\n      canJoin = !isTeamMember && !!team.invitedMemberIds.includes(user._id);\r\n      // check if user is invited\r\n      break;\r\n    case 'by institution':\r\n      visibilityTooltip = 'Only institution members can join the team!';\r\n      // check if user is not member but part of institution\r\n      canJoin = !isTeamMember\r\n      && team.institutionId && team.institutionId.memberIds.includes(user._id);\r\n      break;\r\n    default:\r\n      visibilityTooltip = 'unknown';\r\n  }\r\n\r\n  return (\r\n    <SearchCard\r\n      action={canJoin && <TeamJoinButton team={team} onJoin={joinTeam} />}\r\n      title={team.title}\r\n      link={`/sequencer/teams/${team.id}`}\r\n      primary={(\r\n        // <Tag content={team.visibility} variant=\"primary-default\" />\r\n        <Tooltip title={visibilityTooltip} placement=\"right-end\">\r\n          <Chip label={visibility} color=\"primary\" size=\"small\" />\r\n        </Tooltip>\r\n        )}\r\n      secondary={team.updatedAt && `updated on ${formatDate(team.updatedAt)}`}\r\n      tertiary={(\r\n        <>\r\n          <Chip\r\n            label={`${team.memberIds.length} members`}\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            sx={{ color: 'text.secondary' }}\r\n          />\r\n          {team.institutionId && (\r\n            <LabeledLink\r\n              label=\"Institution\"\r\n              tooltip=\"The institution managing the team.\"\r\n              content={team.institutionId.name}\r\n              to={`/sequencer/institutions/${team.institutionId._id}`}\r\n            />\r\n          )}\r\n        </>\r\n      )}\r\n    />\r\n  );\r\n};\r\n\r\nexport default TeamCard;\r\n","import React from 'react';\r\n\r\nimport { Chip } from '@mui/material';\r\nimport SearchCard from '../SearchCard';\r\nimport { formatDate } from 'shared/utils/common/utils';\r\n\r\n// Card to display search result for a single institution\r\nfunction InstitutionCard({ item: institution }) {\r\n  return (\r\n    <SearchCard\r\n      title={institution.name}\r\n      avatar={institution.profilePictureURL}\r\n      displayAvatar\r\n      link={`/sequencer/institutions/${institution.id}`}\r\n      secondary={institution.updatedAt && `updated on ${formatDate(institution.updatedAt)}`}\r\n      tertiary={(\r\n        <>\r\n          <Chip\r\n            label={`${institution.memberIds.length} members`}\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            sx={{ color: 'text.secondary' }}\r\n          />\r\n          <Chip\r\n            label={`${institution.teams.length} teams`}\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            sx={{ color: 'text.secondary' }}\r\n          />\r\n        </>\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nexport default InstitutionCard;\r\n","import React from 'react';\r\n\r\nimport SearchCard from '../SearchCard';\r\n\r\n// Card to display search result for a single user\r\nfunction UserCard({ item: user }) {\r\n  return (\r\n    <SearchCard\r\n      avatar={user.avatarUrl}\r\n      title={`${user.firstName} ${user.lastName}`}\r\n      link={`/sequencer/users/${user._id}`}\r\n      secondary={` ${user.note}`}\r\n      displayAvatar\r\n      // tertiary={`${user.email}`}\r\n    />\r\n  );\r\n}\r\n\r\nexport default UserCard;\r\n","import { Typography, Box } from '@mui/material';\r\nimport React from 'react';\r\n\r\n// Component to display the feedback text\r\nconst ResultStatus = ({ count, searchedEntity, searchedKeyword }) => {\r\n  const countText = `${count} result${count === 1 ? '' : 's'}`;\r\n  const entityText = searchedEntity.charAt(0).toUpperCase() + searchedEntity.slice(1);\r\n  const keywordText = searchedKeyword && searchedKeyword !== '' && (\r\n    <>\r\n      matching\r\n      {' '}\r\n      <b>{searchedKeyword}</b>\r\n    </>\r\n  );\r\n  return (\r\n    <Box sx={{ m: 2 }}>\r\n      <Typography>\r\n        {`${countText} for ${entityText} `}\r\n        {keywordText}\r\n      </Typography>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ResultStatus;\r\n","/* eslint-disable */\r\n\r\nimport { Box, Button, Typography } from \"@mui/material\"\r\nimport { useRef, useState } from \"react\"\r\nimport { FaLessThanEqual } from \"react-icons/fa\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { colors } from \"shared/theme/colors\"\r\nimport CustomButton from \"components/CustomButton\";\r\n\r\n// Outlined Button specific to Models and Atlases\r\n/**\r\n * OutlinedButton\r\n * Specific to Model and Atlas Cards\r\n * @param content text content to be displayed\r\n * @param link button href link  \r\n */\r\nexport const OutlinedButton = ({ content, link = null, onClick, bg, color, bgHover, colorHover }) => {\r\n  return (\r\n    <Button\r\n      variant=\"outlined\"\r\n      disableRipple\r\n      href={link ? `#${link}` : null}\r\n      onClick={onClick}\r\n      sx={{\r\n        color: color ? color : colors.primary[100], borderWidth: \"2px\", borderColor: bg ? bg : colors.primary[100], borderRadius: \"1.2rem\", justifyContent: 'center', textAlign: 'center',\r\n        \":hover\": { borderColor: colorHover ? colorHover : '#01579B', borderWidth: \"2px\", backgroundColor: bgHover ? bgHover : colors.primary[100], color: colorHover ? colorHover : '#01579B', transition: '0.5s' }\r\n      }}\r\n    >\r\n      {content}\r\n    </Button>\r\n  )\r\n}\r\n\r\n/**\r\n * ModelCard\r\n * @param width default value 100% of parent\r\n * @param height default value 100% of parent\r\n * @param title\r\n * @param description\r\n * @param mapLink onHover button Map url\r\n * @param learnMoreLink onHover button Learn More url\r\n */\r\nexport const ModelCard = ({ width = \"100%\", height = \"100%\", title, description, learnMoreLink, disabled = false, onSelect, selected = true, isSearchPage = false }) => {\r\n\r\n  const [hover, setHover] = useState(false)\r\n  const ref = useRef()\r\n\r\n  return (\r\n    <Box\r\n      ref={ref}\r\n      sx={{\r\n        width: width,\r\n        height: height,\r\n        position: \"relative\",\r\n        cursor: disabled ? \"default\" : \"pointer\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n      }}\r\n      onMouseEnter={() => setHover(true)}\r\n      onMouseLeave={() => setHover(false)}\r\n    >\r\n      {\r\n        !disabled && hover &&\r\n        <Box\r\n          style={{ background: \"linear-gradient(#4F83CC, #01579B)\" }}\r\n          sx={{\r\n            position: \"absolute\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            justifyContent: 'center',\r\n            borderRadius: \"1.2rem\",\r\n            cursor: \"pointer\",\r\n            opacity: 0.95,\r\n            boxShadow: \"0px 4px 6px 0px rgba(1, 87, 155, .20), 0px 0px 1px 0px rgba(1, 87, 155, .32)\"\r\n          }}>\r\n          <Box\r\n            sx={{\r\n              margin: 'auto',\r\n              width: '70%',\r\n              height: 'auto',\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              justifyContent: 'space-evenly',\r\n              gap: '5px',\r\n            }}\r\n          >\r\n            {!isSearchPage && <OutlinedButton content=\"Select\" onClick={onSelect} />}\r\n            <OutlinedButton content=\"Learn More\" link={learnMoreLink} onClick={(e) => e.stopPropagation()} />\r\n            {\r\n              disabled &&\r\n              <Typography sx={{ color: colors.primary[900], fontSize: \"12px\", textDecoration: 'underline', textAlign: \"center\" }}>\r\n                Model unavailable for mapping\r\n              </Typography>\r\n            }\r\n          </Box>\r\n        </Box>\r\n      }\r\n      {/* DISABLED OVERLAY BOX */}\r\n      {\r\n        disabled &&\r\n        <Box\r\n          style={{ background: \"linear-gradient(#e7e7e7, #d0d0d0)\" }}\r\n          sx={{\r\n            position: \"absolute\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            justifyContent: 'center',\r\n            borderRadius: \"1.2rem\",\r\n            cursor: \"pointer\",\r\n            opacity: 0.95,\r\n          }}>\r\n          {\r\n            !hover &&\r\n            <Typography sx={{ position: \"absolute\", fontSize: \"12px\", fontWeight: \"bold\", color: colors.neutral[900], textAlign: \"center\", left: \"28%\" }}>\r\n              Not Compatible\r\n            </Typography>\r\n          }\r\n          <Box\r\n            sx={{\r\n              margin: 'auto',\r\n              width: '70%',\r\n              height: 'auto',\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              justifyContent: 'space-evenly',\r\n              gap: '5px',\r\n            }}\r\n          >\r\n\r\n            {hover && <OutlinedButton content=\"Learn More\" link={learnMoreLink} bg={colors.neutral[800]} color={colors.neutral[800]} onClick={(e) => e.stopPropagation()} bgHover={colors.neutral[100]} colorHover={colors.neutral[600]} />}\r\n            {/* <CustomButton type=\"outlined\" href={learnMoreLink ? `#${learnMoreLink}` : null} onClick={(e) => e.stopPropagation()}>Learn More</CustomButton> */}\r\n          </Box>\r\n        </Box>\r\n      }\r\n      { // Card view when not disabled and no hover.\r\n        !disabled &&\r\n        <Box sx={{\r\n          width: '100%',\r\n          height: \"225px\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          p: \"1.2rem\",\r\n          boxShadow: hover ? \"none\" : \"0px 0px 10px rgba(0, 0, 0, 0.15)\",\r\n          borderRadius: \"1.2rem\",\r\n          borderStyle: \"solid\",\r\n          borderColor: selected ? \"#008BF5\" : 'transparent',\r\n          borderWidth: \"4px\",\r\n        }}\r\n        >\r\n          <Typography sx={{ fontSize: \"1.4rem\", fontWeight: \"bold\" }}>{`${title}`}</Typography>\r\n          <Typography\r\n              className=\"modelDescription\"\r\n              sx={{\r\n                paddingTop: '10px',\r\n                fontSize: \"1rem\",\r\n                color: colors.neutral[800],\r\n                display: '-webkit-box',\r\n                overflow: 'hidden',\r\n                WebkitBoxOrient: 'vertical',\r\n                WebkitLineClamp: 2,\r\n              }}>{description}</Typography>\r\n          \r\n          {/* <Typography sx={{ fontSize: \"1rem\", color: colors.neutral[800] }}>{description}</Typography> */}\r\n    </Box>}\r\n{ // Card view when the model is not compatible with the chosen atlas\r\n  disabled &&\r\n    <Box sx={{\r\n      width: '100%',\r\n      height: \"100%\",\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      p: \"1.2rem\",\r\n      borderRadius: \"1.2rem\",\r\n    }}\r\n    >\r\n      <Typography sx={{ fontSize: \"1.4rem\", fontWeight: \"bold\" }}>{title}</Typography>\r\n      <Typography sx={{ fontSize: \"1rem\", color: colors.neutral[800] }}>{description}</Typography>\r\n    </Box>\r\n}\r\n    </Box >\r\n  )\r\n}\r\n","/* eslint-disable react/react-in-jsx-scope */\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { Box, Typography } from '@mui/material';\r\nimport { OutlinedButton } from './ModelCard';\r\nimport { colors } from 'shared/theme/colors';\r\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\r\n\r\n/**\r\n * Atlas Card\r\n * @param width default value is 100% of parent\r\n * @param height default value is 100% of parent\r\n * @param title title of AtlasCard\r\n * @param imgLink thumbnail photo url\r\n * @param modalities\r\n * @param cellsInReference\r\n * @param species\r\n * @param mapLink onHover button Map url\r\n * @param learnMoreLink onHover button Learn More url\r\n */\r\nexport default function AtlasCard({\r\n  width = '100%', height = '100%', title, atlasId, imgLink, modalities,\r\n  cellsInReference, species, learnMoreLink, onSelect, selected = false, disabled = false,\r\n  isSearchPage = false\r\n}) {\r\n  // check if the mouse is hovering above the card\r\n  const [isHover, setHover] = useState(false);\r\n\r\n  // check if the card is flat(width > height)\r\n  {/*const [isFlat, setFlat] = useState(false);*/}\r\n\r\n  // ref to get the out most Box\r\n  const boxRef = useRef();\r\n  const history = useHistory();\r\n  const path = history.location.pathname;\r\n  {/*useEffect(() => {\r\n    // each time the card is rerendered, check if the card is flat or not\r\n    if (boxRef.current.clientWidth > boxRef.current.clientHeight) setFlat(true);\r\n  });*/}\r\n\r\n  const showModalities = () => {\r\n    // TODO fix this\r\n    if (modalities[0].length < 10) return modalities;\r\n    return `${modalities[0].split(',')[0]}`;\r\n  };\r\n\r\n  const AtlasInfo = (title, data) => (\r\n    <Box\r\n      sx={{\r\n        display: 'flex',\r\n        flexDirection: data.length > 10 ? 'column' : 'row',\r\n        gap: '5%',\r\n      }}\r\n    >\r\n      <Typography\r\n        sx={{\r\n          fontSize: '1rem',\r\n          fontWeight: 'bold',\r\n        }}\r\n      >\r\n        {title}\r\n      </Typography>\r\n      <Typography>{data}</Typography>\r\n    </Box>\r\n  );\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        width, height,\r\n      }}\r\n    >\r\n      <Box\r\n        ref={boxRef}\r\n        onMouseEnter={() => setHover(true)}\r\n        onMouseLeave={() => setHover(false)}\r\n        sx={{\r\n          width: '100%',\r\n          height: '100%',\r\n          position: 'relative',\r\n          cursor: disabled ? 'default' : 'pointer',\r\n        }}\r\n      >\r\n        {\r\n          !disabled && isHover\r\n          && (\r\n            <Box\r\n              style={{\r\n                background: 'linear-gradient(#4F83CC, #01579B)',\r\n              }}\r\n              sx={{\r\n                position: 'absolute',\r\n                width: '100%',\r\n                height: '100%',\r\n                borderRadius: '1.2rem',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                justifyContent: 'center',\r\n                cursor: 'pointer',\r\n                opacity: 0.95,\r\n                boxShadow: '0px 4px 6px 0px rgba(1, 87, 155, .20), 0px 0px 1px 0px rgba(1, 87, 155, .32)',\r\n              }}\r\n            >\r\n              <Box\r\n                sx={{\r\n                  margin: 'auto',\r\n                  width: '70%',\r\n                  height: 'auto',\r\n                  display: 'flex',\r\n                  flexDirection: 'column',\r\n                  justifyContent: 'space-evenly',\r\n                  gap: '5px',\r\n                }}\r\n              >\r\n                {\r\n                  !isSearchPage &&\r\n                  <OutlinedButton\r\n                    content=\"Select\"\r\n                    onClick={onSelect}\r\n                  />\r\n                }\r\n                <OutlinedButton\r\n                  content=\"Learn More\"\r\n                  link={learnMoreLink}\r\n                  onClick={() => {\r\n                    localStorage.setItem('atlasId', atlasId);\r\n                  }}\r\n                />\r\n                {\r\n                disabled\r\n                && (\r\n                <Typography sx={{\r\n                  color: colors.primary[900], fontSize: '12px', textDecoration: 'underline', textAlign: 'center',\r\n                }}\r\n                >\r\n                  Atlas unavailable for mapping with selected model\r\n                </Typography>\r\n                )\r\n              }\r\n              </Box>\r\n            </Box>\r\n          )\r\n        }\r\n\r\n        {/* DISABLED OVERLAY BOX */}\r\n        {\r\n          disabled &&\r\n          <Box\r\n            style={{ background: \"linear-gradient(#e7e7e7, #d0d0d0)\" }}\r\n            sx={{\r\n              position: \"absolute\",\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              justifyContent: 'center',\r\n              borderRadius: \"1.2rem\",\r\n              cursor: \"pointer\",\r\n              opacity: 0.95,\r\n            }}>\r\n            { \r\n              !isHover && \r\n              <Typography sx={{ position: \"absolute\", fontSize: \"12px\", fontWeight: \"bold\", color: colors.neutral[900], textAlign: \"center\", left: \"28%\" }}>\r\n                Not Compatible\r\n              </Typography>\r\n            }\r\n            <Box\r\n              sx={{\r\n                margin: 'auto',\r\n                width: '70%',\r\n                height: 'auto',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                justifyContent: 'space-evenly',\r\n                gap: '5px',\r\n              }}\r\n            >\r\n\r\n              { isHover && <OutlinedButton content=\"Learn More\" link={learnMoreLink} bg={colors.neutral[800]} color={colors.neutral[800]} onClick={(e) => e.stopPropagation()} bgHover={colors.neutral[100]} colorHover={colors.neutral[600]}/> }\r\n              {/* <CustomButton type=\"outlined\" href={learnMoreLink ? `#${learnMoreLink}` : null} onClick={(e) => e.stopPropagation()}>Learn More</CustomButton> */}\r\n            </Box>\r\n          </Box>\r\n        }\r\n        { !disabled\r\n          && (\r\n          <Box\r\n            sx={{\r\n              width: '100%',\r\n              height: '100%',\r\n              padding: '1rem',\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              boxShadow: isHover ? 'none' : '0px 4px 6px 0px rgba(33, 37, 41, .2), 0px 0px 1px 0px rgba(33, 37, 41, .32)',\r\n              borderRadius: '1.2rem',\r\n              justifyContent: 'center',\r\n              borderStyle: 'solid',\r\n              borderColor: selected ? '#008BF5' : 'transparent',\r\n              borderWidth: '4px',\r\n            }}\r\n          >\r\n            <Typography\r\n              sx={{\r\n                fontSize: '1.4rem',\r\n                fontWeight: 'bold',\r\n              }}\r\n            >\r\n              {title}\r\n            </Typography>\r\n\r\n            <Box\r\n              component=\"img\"\r\n              src={imgLink}\r\n              alt=\"Atlas preview img\"\r\n              sx={{\r\n                width: '90%',\r\n                objectFit: 'cover',\r\n                alignSelf: 'center',\r\n              }}\r\n            />\r\n            <Box sx={{\r\n              display: 'flex', flexDirection: 'column', m: '5px ', justifyContent: 'space-evenly', height: '100%',\r\n            }}\r\n            >\r\n              {AtlasInfo('Modalities', showModalities())}\r\n              {AtlasInfo('Species', species)}\r\n            </Box>\r\n          </Box>\r\n          )}\r\n        {\r\n          disabled\r\n          && (\r\n          <Box sx={{\r\n            width: '100%',\r\n            height: '100%',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            p: '1.2rem',\r\n            borderRadius: '1.2rem',\r\n          }}\r\n          >\r\n            <Typography sx={{ fontSize: '1.4rem', fontWeight: 'bold' }}>{title}</Typography>\r\n            <Box\r\n              component=\"img\"\r\n              src={imgLink}\r\n              alt=\"Atlas preview img\"\r\n              sx={{\r\n                width: '90%',\r\n                objectFit: 'cover',\r\n                alignSelf: 'center',\r\n              }}\r\n            />\r\n            <Box sx={{\r\n              display: 'flex', flexDirection: 'column', m: '5px ', justifyContent: 'space-evenly', height: '100%',\r\n            }}\r\n            >\r\n              {AtlasInfo('Modalities', showModalities())}\r\n              {AtlasInfo('Species', species)}\r\n            </Box>\r\n          </Box>\r\n          )\r\n        }\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Box } from '@mui/material';\r\nimport Grid from '@mui/material/Grid';\r\nimport AtlasCard from 'components/Cards/AtlasCard';\r\nimport styles from './atlasesGrid.module.css';\r\n\r\nconst AtlasesGrid = ({\r\n  atlases, path, selectedAtlas = null,\r\n  handleAtlasSelection = null, selectedModel = null, isSearchPage = false,\r\n}) => (\r\n  <Box\r\n    className={styles.atlasContainer}\r\n    mb=\"2em\"\r\n    pb=\"1.5em\"\r\n    sx={{\r\n      minHeight: '50vh',\r\n    }}\r\n  >\r\n    <Grid container spacing={3}>\r\n      {atlases ? atlases.map((atlas) => (\r\n        <Grid key={atlas._id} item xs={12} sm={6} md={4} lg={3}>\r\n          <AtlasCard\r\n            atlasId={atlas._id}\r\n            imgLink={atlas.previewPictureURL}\r\n            species={atlas.species}\r\n            modalities={atlas.modalities}\r\n            title={atlas.name}\r\n            learnMoreLink={`${path}/atlases/${atlas._id}`}\r\n            onSelect={() => { if (handleAtlasSelection) handleAtlasSelection(atlas); }}\r\n            selected={selectedAtlas && selectedAtlas.name === atlas.name}\r\n            disabled={selectedModel && !atlas.compatibleModels.some(\r\n              (element) => element.toLowerCase() === selectedModel.name.toLowerCase(),\r\n            )}\r\n            isSearchPage={isSearchPage}\r\n          />\r\n        </Grid>\r\n      )) : <div />}\r\n    </Grid>\r\n  </Box>\r\n);\r\n\r\nexport default AtlasesGrid;\r\n","import React from 'react';\r\nimport { Box } from '@mui/material';\r\nimport Grid from '@mui/material/Grid';\r\nimport { ModelCard } from 'components/Cards/ModelCard';\r\n\r\nimport styles from './modelsGrid.module.css';\r\n\r\nconst ModelsGrid = ({\r\n  models, path, compatibleModels = null, selectedModel = null, handleModelSelection = null, isSearchPage = false,\r\n}) => (\r\n  <Box className={styles.cardsContainer} mb=\"2em\" pb=\"1.5em\" sx={{ minHeight: '50vh' }}>\r\n    <Grid container spacing={3}>\r\n      {models && models.map((model) => (\r\n        <Grid key={model._id} item xs={12} sm={6} md={4} lg={3}>\r\n          <ModelCard\r\n            title={model.name}\r\n            description={model.description}\r\n            learnMoreLink={`${path}/models/${model._id}`}\r\n            disabled={compatibleModels && (!compatibleModels.map((m) => m.toLowerCase()).includes(model.name.toLowerCase()) || compatibleModels.length == 0)}\r\n            onSelect={() => { if (handleModelSelection) handleModelSelection(model); }}\r\n            selected={selectedModel && selectedModel.name === model.name}\r\n            isSearchPage={isSearchPage}\r\n          />\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  </Box>\r\n);\r\n\r\nexport default ModelsGrid;\r\n","import { CircularProgress } from '@mui/material';\r\nimport { Box } from '@mui/system';\r\nimport ResultVisualization from 'components/GeneMapper/ResultVisualization';\r\nimport { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport axiosInstance from 'shared/services/axiosInstance';\r\n\r\nexport default function () {\r\n  const { id } = useParams();\r\n  const [data, setData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    axiosInstance\r\n      .get(`/atlas/${id}/visualization`)\r\n      .then((data) => setData(data));\r\n  }, []);\r\n  return (\r\n    <Box sx={{ height: 500 }}>\r\n      {!data && <CircularProgress />}\r\n      {data && <ResultVisualization dataUrl={data.data} onlyUmap />}\r\n    </Box>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport {\r\n  Switch, Route, Redirect,\r\n} from 'react-router-dom';\r\n\r\nimport AtlasResult from 'views/References/AtlasResult';\r\nimport LearnMoreAtlas from 'views/References/LearnMoreAtlas';\r\nimport LearnMoreModel from 'views/References/LearnMoreModel';\r\n\r\nconst ReferenceRoutes = ({\r\n  path, atlases, models, handleSelectAtlases, handleSelectModels,\r\n}) => (\r\n  <Switch>\r\n    <Route\r\n      exact\r\n      path={`${path}/atlases`}\r\n      render={() => atlases}\r\n    />\r\n    <Route\r\n      exact\r\n      path={`${path}/models`}\r\n      render={() => models}\r\n    />\r\n    <Route exact path={`${path}/models/:id`} render={() => <LearnMoreModel handleSelect={handleSelectModels} />} />\r\n    <Route exact path={`${path}/atlases/:id/visualization`} render={() => <AtlasResult />} />\r\n    <Route exact path={`${path}/atlases/:id`} render={() => <LearnMoreAtlas handleSelect={handleSelectAtlases} />} />\r\n    <Redirect to={`${path}/atlases`} />\r\n  </Switch>\r\n);\r\n\r\nexport default ReferenceRoutes;\r\n","import React from 'react';\r\n\r\nimport {\r\n  useRouteMatch, Switch, Route,\r\n} from 'react-router-dom';\r\nimport SearchResultList from '../SearchResultList';\r\nimport TeamCard from '../SearchResultList/TeamCard';\r\nimport InstitutionCard from '../SearchResultList/InstitutionCard';\r\nimport UserCard from '../SearchResultList/UserCard';\r\nimport ResultStatus from '../ResultStatus';\r\nimport { setSeachCategoryInUrl } from 'shared/utils/common/utils';\r\nimport AtlasesGrid from 'components/Grids/AtlasesGrid';\r\nimport ModelsGrid from 'components/Grids/ModelsGrid';\r\nimport ReferenceRoutes from 'components/ReferencePageComponents/ReferenceRoutes';\r\n\r\n// wrapper component to display the searched items\r\nfunction SearchContent({\r\n  searchResult, searchCategory, searchedKeyword, user, fetchSearchHandler,\r\n}) {\r\n  const { path } = useRouteMatch();\r\n\r\n  const renderSearchResultsList = (listItemWrapper) => (\r\n    <SearchResultList\r\n      listItemWrapper={listItemWrapper}\r\n      searchResult={searchResult}\r\n      user={user}\r\n      fetchSearchHandler={fetchSearchHandler}\r\n    />\r\n  );\r\n\r\n  const atlases = <AtlasesGrid atlases={searchResult} searchedKeyword={searchedKeyword} path=\"/sequencer/search\" isSearchPage/>;\r\n  const models = <ModelsGrid models={searchResult} searchedKeyword={searchedKeyword} path=\"/sequencer/search\" isSearchPage/>;\r\n  return (\r\n    <>\r\n      <ResultStatus\r\n        count={searchResult.length}\r\n        searchedEntity={searchCategory}\r\n        searchedKeyword={searchedKeyword}\r\n      />\r\n      <Switch>\r\n        <Route path={setSeachCategoryInUrl(path, 'teams')}>\r\n          {renderSearchResultsList(TeamCard)}\r\n        </Route>\r\n        <Route path={setSeachCategoryInUrl(path, 'institutions')}>\r\n          {renderSearchResultsList(InstitutionCard)}\r\n        </Route>\r\n        <Route path={setSeachCategoryInUrl(path, 'users')}>\r\n          {renderSearchResultsList(UserCard)}\r\n        </Route>\r\n        <Route>\r\n          <ReferenceRoutes atlases={atlases} models={models} path=\"/sequencer/search\" />\r\n        </Route>\r\n      </Switch>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SearchContent;\r\n","import React from 'react';\r\n\r\nimport {\r\n  Select, MenuItem, Stack, Typography,\r\n} from '@mui/material';\r\n\r\n// Probably tem,prorary component to display filter options\r\nfunction LabeledSelect({\r\n  label, value, onChange, defaultValue, items,\r\n}) {\r\n  return (\r\n    <Stack\r\n      direction=\"row\"\r\n      spacing={2}\r\n      alignItems=\"center\"\r\n      justifyContent=\"flex-end\"\r\n    >\r\n      <Typography sx={{ fontWeight: 'bold' }}>{label}</Typography>\r\n      <Select value={value || defaultValue} onChange={onChange} displayEmpty>\r\n        {items.map((item) => (\r\n          <MenuItem value={item.value}>{item.label}</MenuItem>\r\n        ))}\r\n      </Select>\r\n    </Stack>\r\n  );\r\n}\r\n\r\nexport default LabeledSelect;\r\n","import React from 'react';\r\nimport LabeledSelect from '../LabeledSelect';\r\n\r\nconst DEFAULT_SORT_ITEMS = [\r\n  { label: 'Name', value: 'name' },\r\n  { label: 'Last updated', value: 'updatedAt' },\r\n];\r\n\r\n// General filter that is needed in all categories\r\nconst GeneralFilter = ({\r\n  sortBy, onChange, sortItems = DEFAULT_SORT_ITEMS, defaultValue = 'name',\r\n}) => {\r\n  const sortItem = sortItems.find((item) => item.value === sortBy);\r\n\r\n  return (\r\n    <LabeledSelect\r\n      label=\"Sort by\"\r\n      value={sortItem && sortItem.value}\r\n      defaultValue={defaultValue}\r\n      onChange={(event) => onChange('sortBy', event.target.value)}\r\n      items={sortItems}\r\n    />\r\n  );\r\n};\r\n\r\nexport default GeneralFilter;\r\n","import React from 'react';\r\nimport LabeledSelect from '../LabeledSelect';\r\n\r\n// Teams Filter needed only in the team category\r\nconst TeamsFilter = ({ visibility, onChange }) => {\r\n  const visibilityItems = [\r\n    { label: 'All', value: '' },\r\n    { label: 'Public', value: 'PUBLIC' },\r\n    { label: 'Private', value: 'PRIVATE' },\r\n    { label: 'By institution', value: 'BY_INSTITUTION' },\r\n  ];\r\n\r\n  return (\r\n    <LabeledSelect\r\n      label=\"Access rights\"\r\n      value={visibility}\r\n      defaultValue=\"\"\r\n      onChange={(event) => onChange('visibility', event.target.value)}\r\n      items={visibilityItems}\r\n    />\r\n  );\r\n};\r\n\r\nexport default TeamsFilter;\r\n","import React from 'react';\r\nimport {\r\n  FormGroup, Box,\r\n} from '@mui/material';\r\nimport LabeledSelect from 'components/SearchPageComponents/Filter/LabeledSelect';\r\n\r\nconst FilterItem = ({ children }) => <Box sx={{ margin: 0.5 }}>{children}</Box>;\r\n\r\n// General filter that is needed in all categories\r\nconst AtlasFilter = ({ sortBy, onChange }) => {\r\n  const sortItems = [\r\n    { label: 'Name', value: 'name' },\r\n    { label: 'Last updated', value: 'lastUpdated' },\r\n    { label: 'Number of Cells', value: 'numberOfCells' },\r\n  ];\r\n\r\n  return (\r\n    <FormGroup sx={{ alignItems: 'start' }}>\r\n      <FilterItem>\r\n        <LabeledSelect\r\n          label=\"Sort by\"\r\n          value={sortBy}\r\n          defaultValue=\"name\"\r\n          onChange={(event) => onChange('sortBy', event.target.value)}\r\n          items={sortItems}\r\n        />\r\n      </FilterItem>\r\n    </FormGroup>\r\n  );\r\n};\r\n\r\nexport default AtlasFilter;\r\n","import React from 'react';\r\nimport { FormGroup, Box } from '@mui/material';\r\nimport { Route } from 'react-router-dom';\r\nimport { setSeachCategoryInUrl } from 'shared/utils/common/utils';\r\nimport { GeneralCard } from 'components/Cards/GeneralCard';\r\nimport GeneralFilter from './GeneralFilter';\r\nimport TeamsFilter from './TeamsFilter';\r\nimport AtlasFilter from 'components/ReferencePageComponents/Filter/AtlasFilter';\r\n\r\nconst FilterItem = ({ children }) => <Box sx={{ margin: 0.5 }}>{children}</Box>;\r\n\r\n// Component storing the necessary filter\r\nfunction Filter({ path, searchParams, updateQueryParams }) {\r\n  return (\r\n    <GeneralCard>\r\n      <FormGroup>\r\n        <Route path={[setSeachCategoryInUrl(path, 'teams'),\r\n          setSeachCategoryInUrl(path, 'institutions'),\r\n          setSeachCategoryInUrl(path, 'models')]}\r\n        >\r\n          <FilterItem>\r\n            <GeneralFilter\r\n              sortBy={searchParams.get('sortBy')}\r\n              onChange={(param, value) => updateQueryParams(param, value)}\r\n            />\r\n          </FilterItem>\r\n          <Route path={setSeachCategoryInUrl(path, 'teams')}>\r\n            <FilterItem>\r\n              <TeamsFilter\r\n                visibility={searchParams.get('visibility')}\r\n                onChange={(param, value) => updateQueryParams(param, value)}\r\n              />\r\n            </FilterItem>\r\n          </Route>\r\n        </Route>\r\n        <Route path={setSeachCategoryInUrl(path, 'atlases')}>\r\n          <AtlasFilter\r\n            sortBy={searchParams.get('sortBy')}\r\n            onChange={(param, value) => updateQueryParams(param, value)}\r\n          />\r\n        </Route>\r\n        <Route path={setSeachCategoryInUrl(path, 'users')}>\r\n          <FilterItem>\r\n            <GeneralFilter\r\n              sortBy={searchParams.get('sortBy')}\r\n              onChange={(param, value) => updateQueryParams(param, value)}\r\n              sortItems={[{ label: 'Name', value: 'name' }]}\r\n              defaultValue=\"name\"\r\n            />\r\n          </FilterItem>\r\n        </Route>\r\n      </FormGroup>\r\n    </GeneralCard>\r\n  );\r\n}\r\n\r\nexport default Filter;\r\n","export function applyModelFilters(models, searchedKeyword, searchParams) {\r\n  const searchedModels = models.filter(\r\n    (item) => item.name.toLowerCase().includes(searchedKeyword.toLowerCase()) );\r\n  if (searchParams.get('sortBy') === 'name' || searchParams.get('sortBy') === null) {\r\n    searchedModels.sort((a, b) => {\r\n      const nameA = a.name.toUpperCase();\r\n      const nameB = b.name.toUpperCase();\r\n      if (nameA < nameB) {\r\n        return -1;\r\n      }\r\n      if (nameA > nameB) {\r\n        return 1;\r\n      }\r\n      return 0;\r\n    });\r\n  }\r\n  return searchedModels;\r\n}\r\n\r\nexport function applyAtlasFilters(atlases, searchedKeyword, searchParams) {\r\n  const searchedAtlases = atlases.filter(\r\n    (item) => item.name.toLowerCase().includes(searchedKeyword.toLowerCase()),\r\n  );\r\n  if (searchParams.get('sortBy') === 'name' || searchParams.get('sortBy') === null) {\r\n    searchedAtlases.sort((a, b) => {\r\n      const nameA = a.name.toUpperCase();\r\n      const nameB = b.name.toUpperCase();\r\n      if (nameA < nameB) {\r\n        return -1;\r\n      }\r\n      if (nameA > nameB) {\r\n        return 1;\r\n      }\r\n      return 0;\r\n    });\r\n  } else if (searchParams.get('sortBy') === 'numberOfCells') {\r\n    searchedAtlases.sort((a, b) => a.numberOfCells - b.numberOfCells);\r\n  }\r\n  return searchedAtlases;\r\n}\r\n","import React, { useCallback, useState, useEffect } from 'react';\r\nimport { Box, Stack, CircularProgress } from '@mui/material';\r\nimport {\r\n  useHistory,\r\n  useLocation,\r\n  useParams,\r\n  useRouteMatch,\r\n} from 'react-router-dom';\r\n\r\nimport styles from './search.module.css';\r\nimport SearchTabs from 'components/SearchPageComponents/SearchTabs';\r\nimport SearchContent from 'components/SearchPageComponents/SearchContent';\r\nimport Filter from 'components/SearchPageComponents/Filter';\r\nimport Search from 'components/Search';\r\nimport UserService from 'shared/services/User.service';\r\nimport TeamService from 'shared/services/Team.service';\r\nimport InstitutionService from 'shared/services/Institution.service';\r\n\r\nimport { useAuth } from 'shared/context/authContext';\r\nimport ProjectService from 'shared/services/Project.service';\r\nimport AtlasService from 'shared/services/Atlas.service';\r\nimport ModelService from 'shared/services/Model.service';\r\n\r\nimport { applyModelFilters, applyAtlasFilters } from 'shared/utils/filter';\r\nimport HeaderView from 'components/general/HeaderView';\r\nimport { GiConsoleController } from 'react-icons/gi';\r\n\r\nconst SearchPage = () => {\r\n  const [user] = useAuth();\r\n\r\n  // state managed in path and query params\r\n  const history = useHistory();\r\n  const { search } = useLocation();\r\n  const { path } = useRouteMatch();\r\n\r\n  const searchParams = new URLSearchParams(search);\r\n\r\n  // category of the searched items (teams/institutions/users)\r\n  const { searchCategory } = useParams();\r\n  const searchedKeyword = searchParams.get('keyword') || '';\r\n\r\n  const [searchRequestResult, setSearchRequestResult] = useState([]);\r\n  const [loadedCategory, setLoadedCategory] = useState('');\r\n\r\n  // check if searchRequestResult is of the requested category\r\n  const isLoading = loadedCategory !== searchCategory;\r\n\r\n  // function to update the state in the URL\r\n  const updateQueryParams = (param, value) => {\r\n    const params = new URLSearchParams(history.location.search);\r\n    if (value) {\r\n      params.set(param, value);\r\n    } else {\r\n      params.delete(param);\r\n    }\r\n\r\n    history.push({\r\n      pathname: history.location.pathname,\r\n      search: params.toString(),\r\n    });\r\n  };\r\n\r\n  const searchedKeywordChangeHandler = (value) => {\r\n    updateQueryParams('keyword', value);\r\n  };\r\n\r\n  const fetchSearchHandler = useCallback(async () => {\r\n    try {\r\n      let searchResponse = [];\r\n      const urlParams = new URLSearchParams(searchParams);\r\n      const filterParams = Object.fromEntries(urlParams);\r\n      switch (searchCategory) {\r\n        case 'users':\r\n          let res = await UserService.getUsers(filterParams);\r\n          // only show users that are not temporary\r\n          searchResponse = res.filter(obj => obj.note !== \"temporary_user\");\r\n          break;\r\n        case 'teams':\r\n          searchResponse = await TeamService.getTeams(filterParams);\r\n          break;\r\n        case 'institutions':\r\n          searchResponse = await InstitutionService.getInstitutions(filterParams);\r\n          break;\r\n        case 'projects':\r\n          searchResponse = await ProjectService.getProjects(filterParams);\r\n          break;\r\n        case 'atlases':\r\n          searchResponse = await AtlasService.getAtlases();\r\n          searchResponse = applyAtlasFilters(searchResponse, filterParams.keyword || '', urlParams);\r\n          break;\r\n        case 'models':\r\n          searchResponse = await ModelService.getModels();\r\n          searchResponse = applyModelFilters(searchResponse, filterParams.keyword || '', urlParams);\r\n          break;\r\n        default:\r\n      }\r\n      setSearchRequestResult(searchResponse);\r\n    } catch (e) {\r\n      setSearchRequestResult([]);\r\n      console.log(e);\r\n    } finally {\r\n      setLoadedCategory(searchCategory);\r\n    }\r\n  }, [searchCategory, search]);\r\n\r\n  useEffect(() => {\r\n    fetchSearchHandler();\r\n  }, [fetchSearchHandler]);\r\n\r\n  return (\r\n    <HeaderView title=\"Search\">\r\n      <Box sx={{ margin: 'auto', maxWidth: 1200 }}>\r\n        <Box sx={{ width: { xs: '100%', sm: '100%', md: '40%' }, marginBlock: '2%' }}>\r\n          <Search\r\n            filterComponent={(\r\n              <Filter\r\n                searchParams={searchParams}\r\n                updateQueryParams={updateQueryParams}\r\n                path={path}\r\n              />\r\n            )}\r\n            handleSearch={searchedKeywordChangeHandler}\r\n            value={searchedKeyword}\r\n            padding=\"0px\"\r\n          />\r\n        </Box>\r\n        <SearchTabs\r\n          value={searchCategory}\r\n          searchParams={searchParams}\r\n          path={path}\r\n        />\r\n        {isLoading && (\r\n          <Box sx={{ display: 'flex', justifyContent: 'center' }}>\r\n            <CircularProgress />\r\n          </Box>\r\n        )}\r\n        {!isLoading && (\r\n          <SearchContent\r\n            searchResult={searchRequestResult}\r\n            searchCategory={searchCategory}\r\n            searchedKeyword={searchedKeyword}\r\n            user={user}\r\n            fetchSearchHandler={fetchSearchHandler}\r\n          />\r\n        )}\r\n      </Box>\r\n    </HeaderView>\r\n  );\r\n};\r\n\r\nexport default SearchPage;\r\n","import { FormGroup, Stack, Box } from '@mui/material';\r\nimport React from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport { setSeachCategoryInUrl } from 'shared/utils/common/utils';\r\nimport { GeneralCard } from 'components/Cards/GeneralCard';\r\nimport GeneralFilter from 'components/SearchPageComponents/Filter/GeneralFilter';\r\nimport AtlasFilter from './AtlasFilter';\r\n\r\nconst FilterItem = ({ children }) => <Box sx={{ margin: 0.5 }}>{children}</Box>;\r\n\r\n// Component storing the necessary filter\r\nconst Filter = ({ path, searchParams, updateQueryParams }) => (\r\n  <GeneralCard>\r\n    <FormGroup>\r\n      <Route path=\"/references/atlases\">\r\n        <AtlasFilter\r\n          sortBy={searchParams.get('sortBy')}\r\n          onChange={(param, value) => updateQueryParams(param, value)}\r\n        />\r\n      </Route>\r\n      <Route path=\"/references/models\">\r\n        <FilterItem>\r\n          <GeneralFilter\r\n            sortBy={searchParams.get('sortBy')}\r\n            onChange={(param, value) => updateQueryParams(param, value)}\r\n          />\r\n        </FilterItem>\r\n      </Route>\r\n      <Route path=\"/references/datasets\">\r\n        <FilterItem>\r\n          <GeneralFilter\r\n            sortBy={searchParams.get('sortBy')}\r\n            onChange={(param, value) => updateQueryParams(param, value)}\r\n          />\r\n        </FilterItem>\r\n      </Route>\r\n    </FormGroup>\r\n  </GeneralCard>\r\n);\r\n\r\nexport default Filter;\r\n","import { useLocation, Link } from 'react-router-dom';\r\n\r\nimport { Box, Typography } from '@mui/material';\r\nimport ArrowForwardIosIcon from '@mui/icons-material/ArrowForwardIos';\r\nimport { colors } from 'shared/theme/colors';\r\n\r\n/**\r\n * Breadcrumb needs the parameter fontsize\r\n *\r\n * It may also accept another parameter which is actions\r\n *\r\n * the actions is the object, which summarize the action when clicking the corresponding element\r\n *\r\n * for example:\r\n *\r\n * the path is /references/atlases\r\n *\r\n * if you want to do something additionally than just redirect\r\n *\r\n * you should give an object like this:\r\n *\r\n * {\r\n *      references: ()=>{something you want to do}\r\n * }\r\n *\r\n */\r\nexport default function Breadcrumb({\r\n  fontSize, actions, path, elems, p = 0,\r\n}) {\r\n  // let position = useLocation()\r\n\r\n  const elements = elems || path.split('/');\r\n\r\n  const iconSize = fontSize * 0.7;\r\n\r\n  const rebuildLink = (index) => {\r\n    let accmulator = '';\r\n    for (let i = 1; i <= index; i++) accmulator = `${accmulator}/${elements[i]}`;\r\n    return accmulator;\r\n  };\r\n\r\n  const handleOnClick = (element) => {\r\n    if (!actions) return;\r\n    const action = actions[element];\r\n    if (action && typeof (action) === 'function') action();\r\n  };\r\n\r\n  const generate = (element, index) => (index === 0 ? <div key={index} /> : (\r\n    <Box sx={{ display: 'flex', flexDirection: 'row', alignItems: 'center' }} key={index}>\r\n      {index != elements.length - 1\r\n        ? <Box component={Link} to={rebuildLink(index)} sx={{ cursor: 'pointer', textDecoration: 'none' }} onClick={() => handleOnClick(element)}><Typography fontWeight=\"bold\" fontSize={`${fontSize}em`} sx={{ color: colors.neutral[500], textTransform: 'capitalize' }}>{element}</Typography></Box>\r\n        : <Box><Typography fontWeight=\"bold\" fontSize={`${fontSize}em`} sx={{ color: colors.primary[800], textTransform: 'capitalize' }}>{element}</Typography></Box>}\r\n      {index === elements.length - 1 ? <></> : <ArrowForwardIosIcon sx={{ width: `${fontSize * iconSize}em`, height: `${fontSize * iconSize}em`, margin: `0em ${fontSize * 0.2}em` }} />}\r\n    </Box>\r\n  ));\r\n\r\n  return (\r\n    <Box sx={{\r\n      display: 'flex', flexDirection: 'row', alignItems: 'center', paddingLeft: p, width: '100%',\r\n    }}\r\n    >\r\n      {\r\n        elements.map((element, index) => generate(element, index))\r\n      }\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport {\r\n  Typography, Box, IconButton, Divider, Stack, Fab,\r\n} from '@mui/material';\r\nimport MapOutlinedIcon from '@mui/icons-material/MapOutlined';\r\nimport CancelIcon from '@mui/icons-material/Cancel';\r\nimport styles from './mapper.module.css';\r\nimport CustomButton from 'components/CustomButton';\r\nimport { LoginContext } from 'shared/context/loginContext';\r\nimport { FaExclamationTriangle } from \"react-icons/fa\";\r\n\r\nfunction Mapper({\r\n  mapperAtlas, mapperModel, handleAtlasSelection,\r\n  handleModelSelection, open, fabOnClick, handleMap,\r\n}) {\r\n  const [atlas, setAtlas] = useState(mapperAtlas);\r\n  const [model, setModel] = useState(mapperModel);\r\n\r\n  const deleteAtlas = () => {\r\n    handleAtlasSelection(null);\r\n    setAtlas(null);\r\n  };\r\n\r\n  const deleteModel = () => {\r\n    handleModelSelection(null);\r\n    setModel(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setAtlas(mapperAtlas);\r\n    setModel(mapperModel);\r\n  }, [mapperAtlas, mapperModel]);\r\n\r\n  return (\r\n    <Box className={styles.container}>\r\n      <Box className={styles.borderContainer} sx={{ display: open ? 'grid' : 'none', boxShadow: '0px 4px 6px rgba(0, 0, 0, 0.25)' }}>\r\n        <Typography className={styles.title}>Mapper</Typography>\r\n        <Divider className={styles.divider} />\r\n        <Typography>Selected Atlas</Typography>\r\n        <Stack\r\n          direction=\"row\"\r\n        >\r\n          <Typography className={styles.filename}>{atlas || 'None'}</Typography>\r\n          <IconButton className={styles.iconButton} variant=\"contained\" component=\"span\" onClick={deleteAtlas} disabled={!atlas}>\r\n            <CancelIcon className={atlas ? styles.icon : styles.disabledIcon} />\r\n          </IconButton>\r\n        </Stack>\r\n        <Divider className={styles.divider} />\r\n        <Typography>Selected Model</Typography>\r\n        <Stack\r\n          direction=\"row\"\r\n        >\r\n          <Typography className={styles.filename}>{model || 'None'}</Typography>\r\n          <IconButton className={styles.iconButton} variant=\"contained\" component=\"span\" onClick={deleteModel} disabled={!model}>\r\n            <CancelIcon className={model ? styles.icon : styles.disabledIcon} />\r\n          </IconButton>\r\n        </Stack>\r\n        <Divider className={styles.divider} />\r\n        <Box className={styles.buttonBox}>\r\n          <CustomButton type=\"primary\" disabled={!model || !atlas} onClick={handleMap}>Create Project</CustomButton>\r\n        </Box>\r\n      </Box>\r\n      <Box className={styles.mapperBox}>\r\n        <Fab className={styles.mapIcon} onClick={fabOnClick}>\r\n          <MapOutlinedIcon />\r\n        </Fab>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Mapper;\r\n","import React, {\r\n  useState, useEffect, useCallback, useContext,\r\n} from 'react';\r\nimport {\r\n  useHistory, useLocation,\r\n  useRouteMatch,\r\n} from 'react-router-dom';\r\nimport { Box, Stack } from '@mui/material';\r\nimport { TabGroup } from 'components/Tab';\r\nimport Search from 'components/Search';\r\nimport Filter from 'components/ReferencePageComponents/Filter';\r\nimport NavBar from 'components/NavBar';\r\nimport Breadcrumb from 'components/Breadcrumb';\r\nimport LoginForm from 'components/LoginForm';\r\nimport RegistrationForm from 'components/RegistrationForm';\r\nimport Footer from 'components/Footer';\r\n\r\nimport ModelsService from 'shared/services/Models.service';\r\nimport AtlasService from 'shared/services/Atlas.service';\r\nimport AtlasesGrid from 'components/Grids/AtlasesGrid';\r\nimport ModelsGrid from 'components/Grids/ModelsGrid';\r\nimport Mapper from 'components/Mapper';\r\nimport { applyModelFilters, applyAtlasFilters } from 'shared/utils/filter';\r\nimport ReferenceRoutes from 'components/ReferencePageComponents/ReferenceRoutes';\r\nimport { useAuth } from 'shared/context/authContext';\r\nimport { LoginContext } from 'shared/context/loginContext';\r\nimport PasswordForgetForm from 'components/PasswordForgetForm';\r\n\r\nconst tmpObj = [\r\n  {\r\n    label: 'ATLASES',\r\n    path: '/references/atlases',\r\n  },\r\n  {\r\n    label: 'MODELS',\r\n    path: '/references/models',\r\n  },\r\n];\r\n\r\nconst References = () => {\r\n  const [value, setValue] = useState(0);\r\n  const [selectedAtlas, setSelectedAtlas] = useState(null);\r\n  const [selectedModel, setSelectedModel] = useState(null);\r\n  const [mapperVisible, setMapperVisible] = useState(false);\r\n  const { search, pathname } = useLocation();\r\n  const searchParams = new URLSearchParams(search);\r\n  const searchedKeyword = searchParams.get('keyword') || '';\r\n  const { path } = useRouteMatch();\r\n  const [atlases, setAtlases] = useState([]);\r\n  const [models, setModels] = useState([]);\r\n  const [user, setUser] = useAuth();\r\n  const history = useHistory();\r\n  // function to update the state in the URL\r\n  const updateQueryParams = (param, value) => {\r\n    const params = new URLSearchParams(history.location.search);\r\n    if (value) {\r\n      params.set(param, value);\r\n    } else {\r\n      params.delete(param);\r\n    }\r\n    history.push({\r\n      pathname: history.location.pathname,\r\n      search: params.toString(),\r\n    });\r\n  };\r\n\r\n  const handleAtlasSelection = (newAtlas) => {\r\n    setSelectedAtlas(newAtlas);\r\n    if (!selectedModel) {\r\n      history.push(`${path}/models`);\r\n      setValue(1);\r\n    }\r\n  };\r\n\r\n  const handleModelSelection = (newModel) => {\r\n    setSelectedModel(newModel);\r\n    if (!selectedAtlas) {\r\n      history.push(`${path}/atlases`);\r\n      setValue(0);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    AtlasService.getAtlases()\r\n      .then((newAtlases) => setAtlases(newAtlases))\r\n      .catch((err) => console.log(err));\r\n    ModelsService.getModels()\r\n      .then((newModels) => setModels(newModels))\r\n      .catch((err) => console.log(err));\r\n  }, []);\r\n\r\n  const searchedKeywordChangeHandler = (value) => {\r\n    updateQueryParams('keyword', value);\r\n  };\r\n\r\n  const onValueChange = (newValue) => {\r\n    setValue(newValue);\r\n    searchedKeywordChangeHandler('');\r\n  };\r\n\r\n  const handleMap = () => {\r\n    history.push(`/genemapper/create?atlas=${selectedAtlas._id}&model=${selectedModel._id}`);\r\n    setMapperVisible(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (selectedAtlas || selectedModel) setMapperVisible(true);\r\n    if (!selectedAtlas && !selectedModel) setMapperVisible(false);\r\n  }, [selectedAtlas, selectedModel]);\r\n\r\n  const tabMenu = () => (\r\n    <Box>\r\n\r\n      <TabGroup value={value} onValueChange={onValueChange} tabsInfo={tmpObj} />\r\n      {value === 0 ? (\r\n        <AtlasesGrid\r\n          atlases={applyAtlasFilters(atlases, searchedKeyword, searchParams, selectedModel)}\r\n          path={path}\r\n          handleAtlasSelection={handleAtlasSelection}\r\n          selectedAtlas={selectedAtlas}\r\n          selectedModel={selectedModel}\r\n        />\r\n      ) : null}\r\n      {value === 1 ? (\r\n        <ModelsGrid\r\n          models={applyModelFilters(models, searchedKeyword, searchParams, selectedAtlas)}\r\n          path={path}\r\n          handleModelSelection={handleModelSelection}\r\n          selectedModel={selectedModel}\r\n          compatibleModels={selectedAtlas && selectedAtlas.compatibleModels}\r\n        />\r\n      ) : null}\r\n    </Box>\r\n\r\n  );\r\n\r\n  const context = useContext(LoginContext);\r\n\r\n  const onLoginClicked = () => {\r\n    context.switchRegister(false);\r\n    context.switchLogin(true);\r\n  };\r\n\r\n  const onSignUpClicked = () => {\r\n    context.switchLogin(false);\r\n    context.switchRegister(true);\r\n  };\r\n\r\n  const tmp_elems = pathname.split('/');\r\n  const elems = tmp_elems.map((elem, index) => {\r\n    if (index === 3) {\r\n      if (tmp_elems[2] === 'atlases') return atlases.filter((x) => x._id === elem)[0] ? atlases.filter((x) => x._id === elem)[0].name : elem;\r\n      if (tmp_elems[2] === 'models') return models.filter((x) => x._id === elem)[0] ? models.filter((x) => x._id === elem)[0].name : elem;\r\n    }\r\n    return elem;\r\n  });\r\n\r\n  const executeScroll = () => (user ? history.push({ pathname: '/sequencer/help' }) : history.push({ pathname: '/', state: { contact_us: true } }));\r\n\r\n  return (\r\n    <Box sx={{ display: 'flex', flexDirection: 'column', justifyContent: 'space-between' }}>\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          // '::-webkit-scrollbar': {\r\n          //   display: 'none',\r\n          // },\r\n          // height: '100vh',\r\n          // overflow: 'auto',\r\n        }}\r\n      >\r\n        {context.loginVisible && <LoginForm />}\r\n        {context.registerVisible && <RegistrationForm />}\r\n        {context.forgetVisible && <PasswordForgetForm />}\r\n\r\n        <Box>\r\n          <NavBar\r\n            position=\"relative\"\r\n            onLoginClicked={onLoginClicked}\r\n            onSignUpClicked={onSignUpClicked}\r\n            executeScroll={executeScroll}\r\n          />\r\n        </Box>\r\n\r\n        <Stack\r\n          direction={{ xs: 'column', sm: 'column', md: 'row' }}\r\n          sx={{\r\n            alignSelf: 'center', width: { sx: '90%', md: '60%' }, marginTop: '2%', justifyContent: 'space-between',\r\n          }}\r\n        >\r\n          <Breadcrumb\r\n            p={4}\r\n            elems={elems}\r\n            fontSize={1}\r\n            actions={{ references: () => setValue(0) }}\r\n          />\r\n          <Box sx={{ alignSelf: 'center', width: { xs: '95%', md: '60%' }, marginBlock: '2%' }}>\r\n            <Search\r\n              filterComponent={(\r\n                <Filter\r\n                  searchParams={searchParams}\r\n                  updateQueryParams={updateQueryParams}\r\n                  path={path}\r\n                />\r\n              )}\r\n              handleSearch={searchedKeywordChangeHandler}\r\n              value={searchedKeyword}\r\n              padding=\"0px\"\r\n              visible={pathname.split('/').slice(-1).includes('atlases') || pathname.split('/').slice(-1).includes('models')}\r\n            />\r\n          </Box>\r\n        </Stack>\r\n\r\n        <Box\r\n          sx={{\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignSelf: 'center',\r\n            width: { xs: '90%', md: '60%' },\r\n          }}\r\n        >\r\n          {/* /references/atlases */}\r\n          <ReferenceRoutes atlases={atlases && tabMenu()} models={models && tabMenu()} path=\"/references\" handleSelectAtlases={handleAtlasSelection} handleSelectModels={handleModelSelection} />\r\n        </Box>\r\n      </Box>\r\n      <Footer sx={{ marginTop: 'auto', transform: 'translate(0px, 100px)' }} />\r\n\r\n      <Mapper\r\n        mapperAtlas={selectedAtlas ? selectedAtlas.name : null}\r\n        mapperModel={selectedModel ? selectedModel.name : null}\r\n        handleAtlasSelection={handleAtlasSelection}\r\n        handleModelSelection={handleModelSelection}\r\n        open={mapperVisible}\r\n        fabOnClick={() => setMapperVisible(!mapperVisible)}\r\n        handleMap={handleMap}\r\n        user={user}\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default References;\r\n","/* eslint-disable */\r\n\r\nimport { Box } from \"@mui/material\"\r\n\r\n/**\r\n * GeneralCard\r\n * @param width default value 100%\r\n * @param height default value \r\n * @param flex default value \"column\"\r\n * @param bg background color default value \"white\"\r\n * @param hoverStyles similar to sx prop, passed to \":hover\"\r\n * \r\n * Usage: \r\n *  <GeneralCard>\r\n *    Your components\r\n *  </GeneralCard>\r\n */\r\nexport const MemberListCard = ({ width = \"100%\", height = \"100%\", children, flex = \"column\", bg = \"white\", hoverStyles = {}, padding = \"0.5em\", marginLeft = \"0.2em\" }) => {\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        width: width,\r\n        height: height,\r\n        backgroundColor: bg,\r\n        borderRadius: \"0.625rem\",\r\n        \":hover\": hoverStyles\r\n      }}\r\n    >\r\n      <Box sx={{ boxShadow: \"0px 0px 4px rgba(0,0,0, 0.25)\", p: padding, borderRadius: \"0.625rem\", display: \"flex\", flexDirection: flex }}>\r\n        {children}\r\n      </Box>\r\n    </Box>\r\n  )\r\n}","import React from 'react';\r\nimport { MemberListCard as Card } from 'components/Cards/MemberListCard';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport styles from './institutionMemberListCard.module.css';\r\nimport stringColor from 'shared/utils/stringColor';\r\n\r\nfunction ListCard({\r\n  imageComponent, imageURL, enforceImage, title, description, nextToTitle, trailing, onClick,\r\n}) {\r\n  let imageComponentUsed = imageComponent;\r\n  if (imageURL || enforceImage) {\r\n    if (imageComponent) {\r\n      throw new Error('You can only have either imageComponent or imageURL.');\r\n    }\r\n    imageComponentUsed = (\r\n      <Avatar\r\n        src={imageURL}\r\n        alt={title}\r\n        sx={{ backgroundColor: stringColor(title || ''), width: 42, height: 42 }}\r\n      >\r\n        {(title || '?')[0]}\r\n      </Avatar>\r\n    );\r\n  }\r\n  return (\r\n    <Card>\r\n      <div\r\n        className={`${styles.cardContent}\r\n        ${onClick ? styles.clickable : ''}`}\r\n        onClick={onClick}\r\n        onKeyPress={onClick}\r\n        role=\"button\"\r\n        tabIndex={0}\r\n      >\r\n        <div className={styles.start}>\r\n          <div className={styles.cardImageWrapper}>\r\n            {imageComponentUsed}\r\n          </div>\r\n          <div className={styles.text}>\r\n            <div className={styles.titleRow}>\r\n              <h3 className={styles.title}>{title}</h3>\r\n              {nextToTitle}\r\n            </div>\r\n            <div className={styles.description}>\r\n              {description && (\r\n                <p style={{\r\n                  textOverflow: 'ellipsis', overflow: 'hidden', whiteSpace: 'nowrap', width: '250px',\r\n                }}\r\n                >\r\n                  {description}\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {trailing && (\r\n          <div className={styles.trailing}>\r\n            {trailing}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default ListCard;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport InstitutionMemberListCard from 'components/general/InstitutionMemberListCard';\r\n\r\n/**\r\n * @param {int} memberId\r\n * @param {Function(Object)} nextToNameBuilder will be called with the member\r\n *                            and should return a component to display next to the name\r\n * @param {Function(Object)} trailingBuilder will be called with the member\r\n * @returns the card for the member\r\n */\r\nfunction InstitutionMemberCard({\r\n  member, nextToNameBuilder, trailingBuilder, overrideProfilePicture = null,\r\n}) {\r\n  const history = useHistory();\r\n  const navigateToMember = () => history.push(`/sequencer/users/${member._id}`);\r\n\r\n  return (\r\n    <InstitutionMemberListCard\r\n      imageURL={overrideProfilePicture || member.avatarUrl}\r\n      enforceImage\r\n      title={`${member.firstName} ${member.lastName}`}\r\n      description={member.email}\r\n      nextToTitle={nextToNameBuilder ? nextToNameBuilder(member) : null}\r\n      trailing={(trailingBuilder || (() => null))(member)}\r\n      onClick={navigateToMember}\r\n    />\r\n  );\r\n}\r\n\r\nexport default InstitutionMemberCard;\r\n","import React from 'react';\r\nimport LoadingList from 'components/general/LoadingList';\r\nimport InstitutionMemberCard from 'components/members/InstitutionMemberCard';\r\n\r\n/**\r\n * @param {isLoading} whether the list is loading\r\n * @param {members} the members to display\r\n * @param {nextToNameBuilder} will be called with the member\r\n *                            and should return a component to display next to the name\r\n * @param {trailingBuilder} will be called with the member\r\n *                         and should return a component to display at the end of the card\r\n * @returns list of members (or loading indicator)\r\n */\r\nfunction InstitutionMemberList({\r\n  isLoading, members, nextToNameBuilder, trailingBuilder,\r\n}) {\r\n  return (\r\n    <LoadingList\r\n      isLoading={isLoading}\r\n      elements={members}\r\n      cardBuilder={(member) => (\r\n        <InstitutionMemberCard\r\n          member={member}\r\n          nextToNameBuilder={nextToNameBuilder}\r\n          trailingBuilder={trailingBuilder}\r\n        />\r\n      )}\r\n      noElementsMessage=\"No members.\"\r\n    />\r\n  );\r\n}\r\n\r\nexport default InstitutionMemberList;\r\n","import React, { useState } from 'react';\r\nimport Button from 'components/CustomButton';\r\nimport { Modal, ModalTitle } from 'components/Modal';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\n\r\nimport InstitutionService from 'shared/services/Institution.service';\r\n\r\nfunction InstitutionMemberRemoveButton({ institution, member, updateInstitution }) {\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n\r\n  const handleOpenDialog = () => setDialogOpen(true);\r\n  const handleCloseDialog = () => setDialogOpen(false);\r\n\r\n  async function remove() {\r\n    await InstitutionService.removeMemberFromInstitution(institution.id, member.id);\r\n    updateInstitution();\r\n    handleCloseDialog();\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button type=\"critical\" onClick={handleOpenDialog}>\r\n        Remove\r\n      </Button>\r\n      <Modal\r\n        isOpen={dialogOpen}\r\n        setOpen={(o) => !o && handleCloseDialog()}\r\n      >\r\n        <ModalTitle>\r\n          Remove Member\r\n        </ModalTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            Do you really want to remove the member &quot;\r\n            {`${member.firstName} ${member.lastName}`}\r\n            &quot; from the institution &quot;\r\n            {institution.name}\r\n            &quot;?\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button type=\"tertiary\" onClick={handleCloseDialog}>Cancel</Button>\r\n          <Button type=\"critical\" onClick={() => remove()} autoFocus>\r\n            Remove\r\n          </Button>\r\n        </DialogActions>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default InstitutionMemberRemoveButton;\r\n","import React, { useState } from 'react';\r\nimport Button from 'components/CustomButton';\r\nimport { Modal, ModalTitle } from 'components/Modal';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\n\r\nimport InstitutionService from 'shared/services/Institution.service';\r\n\r\nfunction InstitutionMemberMakeAdminButton({\r\n  institution, member, updateInstitution,\r\n}) {\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n\r\n  const handleOpenDialog = () => setDialogOpen(true);\r\n  const handleCloseDialog = () => setDialogOpen(false);\r\n\r\n  async function addAdmin() {\r\n    await InstitutionService.makeInstitutionAdmin(institution.id, member.id);\r\n    updateInstitution();\r\n    handleCloseDialog();\r\n  }\r\n\r\n  async function removeAdmin() {\r\n    await InstitutionService.removeInstitutionAdmin(institution.id, member.id);\r\n    updateInstitution();\r\n    handleCloseDialog();\r\n  }\r\n\r\n  const isAlreadyAdmin = institution.adminIds ? institution.adminIds.includes(member.id) : false;\r\n\r\n  return (\r\n    <>\r\n      <Button type=\"primary\" onClick={handleOpenDialog}>\r\n        {isAlreadyAdmin ? 'Remove Admin' : 'Make Admin'}\r\n      </Button>\r\n      <Modal\r\n        isOpen={dialogOpen}\r\n        setOpen={(o) => !o && handleCloseDialog()}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <ModalTitle id=\"alert-dialog-title\">\r\n          {isAlreadyAdmin ? 'Remove Admin' : 'Make Admin'}\r\n        </ModalTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            {`Do you really want to ${isAlreadyAdmin ? 'remove' : 'make'} ${member.firstName} \r\n            ${member.lastName} ${isAlreadyAdmin ? 'as' : ''} an admin of ${institution.name}?`}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button type=\"tertiary\" onClick={handleCloseDialog}>Cancel</Button>\r\n          <Button type=\"critical\" onClick={isAlreadyAdmin ? () => removeAdmin() : () => addAdmin()} autoFocus>\r\n            {isAlreadyAdmin ? 'Remove' : 'Make'}\r\n          </Button>\r\n        </DialogActions>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default InstitutionMemberMakeAdminButton;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { CircularProgress, Stack } from '@mui/material';\r\nimport InstitutionMemberList from 'components/members/InstitutionMemberList';\r\nimport InstitutionMemberRemoveButton from 'components/institutions/InstitutionMemberRemoveButton';\r\nimport InstitutionService from 'shared/services/Institution.service';\r\nimport styles from './institutionMemberListPopup.module.css';\r\nimport { useAuth } from 'shared/context/authContext';\r\nimport InstitutionMemberMakeAdminButton from '../InstitutionMemberMakeAdminButton';\r\n\r\nfunction InstitutionMemberListPopup({ institution, updateInstitution }) {\r\n  const [user] = useAuth();\r\n  const [members, setMembers] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    InstitutionService.getMembers(institution.id)\r\n      .then((newMembers) => {\r\n        setMembers(newMembers);\r\n        setIsLoading(false);\r\n      });\r\n  }, [institution]);\r\n  if (isLoading) {\r\n    return <CircularProgress />;\r\n  }\r\n\r\n  return (\r\n    <InstitutionMemberList\r\n      members={members}\r\n      nextToNameBuilder={(member) => (\r\n        <span className={styles.accessRightIndicator}>\r\n          {institution.adminIds.indexOf(member.id) !== -1 ? 'admin' : 'member'}\r\n        </span>\r\n      )}\r\n      trailingBuilder={(member) => (\r\n        institution.adminIds.indexOf(user._id) > -1 && user._id !== member.id ? (\r\n          <Stack direction=\"row\" spacing={1}>\r\n            <InstitutionMemberMakeAdminButton\r\n              institution={institution}\r\n              member={member}\r\n              updateInstitution={updateInstitution}\r\n            />\r\n            <InstitutionMemberRemoveButton\r\n              institution={institution}\r\n              member={member}\r\n              updateInstitution={updateInstitution}\r\n            />\r\n          </Stack>\r\n        ) : null\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nexport default InstitutionMemberListPopup;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport ListCard from 'components/general/ListCard';\r\nimport styles from './institutionTeamCard.module.css';\r\n\r\nfunction InstitutionTeamCard({ team /* onLeft, institution */ }) {\r\n  const history = useHistory();\r\n  const navigateToTeam = () => history.push(`/sequencer/teams/${team.id}`);\r\n\r\n  const {\r\n    name, description, visibility,\r\n  } = team;\r\n\r\n  return (\r\n    <ListCard\r\n      title={name}\r\n      description={description}\r\n      nextToTitle={(\r\n        <span className={styles.accessRightIndicator}>\r\n          {visibility}\r\n        </span>\r\n      )}\r\n      onClick={navigateToTeam}\r\n    />\r\n  );\r\n}\r\n\r\nexport default InstitutionTeamCard;\r\n","import React, { useState, useEffect } from 'react';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Alert from '@mui/material/Alert';\r\nimport styles from './institutionTeamList.module.css';\r\nimport TeamService from 'shared/services/Team.service';\r\nimport InstitutionTeamCard from 'components/institutions/InstitutionTeamCard';\r\n\r\nfunction InstitutionTeamList({ onLeft, institution }) {\r\n  const [teams, setTeams] = useState([]);\r\n  const [teamsLoaded, setTeamsLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    TeamService.getInstitutionTeams(institution.id)\r\n      .then((newTeams) => {\r\n        setTeams(newTeams);\r\n        setTeamsLoaded(true);\r\n      });\r\n  }, []);\r\n\r\n  if (!teamsLoaded) {\r\n    return <CircularProgress />;\r\n  }\r\n\r\n  if (teams.length === 0) {\r\n    return (\r\n      <Alert severity=\"info\">\r\n        This institution does not have any teams yet. Admins can create and add teams via the Community page.\r\n      </Alert>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.content}>\r\n      {teams.length === 0 ? 'No teams.' : ''}\r\n      {teams.map((team) => (\r\n        <div key={team.id}>\r\n          <InstitutionTeamCard\r\n            team={team}\r\n            onLeft={onLeft}\r\n            institution={institution}\r\n          />\r\n          <div className={styles.cardSpacing} />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InstitutionTeamList;\r\n","import React from 'react';\r\nimport ImageUploadDialog from '../ImageUploadDialog';\r\n\r\nimport { BACKEND_ADDRESS } from 'shared/utils/common/constants';\r\nimport { getAuthAndJsonHeader } from 'shared/utils/common/utils';\r\nimport InstitutionCard from 'components/institutions/InstitutionCard';\r\n\r\nexport default function InstitutionProfileImageUploadDialog({\r\n  institution, open, onClose, onChange,\r\n}) {\r\n  async function upload(blob) {\r\n    const response = await fetch(`${BACKEND_ADDRESS}/institutions/${institution.id}/profilepicture`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...getAuthAndJsonHeader(),\r\n        'content-type': 'image/png',\r\n      },\r\n      body: blob,\r\n    });\r\n    if (response.status !== 200) {\r\n      if (response.status === 413) {\r\n        // should not happen because of the max file size in the filedrop component,\r\n        // but who knows, maybe the backend will change the limit in the future\r\n        alert('This image is too large. Please provide one with a smaller file size.');\r\n        return;\r\n      }\r\n      throw Error(\"Couldn't upload institution profile picture\");\r\n    }\r\n    onChange(await response.text());\r\n    onClose();\r\n  }\r\n\r\n  async function reset() {\r\n    await fetch(`${BACKEND_ADDRESS}/institutions/${institution.id}/profilepicture`, {\r\n      method: 'DELETE',\r\n      headers: getAuthAndJsonHeader(),\r\n    });\r\n    onChange(null);\r\n    onClose();\r\n  }\r\n\r\n  return (\r\n    <ImageUploadDialog\r\n      open={open}\r\n      onClose={onClose}\r\n      title=\"Upload Institution Profile Image\"\r\n      maxFileSizeMB={5}\r\n      preview={(imgURL) => (\r\n        <InstitutionCard\r\n          institution={{ ...institution, profilePictureURL: imgURL }}\r\n          replaceTrailing={() => <></>}\r\n        />\r\n      )}\r\n      additionalButtons={[\r\n        { text: 'Reset', func: reset },\r\n      ]}\r\n      onUpload={(blob) => upload(blob)}\r\n    />\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport Avatar from '@mui/material/Avatar';\r\n\r\nimport InstitutionProfileImageUploadDialog from 'components/general/upload/InstitutionProfileImageUploadDialog';\r\nimport styles from './institutionAvatar.module.css';\r\n\r\nimport stringToColor from 'shared/utils/stringColor';\r\n\r\nfunction InstitutionAvatar({ editable = false, institution, onChange }) {\r\n  const sizePixels = 200;\r\n\r\n  const [uploadDialogOpen, setUploadDialogOpen] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={styles.profileImage} // TODO: load actual image\r\n        style={{\r\n          height: `${sizePixels}px`,\r\n          width: `${sizePixels}px`,\r\n        }}\r\n      >\r\n        <Avatar\r\n          src={institution.profilePictureURL}\r\n          alt={`${institution.name}`}\r\n          sx={{\r\n            backgroundColor: stringToColor(institution.name),\r\n            width: sizePixels,\r\n            height: sizePixels,\r\n          }}\r\n        >\r\n          {(institution.name || '?')[0]}\r\n        </Avatar>\r\n        {editable && (\r\n          <div\r\n            className={styles.editButton}\r\n            onClick={() => setUploadDialogOpen(true)}\r\n            role=\"button\"\r\n            onKeyPress={() => setUploadDialogOpen(true)}\r\n            tabIndex={0}\r\n          >\r\n            <span>Edit</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {uploadDialogOpen && (\r\n        <InstitutionProfileImageUploadDialog\r\n          institution={institution}\r\n          open={uploadDialogOpen}\r\n          onClose={() => {\r\n            setUploadDialogOpen(false);\r\n          }}\r\n          onChange={onChange}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default InstitutionAvatar;\r\n","import React from 'react';\r\nimport ImageUploadDialog from '../ImageUploadDialog';\r\n\r\nimport { BACKEND_ADDRESS } from 'shared/utils/common/constants';\r\nimport { getAuthAndJsonHeader } from 'shared/utils/common/utils';\r\n\r\nexport default function InstitutionProfileImageUploadDialog({\r\n  institution, open, onChange, onClose,\r\n}) {\r\n  async function upload(blob) {\r\n    const response = await fetch(`${BACKEND_ADDRESS}/institutions/${institution.id}/backgroundpicture`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...getAuthAndJsonHeader(),\r\n        'content-type': 'image/png',\r\n      },\r\n      body: blob,\r\n    });\r\n    if (response.status !== 200) {\r\n      if (response.status === 413) {\r\n        // should not happen because of the max file size in the filedrop component,\r\n        // but who knows, maybe the backend will change the limit in the future\r\n        alert('This image is too large. Please provide one with a smaller file size.');\r\n        return;\r\n      }\r\n      throw Error(\"Couldn't upload institution background picture\");\r\n    }\r\n    onChange(await response.text());\r\n    onClose();\r\n  }\r\n\r\n  async function reset() {\r\n    await fetch(`${BACKEND_ADDRESS}/institutions/${institution.id}/backgroundpicture`, {\r\n      method: 'DELETE',\r\n      headers: getAuthAndJsonHeader(),\r\n    });\r\n    onClose();\r\n  }\r\n\r\n  return (\r\n    <ImageUploadDialog\r\n      open={open}\r\n      onClose={onClose}\r\n      title=\"Upload Institution Background Image\"\r\n      description=\"Please upload a large image that will be used as the background image for your institution.\"\r\n      maxFileSizeMB={8}\r\n      additionalButtons={[\r\n        { text: 'Reset', func: reset },\r\n      ]}\r\n      disableCropping\r\n      onUpload={(blob) => upload(blob)}\r\n    />\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/institution-default-background.f2294d54.jpg\";","import React, { useState } from 'react';\r\nimport {\r\n  TextField,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n  Fab,\r\n  Snackbar,\r\n  Alert,\r\n} from '@mui/material';\r\nimport { Modal, ModalTitle } from 'components/Modal';\r\nimport PersonAddOutlinedIcon from '@mui/icons-material/PersonAddOutlined';\r\nimport Button from 'components/CustomButton';\r\nimport InstitutionService from 'shared/services/Institution.service';\r\n\r\nfunction InstitutionInviteButton({ institution }) {\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [open, setOpen] = useState(false);\r\n  const [invitedMailAdress, setInvitedMailAdress] = useState('');\r\n\r\n  const [mailError, setMailError] = useState('');\r\n\r\n  const handleCloseDialog = () => setDialogOpen(false);\r\n\r\n  function validateEmail(email) {\r\n    const re = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\r\n    return re.test(email);\r\n  }\r\n\r\n  const handleTeamInvite = () => {\r\n    if (!invitedMailAdress || !validateEmail(invitedMailAdress)) {\r\n      setMailError('Please enter an e-mail address.');\r\n      return;\r\n    }\r\n    setOpen(true);\r\n    InstitutionService.inviteMember(institution.id, invitedMailAdress);\r\n    handleCloseDialog();\r\n  };\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Fab\r\n        onClick={() => {\r\n          setDialogOpen(true);\r\n          setInvitedMailAdress('');\r\n          setMailError('');\r\n        }}\r\n        aria-label=\"add\"\r\n        sx={{\r\n          position: 'fixed',\r\n          bottom: '3%',\r\n          right: '2%',\r\n        }}\r\n        style={{\r\n          backgroundColor: '#5676E4',\r\n        }}\r\n      >\r\n        <PersonAddOutlinedIcon style={{ color: 'white' }} />\r\n      </Fab>\r\n      <Modal\r\n        isOpen={dialogOpen}\r\n        setOpen={(o) => !o && handleCloseDialog()}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n        fullWidth\r\n      >\r\n        <ModalTitle id=\"alert-dialog-title\">Invite User</ModalTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            {`Invite a user to your institution \"${institution.name}\"`}\r\n          </DialogContentText>\r\n          <TextField\r\n            autoFocus\r\n            required\r\n            margin=\"dense\"\r\n            id=\"name\"\r\n            label=\"Email Address\"\r\n            type=\"email\"\r\n            fullWidth\r\n            variant=\"standard\"\r\n            error={!!mailError}\r\n            helperText={mailError}\r\n            onChange={(evt) => { setInvitedMailAdress(evt.target.value); setMailError(''); }}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button type=\"tertiary\" onClick={handleCloseDialog}>Cancel</Button>\r\n          <Button onClick={handleTeamInvite} autoFocus>\r\n            Confirm\r\n          </Button>\r\n        </DialogActions>\r\n      </Modal>\r\n      <Snackbar\r\n        open={open}\r\n        autoHideDuration={3000}\r\n        onClose={handleClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'center',\r\n        }}\r\n      >\r\n        <Alert onClose={handleClose} severity=\"success\" sx={{ width: '100%' }}>\r\n          {'Invite to '}\r\n          {invitedMailAdress}\r\n          {' sent successfully!'}\r\n        </Alert>\r\n      </Snackbar>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InstitutionInviteButton;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport TextField from '@mui/material/TextField';\r\nimport EditIcon from '@mui/icons-material/ModeEditOutline';\r\nimport SaveOutlinedIcon from '@mui/icons-material/SaveOutlined';\r\nimport InstitutionMemberListPopup from 'components/institutions/InstitutionMemberListPopup';\r\nimport styles from './institutionPage.module.css';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Snackbar from '@mui/material/Snackbar';\r\nimport Alert from '@mui/material/Alert';\r\nimport InstitutionTeamList from 'components/institutions/InstitutionTeamList';\r\nimport InstitutionAvatar from 'components/institutions/InstitutionAvatar';\r\nimport InstitutionBackgroundImageUploadDialog from 'components/general/upload/InstitutionBackgroundImageUploadDialog';\r\nimport { useAuth } from 'shared/context/authContext';\r\nimport InstitutionService from 'shared/services/Institution.service';\r\nimport defaultBackgroundPicture from 'assets/institution-default-background.jpg';\r\nimport InstitutionInviteButton from 'components/institutions/InstitutionInviteButton';\r\nimport EditOutlinedIcon from '@mui/icons-material/EditOutlined';\r\nimport Button from 'components/CustomButton';\r\nimport Footer from 'components/Footer';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\n\r\nfunction InstitutionPage() {\r\n  const { id } = useParams();\r\n  const [institution, setInstitution] = useState({});\r\n  const [user] = useAuth();\r\n  const [institutionLoaded, setInstitutionLoaded] = useState(false);\r\n  const [backgroundUploadOpen, setBackgroundUploadOpen] = useState(false);\r\n  const [open, setOpen] = useState(false);\r\n  const [editedDescription, setEditedDescription] = useState('');\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [openDialog, setOpenDialog] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpenDialog(true);\r\n  };\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    setOpen(false);\r\n  };\r\n\r\n  const onClose = () => {\r\n    setOpenDialog(false);\r\n  };\r\n\r\n  function isAdmin() {\r\n    return (institution.adminIds || []).includes(user._id);\r\n  }\r\n\r\n  function updateInstitution() {\r\n    InstitutionService.getInstitution(id)\r\n      .then(setInstitution)\r\n      .catch((ignored) => { console.error(ignored); });\r\n  }\r\n\r\n  async function editDetails() {\r\n    if (!editMode) {\r\n      setEditMode(true);\r\n      // descriptionRef.current.focus();\r\n      return;\r\n    }\r\n    await InstitutionService.updateDetails(id, editedDescription);\r\n    setEditMode(false);\r\n    setOpen(true);\r\n  }\r\n\r\n  const handleDescriptionChange = (event) => {\r\n    setEditedDescription(event.target.value);\r\n  };\r\n\r\n  useEffect(() => {\r\n    InstitutionService.getInstitution(id)\r\n      .then((newInstitution) => {\r\n        setInstitution(newInstitution);\r\n        setInstitutionLoaded(true);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setEditedDescription(institution.description);\r\n  }, [institution]);\r\n\r\n  function onLeft(/* team */) {\r\n    // setTeams(teams.filter((i) => i.id !== team.id));\r\n  }\r\n\r\n  if (!institutionLoaded) {\r\n    return <CircularProgress />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.all}>\r\n        <div\r\n          className={styles.background}\r\n          style={{\r\n            backgroundImage: `url(${institution.backgroundPictureURL || defaultBackgroundPicture})`,\r\n            resizeMode: 'stretch',\r\n          }}\r\n        >\r\n          <div className={styles.institutionIcon}>\r\n            <InstitutionAvatar\r\n              institution={institution}\r\n              editable={isAdmin()}\r\n              onChange={(newUrl) => {\r\n              // update without reload\r\n                setInstitution({ ...institution, profilePictureURL: newUrl });\r\n              }}\r\n            />\r\n          </div>\r\n          <div\r\n            style={{\r\n              display: 'flex',\r\n              justifyContent: 'center',\r\n              marginBottom: '10px',\r\n              marginTop: '10px',\r\n            }}\r\n          >\r\n            <TextField\r\n              minRows={1}\r\n              maxRows={1}\r\n              value={institution.name}\r\n              sx={{\r\n                input: {\r\n                  textAlign: 'center',\r\n                  color: 'white',\r\n                  fontSize: 40,\r\n                  backgroundColor: 'rgba(0,38,68,0.5)',\r\n                  backdropFilter: 'blur(10px)',\r\n                  borderRadius: '34px',\r\n                },\r\n              }}\r\n              InputProps={{\r\n                disableUnderline: true,\r\n                readOnly: true,\r\n              }}\r\n              style={{ width: '700px' }}\r\n              variant=\"standard\"\r\n            />\r\n          </div>\r\n          <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n            <TextField\r\n              minRows={1}\r\n              maxRows={1}\r\n              value={institution.country}\r\n              sx={{\r\n                input: {\r\n                  textAlign: 'center',\r\n                  color: 'white',\r\n                  fontSize: 25,\r\n                  backgroundColor: 'rgba(0,38,68,0.5)',\r\n                  backdropFilter: 'blur(10px)',\r\n                  borderRadius: '23px',\r\n                },\r\n              }}\r\n              InputProps={{\r\n                disableUnderline: true,\r\n                readOnly: true,\r\n              }}\r\n              style={{ width: '300px' }}\r\n              variant=\"standard\"\r\n            />\r\n          </div>\r\n          <div className={styles.memberButton}>\r\n            <Button onClick={handleClickOpen}>\r\n              {institution.memberIds?.length === 1\r\n                ? (\r\n                  <span>\r\n                    {institution.memberIds?.length}\r\n                    {' Member'}\r\n                  </span>\r\n                )\r\n                : (\r\n                  <span>\r\n                    {institution.memberIds?.length}\r\n                    {' Members'}\r\n                  </span>\r\n                )}\r\n            </Button>\r\n            <Dialog open={openDialog} fullWidth>\r\n              <DialogTitle>\r\n                Member List\r\n                <IconButton onClick={onClose} sx={{ position: 'absolute', left: '90%' }}>\r\n                  <CloseIcon />\r\n                </IconButton>\r\n              </DialogTitle>\r\n              <DialogContent style={{ maxHeight: '500px' }}>\r\n                <InstitutionMemberListPopup\r\n                  institution={institution}\r\n            // eslint-disable-next-line react/jsx-no-bind\r\n                  updateInstitution={updateInstitution}\r\n                />\r\n              </DialogContent>\r\n            </Dialog>\r\n          </div>\r\n          {/* <p className={styles.imageText}>\r\n            {institution.memberIds?.length == 1\r\n              ? (\r\n                <span>\r\n                  {institution.memberIds?.length}\r\n                  {' Member'}\r\n                </span>\r\n              )\r\n              : (\r\n                <span>\r\n                  {institution.memberIds?.length}\r\n                  {' Members'}\r\n                </span>\r\n              )}\r\n          </p> */}\r\n          {isAdmin() && (\r\n          <button\r\n            className={styles.bgImgEditButton}\r\n            type=\"button\"\r\n            onClick={() => setBackgroundUploadOpen(true)}\r\n          >\r\n            <span>Edit Background</span>\r\n            <EditIcon fontSize=\"small\" />\r\n          </button>\r\n          )}\r\n        </div>\r\n        <div className={styles.innerContent}>\r\n          <section>\r\n            {isAdmin && (\r\n            <Button\r\n              sx={{\r\n                position: 'static',\r\n                alignItems: 'center',\r\n                float: 'right',\r\n              }}\r\n              type={editMode ? 'secondary' : 'primary'}\r\n              onClick={() => editDetails()}\r\n            >\r\n              {editMode && (\r\n              <div>\r\n                <span>Save Edits</span>\r\n                <SaveOutlinedIcon sx={{ fontSize: 15, marginLeft: '5px' }} />\r\n              </div>\r\n              )}\r\n              {!editMode && (\r\n              <div>\r\n                <span>Edit Description</span>\r\n                <EditOutlinedIcon sx={{ fontSize: 15, marginLeft: '5px' }} />\r\n              </div>\r\n              )}\r\n            </Button>\r\n            )}\r\n            <h2>Description</h2>\r\n            {editedDescription.length === 0 ? (\r\n              <Alert severity=\"info\">\r\n                Add a description by clicking the Edit Button to the right.\r\n              </Alert>\r\n            ) : null}\r\n            <hr />\r\n            <TextField\r\n              multiline\r\n              minRows={3}\r\n              maxRows={5}\r\n              value={editedDescription}\r\n              InputProps={{\r\n                readOnly: !editMode,\r\n              }}\r\n              style={{ width: '100%' }}\r\n              onChange={handleDescriptionChange}\r\n              variant=\"standard\"\r\n            />\r\n          </section>\r\n          <section>\r\n            <h2>Teams</h2>\r\n            <hr />\r\n            <div className={styles.content}>\r\n              <InstitutionTeamList\r\n                onLeft={(t) => onLeft(t)}\r\n                institution={institution}\r\n              />\r\n              <div className={styles.cardSpacing} />\r\n            </div>\r\n          </section>\r\n        </div>\r\n        {isAdmin() && <InstitutionInviteButton institution={institution} />}\r\n        <InstitutionBackgroundImageUploadDialog\r\n          institution={institution}\r\n          open={backgroundUploadOpen}\r\n          onClose={() => setBackgroundUploadOpen(false)}\r\n          onChange={(imgURL) => {\r\n            setInstitution({\r\n              ...institution,\r\n              backgroundPictureURL: imgURL,\r\n            });\r\n          }}\r\n        />\r\n        <Snackbar\r\n          open={open}\r\n          autoHideDuration={1500}\r\n          onClose={handleClose}\r\n          anchorOrigin={{\r\n            vertical: 'bottom',\r\n            horizontal: 'center',\r\n          }}\r\n        >\r\n          <Alert onClose={handleClose} severity=\"success\" sx={{ width: '100%' }}>\r\n            Description saved successfully!\r\n          </Alert>\r\n        </Snackbar>\r\n        <div className={styles.footer}>\r\n          <Footer />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default InstitutionPage;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Modal, ModalTitle } from 'components/Modal';\r\nimport Button from 'components/CustomButton';\r\nimport {\r\n  CircularProgress, Snackbar, Alert,\r\n  DialogActions, DialogContent, DialogContentText,\r\n} from '@mui/material';\r\nimport ProjectService from 'shared/services/Project.service';\r\nimport DemoService from 'shared/services/Demo.service';\r\nimport ProjectBarCard from 'components/GeneMapper/projectBarCard';\r\nimport AtlasService from 'shared/services/Atlas.service';\r\nimport ModelService from 'shared/services/Model.service';\r\nimport TeamService from 'shared/services/Team.service';\r\nimport { PROJECT_STATUS } from 'shared/utils/common/constants';\r\n\r\n/**\r\n * TeamProjectList Component:\r\n * This component renders a list of projects associated with a specific team. It manages the display\r\n * of projects, allows administrators to remove projects, handles modal dialogs for project removal,\r\n * and fetches necessary data from various services.\r\n *\r\n * @param {Object} team - The team object for which projects are being listed.\r\n * @param {Object} institution - The institution associated with the team.\r\n * @param {Object} user - The current user object.\r\n * @param {boolean} isAdmin - Flag indicating if the current user is an admin.\r\n * @param {Function} updateTeam - Function to update team information after project removal.\r\n * @returns {JSX.Element} - A JSX element displaying the list of projects for the team.\r\n */\r\nfunction TeamProjectList({\r\n  team, institution, user, isAdmin, updateTeam,\r\n}) {\r\n  const [projects, setProjects] = useState([]);\r\n  const [atlases, setAtlases] = useState([]);\r\n  const [models, setModels] = useState([]);\r\n  const [userTeams, setUserTeams] = useState([]);\r\n  const [deletedProjects, setDeletedProjects] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\r\n  const [removedProject, setRemovedProject] = useState([]);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  const [demos, setDemos] = useState([]);\r\n\r\n  const handleCloseDialog = () => setDialogOpen(false);\r\n\r\n  function handleDelete(project) {\r\n    if (isAdmin) {\r\n      setDialogOpen(true);\r\n      setRemovedProject(project);\r\n    } else {\r\n      setSnackbarOpen(true);\r\n    }\r\n  }\r\n\r\n  async function remove() {\r\n    setErrorMessage('');\r\n    try {\r\n      await TeamService.removeProjectFromTeam(team._id, removedProject._id);\r\n      handleCloseDialog();\r\n      updateTeam();\r\n    } catch (e) {\r\n      setErrorMessage(e.message);\r\n    }\r\n  }\r\n\r\n  const handleSnackbarClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    setSnackbarOpen(false);\r\n  };\r\n\r\n  /**\r\n  * Function to find matching demos in the data variable.\r\n  * If demos are found, the information stored about them in the \"data\" variable is updated.\r\n  * @param data - The data variable containing the projects to search for demos in.\r\n  * @param demos - The array of available demos. \r\n  */\r\n  const findDemos = (data, demos) => {\r\n    // loop over projects and search for demo datasets and set their attributes\r\n    for (let i = 0; i < data.length; i++) {\r\n      for (let j = 0; j < demos.length; j++) {\r\n        // If the project is a demo, the demo id is stored in the file name.\r\n        // file_name: <atlas>_<model>_<demo_id>\r\n        const id = data[i].fileName.split('_')[2];\r\n        // update the stored information about the demo datasets\r\n        if (id && id === demos[j]._id) {\r\n          // updating the demo dataset\r\n          data[i] = {\r\n            ...data[i],\r\n            status: PROJECT_STATUS.DONE,\r\n            location: demos[j].h5adURL,\r\n          };\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // function to handle deletion of project\r\n  const handleDeleteProject = (id) => {\r\n    DemoService.getDemos().then((demos) => {\r\n      // delete project from cache permanently\r\n      let cachedProjects = JSON.parse(localStorage.getItem(\"cached_projects\"));\r\n      delete cachedProjects[id];\r\n      localStorage.setItem(\"cached_projects\", JSON.stringify(cachedProjects));\r\n\r\n      const updatedProjects = projects.filter((project) => project._id !== id);\r\n\r\n      // Set deleted projects\r\n      setProjects(updatedProjects)\r\n\r\n      // update the projects that are not deleted\r\n      ProjectService.deleteProject(id).then(() => {\r\n        ProjectService.getOwnProjects().then((data) => {\r\n          // search for demos and set the information stored about them\r\n          findDemos(data, demos);\r\n          setProjects(data);\r\n        });\r\n        // update the projects that are deleted\r\n        ProjectService.getDeletedProjects().then((data) => {\r\n          // search for demos and set the information stored about them\r\n          findDemos(data, demos);\r\n          console.log(data);\r\n          setDeletedProjects(data);\r\n        });\r\n      });\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    AtlasService.getAtlases().then((data) => setAtlases(data));\r\n    ModelService.getModels().then((data) => setModels(data));\r\n    TeamService.getMyTeams().then((teams) => setUserTeams(teams));\r\n    DemoService.getDemos().then((demos) => {\r\n      setDemos(demos);\r\n      // fetch the projects and update the information about the demos\r\n      ProjectService.getTeamProjects(team._id).then((data) => {\r\n        findDemos(data, demos);\r\n        setProjects(data);\r\n      });\r\n    });\r\n    setIsLoading(false);\r\n  }, [team]);\r\n\r\n  if (!team.memberIds?.includes(user._id) && ((team.visibility === 'PRIVATE')\r\n    || (team.visibility === 'BY_INSTITUTION' && !institution.memberIds?.includes(user._id)))) {\r\n    return (\r\n      <Alert severity=\"warning\">\r\n        {`The projects of this team are hidden as its visibility is set to ${team.visibility.toLowerCase().replace('_', ' ')} and you're not a member of this team${team.visibility === 'BY_INSTITUTION' ? \" or this team's institution\" : ''}.`}\r\n      </Alert>\r\n    );\r\n  }\r\n\r\n  if (isLoading) {\r\n    return <CircularProgress />;\r\n  }\r\n\r\n  if (projects.length === 0) {\r\n    return (\r\n      <Alert severity=\"info\">\r\n        This team does not have any projects yet. Members can add one of their projects from the Gene Mapper page.\r\n      </Alert>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        {projects.map((project) => {\r\n          let atlas = atlases.find((atlas) => String(atlas._id) === String(project.atlasId));\r\n          if (!atlas) {\r\n            atlas = { name: project.atlasId }; // set values for scvi hub atlas\r\n          }\r\n\r\n          let model = models.find((model) => String(model._id) === String(project.modelId));\r\n          if (!model) {\r\n            // set values for the model if it is from scvi hub\r\n            let name;\r\n            if (project?.modelId) {\r\n              name = project?.modelId.slice(0, 2) + project?.modelId?.slice(2).toUpperCase();\r\n            }\r\n            model = { name: name };\r\n          }\r\n          return (\r\n            <ProjectBarCard\r\n              key={project._id}\r\n              project={project}\r\n              atlas={atlas}\r\n              model={model}\r\n              userTeams={userTeams}\r\n              handleDelete={() => handleDeleteProject(project._id)}\r\n              loggedIn\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n      <Modal\r\n        isOpen={dialogOpen}\r\n        setOpen={(o) => !o && handleCloseDialog()}\r\n      >\r\n        <ModalTitle>\r\n          Remove Project\r\n        </ModalTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            {`Do you really want to remove the project ${removedProject.name} from the team ${team.name}?`}\r\n          </DialogContentText>\r\n          {\r\n            errorMessage && (\r\n              <DialogContentText id=\"alert-dialog-description\" color=\"error\">\r\n                {errorMessage}\r\n              </DialogContentText>\r\n            )\r\n          }\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleCloseDialog} type=\"tertiary\">Cancel</Button>\r\n          <Button onClick={() => remove()} type=\"critical\" autoFocus>\r\n            Remove\r\n          </Button>\r\n        </DialogActions>\r\n      </Modal>\r\n      <Snackbar\r\n        open={snackbarOpen}\r\n        autoHideDuration={3000}\r\n        onClose={handleSnackbarClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'center',\r\n        }}\r\n      >\r\n        <Alert onClose={handleSnackbarClose} severity=\"error\" sx={{ width: '100%' }}>\r\n          Only an admin may remove projects from a team!\r\n        </Alert>\r\n      </Snackbar>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TeamProjectList;\r\n","import React from 'react';\r\nimport LoadingList from 'components/general/LoadingList';\r\nimport MemberCard from 'components/members/MemberCard';\r\n\r\n/**\r\n * @param {isLoading} whether the list is loading\r\n * @param {members} the members to display\r\n * @param {nextToNameBuilder} will be called with the member\r\n *                            and should return a component to display next to the name\r\n * @param {trailingBuilder} will be called with the member\r\n *                         and should return a component to display at the end of the card\r\n * @returns list of members (or loading indicator)\r\n */\r\nfunction MemberList({\r\n  isLoading, members, nextToNameBuilder, trailingBuilder,\r\n}) {\r\n  return (\r\n    <LoadingList\r\n      isLoading={isLoading}\r\n      elements={members}\r\n      cardBuilder={(member) => (\r\n        <MemberCard\r\n          member={member}\r\n          nextToNameBuilder={nextToNameBuilder}\r\n          trailingBuilder={trailingBuilder}\r\n        />\r\n      )}\r\n      noElementsMessage=\"No members.\"\r\n    />\r\n  );\r\n}\r\n\r\nexport default MemberList;\r\n","import React, { useState } from 'react';\r\nimport Button from 'components/CustomButton';\r\nimport { Modal, ModalTitle } from 'components/Modal';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\n\r\nimport TeamService from 'shared/services/Team.service';\r\n\r\nfunction TeamMemberRemoveButton({ team, member, updateTeam }) {\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  const handleOpenDialog = () => setDialogOpen(true);\r\n  const handleCloseDialog = () => setDialogOpen(false);\r\n\r\n  async function remove() {\r\n    setErrorMessage('');\r\n    try {\r\n      await TeamService.removeMemberFromTeam(team.id, member.id);\r\n      handleCloseDialog();\r\n      updateTeam();\r\n    } catch (e) {\r\n      setErrorMessage(e.message);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button type=\"critical\" onClick={handleOpenDialog}>\r\n        Remove\r\n      </Button>\r\n      <Modal\r\n        isOpen={dialogOpen}\r\n        setOpen={(o) => !o && handleCloseDialog()}\r\n      >\r\n        <ModalTitle>\r\n          Remove Member\r\n        </ModalTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            Do you really want to remove the member &quot;\r\n            {`${member.firstName} ${member.lastName}`}\r\n            &quot; from the team &quot;\r\n            {team.name}\r\n            &quot;?\r\n          </DialogContentText>\r\n          {\r\n            errorMessage && (\r\n              <DialogContentText id=\"alert-dialog-description\" color=\"error\">\r\n                {errorMessage}\r\n              </DialogContentText>\r\n            )\r\n          }\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button type=\"tertiary\" onClick={handleCloseDialog}>Cancel</Button>\r\n          <Button type=\"critical\" onClick={() => remove()} autoFocus>\r\n            Remove\r\n          </Button>\r\n        </DialogActions>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TeamMemberRemoveButton;\r\n","import React, { useState } from 'react';\r\nimport Button from 'components/CustomButton';\r\nimport { Modal, ModalTitle } from 'components/Modal';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\n\r\nimport TeamService from 'shared/services/Team.service';\r\n\r\nfunction TeamMemberMakeAdminButton({\r\n  team, member, updateTeam\r\n}) {\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  const handleOpenDialog = () => setDialogOpen(true);\r\n  const handleCloseDialog = () => setDialogOpen(false);\r\n\r\n  async function addAdmin() {\r\n    setErrorMessage('');\r\n    try {\r\n      await TeamService.makeTeamAdmin(team.id, member.id);\r\n      handleCloseDialog();\r\n      updateTeam();\r\n    } catch (e) {\r\n      setErrorMessage(e.message);\r\n    }\r\n  }\r\n\r\n  async function removeAdmin() {\r\n    setErrorMessage('');\r\n    try {\r\n      await TeamService.removeTeamAdmin(team.id, member.id);\r\n      updateTeam();\r\n      handleCloseDialog();\r\n    } catch (e) {\r\n      setErrorMessage(e.message);\r\n    }\r\n  }\r\n\r\n  const isAlreadyAdmin = team.adminIds ? team.adminIds.includes(member.id) : false;\r\n\r\n  return (\r\n    <>\r\n      <Button type=\"primary\" onClick={handleOpenDialog}>\r\n        {isAlreadyAdmin ? 'Remove Admin' : 'Make Admin'}\r\n      </Button>\r\n      <Modal\r\n        isOpen={dialogOpen}\r\n        setOpen={(o) => !o && handleCloseDialog()}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <ModalTitle id=\"alert-dialog-title\">\r\n          {isAlreadyAdmin ? 'Remove Admin' : 'Make Admin'}\r\n        </ModalTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            {`Do you really want to ${isAlreadyAdmin ? 'remove' : 'make'} ${member.firstName} \r\n            ${member.lastName} ${isAlreadyAdmin ? 'as' : ''} an admin of ${team.name}?`}\r\n          </DialogContentText>\r\n          {\r\n            errorMessage && (\r\n              <DialogContentText id=\"alert-dialog-description\" color=\"error\">\r\n                {errorMessage}\r\n              </DialogContentText>\r\n            )\r\n          }\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button type=\"tertiary\" onClick={handleCloseDialog}>Cancel</Button>\r\n          <Button type=\"critical\" onClick={isAlreadyAdmin ? () => removeAdmin() : () => addAdmin()} autoFocus>\r\n            {isAlreadyAdmin ? 'Remove' : 'Make'}\r\n          </Button>\r\n        </DialogActions>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TeamMemberMakeAdminButton;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { CircularProgress, Stack } from '@mui/material';\r\nimport MemberList from 'components/members/MemberList';\r\nimport TeamMemberRemoveButton from '../TeamMemberRemoveButton';\r\nimport TeamMemberMakeAdminButton from '../TeamMemberMakeAdminButton';\r\nimport styles from './teamMemberList.module.css';\r\nimport { useAuth } from 'shared/context/authContext';\r\nimport TeamService from 'shared/services/Team.service';\r\n\r\nfunction TeamMemberList({\r\n  team, updateTeam,\r\n}) {\r\n  const [user] = useAuth();\r\n  const [members, setMembers] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  useEffect(() => {\r\n    if (team.id == null) return;\r\n    setIsLoading(true);\r\n    TeamService.getMembers(team.id)\r\n      .then((newMembers) => {\r\n        setMembers(newMembers);\r\n        setIsLoading(false);\r\n      });\r\n  }, [team]);\r\n\r\n  if (isLoading) {\r\n    return <CircularProgress />;\r\n  }\r\n\r\n  return (\r\n    <MemberList\r\n      members={members}\r\n      nextToNameBuilder={(member) => (\r\n        <span className={styles.accessRightIndicator}>\r\n          {team.adminIds.indexOf(member.id) !== -1 ? 'admin' : 'member'}\r\n        </span>\r\n      )}\r\n      trailingBuilder={(member) => (\r\n        team.adminIds.includes(user._id) && user._id !== member.id ? (\r\n          <Stack direction=\"row\" spacing={1}>\r\n            <TeamMemberMakeAdminButton\r\n              team={team}\r\n              member={member}\r\n              updateTeam={updateTeam}\r\n            />\r\n            <TeamMemberRemoveButton\r\n              team={team}\r\n              member={member}\r\n              updateTeam={updateTeam}\r\n            />\r\n          </Stack>\r\n        ) : null\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nexport default TeamMemberList;\r\n","import React from 'react';\r\nimport { TextField, MenuItem } from '@mui/material';\r\n\r\nfunction TeamAdminHeaderRight({ team, updateVisibility }) {\r\n\r\n  return (\r\n    <TextField\r\n      id=\"select-visibility\"\r\n      select\r\n      label=\"Visibility\"\r\n      value={team.visibility}\r\n      onChange={(e) => updateVisibility(e.target.value)}\r\n      variant=\"standard\"\r\n      sx={{ width: '120px' }}\r\n    >\r\n      <MenuItem value=\"PUBLIC\">public</MenuItem>\r\n      <MenuItem value=\"PRIVATE\">private</MenuItem>\r\n      <MenuItem value=\"BY_INSTITUTION\">by institution</MenuItem>\r\n    </TextField>\r\n  );\r\n}\r\n\r\nexport default TeamAdminHeaderRight;\r\n","import React, { useState, useEffect } from 'react';\r\nimport TeamLeaveButton from 'components/teams/overview/TeamLeaveButton';\r\nimport TeamJoinButton from 'components/teams/detail/TeamJoinButton';\r\nimport { Tooltip } from '@mui/material';\r\n\r\nfunction TeamUserHeaderRight({\r\n  institution, team, user, updateTeam,\r\n}) {\r\n  const [isMember, setIsMember] = useState(false);\r\n\r\n  function updateIsMember() {\r\n    setIsMember((team.memberIds || []).includes(user._id));\r\n  }\r\n\r\n  const onLeft = () => {\r\n    updateTeam();\r\n  };\r\n\r\n  const onJoin = () => {\r\n    updateTeam();\r\n  };\r\n\r\n  useEffect(() => {\r\n    updateIsMember();\r\n  }, [team]);\r\n\r\n  if (isMember) {\r\n    return (\r\n      <TeamLeaveButton team={team} onLeft={onLeft} />\r\n    );\r\n  }\r\n\r\n  const canJoin = (team.visibility === 'PUBLIC') || (team.visibility === 'BY_INSTITUTION' && institution.memberIds?.includes(user._id))\r\n    || (team.invitedMemberIds?.includes(user._id));\r\n\r\n  return (\r\n    <Tooltip title={canJoin ? '' : `This team is ${team.visibility.toLowerCase().replace('_', ' ')} and you haven't been invited${team.visibility === 'BY_INSTITUTION' ? \" and you're not a member of this team's institution\" : ''}.`}>\r\n      <div>\r\n        <TeamJoinButton\r\n          isDisabled={!canJoin}\r\n          team={team}\r\n          onJoin={onJoin}\r\n        />\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n}\r\n\r\nexport default TeamUserHeaderRight;\r\n","import React from 'react';\r\nimport { Chip, Stack } from '@mui/material';\r\n\r\nfunction TeamHeaderOptions({\r\n  team, isAdmin, institution,\r\n}) {\r\n  return (\r\n    <Stack\r\n      direction=\"row\"\r\n      alignItems=\"flex-end\"\r\n      spacing={2}\r\n      sx={{ paddingLeft: '20px', paddingBottom: '5px', alignSelf: 'flex-end' }}\r\n    >\r\n      {institution && <h4 style={{margin: 0}}>{institution.name}</h4>}\r\n      {!isAdmin && <Chip label={team.visibility.toLowerCase().replace('_', ' ')} color=\"primary\" />}\r\n\r\n    </Stack>\r\n  );\r\n}\r\n\r\nexport default TeamHeaderOptions;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  TextField, DialogActions, DialogContent,\r\n  DialogContentText, Fab, Snackbar, Alert,\r\n} from '@mui/material';\r\nimport { Modal, ModalTitle } from 'components/Modal';\r\nimport Button from 'components/CustomButton';\r\nimport PersonAddOutlinedIcon from '@mui/icons-material/PersonAddOutlined';\r\n\r\nimport TeamService from 'shared/services/Team.service';\r\n\r\nfunction TeamInviteButton({ team }) {\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [open, setOpen] = useState(false);\r\n  const [invitedMailAdress, setInvitedMailAdress] = useState('');\r\n\r\n  const [mailError, setMailError] = useState('');\r\n\r\n  const handleCloseDialog = () => setDialogOpen(false);\r\n\r\n  function validateEmail(email) {\r\n    let re = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\r\n    return re.test(email);\r\n  }\r\n\r\n  async function handleTeamInvite() {\r\n    if (!invitedMailAdress || !validateEmail(invitedMailAdress)) {\r\n      setMailError('Please enter a valid e-mail address.');\r\n      return;\r\n    }\r\n    setMailError('');\r\n    try {\r\n      await TeamService.inviteMemberByEmail(team.id, invitedMailAdress);\r\n      handleCloseDialog();\r\n      setOpen(true);\r\n      handleCloseDialog();\r\n    } catch (e) {\r\n      setMailError(e.message);\r\n    }\r\n  }\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n\r\n    <div>\r\n      <Fab\r\n        onClick={() => {\r\n          setDialogOpen(true);\r\n          setInvitedMailAdress('');\r\n          setMailError('');\r\n        }}\r\n        aria-label=\"add\"\r\n        sx={{\r\n          position: 'fixed',\r\n          bottom: '3%',\r\n          right: '2%',\r\n        }}\r\n        style={{\r\n          backgroundColor: '#5676E4'\r\n        }}\r\n      >\r\n        <PersonAddOutlinedIcon style={{ color: 'white' }} />\r\n      </Fab>\r\n      <Modal\r\n        isOpen={dialogOpen}\r\n        setOpen={(o) => !o && handleCloseDialog()}\r\n        fullWidth\r\n      >\r\n        <ModalTitle>\r\n          Invite User\r\n        </ModalTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            {`Invite a user to your team \"${team.name}\"`}\r\n          </DialogContentText>\r\n          <TextField\r\n            autoFocus\r\n            required\r\n            margin=\"dense\"\r\n            id=\"name\"\r\n            label=\"Email Address\"\r\n            type=\"email\"\r\n            fullWidth\r\n            variant=\"standard\"\r\n            error={!!mailError}\r\n            helperText={mailError}\r\n            onChange={(evt) => { setInvitedMailAdress(evt.target.value); setMailError(''); }}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button type=\"tertiary\" onClick={handleCloseDialog}>Cancel</Button>\r\n          <Button onClick={handleTeamInvite} autoFocus>\r\n            Confirm\r\n          </Button>\r\n        </DialogActions>\r\n      </Modal>\r\n      <Snackbar\r\n        open={open}\r\n        autoHideDuration={3000}\r\n        onClose={handleClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'center',\r\n        }}\r\n      >\r\n        <Alert onClose={handleClose} severity=\"success\" sx={{ width: '100%' }}>\r\n          {'Invite to '}\r\n          {invitedMailAdress}\r\n          {' sent successfully!'}\r\n        </Alert>\r\n      </Snackbar>\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default TeamInviteButton;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport HeaderView from 'components/general/HeaderView';\r\nimport TeamProjectList from 'components/teams/detail/TeamProjectList';\r\nimport TeamMemberList from 'components/teams/detail/TeamMemberList';\r\nimport TeamAdminHeaderRight from 'components/teams/detail/TeamAdminHeaderRight';\r\nimport TeamUserHeaderRight from 'components/teams/detail/TeamUserHeaderRight';\r\nimport TeamHeaderOptions from 'components/teams/detail/TeamHeaderOptions';\r\nimport TeamService from 'shared/services/Team.service';\r\nimport InstitutionService from 'shared/services/Institution.service';\r\nimport TeamInviteButton from 'components/teams/detail/TeamInviteButton';\r\nimport { TextField, Snackbar, Alert } from '@mui/material';\r\nimport SaveOutlinedIcon from '@mui/icons-material/SaveOutlined';\r\nimport EditOutlinedIcon from '@mui/icons-material/EditOutlined';\r\nimport { useAuth } from 'shared/context/authContext';\r\nimport Button from 'components/CustomButton';\r\n\r\nexport default function TeamPage() {\r\n  const { id } = useParams();\r\n  const [team, setTeam] = useState({});\r\n  const [user] = useAuth();\r\n  const [institution, setInstitution] = useState({});\r\n  const [newDescription, setNewDescription] = useState('');\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const descriptionRef = useRef();\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleDescriptionChange = (event) => {\r\n    event.preventDefault();\r\n    setNewDescription(event.target.value);\r\n  };\r\n\r\n  async function updateTeam(wait) {\r\n    if (wait) await new Promise((resolve) => setTimeout(resolve, 100));\r\n    TeamService.getTeam(id)\r\n      .then(setTeam)\r\n      .catch((ignored) => { console.error(ignored); });\r\n  }\r\n\r\n  async function updateVisibility(newVisibility) {\r\n    await TeamService.changeTeamVisibility(id, newVisibility);\r\n    updateTeam(true);\r\n  }\r\n\r\n  async function updateDescription() {\r\n    if (!editMode) {\r\n      setEditMode(true);\r\n      descriptionRef.current.focus();\r\n      return;\r\n    }\r\n    await TeamService.changeTeamDescription(id, newDescription);\r\n    updateTeam(true);\r\n    setEditMode(false);\r\n    setOpen(true);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (id == null) return;\r\n    updateTeam(false);\r\n  }, [setTeam]);\r\n\r\n  useEffect(() => {\r\n    setNewDescription(team.description);\r\n  }, [team]);\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(team).length !== 0) {\r\n      InstitutionService.getInstitution(team.institutionId)\r\n        .then((newInstitution) => setInstitution(newInstitution))\r\n        .catch((ignored) => { console.error(ignored); });\r\n    }\r\n  }, [team, setInstitution]);\r\n\r\n  const isAdmin = team.adminIds ? team.adminIds.includes(user._id) : false;\r\n\r\n  if (!team || Object.keys(team).length === 0) return <></>;\r\n\r\n  return (\r\n    <HeaderView\r\n      title={team.name}\r\n      rightOfTitle={(\r\n        <TeamHeaderOptions\r\n          team={team}\r\n          isAdmin={isAdmin}\r\n          institution={institution}\r\n        />\r\n      )}\r\n      replaceHeaderRight={\r\n        (isAdmin && <TeamAdminHeaderRight team={team} updateVisibility={(value) => updateVisibility(value)} />)\r\n        || <TeamUserHeaderRight institution={institution} team={team} user={user} updateTeam={() => updateTeam(true)} />\r\n      }\r\n    >\r\n      <br />\r\n      <section>\r\n        {isAdmin && (\r\n          <Button\r\n            sx={{\r\n              position: \"static\",\r\n              alignItems: \"center\",\r\n              float: \"right\",\r\n            }}\r\n            type={editMode ? \"secondary\" : \"primary\"}\r\n            onClick={() => updateDescription()}\r\n          >\r\n            {editMode && (<div><span>Save Edits</span>\r\n              <SaveOutlinedIcon sx={{ fontSize: 15, marginLeft: \"5px\" }} /></div>)}\r\n            {!editMode && (<div><span>Edit Description</span>\r\n              <EditOutlinedIcon sx={{ fontSize: 15, marginLeft: \"5px\" }} /></div>)}\r\n          </Button>\r\n        )}\r\n        <h2>Description</h2>\r\n        <hr />\r\n        <div>\r\n          <TextField\r\n            id=\"description\"\r\n            inputRef={descriptionRef}\r\n            multiline\r\n            minRows={3}\r\n            maxRows={5}\r\n            value={newDescription}\r\n            InputProps={{\r\n              readOnly: !editMode,\r\n            }}\r\n            fullWidth\r\n            onChange={handleDescriptionChange}\r\n            variant=\"standard\"\r\n          />\r\n        </div>\r\n      </section>\r\n      <section>\r\n        <h2>Projects</h2>\r\n        <hr />\r\n        <TeamProjectList\r\n          team={team}\r\n          institution={institution}\r\n          user={user}\r\n          isAdmin={isAdmin}\r\n          updateTeam={() => updateTeam(true)}\r\n        />\r\n      </section>\r\n      <section>\r\n        <h2>Members</h2>\r\n        <hr />\r\n        <TeamMemberList\r\n          team={team}\r\n          updateTeam={() => updateTeam(true)}\r\n        />\r\n      </section>\r\n      {isAdmin && <TeamInviteButton team={team} />}\r\n      <Snackbar\r\n        open={open}\r\n        autoHideDuration={1500}\r\n        onClose={handleClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'center',\r\n        }}\r\n      >\r\n        <Alert onClose={handleClose} severity=\"success\" sx={{ width: '100%' }}>\r\n          {'Description saved successfully!'}\r\n        </Alert>\r\n      </Snackbar>\r\n    </HeaderView>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\n\r\nconst { KeyboardArrowRight, KeyboardArrowLeft } = require(\"@mui/icons-material\");\r\nconst { Box, IconButton, useTheme, TableContainer, Table, TableHead, TableRow, TableCell, TableBody, TableFooter, TablePagination, Switch } = require(\"@mui/material\");\r\nimport LastPageIcon from \"@mui/icons-material/LastPage\";\r\nimport FirstPageIcon from \"@mui/icons-material/FirstPage\";\r\nconst { Paper } = require(\"@mui/material/Paper\");\r\n\r\n\r\nfunction TablePaginationActions(props) {\r\n    const theme = useTheme();\r\n    const { count, page, rowsPerPage, onPageChange } = props;\r\n  \r\n    const handleFirstPageButtonClick = (\r\n      event\r\n    ) => {\r\n      onPageChange(event, 0);\r\n    };\r\n  \r\n    const handleBackButtonClick = (\r\n      event\r\n    ) => {\r\n      onPageChange(event, page - 1);\r\n    };\r\n  \r\n    const handleNextButtonClick = (\r\n      event\r\n    ) => {\r\n      onPageChange(event, page + 1);\r\n    };\r\n  \r\n    const handleLastPageButtonClick = (\r\n      event\r\n    ) => {\r\n      onPageChange(event, Math.max(0, Math.ceil(count / rowsPerPage) - 1));\r\n    };\r\n  \r\n    return (\r\n      <Box sx={{ flexShrink: 0, ml: 2.5 }}>\r\n        <IconButton\r\n          onClick={handleFirstPageButtonClick}\r\n          disabled={page === 0}\r\n          aria-label=\"first page\"\r\n        >\r\n          {theme.direction === \"rtl\" ? <LastPageIcon /> : <FirstPageIcon />}\r\n        </IconButton>\r\n        <IconButton\r\n          onClick={handleBackButtonClick}\r\n          disabled={page === 0}\r\n          aria-label=\"previous page\"\r\n        >\r\n          {theme.direction === \"rtl\" ? (\r\n            <KeyboardArrowRight />\r\n          ) : (\r\n            <KeyboardArrowLeft />\r\n          )}\r\n        </IconButton>\r\n        <IconButton\r\n          onClick={handleNextButtonClick}\r\n          disabled={page >= Math.ceil(count / rowsPerPage) - 1}\r\n          aria-label=\"next page\"\r\n        >\r\n          {theme.direction === \"rtl\" ? (\r\n            <KeyboardArrowLeft />\r\n          ) : (\r\n            <KeyboardArrowRight />\r\n          )}\r\n        </IconButton>\r\n        <IconButton\r\n          onClick={handleLastPageButtonClick}\r\n          disabled={page >= Math.ceil(count / rowsPerPage) - 1}\r\n          aria-label=\"last page\"\r\n        >\r\n          {theme.direction === \"rtl\" ? <FirstPageIcon /> : <LastPageIcon />}\r\n        </IconButton>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  // userData.push({\r\n    // id: user._id,\r\n    // email: user.email,\r\n    // permissionRequested: user.permissionRequested ? user.permissionRequested : false,\r\n    // hasPermission: user.hasPermission ? user.hasPermission : false,\r\n    // isAdmin: user.isAdmin ? user.isAdmin : false,\r\n\r\n  export default function CustomTable(props) {\r\n    const { data, togglePermission } = props;\r\n    const [page, setPage] = useState(0);\r\n    const [rowsPerPage, setRowsPerPage] = useState(5);\r\n    function handleTogglePermission(id, value) {\r\n      // Update the user's permissions in the state\r\n      console.log(\"Updating the permission of user with id\", id, \"to\", value);\r\n      togglePermission(id, value);\r\n    }\r\n  \r\n    // Avoid a layout jump when reaching the last page with empty rows.\r\n    const emptyRows =\r\n      page > 0 ? Math.max(0, (1 + page) * rowsPerPage - data.length) : 0;\r\n  \r\n    const handleChangePage = (\r\n      event,\r\n      newPage\r\n    ) => {\r\n      setPage(newPage);\r\n    };\r\n  \r\n    const handleChangeRowsPerPage = (\r\n      event\r\n    ) => {\r\n      setRowsPerPage(parseInt(event.target.value, 10));\r\n      setPage(0);\r\n    };\r\n  \r\n    return (\r\n      <TableContainer sx={{ margin: 10 }} component={Paper}>\r\n        <Table sx={{ minWidth: 500 }} aria-label=\"custom pagination table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>\r\n                {\" \"}\r\n                <b>Email</b>\r\n              </TableCell>\r\n              <TableCell align=\"right\">\r\n                <b>Role</b>\r\n              </TableCell>\r\n              <TableCell align=\"right\">\r\n                <b>Permission Requested</b>\r\n              </TableCell>\r\n              <TableCell align=\"right\">\r\n                <b>Permission</b>\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {(rowsPerPage > 0\r\n              ? data.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n              : data\r\n            ).map((row) => (\r\n              <TableRow key={row.email}>\r\n                <TableCell component=\"th\" scope=\"row\">\r\n                  {row.email}\r\n                </TableCell>\r\n                <TableCell style={{ width: 160 }} align=\"right\">\r\n                  {row.isAdministrator ? \"Admin\" : \"User\"}\r\n                </TableCell>\r\n                <TableCell style={{ width: 160 }} align=\"right\">\r\n                  {row.permissionRequested ? \"Yes\" : \"No\"}\r\n                </TableCell>\r\n                <TableCell style={{ width: 160 }} align=\"right\">\r\n                {row.isAdministrator ? (\r\n                    <Switch defaultChecked disabled />\r\n                    ) : (\r\n                    <Switch\r\n                        checked={row.hasPermission}\r\n                        onChange={(e) => {\r\n                            console.log(\"Change called\")                        \r\n                            console.log(\"e.target.checked\", e.target.checked);\r\n                            handleTogglePermission(row.id, e.target.checked);\r\n\r\n                        }}\r\n                        // disabled={!row.permissionRequested}  // Disable the switch if permission is not requested\r\n                    />\r\n                    )}\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n            {emptyRows > 0 && (\r\n              <TableRow style={{ height: 53 * emptyRows }}>\r\n                <TableCell colSpan={6} />\r\n              </TableRow>\r\n            )}\r\n          </TableBody>\r\n          <TableFooter>\r\n            <TableRow>\r\n              <TablePagination\r\n                rowsPerPageOptions={[5, 10, 25, { label: \"All\", value: -1 }]}\r\n                colSpan={3}\r\n                count={data.length}\r\n                rowsPerPage={rowsPerPage}\r\n                page={page}\r\n                SelectProps={{\r\n                  inputProps: {\r\n                    \"aria-label\": \"rows per page\",\r\n                  },\r\n                  native: true,\r\n                }}\r\n                onPageChange={handleChangePage}\r\n                onRowsPerPageChange={handleChangeRowsPerPage}\r\n                ActionsComponent={TablePaginationActions}\r\n              />\r\n            </TableRow>\r\n          </TableFooter>\r\n        </Table>\r\n      </TableContainer>\r\n    );\r\n  }","import CustomTable from \"components/CustomTable\";\r\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport { useAuth } from \"shared/context/authContext\";\r\nimport axiosInstance from \"shared/services/axiosInstance\";\r\nimport { BACKEND_ADDRESS } from \"shared/utils/common/constants\";\r\nimport { getAuthAndJsonHeader } from \"shared/utils/common/utils\";\r\n\r\nconst { Container, Typography, CircularProgress, Box } = require(\"@mui/material\");\r\nconst { useEffect, useState } = require(\"react\");\r\n\r\nconst AdminPanel = () => {\r\n  const [user, setUser] = useAuth();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [dataForTable, setDataForTable] = useState();\r\n  const navigate = useHistory();\r\n  if (user.isAdministrator === false) {\r\n    navigate.push(\"/gene-mapper\");\r\n  }\r\n\r\n  // Function to fetch user permissions and requests from the backend\r\n  const fetchPermissions = async () => {\r\n    const response = await axiosInstance.get(\"/users\");\r\n\r\n    if (response.status !== 200) {\r\n      throw Error(\"Couldn't fetch user permissions\");\r\n    }\r\n    // console.log(\"response is \", response.data);\r\n\r\n    const tableData = makeUserDataFromResponse(response);\r\n    setDataForTable(tableData);\r\n  };\r\n\r\n  const togglePermission = async (userId, value) => {\r\n    // Update the user's permissions in the state\r\n    try {\r\n      const response = await fetch(\r\n        `${BACKEND_ADDRESS}/users/${userId}/permission`,\r\n        {\r\n          method: \"PUT\",\r\n          headers: getAuthAndJsonHeader(),\r\n          body: JSON.stringify({\r\n            id: userId,\r\n            permission: value,\r\n          }),\r\n        }\r\n      );\r\n      console.log(response);\r\n\r\n      fetchPermissions();\r\n    } catch (error) {\r\n      console.log(\"error in togglePermission\", error);\r\n    }\r\n  };\r\n\r\n  const compareUsers = (a, b) => {\r\n    if (a.permissionRequested && !b.permissionRequested) {\r\n      return -1; // a comes first if permissionRequested is true and b's is false\r\n    }\r\n    if (a.isAdministrator && !b.isAdministrator) {\r\n      return -1; // a comes first if isAdministrator is true and b's is false\r\n    }\r\n    return 0; // otherwise, preserve the original order\r\n  };\r\n\r\n  const makeUserDataFromResponse = (response) => {\r\n    let userData = [];\r\n\r\n    if (response.data) {\r\n      response.data.forEach((user) => {\r\n        userData.push({\r\n          id: user._id,\r\n          email: user.email,\r\n          permissionRequested: user.permissionRequested\r\n            ? user.permissionRequested\r\n            : false,\r\n          hasPermission: user.hasPermission ? user.hasPermission : false,\r\n          isAdministrator: user.isAdministrator ? user.isAdministrator : false,\r\n        });\r\n      });\r\n\r\n      userData.sort(compareUsers);\r\n    }\r\n\r\n    const dataForTable = {\r\n      data: userData,\r\n      togglePermission: togglePermission,\r\n    };\r\n    return dataForTable;\r\n  };\r\n\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    fetchPermissions();\r\n    setIsLoading(false);\r\n\r\n    console.log(\"useEffect\");\r\n  }, []);\r\n\r\n  \r\n\r\n  return (\r\n    <Container>\r\n      <div\r\n        style={{\r\n          textAlign: \"center\",\r\n          background: \"#f2f2f2\",\r\n          padding: \"10px\",\r\n          marginBottom: \"20px\",\r\n          border: \"1px solid #ccc\",\r\n          boxShadow: \"0 2px 4px rgba(0, 0, 0, 0.1)\",\r\n          marginLeft: 80,\r\n        }}\r\n      >\r\n        <Typography variant=\"h4\" style={{ display: \"inline-block\" }}>\r\n          Admin Panel\r\n        </Typography>\r\n      </div>\r\n      {dataForTable ? (\r\n        <CustomTable {...dataForTable} togglePermission={togglePermission} />\r\n      ) : (\r\n        <Box sx={{ display: \"flex\" }}>\r\n          <CircularProgress />\r\n        </Box>\r\n\r\n      )}\r\n      <></>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AdminPanel;\r\n","const { default: axiosInstance } = require(\"./axiosInstance\");\r\n\r\n\r\n\r\n\r\n\r\nconst AtlasUploadService = {\r\n    createAtlas: async (name, previewPictureURL, modalities, numberOfCells, species, compatibleModels, selectedClassifier, atlasUrl, userId ) => {\r\n      // Prepare JSON object for request\r\n      \r\n      const atlasData = {\r\n        name: name,\r\n        previewPictureURL: previewPictureURL,\r\n        modalities: modalities, // Assuming modalities is an array\r\n        numberOfCells: Number(numberOfCells),\r\n        species: species,\r\n        compatibleModels: compatibleModels, // Assuming compatibleModels is an array of model names\r\n        selectedClassifier: selectedClassifier,\r\n        atlasUrl: atlasUrl,\r\n        uploadedBy: String(userId)\r\n        \r\n      };\r\n      console.log(\"atlas data to be sent to backend\", atlasData)\r\n  \r\n      // Send POST request to start upload for atlas\r\n      const response = await axiosInstance.post('/file_upload/start_upload_for_atlas', atlasData);\r\n      console.log(\"response from backend\", response.data)\r\n      const { atlas, models } = response.data;\r\n      console.log(\"atlas and models\", atlas, models)\r\n      return { atlas, models };\r\n    }\r\n  };\r\n  \r\n  export default AtlasUploadService;","import React, { useState } from 'react';\r\nimport { MULTIPART_UPLOAD_STATUS } from 'shared/utils/common/constants';\r\n\r\nconst UploadProgressContext = React.createContext();\r\nUploadProgressContext.displayName = 'UploadProgressContext';\r\n\r\nconst initUploadProgress = (uploadId, keyPath, uploadFileType, fileName) => {\r\n\r\n  return {\r\n    status: MULTIPART_UPLOAD_STATUS.IDLE,\r\n    uploadId,\r\n    chunks: 0,\r\n    uploaded: 0,\r\n    remaining: [],\r\n    uploadedParts: [],\r\n    keyPath,\r\n    uploadFileType,\r\n    fileName,\r\n  };\r\n}\r\n\r\nfunction UploadProgressProvider(props) {\r\n  const [uploadProgress, setUploadProgress] = useState({});\r\n \r\n\r\n  const value = [ uploadProgress, setUploadProgress ];\r\n\r\n  return <UploadProgressContext.Provider value={value} {...props} />;\r\n}\r\n\r\nexport function useUploadProgress() {\r\n  const context = React.useContext(UploadProgressContext);\r\n  if (context === undefined) {\r\n    console.log('context Error:: ', context);\r\n    throw new Error('useUploadProgress must be used within an UploadProgressProvider');\r\n  }\r\n  return context;\r\n}\r\n\r\nexport { UploadProgressProvider, initUploadProgress };\r\n","import { grey, teal } from \"@mui/material/colors\";\r\n\r\nconst {\r\n  Button,\r\n  DialogContent,\r\n  Grid,\r\n  Typography,\r\n  TextField,\r\n  CircularProgress,\r\n} = require(\"@mui/material\");\r\nconst { useState } = require(\"react\");\r\nconst { default: axiosInstance } = require(\"shared/services/axiosInstance\");\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { Select, MenuItem } from \"@mui/material\";\r\nimport Autocomplete from \"@mui/material/Autocomplete\";\r\nimport AtlasUploadService from \"shared/services/AtlasUpload.service\";\r\nimport {\r\n  initUploadProgress,\r\n  useUploadProgress,\r\n} from \"shared/context/UploadProgressContext\";\r\nimport { uploadAtlasAndModelFiles } from \"shared/services/UploadLogic\";\r\nimport {\r\n  MULTIPART_UPLOAD_STATUS,\r\n  UPLOAD_FILE_TYPE,\r\n} from \"shared/utils/common/constants\";\r\n\r\nconst styles = {\r\n  padding: {\r\n    padding: 4,\r\n  },\r\n  mainHeader: {\r\n    backgroundColor: grey[100],\r\n    padding: 20,\r\n    alignItems: \"center\",\r\n  },\r\n  mainContent: {\r\n    padding: 40,\r\n  },\r\n  primaryColor: {\r\n    color: teal[500],\r\n  },\r\n  secondaryColor: {\r\n    color: grey[700],\r\n  },\r\n  addAtlasButton: {\r\n    backgroundColor: \"blue\", // Use the primary color from the theme\r\n    color: \"white\", // Use the contrasting text color for visibility\r\n    \"&:hover\": {\r\n      backgroundColor: \"darkblue\", // When hovering, change to a slightly darker shade\r\n    },\r\n  },\r\n};\r\n\r\nconst useStyles = makeStyles(styles);\r\n\r\nconst AddAtlasForm = (props) => {\r\n  const {\r\n    setIsAddModalOpen,\r\n    setIsLoading,\r\n    user,\r\n    isLoading,\r\n    modelsList,\r\n    classifiersList,\r\n  } = props;\r\n  const [atlasName, setAtlasName] = useState(\"\");\r\n  const [previewPictureURL, setPreviewPictureURL] = useState(\"\");\r\n  const [modalities, setModalities] = useState([]);\r\n  const [compatibleModels, setCompatibleModels] = useState([]);\r\n  const [numberOfCells, setNumberOfCells] = useState(\"\");\r\n  const [species, setSpecies] = useState(\"\");\r\n  const [atlasFile, setAtlasFile] = useState(null);\r\n  const [fileName, setFileName] = useState(\"\");\r\n  const [url, setUrl] = useState(\"\");\r\n  const [fileError, setFileError] = useState(\"\");\r\n  const [selectedClassifier, setSelectedClassifier] = useState(\"\");\r\n  const [classifierFile, setClassifierFile] = useState(null);\r\n  // State to keep track of the selected files for each model\r\n  const [modelFiles, setModelFiles] = useState({});\r\n  const [encoderFile, setEncoderFile] = useState(null);\r\n  const [encoderFileName, setEncoderFileName] = useState(\"\");\r\n  const [classifierFileName, setClassifierFileName] = useState(\"\");\r\n\r\n  const [uploadProgress, setUploadProgress] = useUploadProgress();\r\n\r\n  const classes = useStyles();\r\n\r\n  const handleFormSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n\r\n    if (!validateModelSelectionAndFiles()) {\r\n      alert(\"Please upload files for all selected models.\");\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (!validateClassifierFiles()) {\r\n      alert(\"Please upload both classifier and encoder files.\");\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Assuming AtlasUploadService.createAtlas is an async function\r\n      const { atlas, models } = await AtlasUploadService.createAtlas(\r\n        atlasName,\r\n        previewPictureURL,\r\n        modalities,\r\n        numberOfCells,\r\n        species,\r\n        compatibleModels.map((model) => model.name),\r\n        selectedClassifier.name,\r\n        url,\r\n        user._id\r\n      );\r\n\r\n      // Initialize atlas uploads\r\n      if (atlasFile) {\r\n        console.log(\"atlas upload path\", atlas.atlasUploadPath);\r\n        console.log(\r\n          \"atlas file, atlas upload id, atlas upload path\",\r\n          atlasFile,\r\n          atlas.atlasUploadId,\r\n          atlas.atlasUploadPath\r\n        );\r\n        handleFileUpload(\r\n          atlasFile,\r\n          atlas.atlasUploadId,\r\n          atlas.atlasUploadPath,\r\n          UPLOAD_FILE_TYPE.ATLAS\r\n        );\r\n      }\r\n      if (atlas.classifierUploadId) {\r\n        handleFileUpload(\r\n          classifierFile,\r\n          atlas.classifierUploadId,\r\n          atlas.classifierUploadPath,\r\n          UPLOAD_FILE_TYPE.CLASSIFIER\r\n        );\r\n        handleFileUpload(\r\n          encoderFile,\r\n          atlas.encoderUploadId,\r\n          atlas.encoderUploadPath,\r\n          UPLOAD_FILE_TYPE.ENCODER\r\n        );\r\n      }\r\n\r\n      // Initialize model uploads\r\n      models.forEach((model) => {\r\n        if (modelFiles[model.model.name]) {\r\n          console.log(\"model upload path\", model.modelUploadPath);\r\n          handleFileUpload(\r\n            modelFiles[model.model.name],\r\n            model.modelUploadId,\r\n            model.modelUploadPath,\r\n            UPLOAD_FILE_TYPE.MODEL\r\n          );\r\n        }\r\n      });\r\n\r\n      alert(\"File upload started successfully\");\r\n    } catch (error) {\r\n      console.error(\"Error during form submission:\", error);\r\n      axiosInstance\r\n        .delete(`/api/atlases/${atlas._id}`)\r\n        .then(() => {\r\n          console.log(\"atlas deleted successfully\");\r\n          setIsLoading(false);\r\n        })\r\n        .catch((error) => {\r\n          console.error(error);\r\n          setIsLoading(false);\r\n        });\r\n      setIsLoading(false);\r\n      // Handle any errors that occurred during submission\r\n    } finally {\r\n      // Reset the form and state\r\n      setIsLoading(false);\r\n      setAtlasName(\"\");\r\n      setPreviewPictureURL(\"\");\r\n      setModalities([]);\r\n      setCompatibleModels([]);\r\n      setNumberOfCells(\"\");\r\n      setSpecies(\"\");\r\n      setAtlasFile(null);\r\n      setFileName(\"\");\r\n      setUrl(\"\");\r\n      setFileError(\"\");\r\n      setSelectedClassifier(\"\");\r\n      setClassifierFile(null);\r\n      setModelFiles({});\r\n      setEncoderFile(null);\r\n\r\n      setIsAddModalOpen(false);\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = async (file, uploadId, keyPath, uploadFileType) => {\r\n    console.log(\"UPLOAD ID for filetype  IS \", uploadId, uploadFileType);\r\n\r\n    // Initialize the upload progress for this uploadId\r\n    setUploadProgress((prev) => {\r\n      const newProgress = {\r\n        ...prev,\r\n        [uploadId]: initUploadProgress(\r\n          uploadId,\r\n          keyPath,\r\n          uploadFileType,\r\n          file.name\r\n        ),\r\n      };\r\n\r\n      // Call the upload function here after state update\r\n      uploadAtlasAndModelFiles(\r\n        uploadId,\r\n        file,\r\n        keyPath,\r\n        /**\r\n         * A callback function used to update the upload progress in the parent component.\r\n         *\r\n         * @callback ProgressUpdateCallback\r\n         * @param {string} uploadId - The unique identifier for the upload being updated.\r\n         * @param {object} newProgressFields - An object containing new progress fields to be merged with the existing progress state.\r\n         * @returns {void}\r\n         */\r\n        (uploadId, newProgressFields) => {\r\n          setUploadProgress((prevProgress) => ({\r\n            ...prevProgress,\r\n            [uploadId]: {\r\n              ...prevProgress[uploadId],\r\n              ...newProgressFields,\r\n            },\r\n          }));\r\n          // get all upload ids in the uploadProgress state and check if all uploads are complete\r\n          const allUploadsComplete = Object.keys(uploadProgress).every(\r\n            (uploadId) =>\r\n              uploadProgress[uploadId].status ===\r\n              MULTIPART_UPLOAD_STATUS.COMPLETE\r\n          );\r\n          if (allUploadsComplete) {\r\n            // All uploads are complete, so reset the upload progress state\r\n          }\r\n        },\r\n        newProgress,\r\n        uploadFileType\r\n      );\r\n\r\n      return newProgress;\r\n    });\r\n  };\r\n\r\n  const validateModelSelectionAndFiles = () => {\r\n    // Check if any model is selected\r\n    if (compatibleModels.length === 0) {\r\n      return false; // No models selected\r\n    }\r\n    // Check if each selected model has an associated file\r\n    return compatibleModels.every((model) => modelFiles[model.name]);\r\n  };\r\n\r\n  // Function to validate classifier file uploads\r\n  const validateClassifierFiles = () => {\r\n    return selectedClassifier === \"\" || (classifierFile && encoderFile);\r\n  };\r\n\r\n  const handleUrlChange = (e) => {\r\n    setUrl(e.target.value);\r\n    setAtlasFile(null);\r\n  };\r\n\r\n  const handleEncoderFileChange = (e) => {\r\n    const encFile = e.target.files[0];\r\n    if (encFile) {\r\n      setEncoderFile(encFile);\r\n      setEncoderFileName(encFile.name);\r\n    }\r\n  };\r\n\r\n  const handleClassifierFileChange = (e) => {\r\n    const classifierFile = e.target.files[0];\r\n    if (classifierFile) {\r\n      setClassifierFileName(classifierFile.name);\r\n      setClassifierFile(classifierFile);\r\n    }\r\n  };\r\n\r\n  const handleModelFileChange = (model, event) => {\r\n    if (event.target.files[0]) {\r\n      setModelFiles({\r\n        ...modelFiles,\r\n        [model.name]: event.target.files[0],\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {isLoading ? (\r\n        <DialogContent className={classes.padding}>\r\n          <Grid\r\n            container\r\n            direction=\"row\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            margin={5}\r\n          >\r\n            <CircularProgress />\r\n          </Grid>\r\n        </DialogContent>\r\n      ) : (\r\n        <form\r\n          onSubmit={(e) => {\r\n            handleFormSubmit(e);\r\n          }}\r\n        >\r\n          <DialogContent className={classes.padding}>\r\n            <Grid container>\r\n              <Grid item xs={12}>\r\n                <Grid container direction=\"row\" className={classes.mainHeader}>\r\n                  <Grid item xs={12}>\r\n                    <Typography className={classes.primaryColor} variant=\"h5\">\r\n                      Add A New Atlas here\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Grid\r\n                container\r\n                direction=\"row\"\r\n                className={classes.mainContent}\r\n                spacing={1}\r\n              >\r\n                <Grid item xs={8}>\r\n                  <TextField\r\n                    fullWidth\r\n                    margin=\"dense\"\r\n                    variant=\"outlined\"\r\n                    label=\"Atlas Name to display\"\r\n                    id=\"name\"\r\n                    value={atlasName}\r\n                    onChange={(e) => {\r\n                      setAtlasName(e.target.value);\r\n                    }}\r\n                    required\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={8}>\r\n                  <TextField\r\n                    fullWidth\r\n                    margin=\"dense\"\r\n                    variant=\"outlined\"\r\n                    label=\"Preview Picture URL\"\r\n                    id=\"previewPictureURL\"\r\n                    value={previewPictureURL}\r\n                    onChange={(e) => {\r\n                      setPreviewPictureURL(e.target.value);\r\n                    }}\r\n                    required\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={8}>\r\n                  <TextField\r\n                    fullWidth\r\n                    margin=\"dense\"\r\n                    variant=\"outlined\"\r\n                    label=\"Modalities (Proivde comma separated values)\"\r\n                    id=\"modalities\"\r\n                    value={modalities}\r\n                    onChange={(e) => {\r\n                      setModalities(e.target.value.split(\",\"));\r\n                    }}\r\n                    required\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={8}>\r\n                  <Autocomplete\r\n                    multiple\r\n                    id=\"compatibleModels\"\r\n                    options={modelsList}\r\n                    getOptionLabel={(option) => option.name}\r\n                    value={compatibleModels}\r\n                    onChange={(event, newValue) => {\r\n                      setCompatibleModels(newValue);\r\n                    }}\r\n                    renderInput={(params) => (\r\n                      <TextField\r\n                        {...params}\r\n                        variant=\"outlined\"\r\n                        label=\"Compatible Models\"\r\n                        placeholder=\"Select Models\"\r\n                      />\r\n                    )}\r\n                    required\r\n                  />\r\n                </Grid>\r\n                <Grid container>\r\n                  {compatibleModels.map((model, index) => (\r\n                    <Grid item xs={8} key={index}>\r\n                      <Button variant=\"contained\" component=\"label\">\r\n                        Upload {model.name} File\r\n                        <input\r\n                          type=\"file\"\r\n                          hidden\r\n                          onChange={(e) => handleModelFileChange(model, e)}\r\n                        />\r\n                      </Button>\r\n                      {modelFiles[model.name] && (\r\n                        <p>File: {modelFiles[model.name].name}</p>\r\n                      )}\r\n                    </Grid>\r\n                  ))}\r\n                </Grid>\r\n\r\n                <Grid item xs={8}>\r\n                  <TextField\r\n                    fullWidth\r\n                    margin=\"dense\"\r\n                    variant=\"outlined\"\r\n                    label=\"Number of Cells\"\r\n                    id=\"numberOfCells\"\r\n                    value={numberOfCells}\r\n                    onChange={(e) => {\r\n                      setNumberOfCells(e.target.value);\r\n                    }}\r\n                    required\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={8}>\r\n                  <TextField\r\n                    fullWidth\r\n                    margin=\"dense\"\r\n                    variant=\"outlined\"\r\n                    label=\"Species\"\r\n                    id=\"species\"\r\n                    value={species}\r\n                    onChange={(e) => {\r\n                      setSpecies(e.target.value);\r\n                    }}\r\n                    required\r\n                  />\r\n                </Grid>\r\n\r\n                <Grid item xs={8}>\r\n                  <Select\r\n                    fullWidth\r\n                    value={selectedClassifier}\r\n                    onChange={(e) => {\r\n                      setSelectedClassifier(e.target.value);\r\n                      if (e.target.value === \"\") {\r\n                        setClassifierFile(null);\r\n                        setEncoderFile(null);\r\n                      }\r\n                    }}\r\n                    displayEmpty\r\n                    inputProps={{ \"aria-label\": \"Classifier Type\" }}\r\n                  >\r\n                    <MenuItem value=\"\">\r\n                      <em>Select Classifier Type (Optional)</em>\r\n                    </MenuItem>\r\n                    {classifiersList.map((classifier, index) => (\r\n                      <MenuItem key={index} value={classifier}>\r\n                        {classifier.name}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </Grid>\r\n\r\n                {selectedClassifier && (\r\n                  <>\r\n                    <Grid item xs={8}>\r\n                      <Button variant=\"contained\" component=\"label\">\r\n                        Select Encoder File\r\n                        <input\r\n                          type=\"file\"\r\n                          hidden\r\n                          onChange={handleEncoderFileChange}\r\n                        />\r\n                      </Button>\r\n                      {encoderFileName && (\r\n                        <span style={{ marginLeft: \"20px\" }}>\r\n                          Selected file is: {encoderFileName}\r\n                        </span>\r\n                      )}\r\n                    </Grid>\r\n                    <Grid item xs={8}>\r\n                      <Button variant=\"contained\" component=\"label\">\r\n                        Select Classifier File\r\n                        <input\r\n                          type=\"file\"\r\n                          hidden\r\n                          onChange={handleClassifierFileChange}\r\n                        />\r\n                      </Button>\r\n                      {classifierFileName && (\r\n                        <span style={{ marginLeft: \"20px\" }}>\r\n                          Selected file is: {classifierFileName}\r\n                        </span>\r\n                      )}\r\n                    </Grid>\r\n                  </>\r\n                )}\r\n\r\n                <Grid item xs={8}>\r\n                  {atlasFile && (\r\n                    <TextField\r\n                      fullWidth\r\n                      margin=\"dense\"\r\n                      variant=\"outlined\"\r\n                      label=\"Uploaded file\"\r\n                      value={fileName}\r\n                      InputProps={{\r\n                        readOnly: true,\r\n                      }}\r\n                    />\r\n                  )}\r\n\r\n                  {!atlasFile && (\r\n                    <TextField\r\n                      fullWidth\r\n                      margin=\"dense\"\r\n                      variant=\"outlined\"\r\n                      label=\"Atlas URL to download\"\r\n                      id=\"url\"\r\n                      value={url}\r\n                      onChange={handleUrlChange}\r\n                      required={!atlasFile}\r\n                    />\r\n                  )}\r\n                </Grid>\r\n                <Grid item xs={8}>\r\n                  <Button variant=\"contained\" component=\"label\">\r\n                    <input\r\n                      type=\"file\"\r\n                      onChange={(e) => {\r\n                        if (!e.target.files || e.target.files.length === 0) {\r\n                          // you can display the error to the user\r\n                          console.error(\"Select a file\");\r\n                          setFileError(\"Select a file\");\r\n                          return;\r\n                        }\r\n\r\n                        setAtlasFile(e.target.files[0]);\r\n                        const { name } = e.target.files[0];\r\n                        setFileName(name);\r\n                        setFileError(\"\");\r\n                        setUrl(\"\");\r\n                      }}\r\n                      accept=\".h5ad\"\r\n                      required={url.trim() === \"\"}\r\n                    />\r\n                    Select Atlas\r\n                  </Button>\r\n\r\n                  {/* {fileError.trim() === \"\" && (\r\n                      <Typography color=\"error\">{fileError.trim()}</Typography>\r\n                    )}\r\n                    <Typography variant=\"body1\" component=\"p\">\r\n                      {fileName && <p>Uploaded file is : {fileName} </p>}\r\n                    </Typography> */}\r\n                </Grid>\r\n\r\n                <Grid item xs={12}>\r\n                  <Grid container direction=\"row\" spacing={1}>\r\n                    <Grid item xs={4}>\r\n                      <Button onClick={() => setIsAddModalOpen(false)}>\r\n                        Cancel\r\n                      </Button>\r\n                    </Grid>\r\n                    <Grid item xs={4}>\r\n                      {user.hasPermission ? (\r\n                        <Button\r\n                          type=\"submit\"\r\n                          className={classes.addAtlasButton} // Apply the custom style\r\n                        >\r\n                          Add Atlas\r\n                        </Button>\r\n                      ) : (\r\n                        <Button\r\n                          type=\"submit\"\r\n                          disabled\r\n                          className={classes.addAtlasButton} // Apply the custom style\r\n                        >\r\n                          Add Atlas\r\n                        </Button>\r\n                      )}\r\n                    </Grid>\r\n                  </Grid>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n          </DialogContent>\r\n        </form>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddAtlasForm;\r\n","import {\r\n  Box,\r\n  Card,\r\n  CardContent,\r\n  CardMedia,\r\n  CircularProgress,\r\n  Dialog,\r\n  Grid,\r\n  LinearProgress,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport AddAtlasForm from \"components/AddAtlasForm\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport {  useUploadProgress } from \"shared/context/UploadProgressContext\";\r\nimport { useAuth } from \"shared/context/authContext\";\r\nimport AtlasService from \"shared/services/Atlas.service\";\r\nimport ClassifierService from \"shared/services/Classifier.service\";\r\nimport ModelService from \"shared/services/Model.service\";\r\nimport { MULTIPART_UPLOAD_STATUS, getUploadStatusMessage } from \"shared/utils/common/constants\";\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport { green } from \"@mui/material/colors\";\r\n\r\n\r\n\r\nconst { default: CustomButton } = require(\"components/CustomButton\");\r\n\r\nconst styles = {\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  gridForCard: {\r\n    cursor: \"pointer\",\r\n  },\r\n};\r\n\r\nconst useStyles = makeStyles(styles);\r\n\r\nconst filterByUploadedPerson = (atlases, user) => {\r\n  const filteredAtlases = atlases.filter((atlas) => {\r\n    if (user.isAdministrator === true) {\r\n      return true;\r\n    }\r\n    return atlas.uploadedBy === user._id;\r\n  });\r\n  return filteredAtlases;\r\n};\r\n\r\nfunction UploadStatus({ uploadId, uploadProgress }) {\r\n  const progress = uploadProgress[uploadId];\r\n\r\n  if (!progress) {\r\n    return <Typography variant=\"caption\">No upload in progress</Typography>;\r\n  }\r\n\r\n  switch (progress.status) {\r\n    case MULTIPART_UPLOAD_STATUS.IDLE:\r\n      return <Typography variant=\"caption\">Idle</Typography>;\r\n\r\n    case MULTIPART_UPLOAD_STATUS.UPLOADING || MULTIPART_UPLOAD_STATUS.UPLOAD_PROGRESS:\r\n      return (\r\n        <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n          <LinearProgress variant=\"determinate\" value={calculateProgressValue(progress)} />\r\n          <Typography variant=\"caption\" sx={{ ml: 1 }}>Uploading...</Typography>\r\n        </Box>\r\n      );\r\n\r\n    case MULTIPART_UPLOAD_STATUS.COMPLETE:\r\n      return <Typography variant=\"caption\">Upload Complete</Typography>;\r\n\r\n    case MULTIPART_UPLOAD_STATUS.ERROR:\r\n      return <Typography variant=\"caption\" color=\"error\">Error in Upload</Typography>;\r\n\r\n    // Add more cases as needed for different statuses\r\n    default:\r\n      return <Typography variant=\"caption\">Unknown Status</Typography>;\r\n  }\r\n}\r\n\r\nfunction calculateProgressValue(progress) {\r\n  // Assuming 'uploaded' and 'chunks' are numbers indicating progress\r\n  console.log(\"progress in calculateProgressValue\", progress)\r\n  if(progress.uploaded && progress.chunks){\r\n    return (progress.uploaded / progress.chunks) * 100;\r\n  }else{\r\n    return 0;\r\n  }\r\n  \r\n}\r\n\r\n\r\nconst AtlasUpload = () => {\r\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [atlases, setAtlases] = useState([]);\r\n  const [user, setUser] = useAuth();\r\n  const classes = useStyles();\r\n  const navigate = useHistory();\r\n  const [modelResult, setModelResult] = useState([]);\r\n  const [classifierResult, setClassifierResult] = useState([]);\r\n  const [uploadProgressBarValue, setUploadProgressBarValue] = useState(0);\r\n  const [ uploadProgress, setUploadProgress] = useUploadProgress();\r\n  \r\n\r\n  \r\n\r\n  if (user.hasPermission === false) {\r\n    navigate.push(\"/gene-mapper\");\r\n  }\r\n\r\n  const handleModalClose = () => {\r\n    setIsAddModalOpen(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchAtlases = async () => {\r\n      setIsLoading(true);\r\n      const atlasResults = await AtlasService.getAtlases();\r\n      const filteredAtlas = filterByUploadedPerson(atlasResults, user);\r\n      const modelResult  = await ModelService.getModels();\r\n      const classifierResult = await ClassifierService.getClassifiers();\r\n      setModelResult(modelResult);\r\n      setClassifierResult(classifierResult);\r\n      setAtlases(filteredAtlas);\r\n      console.log(\"atlases\", atlasResults);\r\n\r\n      // applyAtlasFilters(atlasResults);\r\n      setIsLoading(false);\r\n    };\r\n    fetchAtlases();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log('Updated uploadProgress', uploadProgress);\r\n  }, [uploadProgress]);\r\n\r\n  return (\r\n    \r\n    <>\r\n      {/* {A heading which says My Atlases} */}\r\n      <Box\r\n        sx={{\r\n          display: \"flex\",\r\n          justifyContent: \"start\",\r\n          alignItems: \"center\",\r\n          paddingTop: \"3rem\",\r\n        }}\r\n      >\r\n        <Grid container justifyContent=\"center\">\r\n          <Grid item>\r\n            <Typography variant=\"h4\" component=\"h2\" gutterBottom>\r\n              My Atlases\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n\r\n      <Box\r\n        sx={{\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          alignItems: \"flex-start\",\r\n          paddingLeft: \"100px\",\r\n          paddingTop: \"3rem\",\r\n          paddingRight: \"3rem\",\r\n          paddingBottom: \"1rem\",\r\n          gap: \"1rem\",\r\n          overflow: \"hidden\",\r\n          transition: \"padding-left 0.3s ease\",\r\n        }}\r\n      >\r\n        {Object.entries(uploadProgress).length > 0 && (\r\n          <Typography variant=\"h5\" gutterBottom>\r\n            Upload Progress\r\n          </Typography>\r\n        )}\r\n        \r\n        {Object.entries(uploadProgress).map(([uploadId, progress]) => (\r\n          <Card key={uploadId} sx={{ width: '100%', mb: 2 }}>\r\n            <CardContent sx={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\r\n              <Typography variant=\"body2\" sx={{ display: 'flex', alignItems: 'center' }}>\r\n                Status: {getUploadStatusMessage(progress.status)}\r\n                {progress.status === MULTIPART_UPLOAD_STATUS.COMPLETE && (\r\n                  <CheckCircleIcon sx={{ color: green[500], ml: 1 }} />\r\n                )}\r\n              </Typography>\r\n              <Typography variant=\"body2\">\r\n                Key Path: {progress.keyPath}\r\n              </Typography>\r\n              <Typography variant=\"body2\">\r\n                Upload File Type: {progress.uploadFileType}\r\n              </Typography>\r\n              <Typography variant=\"body2\">\r\n                File Name: {progress.fileName}\r\n              </Typography>\r\n\r\n\r\n              {/* Displaying the progress or success icon */}\r\n              {progress.status === MULTIPART_UPLOAD_STATUS.UPLOADING || \r\n              progress.status === MULTIPART_UPLOAD_STATUS.UPLOAD_FINISHING || \r\n              progress.status === MULTIPART_UPLOAD_STATUS.UPLOAD_PROGRESS ? (\r\n                <Box sx={{ display: 'flex', alignItems: 'center', width: '100%' }}>\r\n                  <LinearProgress\r\n                    variant=\"determinate\"\r\n                    value={calculateProgressValue(progress)}\r\n                    sx={{ flexGrow: 1, mr: 1 }}\r\n                  />\r\n                  <Typography variant=\"caption\">\r\n                    {calculateProgressValue(progress).toFixed(2)}%\r\n                  </Typography>\r\n                </Box>\r\n              ) : progress.status === MULTIPART_UPLOAD_STATUS.SUCCESS ? (\r\n                <Box sx={{ display: 'flex', alignItems: 'center', color: green[500] }}>\r\n                  <CheckCircleIcon />\r\n                  <Typography variant=\"caption\" sx={{ ml: 1 }}>\r\n                    Upload Successful\r\n                  </Typography>\r\n                </Box>\r\n              ) : null}\r\n            </CardContent>\r\n          </Card>\r\n        ))}\r\n\r\n      </Box>\r\n\r\n\r\n      <Box\r\n        sx={{\r\n          display: \"flex\",\r\n          justifyContent: \"start\",\r\n          alignItems: \"center\",\r\n          paddingTop: \"3rem\",\r\n        }}\r\n      >\r\n        <Grid container justifyContent=\"center\">\r\n          <Grid item>\r\n            <CustomButton\r\n              onClick={() => {\r\n                setIsAddModalOpen(true);\r\n              }}\r\n            >\r\n              {\" \"}\r\n              Upload Atlas\r\n            </CustomButton>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n\r\n      {atlases && atlases.length === 0 && (\r\n        <Box\r\n          sx={{\r\n            display: \"flex\",\r\n            justifyContent: \"start\",\r\n            alignItems: \"center\",\r\n            paddingTop: \"3rem\",\r\n          }}\r\n        >\r\n          <Grid container justifyContent=\"center\">\r\n            <Grid item>\r\n              <Typography variant=\"h4\" component=\"h2\" gutterBottom>\r\n                No Atlases Uploaded\r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n      )}\r\n\r\n      <Grid container spacing={2} justifyContent=\"center\" sx={{ paddingLeft: '75px', paddingRight: '75px', marginTop: '16px', width: 'auto', overflow: 'hidden' }}>\r\n      {atlases.map((atlas) => (\r\n        <Grid item xs={12} sm={6} md={4} lg={3} key={atlas._id}>\r\n          <Card onClick={() => console.log(\"Clicked\")} elevation={4}>\r\n            <CardMedia\r\n              component=\"img\"\r\n              image={atlas.previewPictureURL}\r\n              alt={atlas.name}\r\n              sx={{ height: 140, objectFit: 'contain' }}\r\n            />\r\n            <CardContent>\r\n              <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                {atlas.name}\r\n              </Typography>\r\n              {atlas.atlasUploadId && (\r\n                <Typography variant=\"body2\" color=\"textSecondary\">\r\n                  Status: {atlas.status === \"UPLOAD_COMPLETE\" ? \"Upload Complete\" : \"Upload Incomplete\"}\r\n                </Typography>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n      <Dialog\r\n        className={classes.root}\r\n        open={isAddModalOpen}\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n        onClose={handleModalClose}\r\n      >\r\n      \r\n        <AddAtlasForm\r\n          setIsAddModalOpen={setIsAddModalOpen}\r\n          setIsLoading={setIsLoading}\r\n          user={user}\r\n          isLoading={isLoading}\r\n          modelsList= {modelResult}\r\n          classifiersList= {classifierResult}\r\n        />\r\n      </Dialog>\r\n    </>\r\n    \r\n\r\n  );\r\n};\r\nexport default AtlasUpload;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Switch, Route, Redirect, useRouteMatch,\r\n} from 'react-router-dom';\r\nimport Sidebar from '../Sidebar';\r\nimport CommunityOverview from 'views/CommunityOverview';\r\nimport GeneMapper from 'views/GeneMapper';\r\nimport UserProfile from 'views/UserProfile';\r\nimport Documentation from 'views/Documentation';\r\nimport Settings from 'views/Settings';\r\nimport Help from 'views/Help';\r\nimport styles from './dashboardContent.module.css';\r\nimport SearchPage from 'views/SearchPage';\r\nimport { useAuth } from 'shared/context/authContext';\r\nimport References from 'views/References';\r\nimport InstitutionPage from 'views/InstitutionPage';\r\nimport TeamPage from 'views/TeamPage';\r\nimport { InstitutionProvider } from 'shared/context/institutionContext';\r\nimport AdminPanel from 'views/AdminPanel';\r\nimport AtlasUpload from 'views/AtlasUpload';\r\n\r\nconst DashboardContent = () => {\r\n  const [sidebarShown] = useState(true);\r\n  const [user, setUser] = useAuth();\r\n\r\n  const { path, url } = useRouteMatch();\r\n\r\n  return (\r\n    <div>\r\n      <Sidebar setUser={setUser} user={user} />\r\n      <Switch>\r\n\r\n        {/* create the admin route which is protected */}\r\n        <Route path={`${path}/admin`}>\r\n          <AdminPanel sidebarShown={sidebarShown} />\r\n        </Route>\r\n\r\n        <Route path={`${path}/upload`}>\r\n         <AtlasUpload sidebarShown={sidebarShown} />\r\n        </Route>\r\n\r\n        <Route exact path={`${path}/`}>\r\n          <Redirect to={`${url}/genemapper`} />\r\n        </Route>\r\n\r\n        <Route path={`${path}/genemapper`}>\r\n          <GeneMapper sidebarShown={sidebarShown} />\r\n        </Route>\r\n\r\n        <Route path={`${path}/community`}>\r\n          <InstitutionProvider>\r\n            <CommunityOverview />\r\n          </InstitutionProvider>\r\n        </Route>\r\n        <Route path={`${path}/institutions/:id`}>\r\n          <InstitutionPage />\r\n        </Route>\r\n        <Route path={`${path}/teams/:id`}>\r\n          <TeamPage />\r\n        </Route>\r\n\r\n        <Route path={`${path}/users/:id`}>\r\n          <UserProfile />\r\n        </Route>\r\n\r\n        \r\n\r\n        <Route path={`${path}/documentation`}>\r\n          <Documentation />\r\n        </Route>\r\n\r\n        <Route path={`${path}/help`}>\r\n          <Help />\r\n        </Route>\r\n\r\n        <Route path={`${path}/search/:searchCategory`}>\r\n          <SearchPage sidebarShown={sidebarShown} />\r\n        </Route>\r\n\r\n       \r\n\r\n        <Route path={`${path}/references`} render={() => <References />} />\r\n\r\n        <Route path={`${path}/settings`}>\r\n          <Settings className={styles.subpage} />\r\n        </Route>\r\n      </Switch>\r\n      {/* <Footer /> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardContent;\r\n","import { increasedPointRadius, initialPointRadius } from './constants';\r\n\r\nexport const fadeIn = (selection, duration = 1000, delay = 0) => selection.attr('opacity', 0)\r\n  .transition()\r\n  .duration(duration)\r\n  .delay(delay)\r\n  .attr('opacity', 1);\r\n\r\nexport const fadeOut = (selection, duration = 1000, delay = 0) => selection.attr('opacity', 1)\r\n  .transition()\r\n  .duration(duration)\r\n  .delay(delay)\r\n  .attr('opacity', 0);\r\n\r\nexport const delay = (t) => new Promise((resolve) => setTimeout(resolve, t));\r\n\r\nexport const euclideanDist = (p, q) => Math.sqrt((p[0] - q[0]) ** 2 + (p[1] - q[1]) ** 2);\r\n\r\nexport const affineComb = (l) => (1 - l) * initialPointRadius + l * increasedPointRadius;\r\n","export default __webpack_public_path__ + \"static/media/umap_data.2c9710d5.bin\";","import { mean, extent } from 'd3';\r\nimport { euclideanDist } from './helpers';\r\n\r\nexport class Cluster {\r\n  constructor(points, name, color) {\r\n    const xs = points.map((p) => p[0]);\r\n    const ys = points.map((p) => p[1]);\r\n    const m = [mean(xs), mean(ys)];\r\n    const devs = points.map((p) => euclideanDist(p, m));\r\n\r\n    this.name = name;\r\n    this.id = name.replaceAll(/[/,_, ]/g, '').toLowerCase();\r\n    this.color = color;\r\n    this.count = points.length;\r\n    this.points = points;\r\n    this.mean = m;\r\n    this.dev = mean(devs);\r\n    this.xExtent = extent(points.map((p) => +p[0]));\r\n    this.yExtent = extent(points.map((p) => +p[1]));\r\n  }\r\n\r\n  getMinX() {\r\n    return this.xExtent[0];\r\n  }\r\n\r\n  getMaxX() {\r\n    return this.xExtent[1];\r\n  }\r\n\r\n  getMinY() {\r\n    return this.yExtent[0];\r\n  }\r\n\r\n  getMaxY() {\r\n    return this.yExtent[1];\r\n  }\r\n}\r\n","import { scaleLinear, scaleOrdinal, min, max, mean, sum, quadtree } from 'd3';\r\nimport { colors, searchRadius } from './constants';\r\nimport { Cluster } from './cluster';\r\n\r\nconst getQuadTree = data => {\r\n\r\n  const tree = quadtree()\r\n    .x(p => +p.x)\r\n    .y(p => +p.y);\r\n\r\n  tree.addAll(data);\r\n  return tree;\r\n};\r\n\r\nconst getClusters = data => {\r\n\r\n  const clusters = new Map();\r\n  data\r\n    .filter(({ celltype }) => isNaN(parseFloat(celltype)))\r\n    .forEach(p => {\r\n      const clusterName = p.celltype;\r\n      if (!clusters.has(clusterName))\r\n        clusters.set(clusterName, []);\r\n      clusters.get(clusterName).push([+p.x, +p.y]);\r\n    });\r\n\r\n  const names = clusters.keys();\r\n  const colorScale = scaleOrdinal()\r\n    .domain(...names)\r\n    .range(colors);\r\n\r\n  for (const name of clusters.keys()) {\r\n    const points = clusters.get(name);\r\n    const color = colorScale(name);\r\n    clusters.set(name, new Cluster(points, name, color));\r\n  }\r\n\r\n  return clusters;\r\n};\r\n\r\nconst getBounds = clusters => {\r\n\r\n  const xMin = min(clusters.map(c => c.getMinX()));\r\n  const xMax = max(clusters.map(c => c.getMaxX()));\r\n  const yMin = min(clusters.map(c => c.getMinY()));\r\n  const yMax = max(clusters.map(c => c.getMaxY()));\r\n\r\n  return { xMin, xMax, yMin, yMax };\r\n};\r\n\r\nexport class ClusterCollection {\r\n\r\n  constructor(data) {\r\n\r\n    this.tree = getQuadTree(data);\r\n    this.collection = getClusters(data);\r\n    this.clusters = Array.from(this.collection.values());\r\n\r\n    const { xMin, xMax, yMin, yMax } = getBounds(this.clusters);\r\n    this.xMin = xMin;\r\n    this.xMax = xMax;\r\n    this.yMin = yMin;\r\n    this.yMax = yMax;\r\n\r\n    const dists = this.clusters.map(c => c.dev);\r\n    this.minDist = min(dists);\r\n    this.maxDist = max(dists);\r\n    this.avgDist = mean(dists);\r\n\r\n    this.totalCount = sum(this.clusters.map(c => c.count));\r\n  };\r\n\r\n  getAll() {\r\n    return this.clusters;\r\n  };\r\n\r\n  get(name) {\r\n    return this.collection.get(name);\r\n  };\r\n\r\n  setRange([width, height]) {\r\n    this.width = width;\r\n    this.height = height;\r\n    this.initialXDomain = scaleLinear()\r\n        .domain([this.xMin, this.xMax])\r\n        .range([0, width]);\r\n    this.initialYDomain = scaleLinear()\r\n        .domain([this.yMin, this.yMax])\r\n        .range([height, 0]);\r\n    this.xDomain = this.initialXDomain;\r\n    this.yDomain = this.initialYDomain;\r\n  };\r\n\r\n  rescaleDomain(transform) {\r\n    this.xDomain = transform.rescaleX(this.initialXDomain);\r\n    this.yDomain = transform.rescaleY(this.initialYDomain);\r\n  };\r\n\r\n  findClosestSample([x, y]) {\r\n    return this.tree.find(x, y, searchRadius);\r\n  };\r\n\r\n  scalePoint([x, y]) {\r\n    const xScaled = this.xDomain(x);\r\n    const yScaled = this.yDomain(y);\r\n    return [xScaled, yScaled];\r\n  };\r\n\r\n  unscalePoint([xScaled, yScaled]) {\r\n    const x = this.xDomain.invert(xScaled);\r\n    const y = this.yDomain.invert(yScaled);\r\n    return [x, y];\r\n  };\r\n\r\n  scalePoints(points) {\r\n    return points.map(p => this.scalePoint(p));\r\n  };\r\n};","import { buttonWidth, cornerRadius, fill } from './constants';\r\n\r\nconst addSmallButton = container => {\r\n\r\n    container.append('rect')\r\n      .attr('fill', 'lightgrey')\r\n      .attr('width', 15)\r\n      .attr('height', 15)\r\n      .attr('stroke', 'black')\r\n      .attr('stroke-width', 2)\r\n      .attr('rx', cornerRadius);\r\n\r\n    container.on('mouseover', () => {\r\n      container.select('rect')\r\n        .transition()\r\n          .attr('fill', 'whitesmoke')\r\n    });\r\n\r\n    container.on('mouseleave', () => {\r\n      container.select('rect')\r\n        .transition()\r\n          .attr('fill', 'lightgrey')\r\n    });\r\n};\r\n\r\nexport const addSmallCloseButton = container => {\r\n\r\n  addSmallButton(container);\r\n\r\n  container.append('line')\r\n      .attr('x1', 3)\r\n      .attr('x2', 12)\r\n      .attr('y1', 3)\r\n      .attr('y2', 12)\r\n      .attr('stroke', 'black')\r\n      .attr('stroke-width', 1);\r\n\r\n  container.append('line')\r\n    .attr('x1', 12)\r\n    .attr('x2', 3)\r\n    .attr('y1', 3)\r\n    .attr('y2', 12)\r\n    .attr('stroke', 'black')\r\n    .attr('stroke-width', 1);\r\n};\r\n\r\nconst addButton = (container, height = buttonWidth) => {\r\n\r\n  const rect = container.append('rect')\r\n    .attr('width', buttonWidth)\r\n    .attr('height', height)\r\n    .attr('fill', fill)\r\n    .attr('rx', cornerRadius)\r\n    .attr('stroke', fill)\r\n    .attr('stroke-width', 1);\r\n\r\n  container.on('mouseover', () => {\r\n    rect.transition()\r\n      .attr('fill', 'dimgray');\r\n  });\r\n\r\n  container.on('mouseleave', () => {\r\n    rect.transition()\r\n      .attr('fill', fill);\r\n  });\r\n\r\n  container.on('click.format', () => {\r\n    rect.transition()\r\n        .attr('fill', 'grey')\r\n      .transition()\r\n        .attr('fill', 'dimgray');\r\n  });\r\n};\r\n\r\nconst addZoomInButton = container => {\r\n\r\n  addButton(container);\r\n\r\n  container.append('line')\r\n    .attr('x1', buttonWidth / 2)\r\n    .attr('y1', 8)\r\n    .attr('x2', buttonWidth / 2)\r\n    .attr('y2', buttonWidth - 8)\r\n    .attr('stroke', 'lightgrey')\r\n    .attr('stroke-width', 4);\r\n\r\n  container.append('line')\r\n    .attr('x1', 8)\r\n    .attr('y1', buttonWidth / 2)\r\n    .attr('x2', buttonWidth - 8)\r\n    .attr('y2', buttonWidth / 2)\r\n    .attr('stroke', 'lightgrey')\r\n    .attr('stroke-width', 4);\r\n};\r\n\r\nconst addZoomOutButton = container => {\r\n\r\n  addButton(container);\r\n\r\n  container.append('line')\r\n    .attr('x1', 8)\r\n    .attr('y1', buttonWidth / 2)\r\n    .attr('x2', buttonWidth - 8)\r\n    .attr('y2', buttonWidth / 2)\r\n    .attr('stroke', 'lightgrey')\r\n    .attr('stroke-width', 4);\r\n};\r\n\r\nconst addToggleLabelsButton = container => {\r\n\r\n  addButton(container, buttonWidth / 2);\r\n\r\n  container.append('text')\r\n    .attr('fill', 'lightgrey')\r\n    .attr('font-size', 11)\r\n    .attr('x', 4)\r\n    .attr('y', 14)\r\n    .text('Labels');\r\n};\r\n\r\nconst addResetButton = container => {\r\n\r\n  addButton(container, buttonWidth / 2);\r\n\r\n  container.append('text')\r\n    .attr('fill', 'lightgrey')\r\n    .attr('font-size', 11)\r\n    .attr('x', 6)\r\n    .attr('y', 14)\r\n    .text('Reset');\r\n};\r\n\r\nexport const addControlButtons = container => {\r\n\r\n  const zoomIn = container.append('g');\r\n  const zoomOut = container.append('g')\r\n    .attr('transform', `translate(0,${buttonWidth + 5})`);\r\n  const toggleLabels = container.append('g')\r\n    .attr('transform', `translate(0,${2 * buttonWidth + 2 * 5})`);\r\n  const reset = container.append('g')\r\n    .attr('transform', `translate(0,${2.5 * buttonWidth + 3 * 5})`);\r\n\r\n  addZoomInButton(zoomIn);\r\n  addZoomOutButton(zoomOut);\r\n  addToggleLabelsButton(toggleLabels);\r\n  addResetButton(reset);\r\n\r\n  return { zoomIn, zoomOut, toggleLabels, reset };\r\n};","import {\r\n  scaleBand, scaleLinear, format, axisBottom, axisLeft,\r\n} from 'd3';\r\nimport {\r\n  padding, textHeight, textLabelHeight, barWidth, barHeight,\r\n} from './constants';\r\n\r\nconst tickSize = 20;\r\nconst tickPadding = 2;\r\nconst innerTickSize = 5;\r\nconst outerTickSize = 0;\r\nconst labelFormatter = format('.2');\r\n\r\nexport const addBarPlot = (labelContainer, cluster, clusterCollection) => {\r\n  const groups = ['', 'min', '', 'max'];\r\n  const { minDist } = clusterCollection;\r\n  const { maxDist } = clusterCollection;\r\n  const { avgDist } = clusterCollection;\r\n  const barData = [cluster.dev, minDist, avgDist, maxDist];\r\n\r\n  const barPlot = labelContainer.append('g')\r\n    .attr('transform', `translate(${2 * padding},${textHeight + padding})`);\r\n\r\n  barPlot.append('text')\r\n    .attr('fill', 'lightgrey')\r\n    .attr('font-size', `${textLabelHeight}px`)\r\n    .text(' L2-distance to ')\r\n    .attr('opacity', 0)\r\n    .transition()\r\n    .delay(500)\r\n    .attr('opacity', 1);\r\n\r\n  const x = scaleBand()\r\n    .domain(groups)\r\n    .range([0, barWidth])\r\n    .padding(0.2);\r\n\r\n  const y = scaleLinear()\r\n    .domain([0, maxDist])\r\n    .range([barHeight, 0]);\r\n\r\n  const xAxis = axisBottom(x)\r\n    .tickSizeInner(innerTickSize)\r\n    .tickSizeOuter(outerTickSize)\r\n    .tickPadding(tickPadding);\r\n\r\n  barPlot.append('g')\r\n    .attr('transform', `translate(0,${textLabelHeight + barHeight})`)\r\n    .attr('class', 'axis')\r\n    .attr('opacity', 0)\r\n    .transition()\r\n    .delay(500)\r\n    .attr('opacity', 1)\r\n    .call(xAxis);\r\n\r\n  const yAxis = axisLeft(y)\r\n    .tickFormat((d) => labelFormatter(d))\r\n    .tickSizeInner(innerTickSize)\r\n    .ticks(barHeight / tickSize)\r\n    .tickSizeOuter(outerTickSize)\r\n    .tickPadding(tickPadding);\r\n\r\n  barPlot.append('g')\r\n    .attr('transform', `translate(0,${textLabelHeight})`)\r\n    .attr('class', 'axis')\r\n    .attr('opacity', 0)\r\n    .transition()\r\n    .delay(500)\r\n    .attr('opacity', 1)\r\n    .call(yAxis);\r\n\r\n  const bars = barPlot.append('g');\r\n\r\n  bars.selectAll('rect')\r\n    .data(barData)\r\n    .join('rect')\r\n    .attr('x', (d, i) => x(groups[i]))\r\n    .attr('y', textLabelHeight + barHeight)\r\n    .attr('width', x.bandwidth())\r\n    .attr('height', 0)\r\n    .attr('fill', (d, i) => (i === 0 ? cluster.color : 'grey'))\r\n    .transition()\r\n    .delay(500)\r\n    .duration(1000)\r\n    .attr('y', (d) => textLabelHeight + y(d))\r\n    .attr('height', (d) => barHeight - y(d));\r\n};\r\n","import { pie, interpolate, arc } from 'd3';\r\nimport {\r\n  innerPieRadius, outerPieRadius, padding, barWidth, textHeight, textLabelHeight,\r\n} from './constants';\r\n\r\nconst sampleLabel = '# Samples';\r\n\r\nexport const addPiePlot = (labelContainer, cluster, clusterCollection) => {\r\n  const generator = pie().value((d) => d.count);\r\n  const pieData = generator(clusterCollection.clusters);\r\n  const angleInterpolation = interpolate(generator.startAngle()(), generator.endAngle()());\r\n  const innerRadiusInterpolation = interpolate(0, innerPieRadius);\r\n  const outerRadiusInterpolation = interpolate(0, outerPieRadius);\r\n\r\n  const piePlot = labelContainer.append('g')\r\n    .attr('transform', `translate(${3 * padding + barWidth},${textHeight + padding})`);\r\n\r\n  piePlot.append('text')\r\n    .attr('x', outerPieRadius - 7 * sampleLabel.length / 2)\r\n    .attr('fill', 'lightgrey')\r\n    .attr('font-size', `${textLabelHeight}px`)\r\n    .text(sampleLabel)\r\n    .attr('opacity', 0)\r\n    .transition()\r\n    .delay(500)\r\n    .attr('opacity', 1);\r\n\r\n  const countString = `${cluster.count}`;\r\n\r\n  piePlot.append('text')\r\n    .attr('x', outerPieRadius - 7 * countString.length / 2)\r\n    .attr('y', 54)\r\n    .attr('fill', 'lightgrey')\r\n    .attr('font-size', `${textLabelHeight}px`)\r\n    .text(`${cluster.count}`)\r\n    .attr('opacity', 0)\r\n    .transition()\r\n    .delay(1000)\r\n    .attr('opacity', 1);\r\n\r\n  const { totalCount } = clusterCollection;\r\n  const percentage = 100 * cluster.count / totalCount;\r\n  const percentageString = `${percentage.toFixed(1)}%`;\r\n\r\n  piePlot.append('text')\r\n    .attr('x', outerPieRadius - 7 * percentageString.length / 2)\r\n    .attr('y', 71)\r\n    .attr('fill', 'lightgrey')\r\n    .attr('font-size', `${textLabelHeight}px`)\r\n    .text(percentageString)\r\n    .attr('opacity', 0)\r\n    .transition()\r\n    .delay(1000)\r\n    .attr('opacity', 1);\r\n\r\n  const chart = piePlot.append('g')\r\n    .attr('transform', `translate(${outerPieRadius},${outerPieRadius + textLabelHeight})`);\r\n\r\n  const arcs = chart.selectAll('path')\r\n    .data(pieData)\r\n    .enter()\r\n    .append('path')\r\n    .attr('fill', (d, i) => (clusterCollection.clusters[i].name === cluster.name ? cluster.color : 'lightgrey'));\r\n\r\n  const ar = arc();\r\n\r\n  arcs.transition()\r\n    .duration(1500)\r\n    .attrTween('d', (d) => {\r\n      const originalEnd = d.endAngle;\r\n      return (t) => {\r\n        const currentAngle = angleInterpolation(t);\r\n        if (currentAngle < d.startAngle) return '';\r\n        d.endAngle = Math.min(currentAngle, originalEnd);\r\n        return ar(d);\r\n      };\r\n    });\r\n\r\n  chart\r\n    .transition()\r\n    .duration(1500)\r\n    .tween('arcRadii', () => (t) => ar\r\n      .innerRadius(innerRadiusInterpolation(t))\r\n      .outerRadius(outerRadiusInterpolation(t)));\r\n};\r\n","import { addSmallCloseButton } from './buttons';\r\nimport { fadeIn, fadeOut } from './helpers';\r\nimport { addBarPlot } from './barPlot';\r\nimport { addPiePlot } from './piePlot';\r\nimport {\r\n  padding,\r\n  fill,\r\n  outerPieRadius,\r\n  labelHeight,\r\n  barWidth,\r\n  textHeight,\r\n  textLabelHeight,\r\n  barHeight,\r\n  cornerRadius,\r\n  offset\r\n} from './constants';\r\n\r\nconst middle = labelHeight / 2;\r\nconst extendedWidth = 4 * padding + barWidth + 2 * outerPieRadius;\r\nconst extendedHeight = textHeight + textLabelHeight + barHeight + 2.5 * padding;\r\n\r\nexport class LabelFactory {\r\n\r\n  constructor(container, collection) {\r\n\r\n    this.container = container;\r\n    this.collection = collection;\r\n    this.extendedShown = false;\r\n    this.allLabelsShown = false;\r\n    this.selectedCluster = null;\r\n    this.visibility = new Map();\r\n\r\n    for (const c of collection.clusters)\r\n      this.visibility.set(c.id, false);\r\n  };\r\n\r\n  setRange([width, height]) {\r\n    this.width = width;\r\n    this.height = height;\r\n  };\r\n\r\n  showLabel(id, [px, py], text, duration = 1000) {\r\n\r\n    const textLength = 12 * text.length;\r\n    const labelWidth = textLength + padding;\r\n    const x = this.collection.xDomain(px);\r\n    const y = this.collection.yDomain(py) - middle;\r\n    const flip = (this.width - x - extendedWidth) < 0;\r\n    const diff = flip ? (1 - labelWidth - offset) : (offset - 1);\r\n\r\n    const label = this.container.append('g')\r\n      .attr('id', `label-${id}`)\r\n      .attr('transform', `translate(${x},${y})`);\r\n\r\n    label.append('polygon')\r\n      .attr('points', [[0, middle], [offset, middle + 5], [offset, middle - 5]])\r\n      .attr('transform', `translate(0,${flip ? 20 : 0}) rotate(${flip ? 180 : 0})`)\r\n      .attr('fill', fill);\r\n\r\n    const container = label.append('g')\r\n      .attr('id', `label-${id}-container`)\r\n      .attr('transform', `translate(${diff},0)`);\r\n\r\n    container.append('rect')\r\n      .attr('x', 0)\r\n      .attr('y', 0)\r\n      .attr('width', labelWidth)\r\n      .attr('height', labelHeight)\r\n      .attr('rx', cornerRadius)\r\n      .attr('fill', fill);\r\n\r\n    container.append('text')\r\n      .attr('x', offset)\r\n      .attr('y', middle + 5)\r\n      .attr('stroke', 'lightgrey')\r\n      .attr('fill', 'white')\r\n      .attr('textLength', textLength)\r\n      .attr('font-family', 'ui-sans-serif')\r\n      .attr('font-weight', 600)\r\n      .attr('font-style', 'italic')\r\n      .text(text);\r\n\r\n    fadeIn(label, duration);\r\n  };\r\n\r\n  removeLabel(id, duration = 1000) {\r\n    const label = this.container.selectAll(`#label-${id}`);\r\n    fadeOut(label, duration).remove();\r\n  };\r\n\r\n  showClusterLabel(cluster, duration = 600) {\r\n\r\n    if (this.visibility.get(cluster.id))\r\n      return;\r\n\r\n    const id = cluster.id;\r\n    const p = cluster.mean;\r\n    const text = cluster.name;\r\n\r\n    this.showLabel(id, p, text, duration);\r\n    this.visibility.set(cluster.id, true);\r\n  };\r\n\r\n  removeClusterLabel(cluster, duration = 1000) {\r\n\r\n    const shown = this.visibility.get(cluster.id);\r\n\r\n    if (!shown || this.allLabelsShown)\r\n      return;\r\n\r\n    this.removeLabel(cluster.id, duration);\r\n    this.selectedCluster = null;\r\n    this.extendedShown = false;\r\n    this.visibility.set(cluster.id, false);\r\n  };\r\n\r\n  showLabels(duration = 1000) {\r\n    this.allLabelsShown = true;\r\n    for (const c of this.collection.clusters)\r\n      if (!this.visibility.get(c.id))\r\n        this.showClusterLabel(c, duration);\r\n  };\r\n\r\n  removeLabels(duration = 1000) {\r\n\r\n    this.allLabelsShown = false;\r\n    this.extendedShown = false;\r\n    this.selectedCluster = null;\r\n\r\n    for (const c of this.collection.clusters)\r\n      if (this.visibility.get(c.id))\r\n        this.removeClusterLabel(c, duration);\r\n  };\r\n\r\n  retractClusterLabel(cluster) {\r\n\r\n    const shown = this.visibility.get(cluster.id);\r\n\r\n    if (!shown || !this.allLabelsShown)\r\n      return;\r\n\r\n    const text = cluster.name;\r\n    const textLength = 12 * text.length;\r\n    const labelWidth = textLength + 20;\r\n\r\n    const px = this.collection.scalePoint(cluster.mean)[0];\r\n    const shiftX = (this.width - px) <= extendedWidth;\r\n    const diffX = shiftX ? (1 - offset - labelWidth) : (offset - 1);\r\n    const labelContainer = this.container.select(`#label-${cluster.id}-container`);\r\n\r\n    labelContainer.transition()\r\n      .duration(800)\r\n      .delay(500)\r\n        .attr('transform', `translate(${diffX},0)`)\r\n\r\n    labelContainer.select('rect')\r\n      .transition()\r\n        .duration(800)\r\n        .delay(500)\r\n          .attr('x', 0)\r\n          .attr('y', 0)\r\n          .attr('width', labelWidth)\r\n          .attr('height', labelHeight)\r\n          .attr('rx', cornerRadius)\r\n          .attr('fill', fill);\r\n\r\n    const content = labelContainer.selectAll('g');\r\n    fadeOut(content, 500).remove();\r\n    this.selectedCluster = null;\r\n    this.extendedShown = false;\r\n  };\r\n\r\n  showDetailTag(cluster) {\r\n\r\n    if (cluster === this.selectedCluster)\r\n      return;\r\n\r\n    if (this.extendedShown) {\r\n      this.extendedShown = false;\r\n      if (this.allLabelsShown)\r\n        this.retractClusterLabel(this.selectedCluster);\r\n      else\r\n        this.removeClusterLabel(this.selectedCluster);\r\n      this.showClusterLabel(cluster);\r\n    }\r\n\r\n    this.selectedCluster = cluster;\r\n    this.extendedShown = true;\r\n\r\n    const [px, py] = this.collection.scalePoint(cluster.mean);\r\n    const shiftX = (this.width - px) <= extendedWidth;\r\n    const shiftY = (this.height - py) <= extendedHeight;\r\n    const diffX = shiftX ? (1 - offset - extendedWidth) : (offset - 1);\r\n    const diffY = shiftY ? (this.height - py - extendedHeight) : 0;\r\n    const label = this.container.select(`#label-${cluster.id}`).raise();\r\n    const labelContainer = label.select(`#label-${cluster.id}-container`);\r\n\r\n    labelContainer.transition()\r\n      .duration(500)\r\n        .attr('transform', `translate(${diffX},${diffY})`);\r\n\r\n    labelContainer.select('rect')\r\n      .transition()\r\n        .duration(500)\r\n          .attr('width', extendedWidth)\r\n          .attr('height', extendedHeight)\r\n\r\n    addBarPlot(labelContainer, cluster, this.collection);\r\n    addPiePlot(labelContainer, cluster, this.collection);\r\n\r\n    const gClose = labelContainer.append('g')\r\n      .attr('transform', `translate(${extendedWidth - 15 - 3},3)`)\r\n\r\n    addSmallCloseButton(gClose);\r\n    fadeIn(gClose, 0, 500);\r\n\r\n    gClose.on('click', () => {\r\n      this.selectedCluster = null;\r\n      this.extendedShown = false;\r\n      if (this.allLabelsShown)\r\n        this.retractClusterLabel(cluster);\r\n      else this.removeClusterLabel(cluster);\r\n    });\r\n  };\r\n\r\n  allShown() {\r\n    return this.allLabelsShown;\r\n  };\r\n\r\n  extended() {\r\n    return this.extendedShown;\r\n  };\r\n\r\n  selected() {\r\n    return this.selectedCluster;\r\n  };\r\n};","import { Delaunay } from 'd3';\r\nimport { ClusterCollection } from './data';\r\nimport { addControlButtons } from './buttons';\r\nimport { LabelFactory } from './labels';\r\nimport { addZoom } from './zoom';\r\nimport { affineComb, delay } from './helpers';\r\nimport {\r\n  centroidRadius,\r\n  centroidBorderWidth,\r\n  cellBorderWidth,\r\n  padding,\r\n  buttonWidth,\r\n  initialPointRadius,\r\n  fill,\r\n  zoomStep\r\n} from './constants';\r\n\r\nconst addGroup = (svg, id) => {\r\n  return svg.append('g').attr('id', `${id}`);\r\n};\r\n\r\nexport class UmapVisualization {\r\n\r\n  constructor(container, data) {\r\n\r\n    this.canvas = container.append('canvas');\r\n    this.svg = container.append('svg');\r\n    this.gCentroids = addGroup(this.svg, 'centroids');\r\n    this.gCells = addGroup(this.svg, 'cells');\r\n    this.gLabels = addGroup(this.svg, 'labels');\r\n    this.gControls = addGroup(this.svg, 'controls');\r\n    this.collection = new ClusterCollection(data);\r\n    this.labels = new LabelFactory(this.svg, this.collection);\r\n  };\r\n\r\n  drawPoints(r) {\r\n    for (const c of this.collection.clusters) {\r\n      this.context.fillStyle = c.color;\r\n      this.context.globalAlpha = 0.3;\r\n      for (const p of c.points) {\r\n        const [x, y] = this.collection.scalePoint(p);\r\n        this.context.beginPath();\r\n        this.context.arc(x, y, r, 0, r * Math.PI);\r\n        this.context.fill();\r\n      }\r\n    }\r\n  };\r\n\r\n  clearCanvas() {\r\n    this.context.clearRect(0, 0, this.width, this.height);\r\n  };\r\n\r\n  addCentroids() {\r\n\r\n    this.gCentroids.selectAll('centroid')\r\n        .remove();\r\n\r\n    const centroids = this.gCentroids.selectAll('centroid')\r\n      .data(this.collection.clusters)\r\n      .join('circle')\r\n        .attr('cx', c => this.collection.xDomain(c.mean[0]))\r\n        .attr('cy', c => this.collection.yDomain(c.mean[1]))\r\n        .attr('r', centroidRadius)\r\n        .attr('stroke', c => c.color)\r\n        .attr('stroke-width', centroidBorderWidth)\r\n        .attr('fill', c => c.color)\r\n        .attr('fill-opacity', 0.7);\r\n\r\n    this.centroids = centroids;\r\n  };\r\n\r\n  addCells() {\r\n\r\n    this.gCells.selectAll('cell')\r\n      .remove();\r\n\r\n    const means = this.collection.clusters.map(c => c.mean);\r\n    const scaledMeans = this.collection.scalePoints(means);\r\n    const voronoi = Delaunay.from(scaledMeans)\r\n      .voronoi([0, 0, this.width, this.height]);\r\n    const cells = this.gCells.selectAll('cell')\r\n      .data(this.collection.clusters)\r\n      .join('polygon')\r\n        .attr('id', c => `cell-${c.id}`)\r\n        .attr('points', (c, i) => voronoi.cellPolygon(i))\r\n        .attr('fill', c => c.color)\r\n        .attr('opacity', 0.1)\r\n        .attr('stroke', 'black')\r\n        .attr('stroke-width', cellBorderWidth);\r\n\r\n    this.cells = cells;\r\n  };\r\n\r\n  highlightCell(cluster) {\r\n    this.svg.select(`#cell-${cluster.id}`)\r\n      .transition()\r\n        .duration(500)\r\n          .attr('opacity', 0.2);\r\n  };\r\n\r\n  resetCell(cluster) {\r\n    this.svg.select(`#cell-${cluster.id}`)\r\n      .transition()\r\n        .duration(1000)\r\n          .attr('opacity', 0.1);\r\n  };\r\n\r\n  render([width, height]) {\r\n\r\n    this.width = width;\r\n    this.height = height;\r\n    this.gCentroids.selectAll('*').remove();\r\n    this.gCells.selectAll('*').remove();\r\n    this.gCentroids.selectAll('*').remove();\r\n    this.gControls.selectAll('*').remove();\r\n\r\n    this.canvas\r\n      .attr('width', width)\r\n      .attr('height', height);\r\n\r\n    this.svg\r\n      .attr('width', width)\r\n      .attr('height', height)\r\n      .attr('transform', `translate(0,${-height - 4})`);\r\n\r\n    const controlX = width - padding - buttonWidth;\r\n    this.gControls.attr('transform', `translate(${controlX},${padding})`);\r\n    this.context = this.canvas.node().getContext('2d');\r\n\r\n    this.collection.setRange([width, height]);\r\n    this.labels.setRange([width, height]);\r\n\r\n    this.drawPoints(initialPointRadius);\r\n    this.addCentroids();\r\n    this.addCells();\r\n\r\n    this.cells.on('mouseover', (e, d) => {\r\n      if (!this.labels.extended())\r\n        this.labels.showClusterLabel(d);\r\n      this.highlightCell(d);\r\n    });\r\n\r\n    this.cells.on('mouseleave', (e, d) => {\r\n      if (!this.labels.extended())\r\n        this.labels.removeClusterLabel(d);\r\n      this.resetCell(d);\r\n    });\r\n\r\n    this.cells.on('click', (e, d) => {\r\n        this.labels.showDetailTag(d);\r\n    });\r\n\r\n    const {\r\n      zoomIn,\r\n      zoomOut,\r\n      toggleLabels,\r\n      reset\r\n    } = addControlButtons(this.gControls);\r\n\r\n    this.zoomFactor = 1;\r\n    this.counter = 0;\r\n    this.zoomIn = zoomIn;\r\n    this.zoomOut = zoomOut;\r\n    this.toggleLabels = toggleLabels;\r\n    this.reset = reset;\r\n\r\n    this.zoomIn.on('click', () => {\r\n      this.setZoom(zoomStep);\r\n    });\r\n\r\n    this.zoomOut.on('click', () => {\r\n      this.setZoom(1 / zoomStep);\r\n    });\r\n\r\n    this.toggleLabels.on('mouseover', () => {\r\n      if (!this.labels.allShown())\r\n        this.toggleLabels.select('rect')\r\n          .transition()\r\n            .attr('fill', 'dimgray');\r\n    });\r\n\r\n    this.toggleLabels.on('mouseleave', () => {\r\n      if (!this.labels.allShown())\r\n        this.toggleLabels.select('rect')\r\n          .transition()\r\n            .attr('fill', fill);\r\n    });\r\n\r\n    this.toggleLabels.on('click', () => {\r\n\r\n      if (!this.labels.allShown()) {\r\n        this.labels.showLabels();\r\n        this.toggleLabels.select('rect')\r\n          .transition()\r\n            .attr('fill', 'grey');\r\n        return;\r\n      }\r\n\r\n    this.labels.removeLabels();\r\n      this.toggleLabels.select('rect')\r\n        .transition()\r\n          .attr('fill', 'dimgray');\r\n    });\r\n\r\n    this.reset.on('click', () => {\r\n      this.setZoom(1 / this.zoomFactor);\r\n    });\r\n\r\n    this.currentClosest = null;\r\n\r\n    this.svg.on('mousemove', e => {\r\n\r\n      if (this.zoomFactor >= 10) {\r\n\r\n        const p = this.collection.unscalePoint([e.clientX, e.clientY]);\r\n        const closest = this.collection.findClosestSample(p);\r\n\r\n        if (closest !== this.currentClosest) {\r\n\r\n          if (closest !== undefined) {\r\n            const id = closest.id.replaceAll('_', '-');\r\n            const p = [closest.x, closest.y];\r\n            this.labels.showLabel(id, p, id);\r\n          }\r\n\r\n          if (this.currentClosest) {\r\n            const id = this.currentClosest.id.replaceAll('_', '-');\r\n            this.labels.removeLabel(id);\r\n          }\r\n\r\n          this.currentClosest = closest;\r\n        };\r\n      }\r\n    });\r\n\r\n    const handleZoom = ({ transform }) => {\r\n\r\n      if (transform.k === 1)\r\n        return;\r\n\r\n      const allShown = this.labels.allShown();\r\n      this.collection.rescaleDomain(transform);\r\n      this.labels.removeLabels(0);\r\n      this.clearCanvas();\r\n      this.cells.attr('transform', transform);\r\n      this.centroids.attr('transform', transform);\r\n\r\n      if (transform.k !== this.zoomFactor) {\r\n\r\n        this.zoomFactor = transform.k;\r\n        this.centroids\r\n          .attr('r', centroidRadius / this.zoomFactor)\r\n          .attr('stroke-width', centroidBorderWidth / this.zoomFactor);\r\n        this.cells\r\n          .attr('stroke-width', cellBorderWidth / this.zoomFactor);\r\n\r\n        if (allShown)\r\n          this.labels.showLabels();\r\n\r\n      } else {\r\n\r\n        if (allShown) {\r\n          this.counter++;\r\n          delay(100).then(() => {\r\n            this.counter--;\r\n            if (this.counter === 0)\r\n              this.labels.showLabels();\r\n          });\r\n        }\r\n      }\r\n\r\n      const r = affineComb(this.zoomFactor / 10);\r\n      this.drawPoints(r);\r\n    };\r\n\r\n    this.setZoom = addZoom(this.svg, [width, height], handleZoom);\r\n  };\r\n};","import { easeCircle, zoom } from 'd3';\r\n\r\nconst transitionTime = 1000;\r\nconst maxZoomFactor = 16;\r\n\r\nexport const addZoom = (svg, [width, height], handleZoom) => {\r\n\r\n  const z = zoom()\r\n    .scaleExtent([1, maxZoomFactor])\r\n    .translateExtent([\r\n        [0, 0],\r\n        [width, height],\r\n    ])\r\n    .on('zoom', handleZoom);\r\n\r\n  svg.call(z)\r\n    .on('wheel.zoom', null);\r\n\r\n  const setZoom = zoomFactor => {\r\n    svg.transition()\r\n      .ease(easeCircle)\r\n      .duration(transitionTime)\r\n      .call(z.scaleBy, zoomFactor);\r\n  }\r\n\r\n  return setZoom;\r\n}\r\n","import React from 'react';\r\nimport { tsv, select } from 'd3';\r\nimport umapData from './data/retinal_bipolar_viz/umap_data';\r\nimport { UmapVisualization } from './container';\r\nimport { width, height } from './constants';\r\nimport './visualization.module.css';\r\n\r\nclass Visualization extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.myRef = React.createRef();\r\n    this.url = props.url;\r\n  }\r\n\r\n  componentDidMount() {\r\n    tsv(this.url).then(data => {\r\n      const container = select(this.myRef.current);\r\n      const viz = new UmapVisualization(container, data);\r\n      viz.render([width, height]);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (<div ref={this.myRef}></div>);\r\n  }\r\n}\r\n\r\nexport default Visualization;","import React from 'react';\r\nimport {\r\n  Box, createTheme, ThemeProvider,\r\n} from '@mui/material';\r\nimport { useLocation } from 'react-router-dom';\r\nimport Visualization from 'components/Visualization/src/Visualization';\r\nimport styles from './visualizationpage.module.css';\r\nimport NavBar from 'components/NavBar/old';\r\nimport Footer from 'components/Footer';\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#0075FF',\r\n    },\r\n    secondary: {\r\n      main: '#FFFFFF',\r\n    },\r\n  },\r\n});\r\n\r\nfunction useQuery() {\r\n  const { search } = useLocation();\r\n\r\n  return React.useMemo(() => new URLSearchParams(search), [search]);\r\n}\r\n\r\nfunction VisualizationPage() {\r\n  const query = useQuery();\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <div>\r\n        {/* <NavBar /> */} {/* TODO: is this navbar even useful? I think it can be deleted and with it the old navbar */}\r\n        <div className={styles.headerContainer}>\r\n          <Box\r\n            sx={{\r\n              display: 'flex',\r\n              justifyContent: 'center',\r\n              textAlign: 'center',\r\n            }}\r\n            className={styles.visualizationContainer}\r\n          >\r\n            <Visualization url={query.get('tsv')} />\r\n          </Box>\r\n          <Footer />\r\n        </div>\r\n      </div>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default VisualizationPage;\r\n","/* eslint-disable no-unused-vars,react/jsx-no-bind */\r\nimport React, { useCallback, useState, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  Avatar,\r\n  Snackbar,\r\n  Alert,\r\n  Typography,\r\n} from '@mui/material';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport NavBar from 'components/NavBar';\r\nimport styles from './passwordresetpage.module.css';\r\nimport logo from 'assets/logo.svg';\r\nimport { BACKEND_ADDRESS } from 'shared/utils/common/constants';\r\nimport Input from 'components/Input/Input';\r\nimport CustomButton from 'components/CustomButton/index';\r\n\r\nfunction PasswordResetPage(props) {\r\n  const [errors, setErrors] = useState({});\r\n  const [isSnackbarVisible, setSnackbarVisible] = useState(false);\r\n  const [input, setInput] = useState({\r\n    password: '',\r\n    confirmpass: '',\r\n  });\r\n\r\n  const location = useLocation();\r\n\r\n  const boxStyle = {\r\n    position: 'relative',\r\n    align: 'center',\r\n    width: '60%',\r\n    bgcolor: 'background.paper',\r\n    boxShadow: 3,\r\n    top: 32,\r\n    p: 12,\r\n    borderRadius: 3,\r\n  };\r\n\r\n  function validateInput() {\r\n    if (input.password != null && input.confirmpass != null) {\r\n      if (input.password === input.confirmpass) return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  function doPWReset() {\r\n    setErrors({});\r\n    if (!validateInput()) {\r\n      setErrors({ passwordconfirm: 'Password mismatch!' });\r\n      return;\r\n    }\r\n\r\n    const params = new URLSearchParams(location.search);\r\n    const token = params.get('token');\r\n    // send POST request with token and password\r\n    const requestOptions = {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        password: input.password,\r\n      }),\r\n    };\r\n    fetch(`${BACKEND_ADDRESS}/password_reset/${token}`, requestOptions).then(\r\n      (response) => {\r\n        if (response.status === 404) {\r\n          setErrors({ response: response.statusText });\r\n        }\r\n        if (response.status === 400) {\r\n          setErrors({ response: response.statusText });\r\n        }\r\n      },\r\n    );\r\n    setSnackbarVisible(true);\r\n    // history.push('/');\r\n  }\r\n\r\n  function onSnackbarClose() {\r\n    setSnackbarVisible(false);\r\n    setErrors({});\r\n  }\r\n\r\n  const handleTextChange = useCallback(\r\n    (e) => {\r\n      setInput((prevState) => ({\r\n        ...prevState,\r\n        [e.target.id]: e.target.value,\r\n      }));\r\n    },\r\n    [setInput],\r\n  );\r\n\r\n  return (\r\n    <div className={styles.headerContainer}>\r\n      <NavBar />\r\n      <Box justifyContent=\"center\" display=\"flex\">\r\n        <Box sx={boxStyle}>\r\n          <Grid>\r\n            <Grid container direction=\"row\" justifyContent=\"center\">\r\n              <Grid xs item />\r\n              <Grid align=\"center\">\r\n                <Avatar src={logo} sx={{ width: 72, height: 72 }} />\r\n                <h1>Password Reset</h1>\r\n              </Grid>\r\n              <Grid xs align=\"right\" item />\r\n            </Grid>\r\n            <Input\r\n              id=\"password\"\r\n              type=\"password\"\r\n              error={!!errors.password}\r\n              helperText={errors.password}\r\n              label=\"New Password\"\r\n              placeholder=\"Enter New Password\"\r\n              required\r\n              onChangeEvent={handleTextChange}\r\n            />\r\n            <Input\r\n              id=\"confirmpass\"\r\n              type=\"password\"\r\n              error={!!errors.passwordconfirm}\r\n              helperText={errors.passwordconfirm}\r\n              label=\"Confirm Password\"\r\n              placeholder=\"Reenter Password\"\r\n              required\r\n              onChangeEvent={handleTextChange}\r\n            />\r\n            <Box mt={1}>\r\n              <CustomButton\r\n                type=\"primary\"\r\n                sx={{ ml: 1, width: '100%' }}\r\n                onClick={doPWReset}\r\n              >\r\n                <Typography>Reset</Typography>\r\n              </CustomButton>\r\n            </Box>\r\n          </Grid>\r\n        </Box>\r\n      </Box>\r\n      <Snackbar\r\n        open={isSnackbarVisible}\r\n        autoHideDuration={3000}\r\n        onClose={onSnackbarClose}\r\n      >\r\n        <Alert\r\n          severity={errors.response ? 'error' : 'success'}\r\n          sx={{ width: '100%' }}\r\n          onClose={onSnackbarClose}\r\n        >\r\n          {errors.response ? errors.response : 'Password reset successfully!'}\r\n        </Alert>\r\n      </Snackbar>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PasswordResetPage;\r\n","import React from 'react';\r\nimport { Box, Typography, Link } from '@mui/material';\r\nimport { colors } from 'shared/theme/colors';\r\n\r\nexport default function NotFound(){\r\n    \r\n    return (\r\n        <Box sx={{position: \"absolute\", width: \"100%\", margin: 'auto', top: \"30%\", textAlign: \"center\"}}>\r\n            <Typography fontSize=\"44px\" fontWeight=\"bold\">Error 404</Typography>\r\n            <Typography fontSize=\"24px\" fontWeight=\"bold\">Not Found</Typography>\r\n            <Typography marginTop=\"20px\">The resource could not be found on the server!</Typography>\r\n            <Link href=\"#\" style={{ textDecorationColor: colors.primary[400], textDecorationThickness: \"1px\" }}>\r\n                <Typography sx={{color: colors.primary[400], textDecoration: \"none\", cursor: 'pointer', \":hover\": {color: colors.primary[500]} }}>\r\n                Go Back Home\r\n                </Typography>\r\n            </Link>\r\n        </Box>\r\n    );\r\n}\r\n","import { createTheme } from '@mui/material/styles';\r\nimport { colors } from './colors';\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      dark: colors.primary[900],\r\n      main: colors.primary[700],\r\n      light: colors.primary[400],\r\n      contrastText: colors.neutral[100],\r\n    },\r\n    secondary: {\r\n      main: colors.secondary1[400],\r\n      light: colors.secondary2[400],\r\n      contrastText: colors.neutral[100],\r\n      dark: colors.secondary1[600],\r\n    },\r\n    typography: {\r\n      fontFamily: '', // TODO: choose between Open Sans, Roboto, Lato\r\n    },\r\n    error: {\r\n      main: colors.error.main,\r\n      dark: colors.error.dark,\r\n    },\r\n    warning: {\r\n      main: colors.warning.main,\r\n      dark: colors.warning.dark,\r\n    },\r\n    success: {\r\n      main: colors.success.main,\r\n      dark: colors.success.dark,\r\n    },\r\n  },\r\n});\r\n","import {\r\n  useContext, React, useEffect, useState,\r\n} from 'react';\r\nimport { BACKEND_ADDRESS } from 'shared/utils/common/constants';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Box, Snackbar, Alert } from '@mui/material';\r\nimport GeneMapper from 'views/GeneMapper';\r\nimport LoginForm from 'components/LoginForm';\r\nimport RegistrationForm from 'components/RegistrationForm';\r\nimport PasswordForgetForm from 'components/PasswordForgetForm';\r\nimport { LoginContext } from 'shared/context/loginContext';\r\n\r\n// The non-login version of the genemapper page.\r\n// The main genemapper component is used with loggedIn set to false.\r\nfunction NonLoginGeneMapper() {\r\n  const [isSnackbarVisible, setSnackbarVisible] = useState(false);\r\n\r\n  // Get jwt token for temporary upload access\r\n  useEffect(() => {\r\n    // check if token exists && current token is not expired\r\n    if (localStorage.getItem('jwt')) {\r\n      const expiresAt = localStorage.getItem('temp_jwt_expiresAt');\r\n      // check if the jwt token hasn't expired. Divide by 1000 since expiresAt is in seconds\r\n      if (Math.ceil(Date.now() / 1000) < expiresAt) { return; }\r\n    }\r\n\r\n    fetch(`${BACKEND_ADDRESS}/temp_auth`)\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          console.log('failed to get authorization for file upload.');\r\n          setSnackbarVisible(true);\r\n          return null;\r\n        }\r\n        return response.json();\r\n      }) // set token\r\n      .then((data) => {\r\n        if(data === null) { console.log(\"Temp auth is null\"); return;  }\r\n        localStorage.setItem('jwt', data.jwt);\r\n        localStorage.setItem('temp_jwt_expiresAt', data.exp);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <Box sx={{\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      justifyContent: 'space-between',\r\n      mineight: '100vh',\r\n    }}\r\n    >\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          minHeight: '100vh',\r\n        }}\r\n      >\r\n        {/* Non-login GeneMapper */}\r\n        <GeneMapper sidebarShown={false} loggedIn={false} />\r\n        {/* Snack bar for unsuccessful upload access */}\r\n        <Snackbar\r\n          open={isSnackbarVisible}\r\n          autoHideDuration={10000}\r\n          onClose={() => setSnackbarVisible(false)}\r\n        >\r\n          <Alert\r\n            severity=\"error\"\r\n            sx={{ width: '100%' }}\r\n            onClose={() => setSnackbarVisible(false)}\r\n          >\r\n            Failed to get upload authorization. Please retry later.\r\n          </Alert>\r\n        </Snackbar>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default NonLoginGeneMapper;\r\n","import './app.module.css';\r\nimport React from 'react';\r\nimport { ThemeProvider } from '@mui/material';\r\nimport {\r\n  Route, HashRouter, Switch, Redirect,\r\n} from 'react-router-dom';\r\nimport HomePage from './views/Home';\r\nimport About from './views/About';\r\nimport LegalNotice from './views/LegalNotice';\r\nimport Privacy from './views/Privacy';\r\nimport Docs from './views/Docs';\r\nimport Contact from './views/Contact';\r\nimport DashboardContent from './components/DashboardContent';\r\nimport { guardedPage } from './shared/utils/common/utils';\r\nimport VisualizationPage from './views/VisualizationPage';\r\nimport PasswordResetPage from './views/PasswordResetPage';\r\nimport NotFound from './views/NotFound';\r\nimport { theme } from './shared/theme/theme';\r\nimport References from './views/References/index';\r\nimport { useAuth } from 'shared/context/authContext';\r\nimport NonLoginGeneMapper from 'views/NonLoginGeneMapper';\r\n\r\nfunction App() {\r\n  const [user] = useAuth();\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      {/* eslint-disable-next-line no-restricted-globals */}\r\n      <HashRouter>\r\n        <Switch>\r\n          <Route exact path=\"/\" render={() => (user ? <Redirect to=\"/sequencer\" /> : <HomePage />)} />\r\n          <Route path=\"/sequencer\" render={() => guardedPage(<DashboardContent />)} />\r\n          <Route path=\"/dashboard\" component={DashboardContent} />\r\n          {/* <Route path=\"/about\" render={() => <About />} /> */}\r\n          <Route path=\"/docs\" render={() => <Docs />} />\r\n          <Route path=\"/contact\" render={() => <Contact />} />\r\n          <Route path=\"/password_reset\" render={() => <PasswordResetPage />} />\r\n          <Route path=\"/result\" render={() => <VisualizationPage />} />\r\n          <Route path=\"/references\" render={() => <References />} />\r\n          {/* Gene mapper page without login */}\r\n          <Route path=\"/genemapper\" render={() => <NonLoginGeneMapper />} />\r\n          <Route path=\"/legalnotice\" render={() => <LegalNotice />} />\r\n          <Route path=\"/privacy\" render={() => <Privacy />} />\r\n          <Route path=\"*\" render={()=> <NotFound />}/>\r\n        </Switch>\r\n      </HashRouter>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport { CssBaseline } from '@mui/material';\r\nimport App from './App';\r\nimport { AuthProvider } from 'shared/context/authContext';\r\nimport { SubmissionProgressProvider } from 'shared/context/submissionProgressContext';\r\nimport LoginProvider from 'shared/context/loginContext';\r\nimport { UploadProgressProvider } from 'shared/context/UploadProgressContext';\r\n\r\nReactDOM.render(\r\n  <>\r\n    <CssBaseline />\r\n    <AuthProvider>\r\n      <SubmissionProgressProvider>\r\n        <UploadProgressProvider>\r\n\r\n          <LoginProvider>\r\n            <App />\r\n          </LoginProvider>\r\n        </UploadProgressProvider>\r\n      </SubmissionProgressProvider>\r\n    </AuthProvider>\r\n  </>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}